---
title: GRC Billing user story 20260106
---

## Initiative: System Foundation & Global Configuration

### Epic: Billing Configuration & Domain Setup

#### Feature: Configure Billing Account Parameters and Invoice Rules
- **Role**: Billing Administrator
- **Action**: configure billing account parameters and establish invoice generation rules across multiple billing models
- **Value**: the organization can automate billing operations, ensure accurate premium calculations, and support diverse billing arrangements for different product lines and customer segments

**Description:**

As a **Billing Administrator**,
I want to **configure billing account parameters and establish invoice generation rules across multiple billing models**,
So that **the organization can automate billing operations, ensure accurate premium calculations, and support diverse billing arrangements for different product lines and customer segments**


**Key Capabilities:**

**1. Billing Account Establishment**
User is able to create billing accounts by selecting appropriate billing type, defining segmentation strategy (single bill, per class, per location, per payroll frequency), and configuring contact information and invoicing delivery preferences.

**2. Invoice Rule Configuration**
User is able to establish invoice generation parameters including billing frequency, premium calculation methods, modal premium factors, invoice tolerance thresholds, and automated job scheduling for batch operations.

**3. Payment Processing Parameters**
User is able to configure payment allocation priority rules, small balance write-off thresholds, refund approval workflows, and recurring payment arrangement templates.

**4. Balance Management Settings**
User is able to define balance calculation rules, paid-to-date tracking mechanisms, multicurrency support parameters, and reconciliation tolerance levels for invoice adjustments.


**Acceptance Criteria:**

**1. Billing Model Selection**
Given the administrator selects a billing type during account setup, When the configuration is saved, Then the system activates model-specific capabilities and restricts incompatible features.

**2. Invoice Generation Validation**
Given invoice rules are configured with specific frequencies and calculation methods, When the billing cycle executes, Then the system generates invoices according to defined parameters without manual intervention.

**3. Payment Rule Enforcement**
Given payment allocation priorities are established, When payments are received, Then the system automatically applies funds according to configured rules and prevents allocation violations.

**4. Configuration Completeness**
Given mandatory billing parameters are undefined, When the administrator attempts to activate the billing account, Then the system prevents activation and identifies missing configuration elements.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=540784909"
]

---

#### Feature: Manage Rate Plans and Product Billing Configuration
- **Role**: Billing Administrator
- **Action**: configure billing parameters for third-party products and rate plans
- **Value**: the organization can accurately bill customers for diverse product offerings with flexible pricing structures

**Description:**

As a **Billing Administrator**,
I want to **configure billing parameters for third-party products and rate plans**,
So that **the organization can accurately bill customers for diverse product offerings with flexible pricing structures**


**Key Capabilities:**

**1. Billing Setup Establishment**
User is able to configure foundational billing parameters for third-party products, including rate structures and invoice generation rules.

**2. Product Catalog Management**
User is able to define and maintain product items with associated billing attributes and pricing models.

**3. Account Configuration Integration**
Upon product setup completion, system applies billing configurations to FlexiBill accounts automatically.

**4. Rate Plan Assignment**
User is able to associate rate plans with product offerings to enable flexible pricing scenarios.

**5. Invoice Configuration Update**
When billing parameters change, user is able to update invoice configurations on existing billing accounts.


**Acceptance Criteria:**

**1. Successful Configuration**
Given valid billing parameters, When administrator completes setup, Then system enables product for billing operations.

**2. Account Auto-Configuration**
Given approved third-party request, When billing account is created, Then system applies predefined billing configurations automatically.

**3. Rate Plan Validation**
Given rate plan assignment, When configuration is saved, Then system validates compatibility with product billing rules.

**4. Configuration Propagation**
Given updated invoice configuration, When changes are committed, Then system reflects updates across all associated billing accounts.

**5. Incomplete Data Prevention**
Given missing required parameters, When user attempts submission, Then system prevents configuration activation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=799345485"
]

---

#### Feature: Define Tax Rules and Domain-Specific Billing Parameters
- **Role**: Billing Administrator
- **Action**: configure foundational tax rules and domain-specific billing parameters to establish system-wide billing standards
- **Value**: the billing system operates with accurate tax calculations and jurisdiction-appropriate billing behaviors across all accounts

**Description:**

As a **Billing Administrator**,
I want to **configure foundational tax rules and domain-specific billing parameters to establish system-wide billing standards**,
So that **the billing system operates with accurate tax calculations and jurisdiction-appropriate billing behaviors across all accounts**


**Key Capabilities:**

**1. Tax Rule Configuration**
User is able to define tax calculation methodologies, tax rates, and jurisdiction mappings that govern automatic tax computation during billing cycles.

**2. Domain Parameter Establishment**
User is able to configure domain-specific billing behaviors including payment allocation hierarchies, bill type definitions, and account-level rule assignments.

**3. Validation and Activation**
Upon completing configuration, system validates rule consistency and dependency relationships, then activates parameters for operational billing processes.


**Acceptance Criteria:**

**1. Tax Rule Activation**
Given tax rules are configured with valid jurisdictions and rates, When administrator activates the configuration, Then system applies tax calculations to all subsequent billing transactions.

**2. Domain Parameter Enforcement**
Given domain-specific parameters are established, When billing accounts are created or invoices generated, Then system enforces configured rules without manual intervention.

**3. Configuration Integrity**
Given conflicting or incomplete parameters exist, When administrator attempts activation, Then system prevents deployment and identifies specific configuration gaps.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=549099367"
]

---

#### Feature: Establish Billing Cycles and Payment Frequency Standards
- **Role**: Billing Administrator
- **Action**: configure foundational billing cycles, payment frequencies, and operational calendars across billing models
- **Value**: the organization can support diverse billing patterns, automate invoice generation schedules, and align payment processing with client payroll cycles

**Description:**

As a **Billing Administrator**,
I want to **configure foundational billing cycles, payment frequencies, and operational calendars across billing models**,
So that **the organization can support diverse billing patterns, automate invoice generation schedules, and align payment processing with client payroll cycles**.


**Key Capabilities:**

**1. Billing Model and Frequency Framework Definition**
System enables selection and configuration of supported billing models (Self Administered, True Group, Individual Premium Accounting, Individual Direct, Life Products) with corresponding payment frequency standards (weekly, bi-weekly, monthly, seasonal patterns). Multi-currency support accommodates global billing requirements.

**2. Invoicing Calendar and Billing Period Configuration**
User establishes reusable invoicing calendars aligned to organizational payroll cycles. System supports multiple calendars operating concurrently for different account segments, automatically calculating billing period boundaries and payment due dates.

**3. Automated Billing Cycle Orchestration**
Upon billing period activation, system triggers payment request generation, draft bill creation, and scheduled invoice production according to configured calendar. Batch processing engine executes recurring billing jobs at defined intervals.

**4. Segmentation and Split Bill Structure Setup**
When complex organizational structures require tailored billing, user configures segmentation rules by class, location, division, or payroll frequency combinations. System applies segmentation logic during invoice generation and payment allocation processes.


**Acceptance Criteria:**

**1. Multiple Billing Frequencies Operational**
Given various client payroll patterns exist, When billing calendars are configured for weekly, bi-weekly, and monthly frequencies, Then system generates invoices on correct schedule without manual intervention for each frequency type.

**2. Billing Model Differentiation Enforced**
Given accounts require different billing approaches, When Self Administered versus True Group models are configured, Then system applies appropriate billing logic, approval workflows, and invoice generation rules specific to each model.

**3. Segmented Billing Execution Accuracy**
Given account requires split billing by multiple attributes, When segmentation rules combine class and location criteria, Then system produces separate invoices for each segment with accurate premium allocation and distinct payment tracking.

**4. Batch Processing Reliability**
Given scheduled billing operations run overnight, When batch jobs execute invoice generation and payment processing, Then system completes cycles within service windows, logs all activities, and alerts administrators of any processing failures requiring intervention.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=540784909"
]

---

### Epic: Billing Calendar & Frequency Management

#### Feature: Define Billing Calendars with Working Days and Holidays
- **Role**: Billing Administrator
- **Action**: define and configure organizational billing calendars with working days, holidays, and scheduling rules
- **Value**: billing operations align with business schedules, ensuring timely and accurate invoice generation while respecting organizational and regional holiday calendars

**Description:**

As a **Billing Administrator**,
I want to **define and configure organizational billing calendars with working days, holidays, and scheduling rules**,
So that **billing operations align with business schedules, ensuring timely and accurate invoice generation while respecting organizational and regional holiday calendars**.


**Key Capabilities:**

**1. Calendar Initialization**
User is able to initiate a new billing calendar configuration within the system to establish foundational scheduling parameters.

**2. Schedule Definition**
User provides calendar identification, designates standard weekend days, specifies non-working holiday dates, defines exceptional working weekend dates, and configures billing execution timing.

**3. Business Rule Validation**
Upon submission, system validates calendar uniqueness, naming conventions, date validity, and logical consistency between weekends, holidays, and working exceptions to prevent configuration conflicts.

**4. Calendar Persistence**
When validation succeeds, system persists the billing calendar configuration and returns confirmation for operational use in billing cycle scheduling.


**Acceptance Criteria:**

**1. Successful Calendar Creation**
Given valid calendar configuration data, When the administrator submits the billing calendar, Then system persists the calendar and confirms availability for billing operations.

**2. Duplicate Name Prevention**
Given an existing calendar name, When administrator attempts to create calendar with identical name, Then system rejects submission and notifies of uniqueness requirement.

**3. Date Consistency Enforcement**
Given conflicting date configurations, When system detects overlap between weekends and non-working days or invalid working weekend assignments, Then system prevents persistence and identifies specific conflicts.

**4. Mandatory Data Validation**
Given incomplete calendar information, When administrator submits without required attributes, Then system prevents submission and indicates missing mandatory elements.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=240517976"
]

---

#### Feature: Configure Invoice Generation Schedules and Frequencies
- **Role**: Billing Administrator
- **Action**: configure invoice generation schedules and billing frequencies
- **Value**: the system automatically generates invoices at the correct timing aligned with business billing cycles and customer payment terms

**Description:**

As a **Billing Administrator**,
I want to **configure invoice generation schedules and billing frequencies**,
So that **the system automatically generates invoices at the correct timing aligned with business billing cycles and customer payment terms**


**Key Capabilities:**

**1. Invoice Schedule Parameter Definition**
User is able to define invoice due date offset parameters measured in months, specifying whether invoices are due in advance or arrears relative to billing periods.

**2. Generation Timing Configuration**
User is able to configure invoice generation day and date offset to control when the system creates invoices relative to the billing period start or end.

**3. Flexible Generation Window Setup**
User is able to optionally specify generation rules as a range of days with configurable offset period types (weeks or months) to accommodate variable billing cycles.

**4. Billing Frequency Assignment**
User is able to associate billing frequency settings with accounts to determine recurring invoice generation patterns aligned with contractual payment terms.


**Acceptance Criteria:**

**1. Schedule Configuration Persistence**
Given valid scheduling parameters are defined, When the administrator saves the configuration, Then the system persists all offset values, generation rules, and frequency settings for subsequent automated processing.

**2. Advance Billing Calculation**
Given an account configured for advance billing with a specified month offset, When the billing period approaches, Then the system generates invoices ahead of the period start by the configured offset.

**3. Arrears Billing Calculation**
Given an account configured for arrears billing, When the billing period concludes, Then the system generates invoices after the period end according to the defined offset parameters.

**4. Range-Based Generation Flexibility**
Given a generation rule configured as a range of days, When the generation window opens, Then the system creates invoices within the specified date range using the configured offset period type.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=509875116"
]

---

#### Feature: Manage Payroll Frequencies for Billing Cycles
- **Role**: Billing Administrator
- **Action**: configure and manage payroll frequencies aligned with billing cycles
- **Value**: billing operations accurately reflect diverse employer payroll schedules and ensure timely premium collection

**Description:**

As a **Billing Administrator**,
I want to **configure and manage payroll frequencies aligned with billing cycles**,
So that **billing operations accurately reflect diverse employer payroll schedules and ensure timely premium collection**


**Key Capabilities:**

**1. Payroll Frequency Configuration**
User is able to define and configure multiple payroll frequency options (weekly, bi-weekly, monthly) within the billing calendar framework

**2. Billing Structure Alignment**
Upon configuration, system aligns billing account structures with designated payroll frequencies to support billing per frequency segmentation

**3. Invoice Period Synchronization**
When frequency is assigned, system automatically calculates billing periods and invoice generation dates based on modality and invoicing calendar rules

**4. Multi-Frequency Account Management**
User is able to manage accounts with mixed payroll frequencies through billing segmentation and split bill capabilities

**5. Frequency Change Processing**
If payroll frequency changes occur, system recalculates billing periods and adjusts premium allocation accordingly

**6. Calendar Integration**
System integrates frequency settings with billing jobs automation and period management for consistent invoice timing


**Acceptance Criteria:**

**1. Frequency Configuration Success**
Given valid payroll frequency parameters, When administrator configures frequency settings, Then system establishes frequency rules and applies them to billing calendar

**2. Multi-Frequency Support**
Given multiple employer groups with different payroll schedules, When accounts are configured, Then system maintains separate billing cycles per frequency without cross-contamination

**3. Period Calculation Accuracy**
Given assigned payroll frequency, When billing period is triggered, Then system generates invoice dates aligned with frequency schedule and handles month-end variations correctly

**4. Frequency Change Handling**
Given existing billing account with frequency A, When frequency changes to B, Then system recalculates billing periods and adjusts outstanding premiums without data loss

**5. Segmentation Integrity**
Given split bill configuration by frequency, When invoices generate, Then system produces separate bills per frequency segment with accurate premium allocation


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=540784909"
]

---

#### Feature: Set Invoice Due Date Offsets and Timing Rules
- **Role**: Billing Administrator
- **Action**: configure invoice due date offsets and timing rules to automate invoice scheduling
- **Value**: invoices are generated and due on appropriate dates aligned with organizational billing cycles and payment expectations

**Description:**

As a **Billing Administrator**,
I want to **configure invoice due date offsets and timing rules to automate invoice scheduling**,
So that **invoices are generated and due on appropriate dates aligned with organizational billing cycles and payment expectations**


**Key Capabilities:**

**Timing Configuration**
User is able to define billing timing as in-advance or in-arrears to align with organizational payment models.

**Due Date Offset Management**
User is able to set invoice due date offsets measured in months from generation to establish payment deadlines.

**Generation Date Rules**
User is able to specify invoice generation day with configurable offset periods and tolerance ranges.

**Automation Parameters**
When configuration is complete, system automatically applies timing rules and date calculations for all subsequent invoice generation cycles.


**Acceptance Criteria:**

**Offset Configuration Validation**
Given valid timing parameters, when administrator saves due date offset settings, then system applies offset rules to future invoice schedules.

**Generation Rule Application**
Given configured generation dates and offset periods, when billing cycle initiates, then system generates invoices on calculated dates within defined tolerance.

**Timing Model Enforcement**
Given advance or arrears billing selection, when invoices generate, then system calculates due dates according to selected timing model.

**Incomplete Configuration Prevention**
Given missing required timing parameters, when administrator attempts to save, then system prevents submission until all mandatory rules are defined.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=509875116"
]

---

#### Feature: Apply Default Business Calendar to Billing Accounts
- **Role**: Billing Administrator
- **Action**: configure and apply standardized business calendars to billing accounts during account creation and maintenance
- **Value**: billing cycles align with organizational scheduling policies, ensuring consistent invoice generation and payment processing across all accounts

**Description:**

As a **Billing Administrator**,
I want to **configure and apply standardized business calendars to billing accounts during account creation and maintenance**,
So that **billing cycles align with organizational scheduling policies, ensuring consistent invoice generation and payment processing across all accounts**


**Key Capabilities:**

**1. Calendar Configuration Establishment**
System administrator defines enterprise-wide business calendar templates with working days, holidays, and billing period boundaries.

**2. Default Calendar Assignment Rule**
Upon billing account creation, system automatically applies pre-configured default business calendar to new account records.

**3. Calendar Linkage Validation**
System verifies calendar assignment integrity and establishes dependencies between billing account and invoicing schedules.

**4. Relationship Traceability Management**
System maintains metadata linkages between calendar rules, account configurations, and downstream invoicing parameters for audit and impact analysis purposes.


**Acceptance Criteria:**

**1. Automatic Calendar Application**
Given a new billing account is created, When the provisioning process completes, Then the system assigns the default business calendar without manual intervention.

**2. Calendar Integrity Validation**
Given calendar assignment occurs, When system validates configuration, Then all temporal dependencies resolve correctly and billing cycle dates align with calendar rules.

**3. Traceability Requirement Satisfaction**
Given calendar is applied, When administrator reviews account metadata, Then system displays complete linkage between calendar rules, business requirements, and account configuration for audit purposes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=508667630"
]

---
## Initiative: Account Management & Billing Setup

### Epic: Billing Address & Invoice Configuration

#### Feature: Configure Split Billing by Location/Division
- **Role**: Billing Administrator
- **Action**: configure separate billing accounts for each organizational location or division
- **Value**: I can manage invoicing independently per business unit and ensure accurate cost allocation

**Description:**

As a **Billing Administrator**,
I want to **configure separate billing accounts for each organizational location or division**,
So that **I can manage invoicing independently per business unit and ensure accurate cost allocation**


**Key Capabilities:**

**Access Location/Division Billing Management**
User initiates billing account management for qualified group sponsor customer with established organizational structure

**Review Organizational Structure**
System presents all locations/divisions with ability to expand hierarchies and view existing billing configurations

**Detect Billing Account Status**
Upon expanding organizational unit, system evaluates existing billing account setup and presents appropriate workflow

**Configure Billing Accounts**
User creates new billing accounts or updates existing configurations including invoice schedules and payor arrangements for selected organizational units

**Persist Configuration**
System saves billing account assignments and returns user to customer billing overview with updated organizational billing structure


**Acceptance Criteria:**

**Organizational Prerequisite Validation**
Given a customer without location/division setup, When user attempts access, Then system prevents billing account configuration

**Multi-Account Support**
Given an organizational unit, When user configures billing, Then system allows multiple billing accounts per location/division

**Automatic Form Presentation**
Given a location/division without billing accounts, When user expands section, Then system immediately displays account creation workflow

**Existing Account Display**
Given a location/division with configured accounts, When user expands section, Then system lists all accounts with creation option

**Configuration Persistence**
Given completed billing setup, When user navigates away, Then system retains all account configurations and displays updated structure upon return


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=466109264"
]

---

#### Feature: Configure Split Billing by Class
- **Role**: Billing Administrator
- **Action**: configure class-based split billing for master policy products
- **Value**: organizations with multiple classes can receive separate invoices per class, improving billing transparency and payment allocation

**Description:**

As a **Billing Administrator**,
I want to **configure class-based split billing for master policy products**,
So that **organizations with multiple classes can receive separate invoices per class, improving billing transparency and payment allocation**


**Key Capabilities:**

**1. Master Policy Product Structure Definition**
Establish master policy associated with organization customer containing census class entities with product-level billing attributes

**2. Billing Account Configuration**
Configure billing account details including modality settings, account association rules, and payroll deduction parameters for class-based billing

**3. Class-Level Billing Setup**
Enable bill-per-class option during billing setup to support list billing functionality
    3.1 Associate multiple classes within billing account structure
    3.2 Define class-specific billing attributes and payment arrangements

**4. List Bill Product Creation**
Create billing products specifically designed for master policies requiring class-based invoice separation


**Acceptance Criteria:**

**1. Product Configuration Validation**
Given master policy with multiple census classes, When administrator configures billing account details, Then system allows association of class list to enable list billing

**2. Bill-Per-Class Option Availability**
Given billing setup for master policy, When administrator selects billing configuration, Then system presents bill-per-class option for list billing enablement

**3. Class-Specific Billing Account Creation**
Given bill-per-class option enabled, When administrator defines billing accounts, Then system creates separate billing arrangements per configured class

**4. List Bill Product Generation**
Given class-based billing configuration completed, When billing product is created, Then system generates list bill product structure supporting class-level invoicing


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=521340279"
]

---

#### Feature: Manage Billing Addresses for Invoicing
- **Role**: Billing Administrator
- **Action**: manage billing addresses and associate them with bill setups during policy issuance
- **Value**: customers receive accurate invoices at the correct addresses and billing configurations support diverse payment scenarios

**Description:**

As a **Billing Administrator**,
I want to **manage billing addresses and associate them with bill setups during policy issuance**,
So that **customers receive accurate invoices at the correct addresses and billing configurations support diverse payment scenarios**


**Key Capabilities:**

**1. Bill Setup Initiation**
User is able to access bill setup options during policy issuance workflow, choosing between creating new billing configuration or selecting from existing setups associated with the group sponsor.

**2. Billing Address Configuration**
User is able to create or modify billing addresses at customer level, with changes persisted across all customer billing configurations without overwriting existing addresses.

**3. Bill Setup Association**
User is able to validate and save bill setup configurations, with system distinguishing between unused and actively associated setups to prevent billing conflicts.

**4. Invoice Configuration Finalization**
Upon completing modality selection and draft generation, user is able to issue policy with system automatically creating invoicing account linked to selected bill setup.


**Acceptance Criteria:**

**1. New Bill Setup Creation**
Given policy issuance initiated, When user creates new bill setup with modified billing address, Then system persists address at customer level and associates setup with policy products.

**2. Existing Setup Reuse**
Given unused bill setup exists, When user selects it for policy, Then system displays configuration in non-editable mode and enables issuance workflow.

**3. Address Management**
Given customer has multiple billing addresses, When user adds new address, Then system retains all existing addresses and makes new address available for bill setup selection.

**4. Validation Enforcement**
Given incomplete bill setup, When user attempts to save, Then system prevents progression until all required billing information is provided.

**5. Invoicing Account Creation**
Given validated bill setup and invoice draft approved, When user issues policy, Then system creates invoicing account and associates it with selected bill setup configuration.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=441724370"
]

---

#### Feature: Configure Invoice Delivery Preferences per Billing Account
- **Role**: Billing Administrator
- **Action**: configure invoice delivery preferences for billing accounts across organizational hierarchies
- **Value**: I can ensure timely and accurate invoice distribution to appropriate stakeholders according to business structure and communication requirements

**Description:**

As a **Billing Administrator**,
I want to **configure invoice delivery preferences for billing accounts across organizational hierarchies**,
So that **I can ensure timely and accurate invoice distribution to appropriate stakeholders according to business structure and communication requirements**


**Key Capabilities:**

**1. Access Billing Account Configuration**
User navigates to billing account management from customer profile or billing home. System displays organizational hierarchy (locations or divisions) with associated billing accounts.

**2. Review Account Structure**
User expands organizational sections to view billing account cards showing account status, frequency, invoice schedules, and balance information across different billing types.

**3. Configure Delivery Preferences**
User selects billing account and configures invoice delivery settings including payor contact information, invoice schedule parameters, and subtotals configuration.

**4. Associate Products and Validate**
User reviews product associations and validates configuration completeness. System performs real-time balance calculations and validates delivery settings against account parameters.

**5. Submit Configuration**
User submits invoice delivery preferences. System validates privilege requirements and applies configuration to billing account for future invoice generation.


**Acceptance Criteria:**

**1. Successful Configuration Access**
Given the user has appropriate viewing privileges, When they access billing account management, Then the system displays the complete organizational hierarchy with all associated billing accounts.

**2. Privilege-Based Action Control**
Given the user lacks creation or update privileges, When they attempt configuration actions, Then the system prevents unauthorized modifications and disables restricted functions.

**3. Configuration Validation**
Given the user submits invoice delivery preferences, When required information is incomplete, Then the system prevents submission and requires complete data before applying changes.

**4. Multi-Account Management**
Given multiple billing accounts exist across locations or divisions, When the user configures preferences, Then each account maintains independent settings while reflecting organizational hierarchy.

**5. Real-Time Data Integrity**
Given configuration changes are submitted, When the system processes the request, Then balance calculations update dynamically and invoice schedules reflect new preferences for future billing cycles.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=466107894"
]

---

#### Feature: Enable or Disable Invoicing by Location/Division
- **Role**: Billing Administrator
- **Action**: configure invoicing eligibility across organizational units to control which locations or divisions can generate invoices
- **Value**: the organization maintains precise billing governance and prevents unauthorized invoice generation from inactive business units

**Description:**

As a **Billing Administrator**,
I want to **configure invoicing eligibility across organizational units to control which locations or divisions can generate invoices**,
So that **the organization maintains precise billing governance and prevents unauthorized invoice generation from inactive business units**


**Key Capabilities:**

**1. Master Invoicing Control Initialization**
Upon system access, user is able to view master toggle for all organizational units (default enabled), with product-specific application rules for Self-Bill (all units) and List Bill (all except Group Sponsor).

**2. Global Invoicing Deactivation**
When master toggle is disabled, system collapses all units, removes validation requirements, disables expansion controls, and deactivates individual unit toggles.

**3. Selective Unit Activation Management**
User is able to enable or disable individual locations/divisions independently, with system automatically adjusting master toggle state when all units are manually activated.

**4. Configuration State Recovery**
If unit is re-enabled within the same session, system restores previous billing account assignments and payment modality selections without requiring re-entry.


**Acceptance Criteria:**

**1. Default State Validation**
Given system initialization, When user accesses invoice configuration, Then all locations/divisions display as invoicing-enabled with validation icons applied and Group Sponsor permanently enabled for List Bill products.

**2. Master Deactivation Impact**
Given master toggle is disabled, When system processes the change, Then all units (except Group Sponsor for List Bill) collapse, lose validation icons, and cannot be expanded for billing configuration.

**3. Partial Deactivation Behavior**
Given one or more individual units are disabled, When master toggle remains enabled, Then only affected units collapse while others remain accessible for billing setup.

**4. Session-Based Recovery**
Given a unit was disabled then re-enabled in same session, When user expands the unit, Then previously configured billing account and payment settings are restored without data loss.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=534812491"
]

---

#### Feature: Create and Associate Multiple Billing Accounts per Location/Division
- **Role**: Billing Administrator
- **Action**: create and manage multiple billing accounts for organizational locations or divisions
- **Value**: each business unit can maintain independent billing configurations and invoice schedules aligned with their operational structure

**Description:**

As a **Billing Administrator**,
I want to **create and manage multiple billing accounts for organizational locations or divisions**,
So that **each business unit can maintain independent billing configurations and invoice schedules aligned with their operational structure**


**Key Capabilities:**

**1. Access Location/Division Billing Management**
User initiates billing account management workflow for organizational units and views all configured locations or divisions with expand/collapse capabilities

**2. Evaluate Billing Configuration State**
System determines whether organizational unit requires initial setup or modification of existing accounts and presents appropriate interface

**3. Create Initial Billing Account**
When no accounts exist for the unit, user establishes first billing account with associated configuration

**4. Manage Existing Billing Accounts**
When accounts are present, user views account list and creates additional accounts or modifies existing account details, invoice schedules, and payor information

**5. Navigate to Business Context**
Upon completion, user returns to customer billing overview or navigates to related customer management areas


**Acceptance Criteria:**

**1. Location/Division Access Control**
Given user manages group sponsor billing, when accessing location/division management, then system displays only organizational units configured for that customer

**2. Conditional Interface Presentation**
Given organizational unit evaluation, when unit has no billing accounts, then system presents account creation form; when accounts exist, then system displays account list with creation option

**3. Multiple Account Support**
Given location or division with existing account, when user creates additional billing account, then system permits multiple concurrent accounts per organizational unit

**4. Configuration Persistence**
Given billing account creation or modification, when user completes transaction, then system persists all account configurations and reflects changes immediately

**5. Navigation Continuity**
Given completed billing operations, when user selects navigation option, then system redirects to selected destination while maintaining customer context


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=466109264"
]

---

#### Feature: Configure Single Billing Account for Group Sponsor
- **Role**: Billing Administrator
- **Action**: establish a unified billing account for group sponsor master policies
- **Value**: all member records are consolidated into a single invoice, streamlining sponsor payment reconciliation and administrative overhead

**Description:**

As a **Billing Administrator**,
I want to **establish a unified billing account for group sponsor master policies**,
So that **all member records are consolidated into a single invoice, streamlining sponsor payment reconciliation and administrative overhead**


**Key Capabilities:**

**Billing Option Selection & Configuration**
User is able to select Single Bill option during product purchase and configure payment allocation mode (Group or Individual Accounting) compatible with both List Bill and Self Bill product types.

**Billing Account Establishment**
Upon selection, user is able to create or associate a billing account for the master policy holder, configuring modality, payroll deduction, reporting periods, and execution calendars.

**Policy Issuance & Member Association**
When configuration is validated and sponsor approves, system issues master policy and creates member records linked to the single billing account.

**Invoice Aggregation & Generation**
System aggregates all member record amounts into one consolidated invoice, with optional subtotals when bill-by preferences are specified.


**Acceptance Criteria:**

**Valid Single Bill Configuration**
Given a group product selection, when billing administrator selects Single Bill with compatible payment allocation mode, then system permits billing account creation and parameter configuration.

**Incomplete Configuration Prevention**
Given mandatory billing parameters are missing, when user attempts to confirm setup, then system prevents progression until all required data is complete.

**Master Policy Issuance**
Given validated billing setup and sponsor approval, when administrator confirms configuration, then system issues master policy and associates all member records to the single billing account.

**Consolidated Invoice Generation**
Given active member records under master policy, when billing cycle executes, then system produces one aggregated invoice reflecting all member amounts with optional subtotals.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=573310674"
]

---

#### Feature: Validate Billing Setup Completeness
- **Role**: Billing Administrator
- **Action**: validate billing account setup completeness across multiple customer locations or divisions during purchase configuration
- **Value**: the system ensures all required billing information is properly configured before invoice generation, reducing billing errors and downstream reconciliation efforts

**Description:**

As a **Billing Administrator**,
I want to **validate billing account setup completeness across multiple customer locations or divisions during purchase configuration**,
So that **the system ensures all required billing information is properly configured before invoice generation, reducing billing errors and downstream reconciliation efforts**.


**Key Capabilities:**

**1. Invoicing Enablement Activation**
When invoicing is enabled for location-based or division-based billing structures, the system activates validation capabilities to monitor billing account assignment completeness.

**2. Real-Time Billing Account Validation**
User is able to receive immediate visual feedback on billing setup status as they associate billing accounts with customer locations or divisions, with validation triggered upon data changes or panel interactions.

**3. Completeness Verification**
Upon successful assignment of billing accounts and completion of all required billing fields, the system confirms setup validity for each customer entity.

**4. Incomplete Configuration Detection**
If required billing account selections are missing or previously completed data is removed, the system identifies incomplete configurations requiring user attention before proceeding.


**Acceptance Criteria:**

**1. Validation Activation**
Given invoicing is enabled for location or division billing, when the user accesses customer billing setup, then the system activates validation monitoring for all customer entities.

**2. Complete Setup Confirmation**
Given a customer location requires billing account assignment, when the user selects an existing or newly created billing account and completes all required fields, then the system confirms the setup as valid and complete.

**3. Incomplete Setup Detection**
Given a customer location lacks required billing account assignment, when the user attempts to collapse panels, confirm setup, or proceed without completing requirements, then the system indicates incomplete configuration status.

**4. Data Removal Detection**
Given a previously completed customer billing setup, when the user removes a required billing account assignment or field value, then the system immediately flags the configuration as incomplete requiring correction.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=459481881"
]

---

#### Feature: Configure Invoice Subtotals by Segmentation Criteria
- **Role**: Billing Administrator
- **Action**: configure invoice subtotals based on member classification segmentation criteria
- **Value**: invoices reflect organizational structure and support accurate cost allocation across member segments

**Description:**

As a **Billing Administrator**,
I want to **configure invoice subtotals based on member classification segmentation criteria**,
So that **invoices reflect organizational structure and support accurate cost allocation across member segments**


**Key Capabilities:**

**1. Classification Rule Evaluation**
System evaluates Master Policy configuration to determine billing presentation structure through sequential conditions (Bill per class, Bill by class, or consolidated).

**2. Segmented Billing Account Creation**
Upon positive Bill per class condition, system creates separate billing accounts per classification and generates individual invoices for each segment.

**3. Subtotaled Invoice Generation**
When Bill by class condition is met, system produces single invoice with class-level subtotals showing segmented breakdowns within consolidated account.

**4. Consolidated Billing Default**
If no segmentation conditions apply, system generates single billing account with unified invoice combining all classifications without separation.


**Acceptance Criteria:**

**1. Separate Account Generation**
Given Bill per class is enabled, When billing process executes, Then system creates distinct billing accounts and individual invoices per classification.

**2. Subtotal Organization**
Given Bill by class is enabled, When invoice generates, Then system produces single invoice with classification-based subtotals reflecting member segment groupings.

**3. Consolidated Default**
Given no segmentation flags are enabled, When billing executes, Then system creates single account with unified invoice without class separations.

**4. Member Data Integration**
Given member records contain classification identifiers, When billing logic applies, Then system correctly associates members to configured segmentation structure.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=511123321"
]

---

#### Feature: Expand or Collapse All Locations/Divisions in Billing Setup
- **Role**: Billing Administrator
- **Action**: efficiently navigate and manage visibility of organizational billing hierarchies
- **Value**: I can quickly access and configure billing information across multiple locations without repetitive manual actions

**Description:**

As a **Billing Administrator**,
I want to **efficiently navigate and manage visibility of organizational billing hierarchies**,
So that **I can quickly access and configure billing information across multiple locations without repetitive manual actions**


**Key Capabilities:**

**1. Bulk Visibility Control**
User toggles single control to simultaneously expand or collapse all billable organizational entities including group sponsor and active locations/divisions for comprehensive overview or focused navigation.

**2. Intelligent State Synchronization**
When user manually adjusts individual section visibility, system automatically synchronizes bulk control state upon detecting uniform expansion or collapse across all billable entities.

**3. Selective Entity Inclusion**
System restricts bulk operations to active billable entities only, automatically excluding locations with disabled invoicing from visibility control scope and state calculations.


**Acceptance Criteria:**

**1. Bulk Expansion**
Given billable entities exist, When user activates expand control, Then system displays all active billable organizational sections simultaneously.

**2. Bulk Collapse**
Given expanded billable sections, When user activates collapse control, Then system hides all active billable sections while preserving group sponsor default state.

**3. Auto-Synchronization**
Given mixed section states, When user manually expands or collapses all billable sections to uniform state, Then system automatically updates bulk control to reflect current state.

**4. Non-Billable Exclusion**
Given entities with disabled invoicing, When user operates bulk control, Then system excludes non-billable entities from visibility operations and state detection.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=459481488"
]

---

#### Feature: Configure Billing Setup per Payroll Frequency
- **Role**: Billing Administrator
- **Action**: configure billing accounts and invoice preferences based on payroll frequency schedules
- **Value**: billing cycles align with organizational payroll processing periods and ensure accurate premium collection timing

**Description:**

As a **Billing Administrator**,
I want to **configure billing accounts and invoice preferences based on payroll frequency schedules**,
So that **billing cycles align with organizational payroll processing periods and ensure accurate premium collection timing**


**Key Capabilities:**

**1. Payroll Frequency View Access**
User is able to access billing configuration organized by payroll frequency schedules (weekly, monthly, etc.) for List Bill products

**2. Invoicing Activation Management**
User is able to enable or disable invoicing for specific payroll frequencies using master toggle controls or individual frequency toggles

**3. Billing Account Association**
User is able to associate existing billing accounts or create new accounts for each enabled payroll frequency
    3.1 Upon missing billing account, user initiates account creation workflow with payment method and invoice schedule details

**4. Configuration Validation**
System validates billing setup completeness and displays status indicators for each payroll frequency

**5. Setup Finalization**
User is able to save validated billing configuration to activate frequency-based billing processing


**Acceptance Criteria:**

**1. Payroll Frequency Organization**
Given billing administrator accesses Per Payroll Frequency view, When system loads configuration interface, Then available payroll frequencies from organizational structure are displayed with invoicing controls

**2. Billing Account Requirement**
Given user enables invoicing for a payroll frequency, When no billing account is associated, Then system prevents configuration completion and prompts for account assignment or creation

**3. Configuration Validation Success**
Given user completes billing account association and invoice parameters for enabled frequency, When system validates setup, Then validation indicator confirms configuration readiness

**4. Master Toggle Behavior**
Given multiple payroll frequencies exist, When user applies master toggle, Then all frequencies inherit the invoicing enabled/disabled state simultaneously

**5. Configuration Persistence**
Given user saves validated billing setup, When processing subsequent billing cycles, Then system applies frequency-specific billing accounts and schedules to premium invoicing


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=533634314"
]

---

#### Feature: Manage Billing Account Assignment to Business Units
- **Role**: Billing Administrator
- **Action**: configure and assign billing accounts to business units within split bill master policy structures
- **Value**: products are billed accurately across multiple organizational entities with proper payment allocation and ownership tracking

**Description:**

As a **Billing Administrator**,
I want to **configure and assign billing accounts to business units within split bill master policy structures**,
So that **products are billed accurately across multiple organizational entities with proper payment allocation and ownership tracking**


**Key Capabilities:**

**1. Master Policy Structure Initialization**
User is able to establish master policy hierarchy linking policy number to organization customers (group sponsors or business units) with legal identification

**2. Billing Account Provisioning**
User is able to create and associate billing accounts to business units and group sponsors with unique account numbers and ownership attribution

**3. Product Billing Configuration**
User is able to define product-level billing parameters including payment allocation mode, modality, and payroll deduction settings per billing account

**4. Split Bill Account Assignment**
When split bill arrangements are required, user is able to assign multiple billing accounts to a single product, ensuring each billable business unit maintains independent billing account with specific payment configurations


**Acceptance Criteria:**

**1. Billing Account Creation**
Given a business unit exists under a group sponsor, when the administrator provisions a billing account, then the system generates a unique billing account number and associates it with the organizational entity

**2. Product-Account Association**
Given a master policy product is configured, when the administrator assigns billing accounts, then the system validates organizational hierarchy and establishes billing account linkages with payment allocation mode

**3. Split Bill Configuration**
Given multiple business units require separate billing, when split bill arrangement is activated, then the system maintains simultaneous billing accounts per business unit with independent payment configurations

**4. Hierarchy Integrity**
Given billing accounts are assigned, when modifications occur, then the system prevents orphaned billing accounts and maintains referential integrity across master policy structures


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=526288246"
]

---

### Epic: General Domain Capabilities

#### Feature: Process Employment Data Changes for Member Billing Assignment
- **Role**: Billing Administrator
- **Action**: process employment change transactions to reassign member billing accounts based on organizational hierarchy and billing setup status
- **Value**: members are accurately placed in appropriate billing accounts reflecting their current employment location while maintaining data integrity throughout organizational changes

**Description:**

As a **Billing Administrator**,
I want to **process employment change transactions to reassign member billing accounts based on organizational hierarchy and billing setup status**,
So that **members are accurately placed in appropriate billing accounts reflecting their current employment location while maintaining data integrity throughout organizational changes**


**Key Capabilities:**

**1. Employment Change Event Processing**
Upon receiving CustomerUpdateEvent, system validates destination customer existence in hierarchy and evaluates billing setup completion status while retaining location/division information on member record.

**2. Member Assignment Based on Validation Outcome**
When destination customer exists with complete billing setup and valid location/division data, member records move to designated location account; otherwise system assigns to root customer billing account.

**3. Location Correction and Billing Setup Updates**
User is able to correct improper location assignments through CEM updates with different effective dates or trigger member moves via amendments when billing setup enables invoicing for previously disabled locations.


**Acceptance Criteria:**

**1. Successful Assignment to Valid Location**
Given destination customer exists in hierarchy with complete billing setup, When employment change event contains valid location/division information, Then member record moves to designated location billing account retaining original location data.

**2. Fallback to Root Customer Account**
Given destination customer missing, outside hierarchy, or lacking billing setup, When processing employment change, Then system assigns member to root customer billing account while preserving location/division information from event.

**3. Manual Move Trigger After Billing Setup Update**
Given billing setup updated to enable invoicing for previously disabled location, When user issues amendment or CEM update with different effective date, Then member record moves to enabled location account.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=713700485"
]

---

#### Feature: Manage Payroll Deduction Start Date Adjustments for Master Policy Rewrites
- **Role**: Billing Administrator
- **Action**: automatically adjust payroll deduction start dates when master policy effective dates change during rewrite operations
- **Value**: deduction schedules remain synchronized with updated policy timelines without manual recalculation, ensuring billing accuracy and operational efficiency

**Description:**

As a **Billing Administrator**,
I want to **automatically adjust payroll deduction start dates when master policy effective dates change during rewrite operations**,
So that **deduction schedules remain synchronized with updated policy timelines without manual recalculation, ensuring billing accuracy and operational efficiency**.


**Key Capabilities:**

**1. Master Policy Rewrite Initiation**
When master policy effective date undergoes modification during rewrite, system captures temporal difference between original and new effective dates.

**2. Temporal Difference Calculation**
System determines adjustment magnitude using month-based calculation when day-of-month matches, otherwise applies day-based calculation for precision.

**3. Forward Adjustment Processing**
Upon detecting new effective date later than original, system adds calculated time difference to initial deduction start date, preserving frequency configuration.

**4. Backward Adjustment Processing**
Upon detecting new effective date earlier than original, system subtracts calculated time difference from initial deduction start date, validating against deduction day logic.

**5. Deduction Schedule Recalculation**
System regenerates complete deduction date sequence based on adjusted start date, applying configured frequency and deduction day parameters.

**6. Billing Configuration Update**
Adjusted deduction start date and recalculated schedule populate payroll calendar configuration for ongoing billing operations.


**Acceptance Criteria:**

**1. Forward Date Adjustment Validation**
Given master policy effective date moves forward, When system calculates temporal difference, Then deduction start date increases by equivalent months or days maintaining frequency integrity.

**2. Backward Date Adjustment Validation**
Given master policy effective date moves backward, When system calculates temporal difference, Then deduction start date decreases by equivalent months or days without creating invalid historical dates.

**3. Month-Based Calculation Trigger**
Given original and new effective dates share identical day-of-month, When system calculates adjustment, Then system applies month-based differential logic.

**4. Day-Based Calculation Trigger**
Given original and new effective dates have differing day-of-month values, When system calculates adjustment, Then system applies day-based differential logic.

**5. Deduction Schedule Regeneration**
Given deduction start date adjustment completes, When system recalculates deduction dates, Then complete schedule reflects new start date with preserved frequency and deduction day configuration.

**6. Cross-Frequency Compatibility**
Given various payroll frequencies exist (monthly, weekly), When adjustment executes, Then system correctly handles temporal shifts across all frequency types.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=671291397"
]

---

#### Feature: Handle Failed Member Record Transactions with Billing Setup Validation
- **Role**: Billing Administrator
- **Action**: resolve failed member transactions caused by incomplete employment or billing configuration
- **Value**: I can ensure successful member record processing and maintain billing continuity across all transaction types

**Description:**

As a **Billing Administrator**,
I want to **resolve failed member transactions caused by incomplete employment or billing configuration**,
So that **I can ensure successful member record processing and maintain billing continuity across all transaction types**


**Key Capabilities:**

**Transaction Validation & Failure Detection**
System validates member transactions against employment and billing configuration requirements; transactions lacking required employment data or billing setup for applicable split-bill scenarios are flagged and routed to Dead Letter Queue

**Failure Analysis & Root Cause Identification**
System identifies specific configuration gaps: missing employment assignment, unconfigured parent customer billing, employer billing not established, multiple employment conflicts, missing location-class combinations, or absent payroll calendars for individual arrangements

**Configuration Remediation & Resolution**
User is able to resolve failures through targeted actions: establishing billing setup for parent customers or employers, assigning appropriate employment to configured locations/divisions, removing duplicate employment records, or configuring missing payroll calendars

**Transaction Reprocessing**
Upon resolving underlying configuration issues, user reprocesses Dead Letter Queue messages to complete originally failed transactions and establish proper billing relationships


**Acceptance Criteria:**

**1. Employment-Based Validation**
Given a member transaction without employment set and parent customer billing disabled, When validation occurs, Then transaction fails with DLQ routing and provides clear resolution path for billing setup or employment assignment

**2. Employer Billing Configuration Check**
Given a member with employment assigned to location/division lacking billing setup, When transaction processes, Then system prevents completion and directs to employer billing configuration

**3. Multiple Employment Conflict Prevention**
Given a member with multiple active employment records, When transaction attempts processing across any billing split type, Then system rejects transaction until single employment remains

**4. Class-Specific Billing Validation**
Given split-bill-per-location-and-class scenario without specific combination configured, When transaction processes, Then system identifies missing class billing setup and blocks until resolved

**5. Successful Recovery Completion**
Given resolved configuration issues, When DLQ message reprocesses, Then transaction completes successfully with proper billing relationships established across applicable split-bill scenarios


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=758582734"
]

---

#### Feature: Validate Billing Account Configuration Before Member Record Purchase
- **Role**: Billing Administrator
- **Action**: validate billing account configuration completeness before member record transaction processing
- **Value**: I can prevent downstream billing failures and ensure member records are processed successfully without entering dead letter queue

**Description:**

As a **Billing Administrator**,
I want to **validate billing account configuration completeness before member record transaction processing**,
So that **I can prevent downstream billing failures and ensure member records are processed successfully without entering dead letter queue**


**Key Capabilities:**

**1. Transaction Readiness Assessment**
System identifies member record pending transaction and retrieves associated billing configuration context

**2. Active Billing Account Verification**
System confirms existence and active status of billing account designated for member invoicing

**3. Billing Method-Specific Configuration Validation**
System executes validation logic tailored to configured billing method (payroll calendar setup for Single Bill, invoicing account setup for frequency/class/location-based methods)

**4. Transaction Authorization Decision**
Upon successful validation, system authorizes transaction progression; when validation detects configuration gaps, system blocks transaction and triggers validation failure notification


**Acceptance Criteria:**

**1. Valid Configuration Path**
Given member record has complete billing method configuration, When transaction validation executes, Then system authorizes transaction to proceed

**2. Missing Configuration Detection**
Given billing method configuration is incomplete, When validation executes, Then system blocks transaction and issues validation failure alert

**3. Method-Specific Rule Application**
Given member uses Single Bill method, When validation executes, Then system verifies payroll calendar existence for selected frequency

**4. Dead Letter Queue Prevention**
Given validation failure occurs, When transaction is blocked, Then member record remains in processable state without DLQ placement


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=836862534"
]

---

#### Feature: Roll On Future Transactions After Member Record Amendments and Rewrites
- **Role**: Billing Administrator
- **Action**: automatically propagate future-dated transactions when member records are amended out of sequence
- **Value**: billing integrity is maintained across amended timelines without manual reconciliation or duplicate processing

**Description:**

As a **Billing Administrator**,
I want to **automatically propagate future-dated transactions when member records are amended out of sequence**,
So that **billing integrity is maintained across amended timelines without manual reconciliation or duplicate processing**


**Key Capabilities:**

**1. Amendment Detection and Transaction Evaluation**
Upon member record amendment processing, system identifies all future-dated transactions (premium waivers, policy events) with effective dates on or after the amendment date for roll-on eligibility.

**2. Claims Premium Waiver Automatic Roll-On**
System automatically rolls on claims premium waiver add/remove transactions effective from amendment date forward without separate notification. When partial overlap exists, only the effective portion from amendment date is applied.

**3. Policy Transaction Backoff and Conditional Roll-On**
System backs off policy transactions (amendments, renewals, cancellations, policy waivers) and waits for explicit instructions from Policy domain. Roll-on occurs only when transaction originated from Policy subsystem and instructions are received.

**4. Date-Based Eligibility Validation**
System prevents roll-on of transactions with effective dates before amendment date, preserving original processing for historical transactions.


**Acceptance Criteria:**

**1. Claims Premium Waiver Roll-On Success**
Given a member record amendment effective 2/1 and premium waiver effective 3/1, When amendment is processed, Then premium waiver automatically rolls on with no manual intervention and applies from 3/1 forward.

**2. Multiple Transaction Roll-On Sequencing**
Given premium waiver added 3/1 and removed 4/1, When amendment effective 2/1 is processed, Then both transactions roll on creating combined transaction structure with accurate billing periods.

**3. Historical Transaction Preservation**
Given premium waiver effective 1/15 and amendment effective 2/1, When amendment is processed, Then system does not roll on waiver and preserves original transaction state.

**4. Policy Transaction Controlled Roll-On**
Given out-of-sequence amendment and policy renewal, When amendment is processed without Policy domain instructions, Then transaction remains in backed-off state until explicit roll-on authorization is received.

**5. Partial Overlap Adjustment**
Given premium waiver spanning 1/1-3/31 and amendment effective 2/1, When system evaluates eligibility, Then only the 2/1-3/31 portion rolls on with accurate proration.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=836864548"
]

---

#### Feature: Process Stop and Resume Billing Transactions for Modal Premium Adjustments
- **Role**: Billing Administrator
- **Action**: temporarily halt and reinstate billing transactions to accommodate modal premium recalculations
- **Value**: premium adjustments are accurately reflected without generating incorrect invoices or payment discrepancies

**Description:**

As a **Billing Administrator**,
I want to **temporarily halt and reinstate billing transactions to accommodate modal premium recalculations**,
So that **premium adjustments are accurately reflected without generating incorrect invoices or payment discrepancies**


**Key Capabilities:**

**1. Initiate Billing Transaction Suspension**
User is able to stop active billing transactions when modal premium adjustment events are triggered (surrender, RPU, ETI)

**2. Recalculate Modal Premium**
System processes premium adjustments based on policy change parameters and actuarial rules

**3. Reconcile Outstanding Balances**
System identifies and adjusts existing invoices, payments, and account balances affected by the premium change

**4. Resume Billing Operations**
Upon completion of recalculation and reconciliation, system reinstates billing transaction processing with updated premium amounts

**5. Validate Billing Integrity**
System confirms all invoices reflect adjusted premiums before releasing for collection


**Acceptance Criteria:**

**1. Successful Transaction Suspension**
Given a modal premium adjustment event is triggered, When the administrator initiates billing stop, Then all scheduled billing transactions are suspended until reconciliation completes

**2. Accurate Premium Recalculation**
Given billing is suspended, When premium adjustments are processed, Then system calculates new modal premium amounts per actuarial business rules

**3. Complete Reconciliation**
Given recalculation is complete, When reconciliation executes, Then all outstanding invoices and balances reflect adjusted premiums

**4. Controlled Billing Resumption**
Given reconciliation is validated, When administrator resumes billing, Then system generates invoices using updated premium amounts only

**5. Prevention of Duplicate Charges**
Given incomplete reconciliation, When resume is attempted, Then system prevents billing resumption until validation passes


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=730505183"
]

---

#### Feature: Apply Self-Bill Master Policy Amendments Across Billing Account Structures
- **Role**: Billing Administrator
- **Action**: apply master policy amendments across billing account structures while maintaining structural integrity and updating payment requests
- **Value**: premium changes, coverage adjustments, and organizational structure modifications are consistently reflected across all billing accounts without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **apply master policy amendments across billing account structures while maintaining structural integrity and updating payment requests**,
So that **premium changes, coverage adjustments, and organizational structure modifications are consistently reflected across all billing accounts without manual intervention**


**Key Capabilities:**

**1. Amendment Transaction Reception & Classification**
Receive amendment transactions from policy subsystem; determine billing setup type (Single Bill, Per Location/Division, Per Class); identify affected billing accounts based on structure.

**2. Reporting Period Determination & Application**
Identify reporting period containing amendment effective date; apply changes to entire period without proration; propagate premium, volume, lives, rate, and rate basis data.

**3. Multi-Account Amendment Distribution**
For Single Bill: apply all changes to single account. For Per Location/Division: apply identical product structure across all accounts. For Per Class: evaluate relevance per class and apply selectively.

**4. Payment Request Intelligent Update**
For non-structural changes: update existing payment requests within affected billing periods. For structural changes: update only if invoices not yet generated; preserve backend segments if invoices exist.

**5. Out-of-Sequence Amendment Reconciliation**
When OOS amendment received with roll-on transaction for later effective date: process OOS amendment to historical period; apply roll-on transaction to future period; handle comparable transaction differences.

**6. Structural Amendment Handling**
Process plan, coverage, tier, class, sub-group additions/removals; validate control entity configuration for structural amendment support; generate appropriate error responses or proceed based on configuration.


**Acceptance Criteria:**

**1. Amendment Distribution Accuracy**
Given master policy amendment with multiple billing accounts, When amendment received, Then system applies changes to correct accounts based on billing setup type with appropriate structural consistency.

**2. Reporting Period Integrity**
Given amendment effective date within reporting period, When system processes amendment, Then entire reporting period updated without proration regardless of effective date position within period.

**3. Payment Request Conditional Update**
Given existing payment requests within affected billing periods, When non-structural amendment processed, Then payment requests automatically updated; When structural amendment processed and invoices generated, Then payment requests remain unchanged.

**4. Out-of-Sequence Reconciliation**
Given OOS amendment with later roll-on transaction, When both transactions processed, Then OOS amendment applied to historical reporting period and roll-on applied to future period with appropriate value differences.

**5. Structural Amendment Governance**
Given structural amendment received and control entity configured to reject, When system evaluates amendment, Then error submitted to policy subsystem; When configured to accept, Then structural changes propagated across billing accounts.

**6. Event Notification Generation**
Given successful amendment processing, When changes applied and payment requests updated, Then system generates Amendment Processed and Payment Request Updated BAM events for downstream systems.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=719655199"
]

---

#### Feature: Apply Self-Bill Master Policy Renewals with Out-of-Sequence Processing
- **Role**: Billing Administrator
- **Action**: process master policy renewals and out-of-sequence renewal transactions with automated billing account updates
- **Value**: billing accounts remain synchronized with policy changes across all reporting periods without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **process master policy renewals and out-of-sequence renewal transactions with automated billing account updates**,
So that **billing accounts remain synchronized with policy changes across all reporting periods without manual intervention**


**Key Capabilities:**

**1. Renewal Transaction Receipt and Billing Setup Identification**
Upon receiving renewal or out-of-sequence renewal transaction from policy subsystem for master policies with self-bill enabled, system identifies billing setup type and determines application scope across single, location/division, or class-based billing accounts.

**2. Change Classification and Application**
System processes non-structural changes (rates, volumes, lives, premiums) and structural changes (plan, coverage, tier, class, sub-group modifications) by identifying the reporting period containing the renewal effective date and applying changes to the entire period without proration.

**3. Payment Request Synchronization**
When applicable, system updates existing payment requests within affected billing periods, applying non-structural changes universally and structural changes only when invoices are not yet generated, maintaining removed segments in backend while hiding from interfaces.

**4. Out-of-Sequence Renewal Handling**
If out-of-sequence renewal is received alongside roll-on transaction for issued policy transaction with later effective date, system sequentially processes out-of-sequence renewal from its reporting period then applies roll-on transaction from its respective reporting period.

**5. Activity Tracking and Event Generation**
System generates master policy renewal activity, creates payment request update activities for each modified payment request, and fires billing renewal event for downstream system integration.


**Acceptance Criteria:**

**1. Billing Setup Scope Application**
Given a self-bill master policy with defined billing setup type, When renewal transaction is received, Then system applies changes to single billing account (single setup), all location/division accounts with identical product structure (per location setup), or only relevant class accounts (per class setup).

**2. Reporting Period Change Application**
Given renewal effective date falls within a specific reporting period, When system processes renewal, Then changes apply to entire reporting period containing effective date and all subsequent periods without proration of values.

**3. Non-Structural Change Propagation**
Given renewal contains rate, volume, lives, or premium changes without structural modifications, When system updates billing accounts, Then all existing payment requests within affected billing periods are updated with new values regardless of invoice generation status.

**4. Structural Change with Invoice Protection**
Given renewal contains structural changes and existing payment requests have generated invoices, When system processes renewal, Then payment requests with invoices remain unchanged and structural changes apply only to future payment requests.

**5. Out-of-Sequence Processing Sequence**
Given out-of-sequence renewal and subsequent roll-on transaction with later effective date, When system processes both transactions, Then out-of-sequence changes apply from its reporting period first, followed by roll-on changes from its reporting period.

**6. Activity and Event Generation**
Given successful renewal processing completion, When billing accounts and payment requests are updated, Then system generates master policy renewal activity, individual payment request update activities, and fires billing renewal event.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=794690521"
]

---

#### Feature: Process Member Record Cancellation Events with Premium Sequence Tracking
- **Role**: Billing Administrator
- **Action**: process member record cancellations with accurate premium sequence calculations and compensation system integration
- **Value**: accurate financial reconciliation is ensured and downstream compensation processing reflects the true billable amounts for terminated coverage periods

**Description:**

As a **Billing Administrator**,
I want to **process member record cancellations with accurate premium sequence calculations and compensation system integration**,
So that **accurate financial reconciliation is ensured and downstream compensation processing reflects the true billable amounts for terminated coverage periods**


**Key Capabilities:**

**1. Cancellation Event Initiation**
Upon receiving a member cancellation event, system determines the effective cancellation date and identifies all associated premium sequences requiring calculation.

**2. Premium Amount Calculation**
System calculates premium amounts for each active premium sequence based on the coverage period between effective start date and cancellation date, applying soft-removal flags where coverage was previously amended or superseded.

**3. Aggregate Billable Determination**
System aggregates Total Billable amount from active premium sequences only, excluding soft-removed sequences which maintain zero-dollar placeholders.

**4. Compensation System Integration**
System transmits cancellation event data including Total Billable and individual premium sequence amounts to the Compensation system, ensuring soft-removed sequences are communicated with zero values for audit integrity.


**Acceptance Criteria:**

**1. Standard Cancellation Processing**
Given an active member record with coverage, When a cancellation event is processed, Then system calculates premium amounts for the effective period and transmits aggregated Total Billable with individual sequence breakdowns to Compensation.

**2. Flat Cancellation Handling**
Given a policy cancelled on the issuance date, When the flat cancellation is processed, Then system sets Total Billable to zero, reports all sequences at zero amount, and communicates the event to Compensation.

**3. Soft-Removed Premium Sequence Treatment**
Given coverage removed via amendment or out-of-sequence transaction, When cancellation occurs, Then system flags superseded sequences as soft-removed, excludes them from Total Billable calculation, and transmits them to Compensation with zero amounts.

**4. Out-of-Sequence Amendment Reconciliation**
Given an OOS amendment that supersedes prior transactions, When cancellation is processed, Then system soft-removes initial sequences, activates roll-on sequences, and calculates Total Billable from active sequences only.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=577777647"
]

---

#### Feature: Enforce Product Effective Date Alignment with Transaction Effective Date
- **Role**: Billing Administrator
- **Action**: enforce alignment between product effective dates and transaction effective dates during billing product creation
- **Value**: billing operations maintain temporal consistency and prevent processing errors due to date mismatches across policy types

**Description:**

As a **Billing Administrator**,
I want to **enforce alignment between product effective dates and transaction effective dates during billing product creation**,
So that **billing operations maintain temporal consistency and prevent processing errors due to date mismatches across policy types**


**Key Capabilities:**

**1. Product Configuration Initiation**
User initiates billing product setup for policy types including Master Policy List Bill, Self-Bill arrangements, or Member Policies

**2. Effective Date Definition**
User establishes product effective date parameters that govern billing cycles and premium calculations

**3. Transaction Date Validation**
System enforces temporal alignment by validating transaction effective dates against configured product effective dates

**4. Constraint Application**
Upon detecting date misalignment, system prevents product creation and requires date reconciliation before proceeding

**5. Cross-Policy Type Consistency**
System applies date alignment rules uniformly across all policy billing configurations to maintain enterprise-wide temporal integrity


**Acceptance Criteria:**

**1. Successful Date Alignment**
Given product effective date is defined, When transaction effective date matches product date parameters, Then system completes billing product creation successfully

**2. Date Mismatch Prevention**
Given transaction effective date conflicts with product effective date, When user attempts product creation, Then system blocks submission and requires date correction

**3. Policy Type Coverage**
Given any policy type (List Bill, Self-Bill, Member), When date alignment is validated, Then system applies consistent rules across all configurations

**4. Temporal Integrity Maintenance**
Given multiple transactions, When processed against billing product, Then all transactions respect established effective date boundaries


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=573316658"
]

---

### Epic: Customer & Member Record Management

#### Feature: View Member Record Details and Balances
- **Role**: Billing Analyst
- **Action**: access and review member records and financial balances associated with a billing account
- **Value**: I can efficiently monitor member-level financial status and coverage details without navigating multiple systems

**Description:**

As a **Billing Analyst**,
I want to **access and review member records and financial balances associated with a billing account**,
So that **I can efficiently monitor member-level financial status and coverage details without navigating multiple systems**


**Key Capabilities:**

**1. Billing Account Context Retrieval**
User initiates member record review from billing account with List Bill or Individual Premium Accounting payment allocation mode. System presents consolidated account financial summary including balances, unapplied amounts, and write-offs.

**2. Member Record Discovery**
User applies search criteria or balance filters to locate specific member records. System displays paginated results with coverage, tier, payment status, and outstanding amounts.

**3. Member Financial Detail Access**
User selects member record to view detailed premium history. System provides current and historical premium information for reconciliation and inquiry resolution.


**Acceptance Criteria:**

**1. Account-Level Financial Visibility**
Given a List Bill or IPA billing account, when user accesses member records view, then system displays complete account balance summary including due amounts, unapplied funds, and adjustments.

**2. Member Record Filtering**
Given multiple member records exist, when user applies search criteria or outstanding balance filter, then system returns matching records with financial and coverage details.

**3. Premium History Access**
Given a member record is selected, when user requests premium details, then system presents current and historical premium information for analysis.

**4. Restricted Account Type Handling**
Given a billing account with non-List Bill payment allocation mode, when user attempts access, then system prevents member record view functionality.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=710808653"
]

---

#### Feature: Search and Filter Member Records
- **Role**: Billing Administrator
- **Action**: search, filter, and review member records and associated financial balances within billing accounts
- **Value**: I can efficiently locate specific members, analyze outstanding balances, and initiate necessary financial actions to maintain accurate account management

**Description:**

As a **Billing Administrator**,
I want to **search, filter, and review member records and associated financial balances within billing accounts**,
So that **I can efficiently locate specific members, analyze outstanding balances, and initiate necessary financial actions to maintain accurate account management**


**Key Capabilities:**

**1. Member Record Access**
User accesses member records associated with a selected billing account, viewing aggregated account-level and individual member-level financial balances.

**2. Member Search and Discovery**
User searches for specific members using customer criteria when multiple records exist.
    2.1 Upon no results, system displays active search criteria with clear filter option

**3. Balance Filtering**
User applies global filters to isolate members with non-zero balances or specific financial conditions across balance columns.

**4. Financial Action Execution**
User initiates refunds, reviews unbilled amendments, examines modal premium details, or triggers asynchronous balance recalculations for selected members.


**Acceptance Criteria:**

**1. Member Record Retrieval**
Given a billing account with enrolled members, When user requests member records, Then system displays all associated members with current financial positions.

**2. Empty State Handling**
Given a billing account without members, When user accesses member view, Then system presents empty state notification and prevents further actions.

**3. Search Execution**
Given multiple member records, When user submits search criteria, Then system returns matching members or displays empty results with active filter indicators.

**4. Balance Filtering**
Given applied non-zero balance filter, When members exist meeting criteria, Then system displays only filtered members; otherwise shows empty result set.

**5. Asynchronous Calculation**
Given user initiates balance recalculation, When process completes, Then system updates member and account-level values with timestamp confirmation upon refresh.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628362843"
]

---

#### Feature: Display Member Record Actions Menu
- **Role**: Billing Administrator
- **Action**: access and execute contextual actions for member billing records
- **Value**: I can efficiently manage member-specific billing operations through a centralized action interface

**Description:**

As a **Billing Administrator**,
I want to **access and execute contextual actions for member billing records**,
So that **I can efficiently manage member-specific billing operations through a centralized action interface**


**Key Capabilities:**

**1. Member Record Selection**
User navigates to member records and selects a specific record to trigger available actions evaluation.

**2. Action Menu Presentation**
System evaluates member record state and user authorization, then displays eligible actions based on business rules.

**3. Refund Processing Pathway**
When user selects refund initiation, system transitions to refund workflow for the selected member record.

**4. Amendment Inquiry Pathway**
When user selects amendments view, system retrieves unbilled amendments associated with the member.

**5. Premium Calculation Inquiry**
When user selects modal premium view, system displays premium calculation details for the member's billing cycle.


**Acceptance Criteria:**

**1. Authorization Validation**
Given user lacks required policy credentials, When attempting to view member actions, Then system prevents action menu display.

**2. Action Menu Composition**
Given valid member record selection, When action menu is requested, Then system displays only actions permitted by member state and authorization.

**3. Refund Workflow Transition**
Given refund action selection, When user confirms, Then system initiates refund process with member context preserved.

**4. Amendment Data Retrieval**
Given amendments exist unbilled, When amendment view selected, Then system displays all pending amendments for the member.

**5. Premium Inquiry Response**
Given member has active billing cycle, When premium view selected, Then system presents modal premium calculation breakdown.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645904563"
]

---

#### Feature: Initiate Refund from Member Record
- **Role**: Billing Administrator
- **Action**: initiate refund processing from individual member records
- **Value**: I can efficiently process member-level financial adjustments and maintain accurate account balances

**Description:**

As a **Billing Administrator**,
I want to **initiate refund processing from individual member records**,
So that **I can efficiently process member-level financial adjustments and maintain accurate account balances**


**Key Capabilities:**

**Member Record Access and Selection**
User navigates to billing account and accesses member records view to identify the appropriate member requiring refund processing.

**Member Record Review and Filtering**
User reviews member balances, applies filters to isolate non-zero balances, and searches for specific member records using defined criteria.

**Refund Initiation from Member Context**
User selects target member record and initiates refund action, triggering member-specific refund workflow with relevant balance and transaction context.

**Supporting Financial Data Review**
When needed, user accesses amendments not yet billed, modal premium details, or triggers balance recalculation to ensure accurate refund processing.


**Acceptance Criteria:**

**Member Record Accessibility**
Given a billing account with associated members, When user requests member records view, Then system displays all member records with current balance information.

**Refund Action Availability**
Given a selected member record, When user accesses available actions, Then system provides refund initiation option according to business rules and member eligibility.

**Refund Workflow Transition**
Given user initiates refund from member record, When action is confirmed, Then system transitions to manual refund process with pre-populated member context and balance data.

**No Member Records Handling**
Given a billing account without member records, When user attempts to view members, Then system prevents refund initiation and displays appropriate notification.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628362843"
]

---

#### Feature: View Member Record Modal Premium History
- **Role**: Billing Administrator
- **Action**: review modal premium history for enrolled members
- **Value**: I can analyze premium calculations and billing accuracy for customer inquiries and dispute resolution

**Description:**

As a **Billing Administrator**,
I want to **review modal premium history for enrolled members**,
So that **I can analyze premium calculations and billing accuracy for customer inquiries and dispute resolution**


**Key Capabilities:**

**Member Record Selection**
User navigates to member records within billing account context and identifies the target member for premium review.

**Action Menu Access**
User accesses available member-level actions through the system interface to select premium history viewing option.

**Premium History Retrieval**
Upon selecting modal premium action, system retrieves and displays historical premium data according to member enrollment and billing cycles.

**Data Analysis**
User reviews premium amounts, effective dates, and calculation factors to validate billing accuracy or investigate discrepancies.


**Acceptance Criteria:**

**Authorized Access**
Given user has valid billing administrator credentials and customer has active billing account, When user accesses member records, Then system displays available member actions including premium history.

**Premium History Display**
Given member record has premium transaction history, When user selects modal premium action, Then system presents chronological premium data with calculation components.

**Data Integrity**
Given premium history exists for List Bill IPA or True Group policies, When system retrieves historical records, Then displayed information matches source billing transactions without data loss.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645904563"
]

---

#### Feature: View Amendments Not Yet Billed for Member Record
- **Role**: Billing Administrator
- **Action**: review pending amendments for member records before billing generation
- **Value**: I can identify and verify policy changes that will impact upcoming billing cycles, ensuring accurate invoicing and preventing billing disputes

**Description:**

As a **Billing Administrator**,
I want to **review pending amendments for member records before billing generation**,
So that **I can identify and verify policy changes that will impact upcoming billing cycles, ensuring accurate invoicing and preventing billing disputes**


**Key Capabilities:**

**1. Member Record Access**
User navigates to member records within a billing account and selects a specific member to review available management actions.

**2. Action Menu Evaluation**
System evaluates member record state and user permissions, then presents contextually appropriate actions including amendments review, refund initiation, and premium details.

**3. Amendment Display Workflow**
Upon selecting view amendments option, system retrieves and displays all policy modifications not yet reflected in billing cycles, including coverage changes and premium adjustments.

**4. Amendment Review Completion**
User reviews unbilled amendment details to verify accuracy and understand impact on next billing period.


**Acceptance Criteria:**

**1. Authorized Access**
Given user has valid credentials and customer has List Bill IPA policy, When accessing member records, Then system displays action menu with amendment viewing capability.

**2. Contextual Action Availability**
Given member record is selected, When system evaluates business rules, Then only applicable actions appear based on record state and user permissions.

**3. Amendment Retrieval**
Given amendments exist for member, When user selects view amendments action, Then system displays all unbilled modifications with relevant details.

**4. Workflow Completion**
Given user has reviewed amendments, When viewing is complete, Then system successfully exits workflow and returns to member record list.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645904563"
]

---

#### Feature: Hide Inactive Member Records
- **Role**: Billing Administrator
- **Action**: filter and manage visibility of inactive member records in premium views
- **Value**: I can focus on active billing relationships and reduce screen clutter while maintaining access to historical data when needed

**Description:**

As a **Billing Administrator**,
I want to **filter and manage visibility of inactive member records in premium views**,
So that **I can focus on active billing relationships and reduce screen clutter while maintaining access to historical data when needed**


**Key Capabilities:**

**1. Control Member Record Visibility**
User is able to toggle between filtered (active-only) and unfiltered (all records) views using a default-ON control mechanism.

**2. Apply Intelligent Inactivity Filtering**
When filtering is enabled, system automatically hides records meeting cancellation, portability, continuation, move, or future enrollment criteria based on transaction effective dates and types.

**3. Preserve Critical Exception Display**
System continues displaying future-effective transactions, current reinstatements, and stop-billing amendments even when filtering is active, ensuring operational continuity.

**4. Maintain Comprehensive Access**
Upon disabling the filter, system reveals complete member record history across all transaction types and statuses without additional navigation.


**Acceptance Criteria:**

**1. Default Filtering Behavior**
Given the premium view loads, When no user interaction occurs, Then system activates filtering and hides inactive members by default.

**2. Transaction-Based Hiding Logic**
Given filtering is active, When member records meet cancellation/move/future enrollment conditions with effective dates on or before current date, Then system excludes them from display.

**3. Exception Preservation Rule**
Given filtering is active, When member records have future-effective transactions, current reinstatements, or active stop-billing amendments, Then system displays these records despite inactive classification.

**4. Full Visibility Toggle**
Given user deactivates the filter, When system processes the change, Then all member records display regardless of transaction status or effective date.

**5. Mid-Period Premium Handling**
Given cancellation occurs mid-billing period with remaining premium due, When viewing premiums, Then system includes premium amount while hiding member record per effective date rules.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=671293321"
]

---

#### Feature: Move Member Record to Individual Direct Billing Account
- **Role**: Billing Administrator
- **Action**: transfer member coverage from group to individual billing accounts
- **Value**: employees retain insurance policies independently after employment changes while maintaining billing accuracy

**Description:**

As a **Billing Administrator**,
I want to **transfer member coverage from group to individual billing accounts**,
So that **employees retain insurance policies independently after employment changes while maintaining billing accuracy**


**Key Capabilities:**

**1. Initiate Member Record Transfer**
Upon employment termination or leave request, user is able to initiate member record movement from group billing account to individual direct billing.

**2. Determine Account Availability**
System evaluates whether target individual direct billing account exists; if unavailable, system creates new account with selected modality.

**3. Recalculate Premium Obligations**
System prorates modal premiums across originating group account and receiving individual account based on transaction effective date and modality changes.

**4. Process Out-of-Sequence Transactions**
When amendments occur with effective dates preceding continuation/portability dates, system automatically performs roll-on operations to maintain billing consistency across affected accounts.

**5. Finalize Billing Configuration**
System updates amendments-not-yet-billed balances for list bill accounts and defines new invoicing start date for receiving individual direct account.


**Acceptance Criteria:**

**1. Successful Standard Transfer**
Given active member record on group billing account, when transfer to individual direct account is initiated, then system creates or identifies target account, prorates premiums, and updates both accounts effective from transaction date.

**2. New Account Creation**
Given no existing individual direct billing account for member, when transfer is requested, then system creates new individual direct account with user-selected modality before completing transfer.

**3. Out-of-Sequence Amendment Handling**
Given continuation/portability transaction exists, when amendment with earlier effective date is processed, then system performs automatic roll-on recalculating premiums retroactively across affected accounts.

**4. Incomplete Data Prevention**
Given transfer initiation without billing account selection, when user attempts submission, then system prevents transaction completion and requires account specification.

**5. Premium Consistency Validation**
Given member record movement completion, when both group and individual accounts are reviewed, then modal premium amounts reflect accurate proration based on effective dates and modalities.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=547981681"
]

---

#### Feature: Move Member Record Back to Group Billing Account
- **Role**: Billing Administrator
- **Action**: transfer a member record from individual direct billing back to the group billing account upon employment reinstatement
- **Value**: the employer can resume premium payments and the member's coverage continues seamlessly with accurate premium calculations across both billing accounts

**Description:**

As a **Billing Administrator**,
I want to **transfer a member record from individual direct billing back to the group billing account upon employment reinstatement**,
So that **the employer can resume premium payments and the member's coverage continues seamlessly with accurate premium calculations across both billing accounts**


**Key Capabilities:**

**1. Initiate Member Record Transfer**
User initiates the transfer process from the policy subsystem with predefined member record number and effective date.

**2. Review and Confirm Group Billing Account**
System displays the original list bill billing account information for user verification before proceeding.

**3. Execute Billing Account Transition**
System moves the member record back to the list bill account and updates billing transaction type to 'Moved to List Bill'.

**4. Recalculate Financial Obligations**
System automatically recalculates and prorates modal premiums across both individual and group billing accounts, updates amendments not yet billed balances, and establishes new invoicing start date for the group account.

**5. Handle Transfer Exceptions**
When transition errors occur, system prevents completion and notifies user to resolve blocking issues before retry.


**Acceptance Criteria:**

**1. Successful Member Record Transfer**
Given a member record exists on individual direct billing with prior list bill history, when the billing administrator initiates the transfer with valid effective date, then the system moves the record to the original group billing account and updates transaction type.

**2. Accurate Premium Recalculation**
Given the transfer is executed, when the system processes the account transition, then modal premiums are prorated on both individual and group accounts with updated amendments not yet billed balances.

**3. Invoicing Schedule Establishment**
Given the member record successfully transfers to group billing, when the system completes the transition, then a new invoicing start date is automatically defined for the list bill account.

**4. Transfer Failure Prevention**
Given blocking conditions exist during transition, when the system encounters errors, then the process halts and prevents incomplete data submission until issues are resolved.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=560975177"
]

---

#### Feature: Create Individual Direct Billing Account for Member
- **Role**: Billing Administrator
- **Action**: establish individual direct billing accounts for members purchasing individual benefits policies
- **Value**: members receive accurate invoices and policies remain active upon timely payment

**Description:**

As a **Billing Administrator**,
I want to **establish individual direct billing accounts for members purchasing individual benefits policies**,
So that **members receive accurate invoices and policies remain active upon timely payment**


**Key Capabilities:**

**Policy Underwriting & Status Determination**
User is able to complete underwriting decision and transition policy status to Proposed or Issued, establishing eligibility for billing setup.

**Billing Account Establishment**
Upon policy issuance, user is able to create new individual direct billing account or link to existing account, capturing member billing relationship.

**Billing Product Provisioning**
When billing product is confirmed issued, user is able to create billing product matching policy payment frequency selected during quotation.

**Invoice Generation & Payment Allocation**
User is able to generate first invoice and allocate payments from general suspense to invoice, enabling policy activation.

**Payment Recovery Monitoring**
If invoice remains unpaid and payment deadline passes, user is able to initiate flat-cancellation process to terminate policy.


**Acceptance Criteria:**

**1. Successful Billing Account Creation**
Given policy status is Issued, when billing account setup completes successfully, then billing product is created with modality matching policy payment frequency.

**2. Invoice Payment & Policy Activation**
Given first invoice is generated, when payment from general suspense is allocated to invoice, then policy transitions to active status and continues normal operations.

**3. Payment Failure & Flat-Cancellation**
Given invoice is unpaid, when payment deadline expires without recovered payment, then system enables manual flat-cancellation resulting in Policy Cancelled status.

**4. Underwriting Failure Prevention**
Given policy status changes to Issue Failed during underwriting, when billing setup is attempted, then system prevents billing account and product creation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=766215789"
]

---

#### Feature: Update Member Record Name from Customer Changes
- **Role**: Billing Administrator
- **Action**: synchronize member record names automatically when customer information is updated
- **Value**: member records remain accurate and consistent across all billing operations without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **synchronize member record names automatically when customer information is updated**,
So that **member records remain accurate and consistent across all billing operations without manual intervention**


**Key Capabilities:**

**1. Customer Information Change Detection**
System receives customer demographic updates (name, employee identifier) originating from customer management interface or policy/enrollment transactions

**2. Cross-System Event Propagation**
Customer management subsystem publishes update event that triggers billing subsystem listeners for real-time synchronization

**3. Member Record Batch Update**
System applies name changes instantly across all associated member records linked to the individual customer

**4. Document Consistency Management**
System preserves historical document integrity by maintaining original names in pre-existing generated files while applying updates to subsequent billing documents and user interface displays


**Acceptance Criteria:**

**1. Real-Time Synchronization**
Given customer name is modified through any entry channel, When update event is published, Then all associated member records reflect new name immediately

**2. Historical Document Preservation**
Given invoices were generated before name change, When user accesses archived billing documents, Then original name remains unchanged in those files

**3. Forward-Looking Updates**
Given name change is processed, When new billing documents are generated, Then updated name appears in all newly created invoices and statements

**4. Interface Display Consistency**
Given member record name is updated, When user views any billing interface module, Then current name displays consistently across premium views, payment applications, and invoice details


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=828511209"
]

---

#### Feature: Update Member Record Location and Division from Employment Changes
- **Role**: Billing Administrator
- **Action**: process employment information changes to update member billing accounts and recalculate premiums
- **Value**: members are assigned to the correct billing accounts based on their current location and division, ensuring accurate premium calculation and invoicing

**Description:**

As a **Billing Administrator**,
I want to **process employment information changes to update member billing accounts and recalculate premiums**,
So that **members are assigned to the correct billing accounts based on their current location and division, ensuring accurate premium calculation and invoicing**


**Key Capabilities:**

**1. Employment Change Event Reception**
System receives employment update events containing location, division, and effective date combinations. Validates which records require processing to avoid duplicate handling.

**2. Employment Hierarchy Validation**
System verifies employment location/division exists and belongs to same customer hierarchy. Determines applicable billing setup configuration (single bill vs split bill scenarios).

**3. Transaction Effective Date Validation**
System ensures employment change effective date is not earlier than member record effective date and checks for conflicting future-dated transactions.

**4. Member Record Reassignment**
When split billing applies, system moves member records between billing accounts based on new location/division assignment or to root customer account when location/division is removed.

**5. Premium Recalculation**
System generates employment change transaction, recalculates modal premiums, and determines impact on invoiced vs non-invoiced periods.

**6. Amendment Tracking**
System updates amendments not yet billed when employment changes affect already-invoiced periods and maintains complete transaction history.


**Acceptance Criteria:**

**1. Valid Employment Change Processing**
Given employment information is updated with valid location/division within customer hierarchy, When billing setup is not split bill configuration, Then system generates employment change transaction and recalculates modal premium without moving member records.

**2. Split Bill Account Reassignment**
Given billing setup is split bill per location/division and destination account exists, When employment change is processed, Then system moves member record to appropriate location/division billing account and recalculates premiums for both accounts.

**3. Early Effective Date Handling**
Given employment change effective date is earlier than member record effective date, When transaction is processed, Then system reflects change with modal premium effective date equal to new business effective date while preserving original transaction date.

**4. Future Transaction Conflict Resolution**
Given existing transaction has effective date after employment change date, When employment change is processed, Then system recalculates premiums, maintains original classification segments, and rolls back future transaction to preserve its original effective date.

**5. Invalid Hierarchy Management**
Given employment location/division does not belong to same customer hierarchy and split billing applies, When change is processed, Then system applies destination customer setup rules without moving member records.

**6. Invoiced Period Amendment**
Given employment change affects already-invoiced period, When transaction is processed, Then system updates amendments not yet billed value and reflects updated modal premiums in billing account.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=657897515"
]

---

#### Feature: Retrieve Location and Division from CEM During Policy Transaction
- **Role**: Billing Administrator
- **Action**: synchronize member location and division data during policy transactions
- **Value**: billing accurately reflects current member organizational assignments and generates correct invoices

**Description:**

As a **Billing Administrator**,
I want to **synchronize member location and division data during policy transactions**,
So that **billing accurately reflects current member organizational assignments and generates correct invoices**


**Key Capabilities:**

**Transaction Initiation**
When policy or enrollment subsystem issues transaction for single member record, system triggers location synchronization process.

**Data Retrieval**
System retrieves member's current location and division values from customer entity management as of policy transaction effective date.

**Billing Integration**
System transmits location and division information to billing subsystem for transaction processing.

**Transaction Processing**
Billing processes policy transaction using location and division effective on transaction date.

**Invoice Generation**
When generating invoices or draft bills, system displays location and division values applicable to billing period.


**Acceptance Criteria:**

**Successful Transaction Processing**
Given a single member policy transaction is initiated, when location and division are retrieved from customer entity management, then billing processes transaction with effective-dated organizational data.

**Historical Accuracy**
Given a policy transaction has been processed, when viewing premium records, then location and division reflect values effective on transaction date.

**Invoice Accuracy**
Given an invoice is generated for a billing period, when policy transactions occurred during that period, then location and division display values effective during transaction dates.

**Data Visibility**
Given a transaction is completed, when accessing premium history, then location and division information is viewable in premium tracking interfaces.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=814696575"
]

---

#### Feature: Manage Customer Hierarchy for Billing Accounts
- **Role**: Billing Administrator
- **Action**: configure organizational billing hierarchies for group insurance policies
- **Value**: bills are generated accurately according to organizational structure and business division requirements

**Description:**

As a **Billing Administrator**,
I want to **configure organizational billing hierarchies for group insurance policies**,
So that **bills are generated accurately according to organizational structure and business division requirements**


**Key Capabilities:**

**1. Hierarchy Type Selection**
User is able to establish the Group Sponsor organization and select appropriate hierarchy configuration based on billing consolidation requirements.

**2. Location-Based Structure Configuration**
When organization requires separate bills by physical location, user is able to structure the hierarchy with multiple cost centers representing locations, assigning members accordingly and generating distinct bills per location.

**3. Division-Based Structure Configuration**
When organization requires separate bills by business division, user is able to configure cost centers representing departments, linking members to divisions and generating individual bills per division.

**4. Consolidated Structure Configuration**
When organization requires single consolidated billing, user is able to assign all members directly to master policy without cost center subdivision, generating one unified bill for the entire group.


**Acceptance Criteria:**

**1. Hierarchy Establishment Validation**
Given a new group insurance policy, when billing administrator initiates hierarchy configuration, then system requires Group Sponsor identification and master policy association before proceeding.

**2. Location-Based Billing Verification**
Given HIERARCHY-1 selection, when cost centers are configured by location and members are assigned, then system generates separate bills for each physical location cost center.

**3. Division-Based Billing Verification**
Given HIERARCHY-2 selection, when cost centers represent business divisions with assigned members, then system produces distinct bills per division.

**4. Consolidated Billing Verification**
Given HIERARCHY-3 selection, when members are assigned directly to master policy without cost centers, then system generates single consolidated bill for entire group.

**5. Hierarchy Integrity Validation**
Given incomplete organizational structure, when bill generation is triggered, then system prevents processing until all required hierarchy relationships are established.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=485041356"
]

---

#### Feature: Load Billing Customer Details
- **Role**: Billing Administrator
- **Action**: retrieve comprehensive billing customer entity information
- **Value**: I can access complete customer billing profiles to support payment processing and account management decisions

**Description:**

As a **Billing Administrator**,
I want to **retrieve comprehensive billing customer entity information**,
So that **I can access complete customer billing profiles to support payment processing and account management decisions**


**Key Capabilities:**

**1. Customer Data Request Initiation**
User is able to submit a retrieval request for specific billing customer entity using customer reference identifier. Request can originate from authorized personnel or integrated external systems.

**2. Authorization Verification**
Upon request submission, system validates requester credentials and authorization levels to ensure data access compliance.

**3. Request Validation Processing**
System performs multi-layer validation of request structure and parameters to ensure data integrity.
    3.1 If validation fails, system returns categorized error response indicating specific validation failure type

**4. Customer Data Assembly**
When validation succeeds, system retrieves comprehensive billing customer details including customer reference and associated payment methods.

**5. Response Delivery**
System returns complete billing customer entity profile to requester for downstream processing or review.


**Acceptance Criteria:**

**1. Successful Data Retrieval**
Given an authorized user with valid credentials, When a properly formatted customer reference is submitted, Then system returns complete billing customer entity details including payment methods.

**2. Authorization Enforcement**
Given an unauthorized requester, When a retrieval request is submitted, Then system denies access and prevents data disclosure.

**3. Validation Failure Handling**
Given an invalid request format, When validation processing occurs, Then system returns specific error category without processing the request further.

**4. Complete Data Response**
Given successful validation, When customer data is retrieved, Then response includes all mandatory attributes (customer reference, payment methods).

**5. External System Integration**
Given an integrated external system, When properly authenticated retrieval request is submitted, Then system processes request identically to internal user requests.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=254972798"
]

---

#### Feature: Create Billing Customer Record
- **Role**: Billing Administrator
- **Action**: establish and configure a new billing customer record in the system
- **Value**: the organization can process payments and manage financial transactions for the customer

**Description:**

As a **Billing Administrator**,
I want to **establish and configure a new billing customer record in the system**,
So that **the organization can process payments and manage financial transactions for the customer**


**Key Capabilities:**

**1. Billing Customer Initialization**
User is able to request billing customer entity creation through system interface or API integration. System provisions default payment methods (cash and check) automatically upon initialization.

**2. Customer Reference Assignment**
User is able to configure unique customer reference identifier and associate approved payment methods to the billing account.

**3. Record Persistence and Confirmation**
Upon successful validation, system persists billing customer data and returns confirmation with customer reference and configured payment method details.


**Acceptance Criteria:**

**1. Successful Customer Creation**
Given valid customer reference and payment method data, When submission request is processed, Then system creates billing customer record and returns stored entity image with reference identifier and payment methods.

**2. Duplicate Reference Prevention**
Given an existing customer reference, When attempting to create duplicate record, Then system rejects submission and prevents reference modification.

**3. Data Validation Enforcement**
Given incomplete or invalid input data, When validation executes, Then system prevents record creation and returns specific validation error category (facade, command facade, or command validation).


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=254971520"
]

---

#### Feature: Display Billing Overview Panel in Customer Portfolio
- **Role**: Billing Administrator
- **Action**: view billing account summary within customer portfolio
- **Value**: I can quickly assess customer billing status and navigate to detailed account information without leaving the portfolio context

**Description:**

As a **Billing Administrator**,
I want to **view billing account summary within customer portfolio**,
So that **I can quickly assess customer billing status and navigate to detailed account information without leaving the portfolio context**


**Key Capabilities:**

**1. Billing Feature Activation**
System determines billing panel visibility based on environment configuration settings for v20 Billing module

**2. Account Retrieval and Aggregation**
System compiles all billing accounts linked to customer entity (Organization or Individual) and calculates total account count

**3. Summary Display with Prioritization**
System presents most recent billing accounts (up to three) with essential identifiers, account type classification, and current balance information
    3.1 When account count exceeds display limit, system provides access path to complete account listing
    3.2 When policy issuance is pending, system indicates unavailable data fields appropriately

**4. Detailed Navigation**
User is able to transition directly to focused billing account view through identifier selection


**Acceptance Criteria:**

**1. Configuration-Based Visibility**
Given v20 Billing is disabled in environment configuration, When user accesses customer portfolio, Then system conceals billing panel entirely

**2. Empty State Handling**
Given customer has no associated billing accounts, When portfolio loads, Then system displays empty state indicator with zero count

**3. Summary Presentation Rules**
Given customer has multiple billing accounts, When billing panel renders, Then system displays three most recent accounts ordered chronologically with total count reflected in header

**4. Navigation Integration**
Given billing account summary is displayed, When user selects account identifier, Then system navigates to billing workspace with selected account in focus

**5. Data Unavailability Display**
Given billing account has no issued policies, When account appears in summary, Then system shows placeholder indicators for account type and balance fields


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=534822136"
]

---

#### Feature: Process Automated Cancellation for Non-Payment on Individual Direct Account
- **Role**: Billing Administrator
- **Action**: automatically cancel member records after non-payment during the grace period for individual direct billing accounts
- **Value**: I can ensure policy coverage terminates efficiently for employees who refuse continuation coverage through non-payment, eliminating manual intervention and streamlining account management

**Description:**

As a **Billing Administrator**,
I want to **automatically cancel member records after non-payment during the grace period for individual direct billing accounts**,
So that **I can ensure policy coverage terminates efficiently for employees who refuse continuation coverage through non-payment, eliminating manual intervention and streamlining account management**


**Key Capabilities:**

**1. Automated Eligibility Detection**
System job identifies member records eligible for cancellation based on ported or continuation-flagged status, non-payment of first invoice, and expired grace period configuration

**2. Cancellation Execution**
System executes billing member record cancellation following defined business rules and terminates policy coverage

**3. Transaction Notification**
System generates Cancellation Processed BAM message upon successful cancellation to notify integrated systems and stakeholders


**Acceptance Criteria:**

**1. Successful Automated Cancellation**
Given member record moved to individual direct billing with continuation flag, When first invoice remains unpaid beyond configured grace period, Then system automatically cancels member record and generates Cancellation Processed message

**2. Grace Period Adherence**
Given grace period configuration exists, When cancellation job executes, Then system only cancels records exceeding grace period days after invoice due date

**3. Payment Within Grace Period**
Given employee pays first invoice within grace period, When payment is processed, Then no automatic cancellation occurs and policy continues under individual direct billing


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=583830123"
]

---

### Epic: Account Invoicing Schedule & Preferences

#### Feature: Configure Invoice Schedule and Frequency
- **Role**: Billing Administrator
- **Action**: configure and update billing account invoice schedules including frequency, due dates, and seasonal billing parameters
- **Value**: invoices are generated and due according to business requirements and customer payment cycles, ensuring accurate billing timing and premium calculations

**Description:**

As a **Billing Administrator**,
I want to **configure and update billing account invoice schedules including frequency, due dates, and seasonal billing parameters**,
So that **invoices are generated and due according to business requirements and customer payment cycles, ensuring accurate billing timing and premium calculations**


**Key Capabilities:**

**1. Invoice Schedule Access and Initialization**
User accesses billing account update function and system displays current invoice schedule configuration including frequency, due day options, and advanced parameters prefilled with existing values.

**2. Invoicing Frequency Configuration**
User updates invoicing frequency selection. System validates frequency choice and automatically adjusts due day options, enabling calendar-based or period-based configurations. When specific frequencies selected (Every 28 days/Weekly/Bi-Weekly), system restricts calendar options and auto-updates offset parameters.

**3. Due Date Parameter Management**
User configures due day methodology by selecting calendar dates, offset from period start, or last day of period. System adjusts dependent invoice generation options and offset calculations based on selected due date approach.

**4. Seasonal Billing Configuration**
When seasonal billing enabled, user selects billing periods to exclude from premium billing (1-11 periods). System validates selection constraints and triggers modal premium recalculation for member records upon changes.

**5. True Group Modality Synchronization**
Upon frequency changes for true group accounts, system validates master policy modalities, recalculates modal premiums for member records, manages future-dated transactions, and generates modality change events and notifications.

**6. Schedule Commitment and Validation**
User submits schedule changes. System validates completeness, persists configuration, triggers necessary premium recalculations, and confirms updates with navigation to billing home displaying refreshed schedule values.


**Acceptance Criteria:**

**1. Frequency-Driven Due Date Configuration**
Given invoicing frequency is updated, When user selects Every 28 days/Weekly/Bi-Weekly, Then system disables calendar due day options and automatically configures period-based offsets with generation option 2.

**2. Seasonal Billing Period Validation**
Given seasonal billing is enabled, When user selects billing periods to exclude, Then system prevents submission if all periods selected or none selected, requiring 1-11 periods for valid configuration.

**3. True Group Modality Synchronization**
Given billing account uses true group payment allocation with master policies, When invoicing frequency changes and modality requires adjustment, Then system recalculates modal premiums for member records, manages future transactions, and generates modality change events.

**4. Invoice Status Constraints**
Given at least one invoice exists in issued status, When user accesses seasonal billing configuration, Then system displays billing period selection as non-editable to preserve historical billing integrity.

**5. Unsaved Changes Protection**
Given user modified frequency or due day parameters, When cancel action initiated, Then system presents confirmation warning and preserves or discards changes based on user confirmation choice.

**6. Schedule Persistence and Confirmation**
Given all schedule parameters validated successfully, When user submits changes, Then system persists configuration, triggers premium recalculations if applicable, generates billing account updated event, and displays refreshed schedule in billing home.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=460691568"
]

---

#### Feature: Display Consolidated Billing Account Views
- **Role**: Billing Administrator
- **Action**: view consolidated billing information across organizational hierarchy
- **Value**: I can monitor financial status and payment obligations for group sponsors and their business units in a unified view

**Description:**

As a **Billing Administrator**,
I want to **view consolidated billing information across organizational hierarchy**,
So that **I can monitor financial status and payment obligations for group sponsors and their business units in a unified view**


**Key Capabilities:**

**1. Access Consolidated Billing Dashboard**
User navigates to billing section for non-individual customer portfolio and locates consolidated billing views displaying aggregated account summaries.

**2. Review Aggregated Financial Position**
System presents consolidated balance figures including due and unpaid amounts, amendments not yet billed, and total account balances across group sponsor and lower-level business units.

**3. Explore Hierarchical Account Structure**
User selects organizational tabs (group sponsor, location, division) to view billing accounts organized by customer hierarchy, with initial display of accounts and option to expand full list.

**4. Examine Individual Account Details**
User expands billing account cards to access granular information including payment application status, invoice status distribution, coverage product details, and transaction history for targeted account analysis.


**Acceptance Criteria:**

**1. Consolidated View Presentation**
Given user accesses billing section for group sponsor, When consolidated billing view loads, Then system displays aggregated balances across organizational hierarchy with context customer identification.

**2. Hierarchical Navigation**
Given multiple billing accounts exist across organizational levels, When user selects organizational tab, Then system displays accounts for that hierarchy level with tabs shown only for levels containing active billing accounts.

**3. Account Detail Expansion**
Given closed billing account card, When user expands account, Then system reveals detailed balance breakdowns, invoice status summary, and associated product information specific to account type.

**4. Financial Accuracy by Account Type**
Given different customer types, When displaying balance information, Then system presents type-appropriate metrics (True Group vs Individual Premium Accounting fields) with correct currency and calculation logic.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=456496163"
]

---

#### Feature: Manage Billing Account Balance Calculations
- **Role**: Billing Administrator
- **Action**: monitor and calculate billing account balances with payment allocation tracking
- **Value**: I can ensure accurate financial reconciliation and timely payment collection across all billing accounts

**Description:**

As a **Billing Administrator**,
I want to **monitor and calculate billing account balances with payment allocation tracking**,
So that **I can ensure accurate financial reconciliation and timely payment collection across all billing accounts**


**Key Capabilities:**

**1. Account Balance Aggregation**
System calculates comprehensive account balance including unapplied payments, due and unpaid amounts, paid-to-date per master policy, and amendments not yet billed.

**2. Payment Allocation Tracking**
System tracks payment and refund transactions with allocation details to specific invoices, including status monitoring for incomplete, declined, suspended, or reversed payments.

**3. Premium Obligation Management**
System organizes premium dues by billing period or invoice view, displaying payment requests, adjustments, and delinquency process status.

**4. Balance Adjustment Processing**
Upon premium adjustments or unbilled amendments, system recalculates account balance reflecting changes to billed and unbilled obligations.

**5. Multi-Policy Reconciliation**
When multiple master policies exist, system maintains separate paid-to-date calculations and provides consolidated account-level balance visibility.


**Acceptance Criteria:**

**1. Balance Accuracy**
Given an account with allocated payments and outstanding invoices, When the system calculates account balance, Then it equals due and unpaid amounts minus unapplied payments excluding unbilled amendments.

**2. Payment Allocation Visibility**
Given payments exist on the account, When user reviews payment history, Then system displays allocation details showing invoice numbers, allocation dates, and amounts for each transaction.

**3. Delinquency Detection**
Given automatic delinquency process triggers for a billing period, When user views premium obligations, Then system displays delinquency status indicator on affected periods or invoices.

**4. Hold Status Impact**
Given active holds exist on the billing account, When user accesses account details, Then system displays hold status based on effective dates and prevents restricted actions.

**5. Multi-Policy Balance Segregation**
Given multiple master policies with different payment histories, When user expands account balance, Then system shows separate paid-to-date values for each master policy.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=489401735"
]

---

#### Feature: Generate and Schedule Invoice Production
- **Role**: Billing Administrator
- **Action**: generate and schedule invoice production with customized preferences
- **Value**: billing accounts operate on the correct invoicing cadence and customers receive timely, accurate billing statements

**Description:**

As a **Billing Administrator**,
I want to **generate and schedule invoice production with customized preferences**,
So that **billing accounts operate on the correct invoicing cadence and customers receive timely, accurate billing statements**


**Key Capabilities:**

**1. Access Billing Account Portfolio**
User navigates to the billing hub to view all managed billing accounts with their current invoicing status, frequency settings, and outstanding balances across account types.

**2. Configure Invoice Production Schedule**
User establishes or modifies invoicing frequency parameters and production timing rules for selected billing accounts based on business requirements.

**3. Set Account-Specific Preferences**
User defines invoice generation preferences including delivery methods, consolidation options, and account-specific billing parameters.

**4. Initiate Scheduled Production**
System executes invoice generation according to configured schedules, applying account preferences and aggregating charges for the billing period.

**5. Validate Production Readiness**
Upon submission, system verifies data completeness and schedule validity before committing invoice production configuration.


**Acceptance Criteria:**

**1. Schedule Configuration Validation**
Given the user configures invoice production schedule, When all required frequency and timing parameters are provided, Then system accepts and activates the invoicing schedule for applicable accounts.

**2. Incomplete Schedule Prevention**
Given the user attempts to establish invoice production, When critical scheduling parameters are missing or invalid, Then system prevents activation and identifies required corrections.

**3. Multi-Account Schedule Management**
Given multiple billing accounts exist, When user applies scheduling preferences, Then system correctly associates configurations to respective account types while respecting consolidation rules.

**4. Production Execution Confirmation**
Given scheduled invoice production is triggered, When generation completes successfully, Then system confirms invoice creation and updates account status accordingly.

**5. Privilege-Based Access Control**
Given user lacks administrative privileges, When attempting to modify invoice schedules, Then system restricts access to configuration capabilities.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=439135092"
]

---

#### Feature: Process Invoice Preferences by Billing Model
- **Role**: Billing Administrator
- **Action**: configure and manage invoice preferences based on billing model requirements
- **Value**: I can ensure accurate, timely invoice generation aligned with account-specific billing arrangements and payment schedules

**Description:**

As a **Billing Administrator**,
I want to **configure and manage invoice preferences based on billing model requirements**,
So that **I can ensure accurate, timely invoice generation aligned with account-specific billing arrangements and payment schedules**


**Key Capabilities:**

**1. Account Overview Access**
User accesses billing account interface to review account identification, status, billing model type, and associated product memberships.

**2. Financial Position Assessment**
User reviews invoice/payment summaries including frequency, due amounts, payment history, and calculates current balance positions (due/unpaid, unapplied, amendments, overpayments).

**3. Payment History Analysis**
User examines recent payment transactions and selects privilege-based actions (unallocate, transfer, suspend, reverse) or navigates to complete payment history.

**4. Invoice Status Monitoring**
User reviews recent invoices sorted by period and issue date, identifies status conditions (delinquency, tolerance), and accesses complete invoice history.

**5. Billing Account Modification**
Upon identifying required changes, user initiates privileged actions (update preferences, generate invoice, apply payment, initiate refund) if authorized.


**Acceptance Criteria:**

**1. Account Information Retrieval**
Given user has valid access, When billing account is requested, Then system displays account identification, status, billing model type, balance summaries, and associated products.

**2. Balance Calculation Accuracy**
Given account has financial activity, When balances are calculated, Then system displays current due/unpaid, unapplied credits, pending amendments with timestamp, overpayments, and total account balance.

**3. Transaction History Access**
Given account has payment/invoice history, When user views financial records, Then system presents most recent transactions with status indicators and provides navigation to complete history.

**4. Privilege-Based Action Control**
Given user attempts financial operations, When action requires elevated privileges, Then system permits execution only if user has assigned authorization.

**5. Invoice Status Visibility**
Given invoices exist for account, When user reviews invoice history, Then system displays invoices sorted by period/date with appropriate status tags (delinquency, tolerance).


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=531204513"
]

---

#### Feature: Manage Multi-Frequency Billing Schedules
- **Role**: Billing Administrator
- **Action**: adjust invoicing frequency and related schedule parameters on billing accounts
- **Value**: I can maintain accurate invoice timing and due date configurations when business billing cycles change

**Description:**

As a **Billing Administrator**,
I want to **adjust invoicing frequency and related schedule parameters on billing accounts**,
So that **I can maintain accurate invoice timing and due date configurations when business billing cycles change**


**Key Capabilities:**

**1. Frequency Selection & Validation**
User is able to select new invoicing frequency (period-based or cycle-based) for an existing billing account.

**2. Automated Due Day Option Recalculation**
Upon frequency type transition (period-to-cycle or cycle-to-period), system evaluates previous settings and recalibrates available due day options (calendar dates, offset from period start, or period end).

**3. Conditional Timing & Offset Adjustment**
When transitioning to cycle-based frequencies, system resets invoicing timing to default and clears offset values; when remaining in or moving to period-based frequencies, system preserves existing timing and offset configurations.

**4. Schedule Persistence & Confirmation**
System commits updated frequency, due day options, timing, and offset parameters to the billing account record.


**Acceptance Criteria:**

**1. Period-to-Cycle Transition with Calendar Due Day**
Given a billing account with period-based frequency and calendar due day, When frequency changes to cycle-based, Then system removes calendar due day option, enables period start/end offset options, resets timing to default, and clears offset values.

**2. Cycle-to-Period Transition**
Given a billing account with cycle-based frequency, When frequency changes to period-based, Then system enables all due day types including calendar (1-31), retains existing timing and offset settings.

**3. Period-to-Period Non-Calendar Retention**
Given period-based frequency with non-calendar due day, When frequency changes within period-based category, Then system preserves timing, offset values, and enables all due day options.

**4. Cycle-to-Cycle Consistency**
Given cycle-based frequency, When frequency changes within cycle-based category, Then system maintains period start/end due day options, resets timing to default, and clears offset.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=508664690"
]

---

### Epic: Billing Account Setup & Lifecycle

#### Feature: Generate Unique Billing Account Numbers
- **Role**: Billing Administrator
- **Action**: generate and assign unique billing account identifiers during account establishment
- **Value**: each party receives a distinct billing reference for accurate invoice processing and account tracking

**Description:**

As a **Billing Administrator**,
I want to **generate and assign unique billing account identifiers during account establishment**,
So that **each party receives a distinct billing reference for accurate invoice processing and account tracking**


**Key Capabilities:**

**1. Billing Account Initialization**
Upon party enrollment, system establishes new billing account record and triggers unique identifier generation process aligned with selected account type

**2. Identifier Assignment & Validation**
System generates unique billing account number ensuring no duplication across active and legacy accounts, validates format compliance with account type specifications

**3. Legacy Number Reconciliation**
When migrating from legacy systems, system maps historical billing numbers to new identifiers while preserving backward compatibility references

**4. Account Activation**
Upon successful number assignment, system activates billing account enabling invoice generation and account management capabilities through dedicated interfaces


**Acceptance Criteria:**

**1. Unique Identifier Generation**
Given a new billing account creation request, When the system processes account initialization, Then a unique billing account number is generated with no conflicts across existing accounts

**2. Legacy System Compatibility**
Given a data migration scenario, When legacy billing numbers are imported, Then the system maintains both legacy and new identifiers with proper mapping relationships

**3. Invoice Processing Enablement**
Given an activated billing account with assigned number, When invoice generation is requested via REST API, Then the system successfully retrieves account details using the billing account number

**4. Account Type Differentiation**
Given different billing account types (Consolidated/FlexiBill/Individual/List), When identifiers are generated, Then each follows type-specific numbering conventions and validation rules


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=447623002"
]

---

#### Feature: Create Billing Accounts with Invoicing Configuration
- **Role**: Billing Administrator
- **Action**: establish billing accounts with invoicing parameters for customers
- **Value**: insurance products can be billed, invoices generated, and payments processed according to business-defined timelines and rules

**Description:**

As a **Billing Administrator**,
I want to **establish billing accounts with invoicing parameters for customers**,
So that **insurance products can be billed, invoices generated, and payments processed according to business-defined timelines and rules**


**Key Capabilities:**

**1. Billing Account Initiation**
User initiates billing account creation for an existing customer. System auto-generates unique account number per defined format and requires account name provision.

**2. Invoicing Configuration Setup**
System prefills default invoicing parameters (invoice document type, frequency, due day type/value, offset periods, timing, generation rules) per business configuration. User reviews and optionally overrides parameters based on customer requirements.

**3. Optional Relationship Assignment**
User may associate payment methods, assign payor with contact details, and configure billing account contacts to support payment processing workflows.

**4. Account Activation & Notification**
Upon completion of required configuration, system creates billing account and triggers account creation event for downstream integration.


**Acceptance Criteria:**

**1. Successful Account Creation**
Given customer exists, When user provides account name and confirms invoicing configuration, Then system creates billing account with auto-generated number and triggers creation notification.

**2. Default Configuration Application**
Given account initiation, When invoicing parameters are displayed, Then system prefills all configuration values per defined business rules.

**3. Configuration Override Support**
Given prefilled invoicing parameters, When user modifies any configuration value, Then system accepts overrides and persists custom settings.

**4. Incomplete Data Prevention**
Given mandatory fields incomplete, When user attempts account creation, Then system prevents submission and indicates missing required information.

**5. Payment Relationship Optional**
Given account creation in progress, When user completes without payment method or payor assignment, Then system successfully creates account for future configuration.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=555084892"
]

---

#### Feature: Update Billing Account Parameters
- **Role**: Billing Administrator
- **Action**: modify billing account configuration to reflect updated business requirements and customer preferences
- **Value**: billing operations align with current customer arrangements and payment processing remains accurate and compliant

**Description:**

As a **Billing Administrator**,
I want to **modify billing account configuration to reflect updated business requirements and customer preferences**,
So that **billing operations align with current customer arrangements and payment processing remains accurate and compliant**


**Key Capabilities:**

**1. Access Billing Account Modification Workspace**
User navigates to billing account update interface and retrieves current account configuration for the selected customer relationship.

**2. Configure Invoice Generation and Delivery Parameters**
User adjusts invoice document format, content type, delivery method, and scheduling preferences (simple frequency or advanced seasonal billing with offsets).

**3. Manage Payment Collection Settings**
User updates payor references, selects payment methods with authorization rules for recurring charges, and defines contact relationships for billing communications.
    3.1 When products are issued and allocation rules exist, user configures payment allocation methodology
    3.2 System retrieves delinquency handling rules based on bill type and allocation mode

**4. Validate and Persist Configuration Changes**
User submits modifications for system validation and persistence, ensuring downstream billing processes reflect updated parameters.


**Acceptance Criteria:**

**1. Successful Configuration Update**
Given valid billing account exists, When administrator modifies invoice parameters and payment settings, Then system persists changes and applies them to subsequent billing cycles.

**2. Conditional Configuration Availability**
Given products are not yet issued, When administrator accesses payment allocation settings, Then system suppresses allocation configuration options until prerequisites are met.

**3. Rule-Based Delinquency Assignment**
Given specific bill type and allocation mode selected, When system retrieves delinquency options, Then only compatible configurations from business rules repository are presented.

**4. Unsaved Changes Protection**
Given user has modified configuration fields, When attempting to navigate away without saving, Then system prevents data loss through intervention workflow.

**5. Payment Method Authorization Enforcement**
Given recurring payment method selected, When authorization toggle is disabled, Then system blocks automatic payment processing until authorization is confirmed.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=460689940"
]

---

#### Feature: Manage Billing Account Holds (Invoice/Cancellation)
- **Role**: Billing Administrator
- **Action**: control billing account activity execution through hold mechanisms
- **Value**: I can pause specific or all billing activities to complete critical tasks before automated processes execute, preventing premature invoicing, cancellations, or delinquency actions

**Description:**

As a **Billing Administrator**,
I want to **control billing account activity execution through hold mechanisms**,
So that **I can pause specific or all billing activities to complete critical tasks before automated processes execute, preventing premature invoicing, cancellations, or delinquency actions**


**Key Capabilities:**

**1. Hold Configuration & Activation**
User establishes hold parameters including type (Invoice, Cancellation, Reminder/Cancel Notice), reason, effective date, and optional expiration date. System applies hold immediately upon activation.

**2. Hold Lifecycle Management**
User views active, past, and future holds with visual indicators. System automatically releases holds upon expiration date or allows manual release before scheduled expiration.

**3. Automated Process Interception**
When automated billing jobs execute, system validates hold status and halts affected activities (invoice generation, payment requests, delinquency processing) while continuing unaffected payment operations.

**4. Manual Activity Restriction**
Upon user-initiated actions matching active hold type, system blocks execution and displays alert notification. Manual payment actions (refund, transfer) remain permitted despite active holds.


**Acceptance Criteria:**

**1. Hold Activation Success**
Given user creates hold with valid effective date, When hold is saved, Then system applies hold restrictions immediately and displays activity-specific tags on billing account.

**2. Automated Job Suspension**
Given active Invoice Hold exists, When automated invoice generation job runs, Then system skips affected billing account and logs hold-related failure message.

**3. Manual Action Blocking**
Given active hold matches user-initiated activity type, When user attempts manual execution, Then system prevents action and displays hold alert notification.

**4. Hold Expiration Processing**
Given hold configured with expiration date, When expiration date reached, Then system automatically releases hold and resumes normal billing activities.

**5. Payment Continuity**
Given any hold type active, When automated or manual payment processing occurs, Then system continues payment operations without restriction.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=632632589"
]

---

#### Feature: Automatically Expire Billing Account Holds
- **Role**: Billing Administrator
- **Action**: automatically activate and expire billing account holds based on configured time parameters
- **Value**: billing activities are paused and resumed without manual intervention, ensuring accurate hold lifecycle management

**Description:**

As a **Billing Administrator**,
I want to **automatically activate and expire billing account holds based on configured time parameters**,
So that **billing activities are paused and resumed without manual intervention, ensuring accurate hold lifecycle management**


**Key Capabilities:**

**1. Automatic Hold Activation**
When the hold effective date/time matches current system time, the system transitions pending hold configurations to active status, updates account status tags, and pauses specified billing activities.

**2. Automatic Hold Expiration**
When the hold expiration date/time matches current system time, the system sets the expiration date, clears status tags, and releases paused billing activities (invoicing, recurring payments, delinquency processing).
    2.1 If overlapping holds of the same type exist, activities remain paused and tags persist until all holds expire.

**3. Multi-Hold Coordination**
System manages concurrent holds of different types by displaying separate status tags per hold type and coordinating activity release based on overlapping date ranges.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=610905061"
]

---

#### Feature: Associate Master Policies with Billing Accounts
- **Role**: Billing Administrator
- **Action**: link master policies to appropriate billing accounts within the setup and lifecycle management process
- **Value**: ensure accurate billing consolidation, proper payment allocation, and streamlined invoice generation aligned with organizational payment structures

**Description:**

As a **Billing Administrator**,
I want to **link master policies to appropriate billing accounts within the setup and lifecycle management process**,
So that **ensure accurate billing consolidation, proper payment allocation, and streamlined invoice generation aligned with organizational payment structures**


**Key Capabilities:**

**1. Billing Account Selection & Evaluation**
User is able to identify and select target billing account by reviewing condensed account details including status, payment frequency, due dates, and configured payment methods. System displays billing type indicators and allocation level tags when products are already associated.

**2. Master Policy Association Configuration**
User is able to link master policies to selected billing account with system validation of billing type compatibility. Upon association, system automatically assigns appropriate bill type tags and updates product listings based on Single Bill or Bill Per Product configuration.

**3. Payment Terms Synchronization**
System validates invoice generation offset and payment due date settings against associated master policy terms. When semi-monthly frequency is configured, system accommodates dual due date requirements and validates payroll frequency alignment for per-payroll configurations.


**Acceptance Criteria:**

**1. Successful Policy Association**
Given a billing account in active status, When user associates master policies with compatible billing type, Then system assigns appropriate bill type tags and displays associated product cards with policy details.

**2. Billing Type Validation**
Given master policies with List Bill requirements, When user attempts association with Self Bill configured account, Then system prevents association and prompts billing type configuration adjustment.

**3. Payment Configuration Inheritance**
Given associated master policies, When billing account has established payment method and frequency, Then system applies payment terms to all linked policies and displays consolidated payment allocation level for List Bill configurations.

**4. Dynamic Label Adaptation**
Given Self Bill account during setup without products, When user associates first master policy, Then system updates field labels from generic to Self Bill terminology and removes explanatory tooltips.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=534816354"
]

---

#### Feature: Configure Billing Per Class
- **Role**: Billing Administrator
- **Action**: configure billing accounts for distinct policy classes
- **Value**: premium collection is organized by class segments with appropriate seasonal and payment allocation rules

**Description:**

As a **Billing Administrator**,
I want to **configure billing accounts for distinct policy classes**,
So that **premium collection is organized by class segments with appropriate seasonal and payment allocation rules**


**Key Capabilities:**

**1. Initiate Class-Based Billing Configuration**
User selects per-class billing mode and system presents account association workspace without pre-selected accounts

**2. Associate Classes with Billing Accounts**
User selects target classes and assigns existing or newly-created billing accounts filtered by bill type eligibility
    2.1 Upon need for new account, user completes account creation process before class association

**3. Apply Seasonal Billing Constraints**
When seasonal billing is enabled, system enforces modality and payroll calendar rules based on payment allocation type
    3.1 For group allocation, system locks modality to match invoicing frequency
    3.2 For individual allocation, system generates non-editable default monthly payroll calendar

**4. Validate Complete Class Coverage**
System verifies all configured classes are assigned to billing accounts before allowing setup confirmation

**5. Finalize or Save Configuration Progress**
User confirms complete setup or saves partial configuration for later completion


**Acceptance Criteria:**

**1. Billing Account Filtering**
Given products are selected for billing setup, When user initiates account association, Then system displays only accounts matching bill type eligibility rules

**2. Seasonal Billing Enforcement for Group Allocation**
Given seasonal billing is enabled and payment allocation is group, When user configures billing account, Then system locks modality to invoicing frequency and disables alternative options

**3. Seasonal Billing Enforcement for Individual Allocation**
Given seasonal billing is enabled and payment allocation is individual, When user configures billing account, Then system creates non-editable monthly payroll calendar with policy effective date as start

**4. Class Coverage Validation**
Given multiple classes exist, When user attempts to finalize setup, Then system prevents completion if any class remains unassociated with billing account

**5. Partial Configuration Persistence**
Given user has associated some classes, When user saves without completing all associations, Then system retains current configuration for future resumption


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523012085"
]

---

#### Feature: Configure Billing Per Location/Division
- **Role**: Billing Administrator
- **Action**: configure location-specific billing accounts with customized invoice schedules and payment arrangements
- **Value**: divisions can operate with tailored billing cycles, payment terms, and financial workflows aligned to their operational requirements

**Description:**

As a **Billing Administrator**,
I want to **configure location-specific billing accounts with customized invoice schedules and payment arrangements**,
So that **divisions can operate with tailored billing cycles, payment terms, and financial workflows aligned to their operational requirements**


**Key Capabilities:**

**1. Billing Account Initialization**
User establishes billing account for customer entity with default naming conventions and account-level parameters.

**2. Invoice Schedule Configuration**
User defines billing frequency, due date logic, and invoice generation timing. When advanced scheduling is required, user configures seasonal exclusions, offset-based generation windows, and draft bill workflows.

**3. Payor and Payment Arrangement**
User associates payor details with mandatory billing address and optionally adds payment methods. Upon adding active payment method, user can authorize recurring payment processing.

**4. Contact Assignment**
User designates billing contacts with role-based associations. System enforces single primary contact constraint and maximum contact limits.

**5. Account Activation**
Upon successful validation, system persists billing account. Account becomes operational when associated with products.


**Acceptance Criteria:**

**1. Schedule Flexibility Validation**
Given user selects advanced scheduling, When offset parameters are configured, Then system calculates invoice generation and due dates per offset rules without calendar conflicts.

**2. Payor Completeness Check**
Given mandatory billing address is missing, When user attempts account creation, Then system prevents submission until address requirements are satisfied.

**3. Payment Method Authorization**
Given active payment method is added, When user enables recurring payment authorization, Then system associates payment instrument with future automated transactions.

**4. Primary Contact Governance**
Given existing primary contact is designated, When user assigns new primary contact, Then system automatically revokes previous primary status maintaining single primary constraint.

**5. Seasonal Billing Application**
Given seasonal exclusions are configured, When invoice generation executes during excluded periods, Then system skips generation and resumes per next scheduled cycle.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=439136044"
]

---

#### Feature: Manage Payor Details (Address/Phone/Email)
- **Role**: Billing Administrator
- **Action**: update payor contact information to maintain accurate billing communication channels
- **Value**: the billing system maintains current contact details and ensures regulatory compliance for billing correspondence

**Description:**

As a **Billing Administrator**,
I want to **update payor contact information to maintain accurate billing communication channels**,
So that **the billing system maintains current contact details and ensures regulatory compliance for billing correspondence**


**Key Capabilities:**

**1. Initiate Contact Update Workflow**
User initiates payor details modification process for existing billing account customers

**2. Add New Contact Information**
User provides new address, phone, or email details through dedicated data entry process
    2.1 Upon missing mandatory address, system prevents continuation and prompts correction
    2.2 System applies default billing statement preference to new addresses

**3. Select Active Contact Methods**
User designates which contact details become active for billing communications

**4. Finalize Contact Changes**
User commits changes to update payor profile with selected contact information
    4.1 If user cancels after modifications, system discards pending updates without persisting changes


**Acceptance Criteria:**

**1. Successful Contact Addition**
Given valid contact information is provided, When user commits changes with selected contact method, Then system persists new details and updates payor profile display

**2. Mandatory Address Enforcement**
Given payor lacks address information, When user attempts to finalize without providing address, Then system blocks completion and requires address entry

**3. Default Preference Assignment**
Given new address is added, When system persists contact details, Then address receives billing statement communication preference automatically

**4. Cancellation Handling**
Given user initiates cancellation, When pending modifications exist, Then system discards unsaved changes and retains original payor details


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=463472871"
]

---

#### Feature: Assign Payment Methods to Billing Accounts
- **Role**: Billing Administrator
- **Action**: assign and manage payment methods for billing accounts throughout their lifecycle
- **Value**: billing accounts are properly configured with appropriate payment collection mechanisms to ensure timely revenue processing

**Description:**

As a **Billing Administrator**,
I want to **assign and manage payment methods for billing accounts throughout their lifecycle**,
So that **billing accounts are properly configured with appropriate payment collection mechanisms to ensure timely revenue processing**


**Key Capabilities:**

**Payment Method Configuration Access**
Upon creating or updating a billing account, user is able to access payment method assignment functionality to establish payment collection arrangements.

**Payment Method Selection**
System presents available payment options organized by type: default no-payment option, saved customer payment methods (credit card, EFT/ACH), and one-time payment methods (cash, check), filtered to show only currently active options.

**Payment Method Assignment Completion**
User is able to select and assign the appropriate payment method to the billing account, establishing the payment collection mechanism for future billing transactions.


**Acceptance Criteria:**

**Default Payment Option Availability**
Given a billing account is being created or modified, when payment method selection is initiated, then the no-payment method option is always available as the default selection.

**Active Payment Method Filtering**
Given multiple payment methods exist in the system, when payment options are displayed, then only payment methods meeting active status criteria are presented for selection.

**Payment Method Type Segregation**
Given payment methods are displayed for selection, when the user views available options, then saved customer payment methods and one-time payment methods are presented in distinct, organized sections with correct type categorization.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=570106881"
]

---

#### Feature: Manage Billing Account Contacts
- **Role**: Billing Administrator
- **Action**: designate and maintain responsible contacts for billing consultation and document delivery
- **Value**: billing communications reach the appropriate parties and primary contact responsibilities are clearly assigned

**Description:**

As a **Billing Administrator**,
I want to **designate and maintain responsible contacts for billing consultation and document delivery**,
So that **billing communications reach the appropriate parties and primary contact responsibilities are clearly assigned**


**Key Capabilities:**

**Contact Designation Workflow**
User initiates contact management during billing account creation or updates. User is able to add up to five contacts per account, designating one as primary responsible party.

**Primary Contact Assignment**
When assigning a new primary contact, system automatically demotes existing primary to non-primary status, maintaining single point of accountability.

**Contact Information Maintenance**
User is able to update existing contact details while preserving billing account associations and historical relationships.

**Contact Capacity Management**
Upon reaching maximum of five contacts, system prevents additional contact creation while allowing modifications to existing records.

**Document Delivery Integration**
System routes billing documents to designated contacts based on their assigned roles and contact preferences.


**Acceptance Criteria:**

**Successful Contact Addition**
Given fewer than five contacts exist, When user submits complete contact information with valid designation, Then system associates contact with billing account and updates contact registry.

**Primary Contact Reassignment**
Given existing primary contact exists, When user designates new primary contact, Then system demotes previous primary to non-primary and establishes new primary relationship.

**Contact Limit Enforcement**
Given five contacts already exist, When user attempts to add another contact, Then system prevents additional contact creation and maintains existing contact roster.

**Primary Contact Deletion**
Given primary contact is removed, When deletion completes, Then system maintains non-primary contacts without automatic promotion to primary status.

**Document Routing Integrity**
Given contacts are designated, When billing documents generate, Then system delivers documents to all designated contacts with primary contact receiving priority communications.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=668245720"
]

---

#### Feature: Move Member Records to Individual Direct Billing
- **Role**: Billing Administrator
- **Action**: transfer member records from group billing arrangements to individual direct billing accounts
- **Value**: members can be independently billed when they transition from group coverage, ensuring continuous billing operations and accurate premium calculations

**Description:**

As a **Billing Administrator**,
I want to **transfer member records from group billing arrangements to individual direct billing accounts**,
So that **members can be independently billed when they transition from group coverage, ensuring continuous billing operations and accurate premium calculations**


**Key Capabilities:**

**1. Billing Account Assignment**
Upon receiving member transition request from policy subsystem, system identifies existing individual billing accounts or enables creation of new billing account for the member.

**2. Transaction Configuration**
User is able to configure billing modality and validate transaction effective dates against business rules to prevent retroactive conflicts with previous billing transitions.

**3. Member Record Transfer Execution**
When confirmation is provided, system moves member record to individual direct billing account, generates bilateral billing account movement entries, and transforms member record into individual billing product.

**4. Premium Calculation Orchestration**
System calculates modal premium for new individual account and recalculates source account premiums (for List Bill scenarios), applying premium sequence splits when multiple sequences are configured.

**5. Pre-Generated Invoice Reconciliation**
If invoices exist for periods between transaction effective date and current date, system updates amendment values and account balances to maintain billing integrity.


**Acceptance Criteria:**

**1. Successful Member Record Transfer**
Given a member with active group billing, when administrator completes billing setup with valid account selection and effective date, then system creates individual billing product and generates movement entries for both source and destination accounts.

**2. Premium Recalculation Integrity**
Given completed member transfer, when system processes premium calculations, then modal premiums are computed for individual account and recalculated for source List Bill account with premium sequences reapplied.

**3. Effective Date Validation**
Given repetitive member movement scenario, when effective date is earlier than or equal to previous transition date, then system prevents submission and requires valid future-dated effective date.

**4. Invoice Amendment Handling**
Given pre-generated invoices exist in transition period, when member record is moved, then system updates amendments not yet billed and account balance values to reflect the transfer.

**5. Cancellation Safeguard**
Given billing setup in progress, when administrator initiates cancellation, then system requires confirmation before discarding changes and returning to originating policy process.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=520068142"
]

---

#### Feature: Return Member Records to Group Billing
- **Role**: Billing Administrator
- **Action**: return a member record from individual direct billing back to group billing
- **Value**: the member record resumes group billing arrangements with accurate premium calculations and billing account assignments

**Description:**

As a **Billing Administrator**,
I want to **return a member record from individual direct billing back to group billing**,
So that **the member record resumes group billing arrangements with accurate premium calculations and billing account assignments**


**Key Capabilities:**

**1. Continuation Source Validation & Routing**
System validates whether continuation originated from list bill or self bill billing account. Upon list bill source confirmation, system initiates group billing return process. When self bill source is detected, member record remains on individual direct account with modal premium recalculation.

**2. Billing Setup & Account Assignment**
System evaluates billing setup configuration and validates modality alignment with invoicing or payroll frequency. If attributes changed during continuation (payroll frequency, location, division, class), system identifies corresponding group billing account. System prevents transition when target billing account does not exist for changed attributes.

**3. Member Record Transition & Premium Recalculation**
Upon user confirmation, system moves member record to identified group billing account and generates billing account movement messages. System recalculates modal premiums for both source individual direct and target group billing accounts, considering seasonal billing settings. System validates no invoices exist post-effective date and updates amendments not yet billed values when invoices are present.


**Acceptance Criteria:**

**1. List Bill Source Processing**
Given continuation source is list bill, when billing setup matches invoicing frequency and no attribute changes occurred, then system assigns member record to original group billing account and recalculates modal premiums for both accounts.

**2. Self Bill Source Handling**
Given continuation source is self bill, when continuation removal is initiated, then system retains member record on individual direct account, recalculates modal premium with zeroed amounts post-continuation removal, and updates amendments not yet billed.

**3. Attribute Change Routing**
Given payroll frequency or location/division/class changed during continuation, when target billing account exists for new attributes, then system assigns member record to corresponding group billing account. When no matching billing account exists, then system displays error and prevents transition.

**4. Effective Date Validation**
Given member record return to group billing is requested, when effective date is earlier than original continuation effective date, then system prevents transaction per business rule constraints.

**5. Invoice Period Validation**
Given invoicing periods with generated invoices exist from effective date to current date, when member record transitions, then system updates amendments not yet billed and billing account balance on individual direct account.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=544446944"
]

---

#### Feature: Create Individual Direct Billing Accounts
- **Role**: Billing Administrator
- **Action**: configure individual direct billing accounts during member transitions or product purchases
- **Value**: ensure accurate invoicing and payment processing for individual policyholders

**Description:**

As a **Billing Administrator**,
I want to **configure individual direct billing accounts during member transitions or product purchases**,
So that **I can ensure accurate invoicing and payment processing for individual policyholders**


**Key Capabilities:**

**1. Billing Account Selection & Creation**
User accesses billing setup during member record transition or product purchase. System filters and displays available billing accounts matching transition rules or enables creation of new accounts with invoice preferences, payor details, and payment methods.

**2. Invoice Schedule Configuration**
User configures simple or advanced invoice schedules including frequency, due date calculations, generation timing, and retry parameters.

**3. Payment Modality Assignment**
User selects premium payment frequency (Weekly, Bi-Weekly, Monthly, Semi-Monthly) with system-determined defaults based on transition type.

**4. Transition Validation & Execution**
System validates billing account selection and modality assignment, executes member record transition, and activates invoice scheduling upon confirmation.


**Acceptance Criteria:**

**1. Account Selection Enforcement**
Given member transition is initiated, When user confirms without selecting billing account, Then system prevents submission and requires account selection.

**2. Modality Requirement for Transitions**
Given portability or continuation flow, When modality is not selected, Then system blocks confirmation until frequency is specified.

**3. Billing Account Creation**
Given user creates new billing account, When all required fields are completed, Then system creates account and makes it available for immediate selection.

**4. Successful Transition Processing**
Given valid billing account and modality, When user confirms setup, Then system executes transition and activates invoice configuration.

**5. Contact Limitation**
Given billing account contacts section, When five contacts exist, Then system prevents addition of further contacts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=491918625"
]

---

#### Feature: Display Consolidated Billing Views for Group Sponsors
- **Role**: Billing Administrator
- **Action**: view consolidated billing information across organizational hierarchy
- **Value**: I can monitor aggregated financial positions and manage billing for all group entities from a single interface

**Description:**

As a Billing Administrator,
I want to view consolidated billing information across organizational hierarchy,
So that I can monitor aggregated financial positions and manage billing for all group entities from a single interface


**Key Capabilities:**

**1. Consolidated View Access**
When context customer is identified as group sponsor, system automatically presents consolidated billing interface displaying aggregated balances across all organizational units.

**2. Hierarchical Balance Aggregation**
System calculates and displays consolidated financial metrics including Due & Unpaid, Amendments Not Yet Billed, and Account Balance from group sponsor and subordinate entities.

**3. Multi-Level Account Navigation**
User is able to explore billing accounts organized by customer tabs (sponsor, locations, divisions) with expandable cards showing account summaries and detailed financial information.

**4. Consolidated Statement Generation**
User is able to initiate consolidated billing statement creation for comprehensive group-level reporting through action menu.


**Acceptance Criteria:**

**1. Automatic View Activation**
Given context customer is group sponsor, When user accesses billing home page, Then system displays Consolidated Billing View with aggregated balances calculated from all organizational units.

**2. Balance Calculation Accuracy**
Given billing accounts exist across hierarchy, When system calculates consolidated metrics, Then Due & Unpaid, Amendments Not Yet Billed, and Account Balance reflect accurate aggregation with calculation timestamps.

**3. Hierarchical Navigation**
Given multiple organizational levels with billing accounts, When user expands consolidated view, Then system presents customer tabs with up to 5 accounts per tab and View All option for additional records.

**4. Fallback Data Handling**
Given customer legal name is unavailable, When system renders consolidated view card, Then customer number displays instead ensuring identification continuity.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=456496158"
]

---

#### Feature: Retrieve Billing Accounts by Number
- **Role**: Billing Administrator
- **Action**: retrieve billing account details using the account number
- **Value**: I can quickly access and verify account information to support customer inquiries and billing operations

**Description:**

As a **Billing Administrator**,
I want to **retrieve billing account details using the account number**,
So that **I can quickly access and verify account information to support customer inquiries and billing operations**


**Key Capabilities:**

**1. Account Retrieval Initiation**
User is able to request account information by providing the unique account number identifier.

**2. Request Validation**
Upon submission, system validates the request structure and user authorization to ensure data integrity and security.
    2.1 If validation fails, system prevents retrieval and provides failure notification

**3. Account Lookup & Verification**
System searches for billing account matching the provided number and confirms existence.
    3.1 When account is not found, system notifies user of non-existent account

**4. Data Retrieval & Response**
Upon successful lookup, system returns comprehensive billing account details including current account state for business use.


**Acceptance Criteria:**

**1. Successful Account Retrieval**
Given a valid account number exists, When user submits retrieval request, Then system returns complete billing account details with current state information.

**2. Invalid Request Handling**
Given request validation fails, When user attempts retrieval, Then system prevents data access and returns validation failure notification.

**3. Non-Existent Account Handling**
Given account number does not exist in system, When user submits retrieval request, Then system returns account-not-found notification without exposing system details.

**4. Authorization Enforcement**
Given user lacks proper authorization, When retrieval is attempted, Then system denies access and prevents unauthorized data exposure.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=238191304"
]

---

#### Feature: Search Billing Accounts by Criteria
- **Role**: Billing Administrator
- **Action**: search and retrieve billing account information using defined criteria
- **Value**: I can quickly locate and access account details to support operational decision-making and customer service activities

**Description:**

As a **Billing Administrator**,
I want to **search and retrieve billing account information using defined criteria**,
So that **I can quickly locate and access account details to support operational decision-making and customer service activities**


**Key Capabilities:**

**1. Search Request Initiation**
User is able to submit search criteria to the billing subsystem to identify target accounts

**2. Account Data Retrieval**
System processes search parameters and retrieves matching billing account records with complete account profiles

**3. Account Detail Presentation**
System returns comprehensive account information including account number, state classification, payment plan configuration, due day scheduling, and hierarchical account relationships

**4. Exception Management**
When validation errors occur during request processing, system provides structured error responses indicating validation failure type


**Acceptance Criteria:**

**1. Successful Account Retrieval**
Given valid search criteria are submitted, When the system processes the request, Then account details are returned with HTTP 200 status including account number, state, payment configuration, and hierarchical metadata

**2. Active Account Identification**
Given search results are returned, When accounts match criteria, Then system identifies account state classification and payment plan type

**3. Validation Failure Handling**
Given invalid or incomplete search parameters, When system performs validation, Then appropriate error response is returned indicating validation failure without processing the search

**4. Payment Configuration Display**
Given account is retrieved, When payment details exist, Then due day configuration with payment plan type and scheduling parameters are included in response


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=238191368"
]

---

#### Feature: Configure Invoice Schedule Parameters
- **Role**: Billing Administrator
- **Action**: configure invoice schedule parameters for billing accounts
- **Value**: automated invoicing cycles align with customer payment preferences and business billing policies

**Description:**

As a **Billing Administrator**,
I want to **configure invoice schedule parameters for billing accounts**,
So that **automated invoicing cycles align with customer payment preferences and business billing policies**


**Key Capabilities:**

**1. Invoice Frequency Configuration**
User is able to establish invoicing frequency (weekly, bi-weekly, semi-monthly, monthly, bi-monthly, quarterly, semi-annual, annual, every 28 days) with corresponding due date determination using calendar-based days, offset from period start, or last day of period.

**2. Advanced Scheduling Parameters**
Upon toggling advanced mode, user is able to configure seasonal billing exclusions, invoice due date offsets with advance/arrears timing, generation date offsets with flexible ranges, and retry mechanisms for failed generation jobs.

**3. Draft Bill Generation**
User is able to enable draft bill preview generation with configurable offset parameters, allowing pre-validation before final invoice issuance.


**Acceptance Criteria:**

**1. Standard Schedule Activation**
Given a billing account requires simple invoicing, When user selects frequency and due day parameters, Then system validates configuration and enables account creation with automated invoice generation.

**2. Advanced Schedule Validation**
Given user activates advanced mode, When seasonal billing or generation offsets are configured, Then system enforces frequency-specific constraints and validates offset ranges before accepting parameters.

**3. Frequency-Specific Constraints**
Given user selects Every 28 Days frequency, When configuring due dates, Then system restricts calendar-based options and enforces offset-only or last-day selection methods.

**4. Mandatory Billing Address**
Given billing account creation is initiated, When payor billing address is incomplete, Then system prevents account creation until address validation succeeds.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=439136044"
]

---

#### Feature: Set Default Invoicing Parameters from OpenL
- **Role**: Billing Administrator
- **Action**: configure default invoicing parameters during billing account creation using OpenL rules
- **Value**: invoicing behaviors are automatically standardized and consistent with organizational policies without manual configuration

**Description:**

As a **Billing Administrator**,
I want to **configure default invoicing parameters during billing account creation using OpenL rules**,
So that **invoicing behaviors are automatically standardized and consistent with organizational policies without manual configuration**.


**Key Capabilities:**

**1. Billing Account Initialization**
Upon billing account creation, system retrieves applicable invoicing rule sets from OpenL repository based on account attributes.

**2. Parameter Application**
System applies default invoicing parameters (frequency, format, delivery method) automatically to the new billing account.

**3. Rule Integration**
OpenL rules determine parameter values based on business logic including customer type, policy characteristics, and jurisdictional requirements.

**4. Data Import Support**
System supports bulk account creation with default parameters through standardized import definitions (CFGEN-BAC-0000).


**Acceptance Criteria:**

**1. Automated Parameter Assignment**
Given a new billing account is created, When OpenL rules are evaluated, Then default invoicing parameters are applied without manual intervention.

**2. Rule-Driven Configuration**
Given account attributes are provided, When system queries OpenL repository, Then correct parameter set matching business rules is retrieved and assigned.

**3. Import Consistency**
Given billing accounts are imported in bulk, When default parameters are applied, Then all accounts receive consistent invoicing configuration per their respective rule criteria.

**4. Parameter Validation**
Given default parameters are assigned, When account setup completes, Then system confirms all mandatory invoicing parameters are populated correctly.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=508667630"
]

---

#### Feature: Validate Billing Account Creation Rules
- **Role**: Billing Administrator
- **Action**: validate and enforce billing account creation prerequisites before member record transition
- **Value**: incomplete or invalid billing configurations are prevented, ensuring data integrity and operational compliance

**Description:**

As a **Billing Administrator**,
I want to **validate and enforce billing account creation prerequisites before member record transition**,
So that **incomplete or invalid billing configurations are prevented, ensuring data integrity and operational compliance**


**Key Capabilities:**

**1. Account Prerequisite Validation**
Upon submission, system validates billing account selection and modality designation status before processing transitions.

**2. Creation Completeness Check**
When account creation workflow is active, system enforces completion of all required information elements before allowing record persistence.

**3. Conditional Error Handling**
If prerequisites fail, system prevents transition execution and communicates specific deficiency categories (missing selection, incomplete creation, or missing modality).

**4. Transaction Integrity Protection**
When validation passes but execution encounters system issues, system rolls back partial changes and flags the transaction failure.


**Acceptance Criteria:**

**1. Complete Prerequisites Success**
Given billing account is selected and modality is designated, When user submits transition request, Then system processes member record transition to individual direct billing successfully.

**2. Missing Account Selection**
Given billing account is not selected, When user attempts transition, Then system blocks processing and indicates account selection deficiency.

**3. Incomplete Creation Workflow**
Given account creation is in-progress with incomplete required information, When user attempts persistence, Then system prevents creation and identifies missing mandatory elements.

**4. Execution Failure Handling**
Given validation passes but system encounters processing error, When transition executes, Then system prevents partial completion and notifies of transaction failure.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=543269494"
]

---

#### Feature: Publish Billing Account Lifecycle Events
- **Role**: Billing Administrator
- **Action**: publish lifecycle events for billing accounts created through multiple channels
- **Value**: downstream systems remain synchronized with billing account state changes and can trigger dependent processes automatically

**Description:**

As a **Billing Administrator**,
I want to **publish lifecycle events for billing accounts created through multiple channels**,
So that **downstream systems remain synchronized with billing account state changes and can trigger dependent processes automatically**


**Key Capabilities:**

**1. Billing Account Creation Event Capture**
System captures account creation events from automated 3rd party requests, manual Individual Direct workflows, and Flexi Bill processes, ensuring all creation channels publish standardized lifecycle events.

**2. Customer Context Publication**
System publishes customer attributes distinguishing Individual versus Organization customer types with corresponding customer numbers referenced from Billing Domain Model.

**3. Event Distribution**
System broadcasts lifecycle events to subscribed downstream systems enabling real-time synchronization and triggering dependent business processes across enterprise architecture.


**Acceptance Criteria:**

**1. Multi-Channel Event Publication**
Given billing account created via any channel (3rd party, manual, Flexi Bill), When creation completes successfully, Then system publishes lifecycle event containing account identifier and creation context.

**2. Customer Attribute Accuracy**
Given billing account associated with customer, When lifecycle event is published, Then event payload includes correct customer number and type (Individual/Organization) per Billing Domain Model.

**3. Event Delivery Guarantee**
Given lifecycle event published, When downstream systems are available, Then all subscribed systems receive event within defined SLA timeframe without data loss.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=511129468"
]

---

#### Feature: Track Billing Account Hold History
- **Role**: Billing Administrator
- **Action**: manage and track billing account hold lifecycle with full historical audit trail
- **Value**: I can prevent inappropriate billing activities during specific periods while maintaining complete compliance documentation and operational transparency

**Description:**

As a **Billing Administrator**,
I want to **manage and track billing account hold lifecycle with full historical audit trail**,
So that **I can prevent inappropriate billing activities during specific periods while maintaining complete compliance documentation and operational transparency**


**Key Capabilities:**

**1. Hold Configuration Management**
User initiates hold creation or modification by providing hold classification, business justification, and temporal boundaries for the restriction period

**2. Temporal Validation & Enforcement**
System enforces hold effective dates align with current operational timeframe and expiration periods exceed activation dates to prevent invalid hold windows

**3. Hold State Administration**
Upon existing active restrictions, user is able to modify hold parameters within business rules; system prevents alteration of already-effective hold start dates

**4. Historical Audit Trail Access**
User retrieves comprehensive hold history including hold classification, justification details, temporal parameters with precise timestamps, and performer identification for compliance verification


**Acceptance Criteria:**

**1. Valid Hold Creation**
Given no active hold exists, When user submits hold configuration with future-dated or current effective date and valid expiration date, Then system persists hold record and displays success confirmation

**2. Temporal Boundary Validation**
Given user attempts hold submission, When effective date precedes current date or expiration date precedes effective date, Then system prevents submission and indicates temporal constraint violation

**3. Active Hold Modification Protection**
Given active hold exists with past effective date, When user accesses modification interface, Then system displays hold details with effective date immutable to prevent historical data alteration

**4. Complete Audit Trail Retrieval**
Given hold history exists, When user accesses historical records, Then system displays chronological hold records with classification, justification, temporal parameters, and performer attribution excluding removed pending holds


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=609524856"
]

---

#### Feature: Filter Available Billing Accounts for Setup
- **Role**: Billing Administrator
- **Action**: associate unassigned policy classes with available billing accounts
- **Value**: I can establish proper billing relationships and enable accurate premium collection across multiple class segments

**Description:**

As a **Billing Administrator**,
I want to **associate unassigned policy classes with available billing accounts**,
So that **I can establish proper billing relationships and enable accurate premium collection across multiple class segments**


**Key Capabilities:**

**1. Initiate Class-Account Association**
User accesses association workflow during billing setup to view unassigned policy classes and available billing accounts

**2. Review Eligible Classes**
System displays only master policy classes not yet associated with billing accounts as selectable options

**3. Evaluate Available Billing Accounts**
System presents billing accounts eligible for association with relevant account attributes (status, frequency, payment method)

**4. Execute Association**
User selects target classes and billing accounts, then submits association for system processing
    4.1 If new account needed, user initiates account creation workflow and returns to complete association
    4.2 If cancellation requested, system confirms intent before discarding changes


**Acceptance Criteria:**

**1. Eligible Class Filtering**
Given unassociated classes exist, When user initiates association workflow, Then system displays only classes without existing billing account relationships

**2. Account Availability Validation**
Given billing accounts exist, When user reviews account options, Then system presents only accounts eligible for new class associations with complete account details

**3. Successful Association**
Given valid selections, When user confirms association, Then system creates class-account relationships and returns user to billing setup context

**4. Inline Account Creation**
Given user has creation privileges, When new account is needed, Then system enables account creation workflow and makes new account immediately available for selection

**5. Cancellation Protection**
Given unsaved changes exist, When user cancels operation, Then system requests confirmation before discarding association data


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=534816369"
]

---

#### Feature: Display Billing Account Status and Tags
- **Role**: Billing Administrator
- **Action**: view comprehensive billing account details across customer hierarchies
- **Value**: I can quickly assess account status, bill types, and consolidated views to support accurate billing decisions and customer inquiries

**Description:**

As a **Billing Administrator**,
I want to **view comprehensive billing account details across customer hierarchies**,
So that **I can quickly assess account status, bill types, and consolidated views to support accurate billing decisions and customer inquiries**


**Key Capabilities:**

**1. Billing Portfolio Access**
User accesses customer billing tab to initiate account review.

**2. Customer-Type Based Display**
System renders billing accounts and consolidated hierarchy views based on customer classification (organization or individual).
    2.1 Organization customers display both account lists and location-level consolidated views
    2.2 Individual customers display only direct billing accounts

**3. Bill-Type Differentiation**
System adapts account card presentation according to bill type (List Bill, Self-Bill, Individual Direct).

**4. Detailed Account Expansion**
User expands account cards to access transaction history, payment summaries, invoice details, and premiums due.

**5. Action Navigation**
User navigates to contextual actions for payments, invoices, or billing periods from expanded views.


**Acceptance Criteria:**

**1. Customer Type Recognition**
Given a logged-in user, When accessing an organization customer portfolio, Then system displays both billing accounts section and consolidated hierarchy views.

**2. Bill Type Rendering**
Given multiple billing accounts exist, When system loads account cards, Then each card reflects specifications matching its bill type classification.

**3. Expansion Validation**
Given a closed billing account card, When user expands the card, Then system reveals detailed transactional and status information aligned with bill type.

**4. Individual Customer Constraints**
Given an individual customer portfolio, When billing tab loads, Then system excludes consolidated billing views and displays only direct accounts.

**5. Navigation Integrity**
Given an expanded account view, When user selects subsection links, Then system transitions to corresponding payment, invoice, or billing period interfaces.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=501292726"
]

---

#### Feature: Manage Billing Account Actions Menu
- **Role**: Billing Administrator
- **Action**: access and execute contextual billing operations for selected billing accounts
- **Value**: I can efficiently manage billing lifecycle activities through a unified action interface, reducing manual navigation and ensuring appropriate actions based on account context

**Description:**

As a **Billing Administrator**,
I want to **access and execute contextual billing operations for selected billing accounts**,
So that **I can efficiently manage billing lifecycle activities through a unified action interface, reducing manual navigation and ensuring appropriate actions based on account context**


**Key Capabilities:**

**1. Billing Account Selection**
User navigates to billing home page and selects target billing account from available accounts

**2. Contextual Action Discovery**
System evaluates account type, status, and business rules to present applicable operations for the selected billing account

**3. Invoice and Billing Document Generation**
User initiates invoice generation, draft bill creation, or payment request transmission for upcoming billing periods

**4. Payment and Credit Application**
User processes payments through strategy-based allocation, manual allocation, or file-based allocation; applies customer credits or initiates refunds from unapplied balances

**5. Account Maintenance Operations**
User updates account attributes including payor details, invoice schedules, or billing account holds

**6. Information Retrieval**
User accesses modal premium details, payroll deduction calendars, or member records associated with the billing account


**Acceptance Criteria:**

**1. Action Menu Authorization**
Given authenticated user with valid billing permissions, When user selects billing account action menu, Then system displays only authorized operations based on user role and account context

**2. Account Type Differentiation**
Given billing accounts of different types exist, When user accesses action menu, Then system presents type-specific operations (e.g., payment allocation strategies for IPA versus Self-Bill accounts)

**3. Operation Initiation**
Given available action selected from menu, When user confirms operation, Then system transitions to corresponding workflow with account context preserved

**4. Business Rule Compliance**
Given billing account with specific status or holds, When system evaluates available actions, Then restricted operations are excluded from action menu

**5. Multi-Account Support**
Given multiple billing accounts under customer, When user switches between accounts, Then action menu refreshes with account-specific operations without session disruption


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=490605094"
]

---

### Epic: Product & Service Configuration

#### Feature: Configure Product Lifecycle Attributes (Effective/Expiration Dates)
- **Role**: Billing Administrator
- **Action**: configure and manage product lifecycle dates to control service validity periods
- **Value**: the system accurately tracks product availability and automatically enforces expiration policies

**Description:**

As a **Billing Administrator**,
I want to **configure and manage product lifecycle dates to control service validity periods**,
So that **the system accurately tracks product availability and automatically enforces expiration policies**


**Key Capabilities:**

**Product Expiration Configuration**
User is able to establish mandatory expiration dates for service products during setup, ensuring all products have defined lifecycle boundaries.

**Lifecycle Date Validation**
Upon date entry, system validates temporal data integrity to prevent invalid or inconsistent product availability periods.

**Expiration Tracking**
System maintains expiration date attributes enabling automated monitoring and downstream enforcement of product lifecycle rules.


**Acceptance Criteria:**

**Expiration Date Requirement**
Given a new service product configuration, When the administrator attempts to save without an expiration date, Then the system prevents record creation until valid date is provided.

**Valid Date Capture**
Given an expiration date entry, When the date format is valid, Then the system persists the value and enables lifecycle tracking.

**Post-Configuration State**
Given a completed product setup, When expiration date is saved, Then the system makes the product available for billing operations within the defined validity period.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=211620178"
]

---

#### Feature: Manage Billable Service Periods Within Product Terms
- **Role**: Billing Administrator
- **Action**: configure and maintain billable service periods aligned to product term lifecycles
- **Value**: service billing accurately reflects active product coverage timeframes and ensures revenue recognition integrity

**Description:**

As a **Billing Administrator**,
I want to **configure and maintain billable service periods aligned to product term lifecycles**,
So that **service billing accurately reflects active product coverage timeframes and ensures revenue recognition integrity**


**Key Capabilities:**

**1. Service Period Initialization**
Upon service product term activation, system establishes billable service period collection spanning effective to expiration dates.

**2. Temporal Boundary Enforcement**
System validates service periods align with parent product term boundaries and prevents period creation outside valid term timeframes.

**3. Period-Product Association Management**
User is able to associate billable service periods with specific service product terms maintaining mandatory relationships.

**4. Lifecycle Synchronization**
When product term dates change, system adjusts associated service period collection to maintain temporal alignment.


**Acceptance Criteria:**

**1. Period Collection Creation**
Given a service product term is activated, When effective and expiration dates are established, Then system creates billable service period collection spanning the complete term duration.

**2. Mandatory Association Validation**
Given billable service periods exist, When attempting to persist records, Then system prevents storage if product term association is missing.

**3. Temporal Boundary Compliance**
Given defined product term dates, When service periods are configured, Then system rejects periods extending beyond term expiration or preceding effective dates.

**4. Lifecycle Integrity**
Given product term dates are modified, When changes are saved, Then associated service period boundaries automatically adjust to maintain alignment.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=220202100"
]

---

#### Feature: Create and Associate Billing Products with Billing Accounts
- **Role**: Billing Administrator
- **Action**: create and associate billing products with customer accounts
- **Value**: customers can be invoiced accurately for selected products and services

**Description:**

As a **Billing Administrator**,
I want to **create and associate billing products with customer accounts**,
So that **customers can be invoiced accurately for selected products and services**


**Key Capabilities:**

**Customer Account Establishment**
User is able to provision billing customers by providing identity information and billing address details. System validates organizational or individual party data and establishes billing entity in the hierarchy.

**Product Portfolio Selection**
User is able to define product offerings by specifying product type, pricing terms, currency, and coverage periods. System validates product configuration and associates items with the billing customer account.

**Billing Arrangement Configuration**
User is able to designate payment allocation method and billing type. When list-bill is selected, system enables group or individual premium accounting options.

**Multi-Location Management**
User is able to establish location relationships for organizational customers. System creates hierarchical associations and enables location-specific product assignment.

**Product Basket Finalization**
User is able to submit the product configuration for issuance. System prevents submission if billing type conflicts exist across selected products and redirects to purchase workflow upon validation.


**Acceptance Criteria:**

**Successful Customer Provisioning**
Given valid customer identity and address data, When the billing administrator submits the customer record, Then the system creates a billing party entity and displays it in the customer registry sorted by creation date.

**Product Association Validation**
Given multiple products in the shopping basket, When billing types are inconsistent (mixed self-bill and list-bill), Then the system prevents proceeding to issuance until all products share the same billing type.

**Required Data Enforcement**
Given incomplete product information (missing type, amount, dates, or currency), When the user attempts to add the product, Then the system blocks submission and indicates required fields.

**Location Hierarchy Establishment**
Given an organizational customer, When locations are added with valid party information, Then the system establishes hierarchical relationships and enables location-specific product association.

**Currency and Pricing Integrity**
Given a positive monetary amount and valid currency selection, When the product is added, Then the system accepts the pricing configuration and displays annual calculated amounts.

**Date Range Consistency**
Given effective and expiration dates, When expiration precedes effective date, Then the system rejects the configuration and requires corrected date sequencing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=435403913"
]

---

#### Feature: Configure Billing Setup Options (Single Bill, Bill per Class, Bill per Location/Division)
- **Role**: Billing Administrator
- **Action**: configure billing account consolidation strategy for third-party products
- **Value**: products are properly organized under appropriate billing accounts with standardized invoice generation

**Description:**

As a **Billing Administrator**,
I want to **configure billing account consolidation strategy for third-party products**,
So that **products are properly organized under appropriate billing accounts with standardized invoice generation**


**Key Capabilities:**

**1. Default Configuration Enforcement**
System applies Single Bill configuration automatically for all Flexi Bill billing accounts, consolidating all third-party products under one account per customer.

**2. Automatic Billing Account Provisioning**
Upon third-party product request with Single Bill enabled, system triggers automatic Flexi Bill billing account creation without manual intervention.

**3. Configuration Scope Validation**
System restricts billing setup options to Flexi Bill accounts only, excluding empty, list bill, self bill, and direct bill account types from configuration rules.

**4. Alternate Configuration Blocking**
When alternative billing structures (per product/class/location/division/payroll frequency) are attempted, system prevents activation and maintains Single Bill default configuration.


**Acceptance Criteria:**

**1. Single Bill Default Behavior**
Given a new customer requires Flexi Bill billing account, When third-party product provisioning initiates, Then system automatically creates one consolidated billing account with Single Bill configuration enabled.

**2. Configuration Constraint Enforcement**
Given Single Bill is the only supported option, When administrator attempts to enable alternative billing structures, Then system prevents configuration changes and maintains default Single Bill setting.

**3. Account Type Scope Limitation**
Given billing setup configuration is requested, When billing account type is not Flexi Bill, Then system excludes account from configuration rules and processes according to account-specific logic.

**4. Automatic Provisioning Trigger**
Given Single Bill configuration is active, When third-party product request is received, Then system completes billing account creation automatically without routing to manual setup workflow.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=800753240"
]

---

#### Feature: Set Default Modality Based on Payroll or Invoicing Frequency
- **Role**: Billing Administrator
- **Action**: configure default billing modality based on payroll and invoicing frequency during policy transition
- **Value**: the system automatically applies the correct payment schedule aligned with existing billing arrangements

**Description:**

As a **Billing Administrator**,
I want to **configure default billing modality based on payroll and invoicing frequency during policy transition**,
So that **the system automatically applies the correct payment schedule aligned with existing billing arrangements**


**Key Capabilities:**

**1. Billing Account Association Evaluation**
When policy transition is initiated, system evaluates member's association with List Bill billing account to determine modality derivation path.

**2. Payment Allocation Mode Decision Processing**
Upon confirming List Bill association, system examines payment allocation mode (Group vs Individual Premium Accounting) to select appropriate frequency source.
    2.1 For Group mode, system prioritizes invoicing frequency when modality-based, otherwise defaults to payroll frequency
    2.2 For Individual Premium Accounting mode, system uses payroll frequency exclusively

**3. Modality Value Assignment**
System extracts frequency value from determined source, assigns as current modality, and sets identical default modality value for billing setup completion.


**Acceptance Criteria:**

**1. List Bill Group Mode with Modality-Based Invoicing**
Given member is associated with List Bill account using Group payment allocation and invoicing frequency is modality-based, When policy transition occurs, Then system sets default modality equal to invoicing frequency value.

**2. Individual Premium Accounting Mode Modality Determination**
Given member is associated with List Bill account using Individual Premium Accounting mode, When system evaluates frequency sources, Then system ignores invoicing frequency and derives modality exclusively from payroll frequency.

**3. Non-List Bill Account Modality Defaulting**
Given member record has no List Bill billing account association, When modality determination executes, Then system bypasses payment allocation logic and applies payroll frequency directly as default modality.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=543261210"
]

---

#### Feature: Support Full Admin Product Hierarchy (Master Policy to Coverage)
- **Role**: Billing Administrator
- **Action**: configure and maintain multi-level product hierarchies from master policies through certificates to individual coverage items
- **Value**: I can accurately structure complex insurance billing relationships and ensure proper premium allocation across organizational levels

**Description:**

As a **Billing Administrator**,
I want to **configure and maintain multi-level product hierarchies from master policies through certificates to individual coverage items**,
So that **I can accurately structure complex insurance billing relationships and ensure proper premium allocation across organizational levels**


**Key Capabilities:**

**Master Policy Foundation**
User is able to establish the top-level billing product representing the master policy with its primary product item configuration.

**Certificate Branch Creation**
User is able to create multiple certificate-level billing products beneath the master policy, each containing certificate product items with designated monetary amounts.

**Coverage Item Assignment**
User is able to associate individual coverage product items to each certificate with specific premium amounts, maintaining complete three-tier hierarchy integrity.

**Hierarchy Navigation**
User is able to traverse relationships across master policy, certificate, and coverage levels to view complete product structure and billing allocations.


**Acceptance Criteria:**

**Master Policy Establishment**
Given a new group insurance product, When the administrator creates a master policy billing product, Then the system establishes the foundational hierarchy level with associated product item.

**Multi-Certificate Support**
Given an active master policy, When multiple certificates are added, Then each certificate maintains independent product items and monetary amounts while preserving parent relationship.

**Coverage Allocation**
Given a certificate within the hierarchy, When coverage items are assigned with amounts, Then the system maintains accurate three-level relationships and billing amounts.

**Hierarchy Integrity**
Given a complete product hierarchy, When any level is modified, Then dependent relationships and amounts remain consistent across all hierarchy levels.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=473406620"
]

---

#### Feature: Enforce Master Quote Purchase Prerequisite for Member Quotes
- **Role**: Billing Administrator
- **Action**: enforce master quote purchase requirements before member quote activation
- **Value**: organizational compliance and revenue integrity are maintained through proper quote hierarchy validation

**Description:**

As a **Billing Administrator**,
I want to **enforce master quote purchase requirements before member quote activation**,
So that **organizational compliance and revenue integrity are maintained through proper quote hierarchy validation**


**Key Capabilities:**

**Quote Hierarchy Validation**
System validates master quote purchase status when member quote submission is initiated. Navigation capabilities enable administrators to traverse between master and member quote contexts for verification.

**Prerequisite Enforcement Gate**
Upon member quote purchase attempt, system verifies active master quote existence and purchased status before allowing transaction progression.

**Cross-Reference Navigation**
Administrators access bidirectional links between master and dependent member quotes to review relationship status and coverage alignment.

**Exception Handling**
When master quote purchase prerequisite is not satisfied, system blocks member quote activation and provides navigation to required master quote resolution path.


**Acceptance Criteria:**

**Master Quote Validation**
Given a member quote purchase request, when the associated master quote has not been purchased, then the system prevents member quote activation and provides navigation to the master quote.

**Successful Hierarchy Compliance**
Given a purchased master quote exists, when member quote purchase is initiated, then the system allows transaction completion and establishes quote relationship linkage.

**Administrative Navigation**
Given quote hierarchy validation requirements, when administrators access quote records, then bidirectional navigation links enable traversal between master and member quotes for verification purposes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=516399708"
]

---

#### Feature: Associate Member Policies with Billing Accounts by Business Unit and Class
- **Role**: Billing Administrator
- **Action**: associate member policies with billing accounts based on organizational hierarchy and classification rules
- **Value**: billing relationships are accurately established and maintained according to business unit structure and product class requirements

**Description:**

As a **Billing Administrator**,
I want to **associate member policies with billing accounts based on organizational hierarchy and classification rules**,
So that **billing relationships are accurately established and maintained according to business unit structure and product class requirements**.


**Key Capabilities:**

**1. Policy Relationship Identification**
System identifies master policies and associated member policies through policy linkages, retrieving premium attributes including plan, coverage, class, tier, and billing amounts.

**2. Customer Entity Resolution**
System determines individual customers as policy members and organizational customers as group sponsors and business units within the hierarchy.

**3. Business Unit-Based Association**
When billing operates at business unit level, system validates that account and member associations share matching business unit, class, and master product.
    3.1 System confirms both entities relate to identical organizational and classification parameters

**4. Group Sponsor-Based Association**
When billing operates at group sponsor level, system validates members relate to sponsors with matching class and master product.

**5. Census Class Validation**
System confirms census class linkages between organizational customers and master policies align with billing account structure.


**Acceptance Criteria:**

**1. Business Unit Association Validation**
Given billing is structured at business unit level, when the system processes member associations, then only relationships with matching business unit, class, and master product are established.

**2. Group Sponsor Association Validation**
Given billing is structured at group sponsor level, when the system processes member associations, then only relationships with matching class and master product for the sponsor are established.

**3. Policy Hierarchy Integrity**
Given master and member policy relationships exist, when associations are created, then system confirms valid policy linkages with complete premium attributes.

**4. Organizational Hierarchy Compliance**
Given business unit hierarchies are defined, when billing accounts are associated, then system validates organizational structure relationships are maintained.

**5. Association Completeness**
Given association rules are applied, when the listing is generated, then system includes only validated associations meeting all criteria.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=549098128"
]

---

#### Feature: Create Product Items for 3rd Party Systems (FlexiBill)
- **Role**: Billing Administrator
- **Action**: integrate and validate product items from external systems into FlexiBill billing accounts
- **Value**: I can ensure accurate product provisioning and billing alignment across multiple platforms while maintaining data integrity

**Description:**

As a **Billing Administrator**,
I want to **integrate and validate product items from external systems into FlexiBill billing accounts**,
So that **I can ensure accurate product provisioning and billing alignment across multiple platforms while maintaining data integrity**


**Key Capabilities:**

**1. Product Data Ingestion**
System receives product item details from third-party systems including identification, pricing, currency, and account assignment information

**2. Account Eligibility Verification**
System validates billing account existence, confirms FlexiBill compatibility, and ensures currency consistency between product and account
    2.1 Upon empty bill type, system automatically converts account to FlexiBill configuration
    2.2 When incompatible bill types or advance due date configurations detected, system rejects integration

**3. Product Item Registration**
System creates product item, assigns to validated billing account, and generates integration events for downstream systems


**Acceptance Criteria:**

**1. Successful Product Integration**
Given valid product data with matching account currency, When all eligibility criteria pass, Then system creates product item and publishes integration events

**2. Automatic Account Conversion**
Given empty bill type account, When product item submitted, Then system converts to FlexiBill with default invoicing parameters

**3. Currency Mismatch Prevention**
Given mismatched currencies, When validation executes, Then system rejects integration and returns specific error to source system

**4. Incompatible Account Rejection**
Given non-FlexiBill account types or advance due date configuration, When validation occurs, Then system prevents product creation with explicit error notification


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=805082538"
]

---

#### Feature: Manage Billing Setup Privileges (Create/Update/Remove)
- **Role**: Billing Administrator
- **Action**: configure and manage product privileges within billing setup for master policies
- **Value**: ensure appropriate products are available for billing operations while maintaining compliance and operational control

**Description:**

As a **Billing Administrator**,
I want to **configure and manage product privileges within billing setup for master policies**,
So that **I can ensure appropriate products are available for billing operations while maintaining compliance and operational control**.


**Key Capabilities:**

**1. Initiate Product Privilege Management**
User accesses billing setup configuration for master policy context to manage product associations.

**2. Configure Product Access Rights**
User defines which products are authorized for inclusion in billing setup, establishing eligibility parameters.

**3. Modify Existing Product Privileges**
User updates product associations when business rules or product availability changes.

**4. Remove Product Privileges**
User deactivates product associations from billing setup when products are discontinued or restricted.

**5. Validate Configuration Integrity**
System ensures product privilege changes do not conflict with active billing arrangements or policy terms.


**Acceptance Criteria:**

**1. Product Association Creation**
Given authorized access, when user adds product privileges, then system enables product for billing setup usage.

**2. Product Association Modification**
Given existing product privileges, when user updates parameters, then system applies changes while preserving historical configurations.

**3. Product Association Removal**
Given product privileges exist, when user removes association, then system prevents future billing setup usage without impacting active arrangements.

**4. Configuration Validation**
Given privilege changes, when system detects conflicts with active policies, then system prevents updates and notifies user.

**5. Audit Trail Maintenance**
Given any privilege modification, when changes are committed, then system records complete audit history.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=563874871"
]

---

#### Feature: Integrate Billing Setup Widget for Policy Purchase Flows
- **Role**: Billing Administrator
- **Action**: establish and validate billing arrangements during policy purchase workflows
- **Value**: policy issuance proceeds with verified payment structures and reduces billing setup errors

**Description:**

As a **Billing Administrator**,
I want to **establish and validate billing arrangements during policy purchase workflows**,
So that **policy issuance proceeds with verified payment structures and reduces billing setup errors**


**Key Capabilities:**

**Billing Setup Initiation**
User initiates billing arrangement using installation process reference and product identifier.

**Account Selection or Creation**
User creates new billing account or selects from existing eligible accounts within the billing context.

**Draft Persistence**
Upon choosing to save, system persists billing setup without enforcing account selection validation, allowing progressive completion.

**Finalization with Validation**
When issuing billing setup, system validates account selection completeness and prevents finalization if validation fails.

**Setup Confirmation**
System returns billing setup resource reference upon successful save or issue operation for downstream policy processing.


**Acceptance Criteria:**

**Draft Save Success**
Given billing setup is initiated, when user saves without finalizing, then system persists partial setup and returns billing setup reference regardless of account selection status.

**Issuance Validation Enforcement**
Given billing setup lacks account selection, when user attempts to issue, then system blocks finalization and returns validation failure message.

**Successful Issuance**
Given billing account is selected and validated, when user issues billing setup, then system finalizes setup and returns billing setup resource reference.

**Integration Continuity**
Given billing setup is finalized, when downstream policy processes retrieve setup reference, then billing configuration is accessible for premium calculation and payment processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=761796029"
]

---

#### Feature: Track Item Price Changes (Delta Calculation)
- **Role**: Billing Administrator
- **Action**: track and record price adjustments for billable items
- **Value**: I can maintain accurate pricing history and analyze revenue impact from pricing changes

**Description:**

As a **Billing Administrator**,
I want to **track and record price adjustments for billable items**,
So that **I can maintain accurate pricing history and analyze revenue impact from pricing changes**


**Key Capabilities:**

**1. Price Change Detection**
System identifies when billable item pricing is modified and triggers price change recording process.

**2. Delta Calculation & Storage**
System calculates the price difference between previous and new values, storing the delta as a precise decimal value for historical reference.

**3. Price History Maintenance**
System maintains comprehensive pricing change records to support pricing analysis, audit requirements, and revenue reconciliation activities.


**Acceptance Criteria:**

**1. Price Change Capture**
Given a billable item price is modified, When the change is saved, Then the system records the price delta accurately.

**2. Delta Precision**
Given pricing adjustments involve decimal values, When delta is calculated, Then the system maintains precision for financial accuracy.

**3. Historical Tracking**
Given multiple price changes occur, When pricing history is accessed, Then all deltas are retrievable for audit and analysis purposes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=220202290"
]

---

#### Feature: Define Billable Service Period Start and End Dates
- **Role**: Billing Administrator
- **Action**: establish the temporal boundaries for billable service periods
- **Value**: accurate billing cycles are enforced and revenue recognition aligns with service delivery timelines

**Description:**

As a **Billing Administrator**,
I want to **establish the temporal boundaries for billable service periods**,
So that **accurate billing cycles are enforced and revenue recognition aligns with service delivery timelines**


**Key Capabilities:**

**1. Service Period Initialization**
User is able to initiate a new billable service period within the billing subsystem.

**2. Start Date Definition**
User provides the commencement date that establishes when billing obligations begin for the service period.

**3. End Date Definition**
User specifies the termination date that defines when the billable service period concludes.

**4. Period Validation**
System validates temporal integrity ensuring start date precedes end date and dates conform to standard formats.

**5. Period Persistence**
Upon successful validation, system stores the service period boundaries as the baseline for billing calculations and charge assessments.


**Acceptance Criteria:**

**1. Valid Period Creation**
Given the billing subsystem is active, When the administrator submits complete start and end dates in valid format, Then the system persists the service period and enables billing calculations.

**2. Incomplete Data Prevention**
Given a service period is being defined, When required date information is missing or invalid, Then the system prevents submission and signals data insufficiency.

**3. Temporal Integrity Enforcement**
Given start and end dates are provided, When the end date precedes the start date, Then the system rejects the period definition due to logical inconsistency.

**4. Baseline Establishment**
Given a valid service period is stored, When billing processes execute, Then charges are calculated based on the defined temporal boundaries.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=220202106"
]

---

#### Feature: Associate Member Policies with Billing Accounts by Class Only
- **Role**: Billing Administrator
- **Action**: configure member policy associations with billing accounts using class-based matching rules
- **Value**: organizational billing aligns with product hierarchies and customer classifications for accurate premium calculation

**Description:**

As a **Billing Administrator**,
I want to **configure member policy associations with billing accounts using class-based matching rules**,
So that **organizational billing aligns with product hierarchies and customer classifications for accurate premium calculation**


**Key Capabilities:**

**1. Class-Based Association Validation**
System validates that billing account and member policy relate to the same census class within the organization customer structure.

**2. Product Hierarchy Alignment**
System verifies master product consistency across billing account and member policy through product hierarchy relationships (Product-Master Policy to Product-Member Policy).

**3. Multi-Entity Relationship Establishment**
System establishes linkages between Organization Customer, Master Policy, Member Policy, and Billing Account when class and product criteria are satisfied.

**4. Premium Attribute Capture**
System captures plan, coverage, class, tier, and premium amounts for billing calculation within the premium entity upon successful association.


**Acceptance Criteria:**

**1. Successful Class-Based Association**
Given a billing account and member policy both relate to the same census class and master product, When the association process executes, Then the system establishes the billing account relationship and enables premium calculation.

**2. Class Mismatch Prevention**
Given a billing account and member policy relate to different census classes, When association is attempted, Then the system prevents the relationship establishment and maintains data integrity.

**3. Product Hierarchy Validation**
Given a master product mismatch between billing account and member policy, When the system validates product hierarchy, Then the association fails and no billing relationship is created.

**4. Organization Customer Linkage**
Given valid class and product alignment, When the association completes, Then the system links both Master Policy and Member Policy to the billing account through the Organization Customer entity.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=538477243"
]

---

#### Feature: Configure Coverage Classes, Tiers, and Sub-Groups for Premium Calculation
- **Role**: Billing Administrator
- **Action**: configure classification structures and coverage segmentation rules to enable accurate premium calculation and invoice generation
- **Value**: premiums are calculated correctly based on member classifications, coverage tiers, and subgroup attributes, ensuring compliant and precise billing for List Bill products

**Description:**

As a **Billing Administrator**,
I want to **configure classification structures and coverage segmentation rules to enable accurate premium calculation and invoice generation**,
So that **premiums are calculated correctly based on member classifications, coverage tiers, and subgroup attributes, ensuring compliant and precise billing for List Bill products**


**Key Capabilities:**

**1. Classification Structure Establishment**
Define classification groups within master policy to segment billing based on organizational categories such as employee roles or statuses, restricted to List Bill product types

**2. Coverage Tier Configuration**
Establish coverage tiers determining groupings of insured individuals with distinct rate structures and provisions across product types

**3. Subgroup Attribute Definition**
Configure subgroup criteria including age bands, gender, tobacco usage, and geographic location to enable granular rate determination

**4. Member Distribution and Rate Assignment**
System retrieves classification data during policy issuance or amendments, distributes member records to appropriate billing accounts, and applies correct rates based on tier and subgroup assignments

**5. Premium Calculation Execution**
Calculate premiums using configured classifications, tiers, and subgroups across supported payment allocation modes

**6. Segmented Invoice Generation**
Generate separate invoices for each classification group under the single master policy


**Acceptance Criteria:**

**1. Classification Validation**
Given a List Bill product type policy, When classification groups are configured, Then system creates separate billing accounts for each defined class

**2. Tier and Subgroup Application**
Given member records with assigned tiers and subgroup attributes, When premium calculation executes, Then system applies rates corresponding to specific tier and subgroup combinations

**3. Product Type Restriction**
Given a non-List Bill product type, When attempting to enable Bill per Class feature, Then system prevents configuration and notifies administrator of product restriction

**4. Policy Change Handling**
Given policy amendments or updates, When classification information changes, Then system redistributes member records and recalculates premiums accordingly

**5. Invoice Segmentation**
Given multiple classes under single master policy, When billing period closes, Then system generates distinct invoices for each classification group

**6. Payment Mode Compatibility**
Given True Group or Individual Premium Accounting mode, When processing payments, Then system allocates amounts correctly within configured classification structure


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=811443517"
]

---

#### Feature: Support Multiple Premium Sequences for Policy Transactions
- **Role**: Billing Administrator
- **Action**: configure and apply multiple premium sequences to policy transactions with automated split calculations
- **Value**: premiums are accurately allocated across multiple holders throughout the policy lifecycle, ensuring correct billing for complex policy structures

**Description:**

As a **Billing Administrator**,
I want to **configure and apply multiple premium sequences to policy transactions with automated split calculations**,
So that **premiums are accurately allocated across multiple holders throughout the policy lifecycle, ensuring correct billing for complex policy structures**


**Key Capabilities:**

**Premium Sequence Initialization**
Upon receiving policy transaction events, system registers premium sequences and maps holders to billing product items while preserving historical data.

**Standard Period Split Calculation**
When transaction effective date aligns with modal period start and no billed invoices exist, system applies standard split rules to calculated modal premium amounts.

**Prorated Split Adjustment**
When transaction effective date falls mid-period, system automatically applies prorated modal premium split calculations to affected billing items.

**Billed Invoice Reconciliation**
If billed invoices exist for affected periods, system calculates amendments not yet billed at premium sequence level to maintain billing integrity.


**Acceptance Criteria:**

**Aligned Transaction Processing**
Given a policy transaction with effective date matching modal period start and no billed invoices exist, When premium sequences are processed, Then system applies standard splits to full modal premium amounts.

**Mid-Period Transaction Handling**
Given a transaction effective date not aligned with modal period start, When premium calculation occurs, Then system applies prorated split rules to affected billing items.

**Pre-Billed Period Management**
Given billed invoices exist for transaction effective period, When processing premium sequences, Then system calculates amendments not yet billed at sequence level without disrupting historical invoices.

**Historical Data Preservation**
Given any premium sequence update, When processing completes, Then system maintains previous sequence entities while reflecting current allocation information.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=696500203"
]

---

#### Feature: Retrieve Billing Product Item by Root ID and Revision Number
- **Role**: Billing Administrator
- **Action**: retrieve product configuration details using unique identifiers and version history
- **Value**: I can access accurate product definitions for billing operations, audit purposes, and system integrations

**Description:**

As a **Billing Administrator**,
I want to **retrieve product configuration details using unique identifiers and version history**,
So that **I can access accurate product definitions for billing operations, audit purposes, and system integrations**


**Key Capabilities:**

**Product Retrieval Request Initiation**
Authorized users or external systems initiate retrieval requests by providing the product's unique root identifier, with optional version specification for historical data access.

**Identifier and Authorization Validation**
System validates request parameters and confirms requester authorization before proceeding with data retrieval operations.

**Product Definition Lookup**
System locates the requested product configuration in the repository based on provided identifiers.
    3.1 When version unspecified, system retrieves the most current revision
    3.2 When version specified, system retrieves the exact historical revision

**Product Data Response Delivery**
System returns complete product item details including configuration attributes and metadata to the requesting party for downstream use.


**Acceptance Criteria:**

**1. Successful Latest Version Retrieval**
Given a valid product root identifier without version specification, When the retrieval request is processed, Then the system returns the most current product revision with complete configuration details.

**2. Successful Specific Version Retrieval**
Given valid product root identifier and version number, When both parameters are provided, Then the system returns the exact historical revision requested.

**3. Invalid Identifier Handling**
Given a non-existent root identifier or version number, When validation occurs, Then the system prevents data retrieval and notifies requester of entity unavailability.

**4. Authorization Enforcement**
Given an unauthorized requester, When attempting product retrieval, Then the system denies access and returns appropriate authentication error.

**5. Request Validation Failure**
Given malformed or incomplete request parameters, When input validation executes, Then the system rejects the request with descriptive validation error messaging.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=437881864"
]

---

#### Feature: Enforce Member Record Association with Billing Account Based on Master Policy Billing Details
- **Role**: Billing Administrator
- **Action**: configure member billing account associations based on master policy billing specifications
- **Value**: billing accounts accurately reflect policy structure and ensure premium calculations align with contractual arrangements

**Description:**

As a **Billing Administrator**,
I want to **configure member billing account associations based on master policy billing specifications**,
So that **billing accounts accurately reflect policy structure and ensure premium calculations align with contractual arrangements**


**Key Capabilities:**

**1. Policy Billing Configuration Retrieval**
System retrieves master policy billing specifications to determine member account association requirements

**2. Member Account Association Validation**
System validates member records against master policy billing parameters and enforces mandatory associations
    2.1 When associations are missing or invalid, system prevents account activation
    2.2 Upon detection of policy structure changes, system triggers reassociation workflow

**3. Billing Product Assignment**
System assigns appropriate billing products to member accounts based on master policy product definitions and premium calculation rules

**4. Association Audit Trail**
System maintains complete history of member-to-policy associations for compliance and reconciliation purposes


**Acceptance Criteria:**

**1. Master Policy Association Enforcement**
Given a master policy with defined billing details, When a member record is created or modified, Then system enforces association based on policy specifications

**2. Invalid Association Prevention**
Given incomplete or inconsistent master policy billing data, When member account setup is attempted, Then system blocks configuration and provides actionable guidance

**3. Premium Calculation Alignment**
Given established member-policy associations, When premium calculations execute, Then amounts reflect master policy billing terms and product definitions

**4. Association Change Management**
Given an active member billing account, When master policy billing details change, Then system recalculates associations and triggers necessary account updates


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=528748010"
]

---

#### Feature: Update Existing Billing Setup for List Bill and Self Bill Master Policies
- **Role**: Billing Administrator
- **Action**: modify billing configuration for existing master policies across organizational structures
- **Value**: the billing system accurately reflects current organizational needs and ensures proper premium collection workflows

**Description:**

As a **Billing Administrator**,
I want to **modify billing configuration for existing master policies across organizational structures**,
So that **the billing system accurately reflects current organizational needs and ensures proper premium collection workflows**


**Key Capabilities:**

**Entry and Master Policy Selection**
User is able to initiate billing setup updates either from billing home page or during self-bill master policy amendment process, then select the target master policy for configuration changes.

**Organizational Structure Configuration**
Upon master policy selection, system determines setup type (location, division, class combinations, payroll frequency, or single bill) and presents relevant organizational entities requiring billing account assignment.

**Billing Account Association**
User is able to assign existing billing accounts or create new accounts for organizational entities, with system filtering available accounts per business rules and setup type constraints.

**Payment Allocation and Calendar Management**
When payment allocation is individual-based, user configures payroll deduction calendars per billing account. When group-based, user selects modality options matching invoicing frequencies.

**Seasonal and Reporting Period Adjustments**
If seasonal billing is enabled, system automatically enforces modality constraints and default payroll calendar configurations. For self-bill types, user defines reporting periods for plan-coverage combinations.

**Validation and Confirmation**
System validates reporting period lengths against invoicing frequencies, payroll calendar completeness, and configuration consistency before persisting billing setup changes to master policy.


**Acceptance Criteria:**

**Master Policy Selection Validation**
Given user has appropriate privileges, When initiating update process, Then system displays only master policies with existing billing setups filtered per business rules.

**Setup Type Routing**
Given master policy is selected, When system evaluates setup type, Then appropriate configuration interface loads matching organizational structure (location/division/class/payroll frequency).

**Billing Account Assignment**
Given organizational entities lack billing accounts, When user assigns accounts, Then system prevents selection of accounts incompatible with master policy parameters and setup type.

**Seasonal Billing Constraints**
Given billing account has seasonal gap enabled, When user configures payment allocation, Then system enforces modality matching invoicing frequency and restricts payroll calendar modifications.

**Reporting Period Validation**
Given self-bill master policy with individual payment allocation, When user submits configuration, Then system rejects setup if reporting periods exceed billing account invoicing frequencies.

**Configuration Persistence**
Given all validations pass, When user confirms updates, Then system persists billing setup changes and associates new billing accounts with organizational entities without data loss.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=657898863"
]

---

#### Feature: Create Billing Products for Self-Bill Master Policies with Reporting Period Configuration
- **Role**: Billing Administrator
- **Action**: configure billing products and reporting periods for self-bill master policies across organizational structures
- **Value**: automated billing structures align with policy coverage hierarchies and invoicing requirements across locations, divisions, and classes

**Description:**

As a **Billing Administrator**,
I want to **configure billing products and reporting periods for self-bill master policies across organizational structures**,
So that **automated billing structures align with policy coverage hierarchies and invoicing requirements across locations, divisions, and classes**


**Key Capabilities:**

**1. Billing Product Initialization**
Upon master policy issuance or billing setup update, system validates self-bill configuration and creates billing product entity associated with master policy and selected billing accounts.

**2. Product Item Structure Definition**
System generates billing product items for each unique Plan-Coverage-Class-Tier-Sub-group combination based on billing setup type (Single Bill, Per Location/Division, Per Class).
    2.1 For Per Location/Division setup, system replicates product item structure across each organizational unit with separate account associations.

**3. Premium Calculation and Attribution**
System calculates modal premium amounts based on reporting period length, applies premium sequence splits, and sets Lives, Volume, Rate, and Rate Basis attributes from policy data.

**4. Account Association and Activation**
System associates billing products to organizational customer (policyholder) and billing accounts, sets invoicing start date, and establishes next payment due date per configuration rules.


**Acceptance Criteria:**

**1. Product Creation Validation**
Given a self-bill master policy in quote state with billing accounts selected, When user initiates policy issuance, Then system creates single billing product with effective date matching transaction effective date.

**2. Structural Hierarchy Accuracy**
Given billing setup type is Per Location/Division, When product items are generated, Then system creates identical Plan-Coverage-Class-Tier-Sub-group combinations for each location/division billing account with separate premium allocations.

**3. Premium Calculation Completeness**
Given reporting period lengths specified per Plan-Coverage combination, When modal amounts are calculated, Then system applies correct calculation method and premium sequence splits to all product items.

**4. Account Relationship Establishment**
Given billing product and items are created, When association process completes, Then system links products to policyholder organization, selected billing accounts, and sets invoicing start date automatically.

**5. Update Scenario Handling**
Given existing billing setup with new Location/Division enabled for invoicing, When update process executes, Then system creates additional product items for new organizational unit without duplicating existing product entity.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523017075"
]

---

#### Feature: Select Modality for Product Item Amount via Billing Product Group
- **Role**: Billing Administrator
- **Action**: determine the appropriate payment modality for a product item amount through billing product group resolution
- **Value**: product item amounts are calculated using the correct payment frequency aligned with the member's invoicing configuration and organizational hierarchy

**Description:**

As a **Billing Administrator**,
I want to **determine the appropriate payment modality for a product item amount through billing product group resolution**,
So that **product item amounts are calculated using the correct payment frequency aligned with the member's invoicing configuration and organizational hierarchy**


**Key Capabilities:**

**1. Master Policy & Hierarchy Resolution**
Identify parent master policy for the billing product item representing member coverage. Retrieve billing product hierarchy and all associated billing product groups linked to both product and party hierarchies.

**2. Main Insured Identification**
Locate the billing party with main insured role for the relevant product item to establish the reference point for modality determination.

**3. Invoicing Configuration Validation**
Validate if main insured's billing party has invoicing configuration linked to any retrieved billing product groups. Upon match, system assigns the modality from that billing product group.

**4. Hierarchical Traversal for Modality Resolution**
When no direct invoicing configuration exists, system traverses upward through billing party hierarchy to parent entities until identifying a billing product group with linked invoicing configuration, then applies that modality.


**Acceptance Criteria:**

**1. Direct Modality Assignment**
Given main insured has invoicing configuration linked to a billing product group, When system validates the linkage, Then modality from that billing product group is applied to product item amount calculation.

**2. Hierarchical Modality Resolution**
Given main insured lacks direct invoicing configuration, When system traverses billing party hierarchy upward, Then modality is derived from first parent billing party with valid billing product group linkage.

**3. Master Policy Hierarchy Validation**
Given a billing product item exists, When system initiates modality selection, Then parent master policy and complete billing product hierarchy are successfully retrieved as prerequisites.

**4. Configuration Integrity Check**
Given billing party hierarchy traversal is required, When no invoicing configuration is found at any hierarchy level, Then system prevents product item amount calculation and flags configuration gap.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=486253512"
]

---

#### Feature: Define Premium Attributes (Plan, Coverage, Class, Tier, Sub-Group, Rate Basis, Reporting Period)
- **Role**: Billing Administrator
- **Action**: configure premium calculation structures for List Bill and Self-Bill products
- **Value**: accurate premium determination and billing execution across diverse product portfolios

**Description:**

As a **Billing Administrator**,
I want to **configure premium calculation structures for List Bill and Self-Bill products**,
So that **accurate premium determination and billing execution across diverse product portfolios**


**Key Capabilities:**

**1. Entity and Coverage Foundation**
Establish core entity attributes including optional Plan Name and required Coverage Section (coverage number, product designation, policy identifier). For Self-Bill Master Policies, define reporting period for customer submissions.

**2. Premium Uniqueness Dimensions**
Configure optional identifiers (Class, Tier, Sub-Group) that segment populations and serve as premium calculation keys for Self-Bill scenarios.

**3. Self-Bill Calculation Parameters**
When billing type is Self-Bill, specify rate basis, lives, volume, and rate per unique combination of Plan + Coverage + Class + Tier + Sub-Group.

**4. Premium Amount Definition**
Define premium type, code, currency, and amounts (annual/monthly) at coverage or tier level. Required for Member Record (List Bill) and Master Policy (Self-Bill).

**5. Modal Premium Determination**
System calculates product modal amount based on modality (List Bill) or reporting period length (Self-Bill) upon billing product creation.

**6. Billing Type Adaptation**
Upon billing type selection, system enforces conditional logic: List Bill excludes reporting period and Self-Bill calculation elements; Self-Bill requires reporting period and premium calculation parameters.


**Acceptance Criteria:**

**1. Coverage Configuration Validation**
Given coverage section setup, When all required attributes (coverage number, data, product name, policy number) are provided, Then system accepts configuration and enables subsequent premium setup.

**2. Self-Bill Reporting Period Enforcement**
Given Self-Bill Master Policy configuration, When reporting period is omitted, Then system prevents configuration completion and requires reporting period definition.

**3. Premium Amount Level Consistency**
Given premium amount specification, When annual and monthly amounts are defined at different levels (coverage vs tier), Then system rejects configuration and enforces same-level specification.

**4. Premium Uniqueness Calculation**
Given Self-Bill product with multiple dimensions, When rate basis, rate, and optional lives/volume are defined per Plan + Coverage + Class + Tier + Sub-Group combination, Then system generates unique premium calculation keys.

**5. Modal Premium Automation**
Given billing product creation, When billing type is determined, Then system automatically calculates modal premium using modality (List Bill) or reporting period length (Self-Bill).

**6. List Bill Exclusion Logic**
Given List Bill configuration, When user attempts Self-Bill-specific elements (reporting period, rate basis), Then system suppresses these fields and requires only List Bill mandatory attributes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=521344525"
]

---

#### Feature: Generate BAM Message for Billing Account Premium Addition
- **Role**: Billing Administrator
- **Action**: add premium services to billing accounts and generate billing activation messages
- **Value**: billing accounts are updated with premium offerings and downstream billing systems are notified for seamless revenue capture

**Description:**

As a **Billing Administrator**,
I want to **add premium services to billing accounts and generate billing activation messages**,
So that **billing accounts are updated with premium offerings and downstream billing systems are notified for seamless revenue capture**


**Key Capabilities:**

**1. Premium Service Association**
User initiates premium addition operation for target billing account within account management workspace

**2. Billing Message Generation**
System generates BAM (Billing Account Management) message containing premium configuration and account identifiers for downstream billing platforms

**3. Transaction Confirmation**
Upon successful completion, system confirms premium activation with account reference and returns user to billing account management interface for continued operations


**Acceptance Criteria:**

**1. Successful Premium Addition**
Given billing account exists and premium is available, When user completes premium addition operation, Then system confirms premium association and displays account reference

**2. BAM Message Transmission**
Given premium addition succeeded, When system processes transaction, Then BAM message is generated and transmitted to billing platform

**3. Navigation Continuity**
Given premium addition completed, When confirmation displays, Then user automatically returns to billing account management interface


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=206865756"
]

---

#### Feature: Purchase Single Product via REST API with Service Periods and Premiums
- **Role**: Billing Administrator
- **Action**: purchase and configure a product with automated billing schedules through REST API
- **Value**: products are immediately billable with accurate premium allocations and payment installments across defined service periods

**Description:**

As a **Billing Administrator**,
I want to **purchase and configure a product with automated billing schedules through REST API**,
So that **products are immediately billable with accurate premium allocations and payment installments across defined service periods**


**Key Capabilities:**

**1. Product Purchase Submission**
System receives product purchase request containing product identification, temporal boundaries (effective/expiration dates), billing account association, payment plan reference, and service period definitions with premium breakdowns.

**2. Business Rule Validation**
System validates temporal consistency (expiration after effective date, service periods within product boundaries), billing account existence, due day configuration validity, premium amount non-negativity, and prevents overlapping service periods or duplicate billing account associations per price component.

**3. Premium and Billable Item Creation**
System stores product premiums as billable items linked to designated billing accounts, supporting per-service-period premium allocations and multiple price components (NET, TAX).

**4. Installment Schedule Generation**
System generates payment installments based on payment plan frequency, calculates due dates using anniversary logic aligned with configured due day (day-of-week or day-of-month), and distributes amounts across installment periods.

**5. Product Image Response**
System returns comprehensive product snapshot including identifiers (rootId, revisionNo), service periods with billable items, generated installment schedules with amounts and due dates, price changes, and billing account associations.


**Acceptance Criteria:**

**1. Successful Product Purchase**
Given valid product data with temporal consistency and existing billing account, When purchase request is submitted, Then system persists product, creates billable items, generates installment schedule, and returns 200 response with complete product image.

**2. Temporal Validation Enforcement**
Given product expiration date equal to or before effective date OR service period outside product boundaries, When purchase is attempted, Then system rejects request with appropriate error (bil0005, bil0006, bil0007) preventing data persistence.

**3. Billing Account Association Validation**
Given non-existent billing account reference OR multiple billing account associations to same price component within service period, When purchase request is processed, Then system returns error (bil0001, bil0010) without creating billable items.

**4. Installment Generation Logic**
Given valid payment plan and due day configuration, When product spans multiple billing cycles, Then system calculates installment due dates using anniversary logic and distributes premium amounts according to payment plan frequency.

**5. Service Period Integrity**
Given overlapping service periods OR service period end date before start date, When validation executes, Then system rejects request with error (bil0008, bil0009) preventing inconsistent billing periods.

**6. Premium Amount Validation**
Given negative premium amount, When system validates request, Then purchase is rejected with error bil0016 ensuring only valid positive charges are billable.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=217227789"
]

---

#### Feature: Associate Member Policies with Single Billing Account (Single Bill Setup)
- **Role**: Billing Administrator
- **Action**: associate member policies with a unified billing account for group insurance processing
- **Value**: organizational sponsors and insureds receive consolidated billing statements with accurate premium allocations

**Description:**

As a **Billing Administrator**,
I want to **associate member policies with a unified billing account for group insurance processing**,
So that **organizational sponsors and insureds receive consolidated billing statements with accurate premium allocations**


**Key Capabilities:**

**1. Policy-to-Account Integration**
User is able to establish relationships between non-billing system policy identifiers (master and member policies) and designated billing accounts with ownership assignments.

**2. Organizational Hierarchy Mapping**
Upon associating policies, system links organization customers (group sponsors) and individual customers (insureds) to the billing account structure using identification attributes.

**3. Product Configuration Alignment**
User is able to connect product entities at both master policy and member policy levels, capturing product types, modalities, and classification details.

**4. Premium Structure Application**
System applies premium amounts with plan details, coverage tiers, classes, subgroups, and monthly/annual payment schedules to the consolidated billing account for accurate invoicing.


**Acceptance Criteria:**

**1. Successful Policy Association**
Given valid master and member policy identifiers from non-billing system, When administrator initiates association with billing account, Then system establishes complete entity relationships including organizational sponsors and individual insureds.

**2. Product Hierarchy Validation**
Given product configurations at master and member policy levels, When association is processed, Then system validates product type consistency and maintains product modality and field attributes.

**3. Premium Allocation Accuracy**
Given established policy-account relationships, When premium amounts are applied, Then system correctly allocates coverage tiers, classes, and subgroups with corresponding monthly/annual premium calculations.

**4. Incomplete Data Prevention**
Given missing organization identification or customer attributes, When association is attempted, Then system prevents submission until all required entity relationships are complete.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=516400020"
]

---

### Epic: Premium Adjustments & Credit Lifecycle

#### Feature: Manage Premium Waiver Lifecycle for Member Records
- **Role**: Billing Administrator
- **Action**: process and apply premium waiver transactions for member records while maintaining billing integrity
- **Value**: members experiencing qualifying life events can maintain policy coverage without premium payment obligations, ensuring regulatory compliance and accurate financial reconciliation

**Description:**

As a **Billing Administrator**,
I want to **process and apply premium waiver transactions for member records while maintaining billing integrity**,
So that **members experiencing qualifying life events can maintain policy coverage without premium payment obligations, ensuring regulatory compliance and accurate financial reconciliation**


**Key Capabilities:**

**1. Premium Waiver Initiation & Validation**
System receives waiver request from Policy or Claims subsystem with effective date. Validates waiver eligibility and scope compliance before processing.

**2. Effective Date Determination & Member Record Update**
System establishes transaction effective date based on trigger source (Policy start date or Claims approval period). Updates member record data from determined effective date.

**3. Modal Premium Recalculation**
System recalculates modal premium amounts for affected periods, removing premium charges from waiver start date forward. When waiver begins mid-period, premium is prorated by days.

**4. Invoice & Balance Reconciliation**
System validates for pre-existing invoices in affected periods. Upon finding generated invoices, updates account amendments and balances. Performs payment unallocation and negative reconciliation if invoices were paid.

**5. Documentation & Audit Trail Generation**
System applies Premium Waiver flags to draft bills, invoices, and export documents. Creates billing account management activity and fires business events for affected invoice operations.


**Acceptance Criteria:**

**1. Waiver Application Success**
Given valid waiver request with effective date, When system processes transaction, Then premium charges are removed from effective date forward and modal premium amounts are recalculated for all impacted periods.

**2. Mid-Period Proration Handling**
Given waiver effective date falls mid-modal-period, When system calculates premium, Then prorated amount based on actual days is included in invoice with waiver flag applied to remaining period.

**3. Retroactive Invoice Adjustment**
Given invoices exist for periods within waiver effective date range, When system validates billing history, Then account amendments and balances are updated with payment unallocation and negative reconciliation performed.

**4. Audit Trail Completeness**
Given successful waiver processing, When reviewing system records, Then billing account activity is created, waiver flags appear in all billing documents, and business events are fired for invoice operations.

**5. Out-of-Scope Rejection**
Given waiver request identified as OOS type, When system validates waiver eligibility, Then process exits without applying waiver and no premium adjustments occur.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=831724055"
]

---

#### Feature: Calculate Modal Premium Adjustments for Waived Periods
- **Role**: Billing Administrator
- **Action**: process premium waiver transactions and recalculate modal premium amounts for affected billing periods
- **Value**: members with approved premium waivers maintain active coverage without billing obligations while ensuring accurate account reconciliation

**Description:**

As a **Billing Administrator**,
I want to **process premium waiver transactions and recalculate modal premium amounts for affected billing periods**,
So that **members with approved premium waivers maintain active coverage without billing obligations while ensuring accurate account reconciliation**


**Key Capabilities:**

**1. Premium Waiver Transaction Intake**
System receives member record premium waiver details via REST API, determining transaction effective date based on trigger source (Policy UI uses waiver start date; Claims UI uses approval period start date)

**2. Modal Premium Recalculation**
System recalculates modal premium amounts from waiver effective date forward, applying proration for partial periods and ensuring zero billing from waiver start date

**3. Invoice Validation and Reconciliation**
System validates existing invoices within waiver period; when invoices exist, updates billing account amendments and balances, triggering unallocation of excess payments and negative item reconciliation

**4. Billing Documentation Update**
System applies premium waiver flag to member record across invoice details, draft bills, and modal premium history views, maintaining audit trail with start date visibility


**Acceptance Criteria:**

**1. Waiver Effective Date Determination**
Given premium waiver initiated from Policy UI, When transaction processes, Then effective date equals member waiver start date; Given Claims UI trigger, Then effective date equals approval period start date

**2. Prorated Premium Calculation**
Given premium waiver effective mid-modal period, When recalculation executes, Then system prorates premium for actual coverage days and includes amount in current invoice with zero billing thereafter

**3. Pre-existing Invoice Reconciliation**
Given paid invoices exist within waiver period, When validation detects them, Then system updates billing amendments, recalculates account balance, unallocates excess payments, and reconciles negative items

**4. Audit Trail Maintenance**
Given successful waiver processing, When viewing modal premium history, Then premium waiver flag displays with start date without creating additional transaction records


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=831724055"
]

---

#### Feature: Process Premium Waiver Termination and Premium Restoration
- **Role**: Billing Administrator
- **Action**: terminate premium waiver arrangements and restore standard premium billing for eligible member records
- **Value**: accurate premium obligations are reinstated while maintaining policy continuity and account balance integrity

**Description:**

As a **Billing Administrator**,
I want to **terminate premium waiver arrangements and restore standard premium billing for eligible member records**,
So that **accurate premium obligations are reinstated while maintaining policy continuity and account balance integrity**


**Key Capabilities:**

**1. Premium Waiver Termination Initiation**
System receives premium waiver removal request from policy or claims channels with effective termination date

**2. Transaction Effective Date Determination**
System establishes transaction date based on trigger source: policy-driven waiver end date or claims approval period conclusion

**3. Premium Recalculation and Proration**
System recalculates modal premium amounts from waiver effective date forward; applies proration when termination occurs mid-period

**4. Historical Invoice Impact Assessment**
System validates previously generated invoices within affected period; updates amendments not yet billed and account balances when historical invoices exist

**5. Billing Document Regeneration**
System regenerates draft bills and invoices with restored premium amounts, premium waiver flags, and updated member record displays

**6. Activity Tracking and Balance Reconciliation**
System creates termination activity record, updates paid-to-date calculations, and fires business events for affected invoice operations


**Acceptance Criteria:**

**1. Successful Waiver Termination Processing**
Given an active premium waiver exists for a member record, When termination is triggered with valid end date, Then system removes waiver status and restores premium obligations from termination date forward

**2. Accurate Premium Restoration with Proration**
Given waiver termination occurs mid-modal period, When system recalculates premiums, Then prorated premium amounts reflect actual coverage days and include appropriate waiver flags in billing documents

**3. Retroactive Invoice Adjustment Handling**
Given previously generated invoices exist within affected period, When waiver is terminated, Then system updates amendments not yet billed values and recalculates account balances accordingly

**4. Out-of-Scope Waiver Exclusion**
Given premium waiver is classified as OOS type, When termination is attempted, Then system exits process without creating activity records or completing standard termination flow

**5. Audit Trail and Activity Documentation**
Given waiver termination completes successfully, When process concludes, Then system generates BAM activity record and displays historical waiver period with start and end dates in premium views


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=833651801"
]

---

#### Feature: Integrate Premium Waiver Triggers from Policy and Claims Systems
- **Role**: Billing Administrator
- **Action**: integrate premium waiver triggers from policy and claims systems to automate member premium adjustments
- **Value**: eligible members receive timely premium relief during qualifying events while maintaining billing integrity across all policy types

**Description:**

As a **Billing Administrator**,
I want to **integrate premium waiver triggers from policy and claims systems to automate member premium adjustments**,
So that **eligible members receive timely premium relief during qualifying events while maintaining billing integrity across all policy types**


**Key Capabilities:**

**1. Waiver Trigger Intake & Validation**
Upon receiving policy or claims subsystem trigger, system validates member record status, multi-policy affiliations, and ensures single trigger source per member to prevent conflicts.

**2. Eligibility Verification & Date Alignment**
System validates waiver effective dates against premium history records, verifies billing period continuity, and confirms claim filing timeframes when applicable.

**3. Premium Adjustment Calculation**
System calculates model premium adjustments based on waiver parameters, billing type (self-administered vs. standard), and suspension status while handling multi-policy scenarios.

**4. Invoice Generation & Member Update**
System generates adjusted invoices reflecting waiver credits, updates member records with waiver indicators, and synchronizes policy/claims subsystems with final status.

**5. Expiration Monitoring & Termination**
When waiver expiration period is reached, system processes termination procedures, restores standard premium billing, and notifies stakeholders of waiver conclusion.


**Acceptance Criteria:**

**1. Single-Source Trigger Enforcement**
Given a member has an active waiver from policy subsystem, When claims subsystem attempts to apply waiver, Then system rejects the duplicate trigger and maintains existing waiver source.

**2. Date Alignment Validation**
Given waiver effective date is received, When system compares against premium history records, Then processing continues only if dates align or reconciliation workflow is triggered for misalignment.

**3. Multi-Policy Scenario Handling**
Given member belongs to multiple policies, When waiver is applied, Then system applies waiver logic across all associated policies with appropriate premium adjustments per policy.

**4. Suspension Status Consideration**
Given policy has suspension with model premium, When waiver is processed, Then system applies differentiated calculation logic based on suspension versus active status.

**5. Expiration Processing**
Given waiver expiration period has passed, When system detects expiration, Then waiver terminates, standard premiums restore, and invoices reflect non-waived amounts for subsequent periods.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=591345826"
]

---

#### Feature: Generate and Adjust Invoices Reflecting Waived Premium Amounts
- **Role**: Billing Administrator
- **Action**: process premium waiver transactions and generate adjusted invoices reflecting waived amounts for qualifying member records
- **Value**: qualifying members receive accurate billing statements with waived premiums while maintaining policy continuity and financial accuracy across billing cycles

**Description:**

As a **Billing Administrator**,
I want to **process premium waiver transactions and generate adjusted invoices reflecting waived amounts for qualifying member records**,
So that **qualifying members receive accurate billing statements with waived premiums while maintaining policy continuity and financial accuracy across billing cycles**


**Key Capabilities:**

**Premium Waiver Transaction Intake**
System receives premium waiver details via policy or claims triggers, capturing member record identification and waiver effective date as transaction baseline.

**Premium Recalculation & Proration**
System recalculates modal premium amounts from waiver effective date forward. When waiver occurs mid-period, premium is prorated based on actual coverage days prior to waiver activation.

**Invoice Impact Assessment**
System validates whether generated invoices exist for periods affected by waiver. Upon detection, system updates billing amendments and account balances to reflect waived amounts.

**Adjusted Invoice Generation**
System generates invoices with recalculated premiums, premium waiver labels on affected line items, and member record details for all impacted billing periods.

**Financial Reconciliation**
System unallocates excess payments and reconciles negative items when waivers affect previously paid invoices, updating account balances per established calculation rules.

**Activity Documentation**
System creates billing account management activities and fires business events for waiver-affected invoice generation or discarding actions.


**Acceptance Criteria:**

**Valid Premium Waiver Processing**
Given active member record with approved waiver trigger, When system receives waiver transaction with effective date, Then premium is removed from effective date forward and modal amounts recalculated for affected periods without additional transaction records.

**Mid-Period Waiver Proration**
Given waiver effective date falls mid-modal period, When system calculates premium, Then prorated amount reflects actual coverage days prior to waiver with remaining period premium waived.

**Retroactive Invoice Adjustment**
Given generated invoices exist for periods within waiver effective range, When system processes waiver, Then billing amendments update, account balances adjust, and excess payments unallocate automatically.

**Invoice Document Accuracy**
Given premium waiver affects billing period, When system generates invoice or draft bill, Then member record appears with recalculated premium and 'Premium Waiver' label on waived line items.

**Out-of-Scope Waiver Handling**
Given premium waiver identified as out-of-scope type, When system validates waiver type, Then processing exits without balance updates or invoice adjustments.

**Audit Trail Maintenance**
Given premium waiver processing completes, When viewing member history, Then waiver flag displays with start date and business events fire for affected invoice generation or discarding actions.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=831724055"
]

---

### Epic: Payment Plans & Installment Configuration

#### Feature: Configure Payment Plan Templates
- **Role**: Billing Administrator
- **Action**: configure installment-based payment plan templates with frequency, limits, and lifecycle controls
- **Value**: policyholders can select structured payment arrangements that align with their financial needs while ensuring billing integrity

**Description:**

As a **Billing Administrator**,
I want to **configure installment-based payment plan templates with frequency, limits, and lifecycle controls**,
So that **policyholders can select structured payment arrangements that align with their financial needs while ensuring billing integrity**


**Key Capabilities:**

**1. Payment Plan Definition**
User is able to establish payment plan templates with unique identifiers, descriptions, and lifecycle dates (effective/expiration) to control availability.

**2. Installment Structure Configuration**
User is able to define payment frequency (monthly) and optionally constrain maximum installments (1-12) to align with policy terms and underwriting requirements.

**3. Due Date Logic Assignment**
User is able to specify due day calculation method (day of month or day of week) that aligns with plan type to ensure consistent billing cycles.

**4. Validation and Activation**
Upon configuration submission, system validates uniqueness, type alignment, code format, and frequency constraints before activating plan for policy assignment.


**Acceptance Criteria:**

**1. Valid Configuration Acceptance**
Given all required plan attributes are provided with valid formats, When the administrator submits the configuration, Then the system activates the plan and makes it available for policy assignment.

**2. Uniqueness Enforcement**
Given a plan code or URI already exists, When duplicate values are submitted, Then the system rejects the configuration and prevents creation.

**3. Type and Due Day Alignment**
Given a monthly plan type, When due day type is not set to day-of-month, Then the system prevents configuration.

**4. Installment Generation Constraints**
Given maximum installments are specified, When the value exceeds 12 or policy term duration, Then the system applies the lower constraint during installment creation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=211617686"
]

---

#### Feature: Create Payment Plan Configurations
- **Role**: Billing Administrator
- **Action**: define and establish reusable payment plan configurations with installment parameters
- **Value**: customers can be offered flexible payment options that align with organizational billing policies and operational constraints

**Description:**

As a **Billing Administrator**,
I want to **define and establish reusable payment plan configurations with installment parameters**,
So that **customers can be offered flexible payment options that align with organizational billing policies and operational constraints**


**Key Capabilities:**

**1. Payment Plan Initiation**
User is able to submit payment plan configuration specifying unique identifier, descriptive information, installment frequency parameters, maximum installment count, and plan classification

**2. Configuration Validation**
System validates business rule compliance for uniqueness, character restrictions, frequency constraints, installment limits, and plan type requirements
    2.1 Upon validation failure, system communicates specific constraint violations
    2.2 When required information is incomplete, system prevents progression

**3. Plan Persistence**
Upon successful validation, system persists approved payment plan configuration for operational use in billing cycles


**Acceptance Criteria:**

**1. Successful Configuration Creation**
Given performer provides valid payment plan parameters, When submission occurs, Then system persists configuration and confirms availability for assignment

**2. Uniqueness Enforcement**
Given duplicate plan identifier exists, When submission is attempted, Then system rejects configuration and communicates uniqueness violation

**3. Parameter Constraint Validation**
Given installment frequency or count exceeds defined thresholds, When validation executes, Then system prevents persistence and identifies constraint violations

**4. Required Information Completeness**
Given mandatory parameters are absent, When submission occurs, Then system blocks creation and identifies missing elements


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=206865660"
]

---

#### Feature: Retrieve Payment Plan Details
- **Role**: Billing Administrator
- **Action**: retrieve and review existing payment plan configurations
- **Value**: I can access complete payment plan information to support customer inquiries and billing operations

**Description:**

As a **Billing Administrator**,
I want to **retrieve and review existing payment plan configurations**,
So that **I can access complete payment plan information to support customer inquiries and billing operations**


**Key Capabilities:**

**Payment Plan Request Submission**
User is able to initiate retrieval by providing payment plan identifier through authorized access channel.

**Request Validation Processing**
System validates identifier completeness and verifies payment plan existence in the repository before proceeding.

**Payment Plan Data Retrieval**
Upon successful validation, system returns complete payment plan configuration including plan code, description, installment frequency, total installment count, and due day calculation rules.

**Error Handling**
When validation fails due to missing identifiers or non-existent plans, system provides specific diagnostic information to support resolution.


**Acceptance Criteria:**

**Successful Retrieval**
Given an authorized user with valid payment plan identifier, When retrieval is requested, Then system returns complete payment plan attributes including code, description, frequency, installment count, and due day type.

**Missing Identifier Handling**
Given request lacks required payment plan identifier, When validation occurs, Then system prevents retrieval and indicates missing attribute requirement.

**Non-Existent Plan Handling**
Given provided identifier references non-existent payment plan, When system performs lookup, Then retrieval fails with entity not found indication.

**Authorization Validation**
Given user lacks proper authorization credentials, When retrieval is attempted, Then system denies access before processing request.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=226347987"
]

---

#### Feature: Retrieve All Available Payment Plans
- **Role**: Billing Administrator
- **Action**: retrieve all configured payment plan options from the system
- **Value**: I can present customers with appropriate installment choices that match their financial needs and business policies

**Description:**

As a **Billing Administrator**,
I want to **retrieve all configured payment plan options from the system**,
So that **I can present customers with appropriate installment choices that match their financial needs and business policies**


**Key Capabilities:**

**Payment Plan Discovery Initiation**
User is able to request retrieval of all available payment plan configurations through authorized system access.

**Comprehensive Plan Catalog Retrieval**
System returns complete inventory of payment plans including identification codes, descriptive details, installment frequency schedules, total installment counts, and due date calculation rules.

**Authorization-Based Access**
Upon authentication validation, system grants access to payment plan repository based on user permissions.


**Acceptance Criteria:**

**Successful Plan Retrieval**
Given an authorized user requests payment plan data, When the system processes the retrieval request, Then all database-configured plans with complete attributes are returned.

**Authentication Enforcement**
Given an unauthenticated request, When plan retrieval is attempted, Then system denies access and prevents data exposure.

**Complete Data Structure**
Given successful retrieval, When payment plans are returned, Then each plan contains identification, description, frequency, installment count, and due date type attributes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=226347994"
]

---

#### Feature: Generate Installment Schedules Based on Monthly Payment Plans
- **Role**: Billing Administrator
- **Action**: generate installment schedules for monthly payment plans
- **Value**: product costs are distributed across predictable monthly payments aligned with customer billing cycles

**Description:**

As a **Billing Administrator**,
I want to **generate installment schedules for monthly payment plans**,
So that **product costs are distributed across predictable monthly payments aligned with customer billing cycles**


**Key Capabilities:**

**1. Installment Schedule Initiation**
Upon receiving a validated product purchase request with payment plan URI, system validates prerequisites including billing account existence, single service period alignment, and absence of manual due day overrides.

**2. Due Day Configuration Validation**
System verifies billing account has matching due day configuration for monthly payment plan type and confirms payment plan type is MONTHLY.

**3. Anniversary Date Calculation**
System identifies valid anniversary dates matching account due day within service period, starting from the later of service start date or transaction date.
    3.1 When specified day exceeds month length, system uses last day of month

**4. Installment Distribution**
System calculates installment count based on frequency and maximum installment cap, then distributes billable item amounts equally across installments with cent-level rounding applied to first installment.

**5. Schedule Persistence**
System creates installment entities with due dates and amounts, returns schedule in purchase response.


**Acceptance Criteria:**

**1. Successful Schedule Generation**
Given a valid monthly payment plan request without due day override, when billing account has matching due day configuration and valid anniversary dates exist within service period, then system generates installment schedule with due dates aligned to account due day and amounts distributed equally with rounding.

**2. Due Day Override Rejection**
Given a purchase request specifying due day parameter, when installment generation is initiated, then system returns bil0040 error and prevents schedule creation.

**3. Missing Configuration Handling**
Given no matching due day configuration exists for specified payment plan type, when validation occurs, then system returns bil0041 error and exits process.

**4. Anniversary Date Boundary Enforcement**
Given no anniversary date exists between transaction date and service period end, when date validation occurs, then system returns bil0002 error without generating installments.

**5. Installment Cap Application**
Given maximum installments configured in payment plan, when schedule generation calculates installment count, then system limits installments to lesser of calculated frequency-based count or configured maximum.

**6. Month-End Date Adjustment**
Given due day exceeds days in target month, when generating installment dates, then system assigns last day of month as due date.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213986249"
]

---

#### Feature: Manage Installment Due Date Calculations
- **Role**: Billing Administrator
- **Action**: configure and calculate installment anniversary dates for recurring payment plans
- **Value**: invoice generation aligns with customer billing cycles and payment commitments are scheduled accurately

**Description:**

As a **Billing Administrator**,
I want to **configure and calculate installment anniversary dates for recurring payment plans**,
So that **invoice generation aligns with customer billing cycles and payment commitments are scheduled accurately**


**Key Capabilities:**

**1. Billing Configuration Validation**
System validates billing account prerequisites including single due day entry with DAY_OF_MONTH type and MONTHLY payment plan alignment before processing.

**2. Anniversary Date Computation**
System calculates the next future date matching the configured day-of-month value from billing account due day settings during invoice generation.

**3. Configuration Mismatch Handling**
When prerequisites are not satisfied, system bypasses calculation and leaves anniversary date unpopulated without blocking invoice workflow.

**4. On-Demand Invoice Triggering**
User is able to initiate invoice generation processes that automatically incorporate calculated anniversary dates for installment scheduling.


**Acceptance Criteria:**

**1. Successful Anniversary Calculation**
Given a billing account with single DAY_OF_MONTH due day configuration and MONTHLY payment plan, When invoice generation is triggered, Then system populates anniversary date as the nearest future date matching the configured day value.

**2. Missing Configuration Handling**
Given billing account lacks valid due day configuration, When anniversary calculation executes, Then system leaves anniversary date empty and proceeds with invoice generation.

**3. Payment Plan Type Mismatch**
Given payment plan type does not equal MONTHLY or mismatches billing account due day type, When calculation is attempted, Then system skips anniversary date assignment without errors.

**4. Single Entry Enforcement**
Given billing account contains multiple due day entries, When validation occurs, Then system prevents anniversary calculation and logs configuration violation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=247215023"
]

---

#### Feature: Track Installment Lifecycle States
- **Role**: Billing Administrator
- **Action**: monitor and manage installment state transitions throughout the billing lifecycle
- **Value**: I can ensure accurate billing progression and maintain visibility into payment plan execution status

**Description:**

As a **Billing Administrator**,
I want to **monitor and manage installment state transitions throughout the billing lifecycle**,
So that **I can ensure accurate billing progression and maintain visibility into payment plan execution status**


**Key Capabilities:**

**1. Installment Initialization**
System creates installments in UNBILLED state upon payment plan activation, establishing baseline lifecycle tracking.

**2. Automated State Transition via Scheduled Processing**
When invoice generation job executes on schedule, eligible installments automatically transition from UNBILLED to BILLED state.

**3. Manual State Transition via On-Demand Processing**
User is able to trigger invoice generation for specific installments, causing immediate state transition from UNBILLED to BILLED.

**4. State Integrity Enforcement**
System prevents invalid state transitions and maintains single-direction progression (UNBILLED  BILLED only) throughout installment lifecycle.


**Acceptance Criteria:**

**1. Initial State Assignment**
Given a payment plan is activated, When installments are created, Then all installments are assigned UNBILLED state by default.

**2. Scheduled Invoice Generation State Transition**
Given installments exist in UNBILLED state, When automated invoice generation job executes, Then eligible installments transition to BILLED state successfully.

**3. On-Demand Invoice Generation State Transition**
Given user initiates manual invoice generation for specific installments, When invoice is successfully created, Then selected installments transition from UNBILLED to BILLED state.

**4. State Transition Validation**
Given an installment in any state, When state transition is attempted, Then system enforces unidirectional progression and rejects invalid transitions.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=211630013"
]

---

#### Feature: Classify Installment Types
- **Role**: Billing Administrator
- **Action**: classify and structure installment types within payment plans
- **Value**: payment schedules are properly configured with accurate deposit and installment designations to ensure correct billing execution

**Description:**

As a **Billing Administrator**,
I want to **classify and structure installment types within payment plans**,
So that **payment schedules are properly configured with accurate deposit and installment designations to ensure correct billing execution**


**Key Capabilities:**

**Installment Type Definition**
System supports classification of payment components as either Deposit or Installment types to establish payment plan structure.

**Payment Plan Composition**
User is able to configure payment plans comprising both deposit and installment components as unified payment entities.

**Due Date Association**
Each classified installment is assigned a specific due date representing its scheduled payment obligation.

**Amount Allocation**
System allocates defined portions of total owed amounts to each installment based on established payment plan terms.


**Acceptance Criteria:**

**Valid Installment Classification**
Given a payment plan is being configured, When an installment type is assigned, Then the system accepts only 'Deposit' or 'Installment' as valid classification values.

**Complete Payment Plan Structure**
Given installments are classified, When the payment plan is finalized, Then the system ensures all payment components collectively represent the total billable amount.

**Mandatory Type Assignment**
Given an installment is created, When the payment plan is saved, Then the system prevents completion if any installment lacks type classification.

**Due Date Requirement**
Given installment types are classified, When the payment schedule is established, Then each installment must have an associated due date before activation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=211630017"
]

---

#### Feature: Calculate Billed-To-Date for Installments
- **Role**: Billing Administrator
- **Action**: configure and generate installment schedules with accurate billed-to-date periods
- **Value**: premium payments are correctly allocated across billing periods and align with policy term coverage

**Description:**

As a **Billing Administrator**,
I want to **configure and generate installment schedules with accurate billed-to-date periods**,
So that **premium payments are correctly allocated across billing periods and align with policy term coverage**


**Key Capabilities:**

**1. Installment Schedule Initialization**
Upon product purchase, system divides billable premium into periodic installments based on payment plan configuration, creating installment entities in UNBILLED state with calculated due dates.

**2. Billed-To-Date Period Calculation**
System computes billableProductBilledToDate for each installment: first installment equals term effective date plus installment frequency; subsequent installments increment from previous billed-to-date by frequency; final installment aligns with term expiration date.

**3. Anniversary Date Adjustment**
When billing account uses monthly day-of-month configuration, system calculates anniversary date as nearest future date matching configured day, overriding standard frequency-based calculation.

**4. State Transition Management**
System transitions installments from UNBILLED to BILLED state upon bill statement generation, maintaining audit trail with creation and modification timestamps.


**Acceptance Criteria:**

**1. Standard Installment Period Allocation**
Given a billable product with 12-month term and monthly payment plan, When installment schedule is generated, Then first installment billed-to-date equals term effective date plus one month, and each subsequent installment increments by one month until final installment equals term expiration date.

**2. Anniversary Date Override**
Given billing account configured with day-of-month due date type matching monthly payment plan, When installment schedule is calculated, Then system assigns anniversary date as nearest future date matching configured day-of-month for all installments.

**3. Final Installment Boundary Alignment**
Given any payment plan configuration, When last installment is generated, Then billableProductBilledToDate must equal policy term expiration date regardless of frequency calculation.

**4. State Transition Validation**
Given installments in UNBILLED state, When bill statement generation occurs, Then all included installments transition to BILLED state with recorded modification timestamps.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=211622760"
]

---

#### Feature: Calculate Payroll Deduction Dates for Monthly Frequency
- **Role**: Billing Administrator
- **Action**: configure and calculate payroll deduction schedules based on monthly payment frequency
- **Value**: the system automatically generates accurate deduction dates aligned with payroll cycles, reducing manual calculation errors and ensuring timely premium collection

**Description:**

As a **Billing Administrator**,
I want to **configure and calculate payroll deduction schedules based on monthly payment frequency**,
So that **the system automatically generates accurate deduction dates aligned with payroll cycles, reducing manual calculation errors and ensuring timely premium collection**


**Key Capabilities:**

**1. Payroll Configuration Setup**
Administrator defines monthly frequency parameters including payroll deduction start date and designated payroll day (e.g., 10th of each month) for the billing arrangement.

**2. First Deduction Date Determination**
System identifies the nearest calendar date equal to or after the start date that complies with the specified payroll day.

**3. Subsequent Date Calculation**
System calculates recurring deduction dates by adding one calendar month to each previous deduction date.
    3.1 When calculated date does not exist in target month, system substitutes with the last valid day of that month
    3.2 When calculated date does not match specified payroll day, system advances to next compliant date


**Acceptance Criteria:**

**1. Valid First Deduction Date Assignment**
Given a start date of 4/9/2021 and payroll day of 10th, When calculation executes, Then first deduction date is set to 4/10/2021.

**2. Standard Monthly Progression**
Given first deduction of 4/10/2021, When calculating next occurrence, Then system generates 5/10/2021 by adding one calendar month.

**3. Non-Existent Date Handling**
Given deduction date of 1/31/2021, When calculating next month, Then system assigns 2/28/2021 as February 31st does not exist.

**4. Payroll Day Compliance Adjustment**
Given calculated date of 2/28/2021 with payroll day of 29th, When advancing one month, Then system adjusts 3/28/2021 forward to 3/29/2021 to maintain compliance.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=474652625"
]

---

#### Feature: Calculate Payroll Deduction Dates for Semi-Monthly Frequency
- **Role**: Billing Administrator
- **Action**: configure and calculate payroll deduction dates for semi-monthly payment plans
- **Value**: deduction schedules align with employer payroll cycles and ensure timely premium collection

**Description:**

As a **Billing Administrator**,
I want to **configure and calculate payroll deduction dates for semi-monthly payment plans**,
So that **deduction schedules align with employer payroll cycles and ensure timely premium collection**


**Key Capabilities:**

**1. Deduction Schedule Initialization**
User provides payroll deduction start date and specifies two monthly payroll days. System identifies the first eligible deduction date on or after the start date matching one of the specified payroll days.

**2. Sequential Deduction Date Generation**
System calculates subsequent dates by alternating between the two payroll days across months.
    2.1 When previous deduction day exceeds the smaller payroll day, system advances to the smaller day in the next month
    2.2 When previous deduction day is less than the larger payroll day, system advances to the larger day in the same month

**3. Non-Existent Date Adjustment**
Upon calculating a date that doesn't exist in the target month, system substitutes with the last valid day of that month and continues the alternating pattern


**Acceptance Criteria:**

**1. First Deduction Identification**
Given a start date of 4/20/2022 and payroll days of 10th and 20th, When the schedule is initialized, Then the first deduction date is set to 4/20/2022.

**2. Cross-Month Progression**
Given the previous deduction date is 4/20/2022, When calculating the next deduction, Then the system returns 5/10/2022 (advancing to the smaller day in the next month).

**3. Intra-Month Progression**
Given the previous deduction date is 5/10/2022, When calculating the next deduction, Then the system returns 5/20/2022 (advancing to the larger day in the same month).

**4. Month-End Edge Case Handling**
Given payroll days of 15th and 31st with previous deduction on 4/15/2022, When calculating the next deduction for April 31st which doesn't exist, Then the system uses 4/30/2022 and continues the pattern to 5/15/2022


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=474652625"
]

---

#### Feature: Calculate Payroll Deduction Dates for Bi-Weekly Frequency
- **Role**: Billing Administrator
- **Action**: configure automated bi-weekly payroll deduction schedules
- **Value**: ensure accurate and timely premium collection through employer payroll systems

**Description:**

As a **Billing Administrator**,
I want to **configure automated bi-weekly payroll deduction schedules**,
So that **ensure accurate and timely premium collection through employer payroll systems**


**Key Capabilities:**

**1. Deduction Schedule Initialization**
User is able to establish the payroll deduction start date and specify bi-weekly frequency with designated day of week (e.g., Friday). System identifies the first eligible deduction date that is equal to or after the start date and matches the specified weekday.

**2. Recurring Date Calculation**
System automatically generates subsequent deduction dates by adding 14-day intervals to the previous deduction date, maintaining consistent weekday alignment throughout the schedule.

**3. Schedule Validation and Compliance**
Upon calculation completion, system validates that all generated dates comply with the specified payroll day constraint and deduction frequency rules, ensuring operational accuracy for payroll integration.


**Acceptance Criteria:**

**1. First Deduction Date Accuracy**
Given a start date and designated weekday, When the system calculates the initial deduction, Then the date must be the nearest occurrence of that weekday on or after the start date.

**2. Bi-Weekly Interval Consistency**
Given an established first deduction date, When subsequent dates are calculated, Then each date must be exactly 14 days after the previous and fall on the same weekday.

**3. Schedule Integrity Validation**
Given a complete deduction schedule, When the system performs validation, Then all dates must conform to bi-weekly frequency rules without date existence errors or weekday misalignment.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=474652625"
]

---

#### Feature: Calculate Payroll Deduction Dates for Weekly Frequency
- **Role**: Billing Administrator
- **Action**: calculate weekly payroll deduction dates based on configured frequency and payroll day parameters
- **Value**: automated deduction schedules ensure timely and accurate payment collection aligned with employer payroll cycles

**Description:**

As a **Billing Administrator**,
I want to **calculate weekly payroll deduction dates based on configured frequency and payroll day parameters**,
So that **automated deduction schedules ensure timely and accurate payment collection aligned with employer payroll cycles**


**Key Capabilities:**

**1. Deduction Schedule Initiation**
User configures payroll deduction start date and specifies weekly payroll day (e.g., Tuesday). System validates baseline parameters for calculation readiness.

**2. First Deduction Date Determination**
System identifies nearest date equal to or following start date that matches specified payroll day of week. Upon validation, first deduction date is established as calculation anchor.

**3. Subsequent Date Generation**
System applies 7-day incremental calculation to previous deduction date. Each iteration maintains payroll day consistency throughout schedule.

**4. Schedule Finalization**
System generates complete deduction date sequence. Administrator reviews and confirms automated schedule aligns with employer payroll requirements.


**Acceptance Criteria:**

**1. Valid First Date Calculation**
Given payroll deduction start date of 5/3/2021 (Monday) and configured payroll day is Tuesday, When calculation executes, Then first deduction date is 5/4/2021 (Tuesday).

**2. Accurate Sequential Generation**
Given first deduction date established as 5/4/2021 (Tuesday), When system calculates subsequent dates, Then dates generate as 5/11/2021, 5/18/2021, maintaining 7-day intervals on Tuesday.

**3. Payroll Day Compliance**
Given weekly frequency and Tuesday payroll day configuration, When schedule is generated, Then all deduction dates fall exclusively on Tuesdays.

**4. Incomplete Configuration Handling**
Given payroll day or start date is missing, When calculation is attempted, Then system prevents schedule generation and prompts for required parameters.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=474652625"
]

---

#### Feature: Query Installment Schedules by Billing Account
- **Role**: Billing Administrator
- **Action**: retrieve installment payment schedules associated with a billing account
- **Value**: I can review payment arrangements and monitor customer payment commitments efficiently

**Description:**

As a **Billing Administrator**,
I want to **retrieve installment payment schedules associated with a billing account**,
So that **I can review payment arrangements and monitor customer payment commitments efficiently**


**Key Capabilities:**

**1. Initiate Schedule Retrieval**
User initiates request to load installment schedule for a specific billing account. System validates user authorization and account existence.

**2. Validate Business Constraints**
System performs constraint validation to ensure data integrity and business rule compliance before processing.

**3. Retrieve Schedule Data**
Upon successful validation, system returns complete installment schedule details for the billing account.

**4. Handle Exception Scenarios**
When billing account is not found or validation fails, system returns appropriate error response without completing retrieval.


**Acceptance Criteria:**

**1. Successful Schedule Retrieval**
Given an authorized user and valid billing account, When retrieval is requested, Then system returns complete installment schedule and triggers monitoring.

**2. Account Not Found Handling**
Given a non-existent billing account identifier, When retrieval is attempted, Then system returns entity not found error without processing.

**3. Constraint Violation Management**
Given constraint validation failure, When business rules are violated, Then system returns specific error codes and prevents schedule delivery.

**4. Authorization Enforcement**
Given insufficient user privileges, When access is attempted, Then system denies retrieval and maintains security compliance.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=206865669"
]

---

#### Feature: Validate Payment Plan Configuration Rules
- **Role**: Billing Administrator
- **Action**: configure and validate payment plan rules for installment-based billing arrangements
- **Value**: billing operations can offer compliant, flexible payment options while preventing configuration errors that could impact revenue collection

**Description:**

As a **Billing Administrator**,
I want to **configure and validate payment plan rules for installment-based billing arrangements**,
So that **billing operations can offer compliant, flexible payment options while preventing configuration errors that could impact revenue collection**


**Key Capabilities:**

**Payment Plan Configuration Initiation**
Billing administrator submits payment plan configuration defining identifier, description, installment frequency, maximum installment count, and plan classification.

**Multi-Layer Configuration Validation**
System validates submitted configuration against business rules including identifier uniqueness, format constraints, frequency values, installment limits, and plan type requirements.

**Error Handling and Feedback**
Upon validation failure, system provides specific error categorization including missing attributes, duplicate identifiers, invalid frequency values, installment count violations, or type mismatches.

**Configuration Persistence**
When validation succeeds, system persists approved payment plan configuration to enable future billing operations and installment processing.


**Acceptance Criteria:**

**1. Successful Configuration Creation**
Given valid payment plan parameters are submitted, When all validation rules pass, Then system persists configuration and confirms successful creation.

**2. Identifier Uniqueness Enforcement**
Given a payment plan identifier already exists, When duplicate identifier is submitted, Then system rejects configuration and returns uniqueness violation error.

**3. Format and Constraint Validation**
Given configuration with invalid identifier format, unsupported frequency, out-of-range installment count, or incorrect plan type, When validation executes, Then system prevents submission and returns specific constraint violation.

**4. Required Attribute Verification**
Given mandatory configuration attributes are missing, When submission occurs, Then system blocks creation and indicates missing required data.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=206865660"
]

---

#### Feature: Align Installment Due Dates to Product or Account Configuration
- **Role**: Billing Administrator
- **Action**: configure hierarchical due date alignment rules for payment installments
- **Value**: payment schedules automatically align to product or account configurations, ensuring consistent collection timing and reducing manual adjustments

**Description:**

As a **Billing Administrator**,
I want to **configure hierarchical due date alignment rules for payment installments**,
So that **payment schedules automatically align to product or account configurations, ensuring consistent collection timing and reducing manual adjustments**.


**Key Capabilities:**

**1. Hierarchical Due Date Determination**
When generating installments, system evaluates product-level due day configuration first, then falls back to billing account due day if product configuration is absent.

**2. Calendar-Aware Date Adjustment**
Upon encountering due day values exceeding month length, system automatically adjusts to the actual last day of the target month.

**3. Default Configuration Application**
If no explicit due day specified, system applies maximum of effective date or transaction date as the product's baseline due day.

**4. Configuration Precedence Management**
System maintains clear hierarchy: product-specific settings override account-level defaults when both exist.


**Acceptance Criteria:**

**1. Product-Level Alignment Priority**
Given a product with specified due day, When installments are generated, Then due dates align to product configuration ignoring account settings.

**2. Account Fallback Behavior**
Given product due day is null, When system generates schedule, Then installments align to billing account due day.

**3. Month-End Boundary Handling**
Given due day set to 31, When processing months with fewer days, Then system assigns last actual day of that month.

**4. Default Date Assignment**
Given no explicit due day configuration, When product activates, Then system defaults to later of effective or transaction date.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=236827290"
]

---

#### Feature: Manage Payment Plan Effective and Expiration Dates
- **Role**: Billing Administrator
- **Action**: configure and manage payment plan lifecycle dates to control plan availability and operationalization within the billing system
- **Value**: payment plans are activated and deactivated at the appropriate times, ensuring accurate billing operations and preventing use of inactive or expired plans

**Description:**

As a **Billing Administrator**,
I want to **configure and manage payment plan lifecycle dates to control plan availability and operationalization within the billing system**,
So that **payment plans are activated and deactivated at the appropriate times, ensuring accurate billing operations and preventing use of inactive or expired plans**


**Key Capabilities:**

**Payment Plan Activation Date Configuration**
User is able to establish the effective date that defines when a payment plan becomes operationally active and available for billing transactions.

**Mandatory Date Validation**
Upon payment plan setup, system enforces provision of valid effective date to ensure no plan operates without defined activation timeline.

**Operational Readiness Control**
When effective date is configured, system prevents payment plan utilization in billing processes until the activation date is reached, maintaining temporal integrity of billing operations.


**Acceptance Criteria:**

**1. Effective Date Enforcement**
Given a payment plan is being configured, When the administrator attempts to save without providing an effective date, Then system prevents submission and requires mandatory date entry.

**2. Plan Activation Control**
Given a payment plan has an effective date in the future, When billing processes execute before that date, Then system excludes the plan from available options.

**3. Date Validity**
Given an administrator provides an effective date, When the date value is invalid or improperly formatted, Then system rejects the entry and requests valid date input.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=211617691"
]

---

### Epic: Premium Calculation & Billing Models

#### Feature: Calculate Modal Premium Amount Based on Modality
- **Role**: Billing Administrator
- **Action**: process member plan amendments with automatic premium recalculation and proration
- **Value**: billing accounts reflect accurate premium amounts based on plan changes, ensuring correct invoicing and financial reconciliation

**Description:**

As a Billing Administrator,
I want to process member plan amendments with automatic premium recalculation and proration,
So that billing accounts reflect accurate premium amounts based on plan changes, ensuring correct invoicing and financial reconciliation


**Key Capabilities:**

**1. Amendment Initiation and Validation**
User is able to initiate member record amendments with specified transaction and effective dates, triggering system verification of plan changes and modality adjustments.

**2. Proration Determination**
Upon effective date analysis, system determines if proration is required by comparing effective date against modal period start boundaries.

**3. Old Plan Deactivation with Settlement**
When mid-period changes occur, system deactivates existing modal premiums and calculates prorated amounts using daily rate multiplied by active days with HALF_UP rounding.

**4. New Plan Activation**
System activates new modal premiums on target billing account, applying full amounts when aligned with period start or prorated amounts for mid-period effective dates.

**5. Cross-Account Transition Management**
When class changes trigger billing account movement, system coordinates proration independently on old and new accounts based on respective modality and period alignment.

**6. Multi-Configuration Support**
User is able to process amendments across billing setups including Single Bill, Bill per Class, Bill per Location, and Bill per Payroll Frequency.


**Acceptance Criteria:**

**1. Aligned Effective Date Processing**
Given a plan change with effective date matching modal period start, When amendment is processed, Then system activates new modal premium without proration and deactivates old premium at period boundary.

**2. Mid-Period Proration Accuracy**
Given effective date falling mid-period, When system calculates prorated premium, Then daily rate multiplied by active days is rounded using HALF_UP mode to two decimal places.

**3. Cross-Account Class Change**
Given class change triggering billing account movement, When effective date alignment differs between accounts, Then system applies proration independently on each account based on respective modal period boundaries.

**4. Modality Change Handling**
Given modality change during plan amendment, When calculating new billing periods, Then system determines modal periods from product effective date using new modality parameters.

**5. Premium Deactivation Integrity**
Given plan change on any effective date, When old plan is deactivated, Then system prevents any modal premium charges beyond the effective date on the old billing account.

**6. Incomplete Amendment Prevention**
Given missing transaction or effective dates, When user attempts amendment submission, Then system prevents processing until all required temporal data is provided.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=668240723"
]

---

#### Feature: Prorate Modal Premium for Mid-Period Changes
- **Role**: Billing Administrator
- **Action**: distribute prorated modal premium amounts across premium sequences when mid-period policy changes occur
- **Value**: accurate billing allocation, payment processing, and compensation tracking are maintained across multiple premium sequences

**Description:**

As a **Billing Administrator**,
I want to **distribute prorated modal premium amounts across premium sequences when mid-period policy changes occur**,
So that **accurate billing allocation, payment processing, and compensation tracking are maintained across multiple premium sequences**.


**Key Capabilities:**

**1. Prorated Period Identification**
System retrieves unrounded modal premium amounts for periods before and after transaction effective date within the modal period, applying daily rate calculations per existing proration logic.

**2. Sequence Holder Effectivity and Coefficient Calculation**
For each prorated period, system determines effective premium sequence holders based on date ranges, calculates proportional coefficients using annual amounts, and derives holder portions without rounding.

**3. Cross-Period Distribution and Aggregation**
System repeats coefficient calculation for all prorated periods resulting from multiple mid-period transactions, sums holder amounts by premium sequence, and tracks total distributed amount.

**4. Final Sequence Allocation with Rounding Adjustment**
System calculates each premium sequence's portion using whole modal premium amount, applies HALF_UP rounding, accumulates rounding differences, and adjusts last sequence to ensure sum equals total modal premium.


**Acceptance Criteria:**

**1. Mid-Period Change Proration**
Given policy amendment effective mid-modal period, When system calculates prorated amounts before and after change using daily rates, Then unrounded period amounts serve as basis for sequence distribution.

**2. Holder Effectivity Validation**
Given premium sequence holder with specific effective/expiration dates, When system evaluates against prorated period, Then holder contributes to coefficient only if effective within period boundaries, otherwise coefficient set to zero.

**3. Proportional Distribution Integrity**
Given multiple premium sequences with varying annual amounts, When system calculates coefficients and portions across all prorated periods, Then sum of all sequence portions equals rounded modal premium amount with no discrepancy.

**4. Rounding Adjustment Application**
Given final sequence portion calculations with fractional cents, When system applies HALF_UP rounding to all sequences, Then accumulated rounding differences adjust last sequence portion ensuring total integrity.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=746133917"
]

---

#### Feature: Calculate Paid-to-Date Using Invoice and Daily Rate Strategies
- **Role**: Billing Administrator
- **Action**: calculate and maintain paid-to-date using dual invoice and daily rate strategies to determine coverage eligibility
- **Value**: accurate coverage status is communicated to downstream systems ensuring claims processing and member services reflect actual payment positions

**Description:**

As a Billing Administrator,
I want to calculate and maintain paid-to-date using dual invoice and daily rate strategies to determine coverage eligibility,
So that accurate coverage status is communicated to downstream systems ensuring claims processing and member services reflect actual payment positions


**Key Capabilities:**

**1. Dual-Method PTD Calculation Execution**
System computes PTD using parallel strategies: daily rate method comparing allocated payments against cumulative daily premium (Annual Premium  365), and invoice method identifying last fully-paid invoice in uninterrupted sequence, selecting maximum result.

**2. Payment Allocation Recognition and PTD Adjustment**
Upon payment allocation or write-off application, system recalculates PTD immediately incorporating allocated amounts while excluding unapplied balances from eligibility determination.

**3. Invoice Sequence Gap Management**
When gaps exist in paid invoice sequences, system counts paid invoices after gap and extends PTD from last pre-gap paid invoice by corresponding billing periods.

**4. Member Record Lifecycle PTD Synchronization**
Upon member cancellation, system freezes PTD at cancellation date minus one day; upon reinstatement, recalculates daily rate and PTD from reinstatement effective date accounting for lapse periods.

**5. Amendment Impact Processing**
When amendments are issued, system recalculates daily rate from amendment effective date forward and immediately adjusts PTD using updated premium obligations.

**6. Multi-Account Coverage Status Distribution**
For billing accounts with multiple member records or split master policies, system calculates PTD at account level while applying member-specific freezing rules for cancelled records and minimum effective date constraints.


**Acceptance Criteria:**

**1. Dual Calculation Method Selection**
Given allocated payments exist and invoices are generated, when PTD calculation executes, then system returns maximum value between daily-rate-based PTD and invoice-based PTD as official coverage date.

**2. Unapplied Balance Exclusion**
Given payments remain in unapplied status, when PTD calculation processes, then system excludes unapplied amounts and only incorporates allocated payments and write-offs in coverage determination.

**3. Cancelled Member PTD Freeze**
Given member record cancellation where PTD exceeds cancellation date, when PTD retrieval occurs, then system returns cancellation date minus one day as frozen PTD regardless of billing account PTD increases.

**4. Invoice Gap Sequence Handling**
Given paid invoices exist after unpaid invoice gap, when PTD(inv) calculates, then system counts post-gap paid invoices and adds count as billing periods to pre-gap last paid invoice end date.

**5. Amendment Daily Rate Recalculation**
Given amendment issued with effective date, when PTD recalculates, then system applies new daily rate from amendment date forward and adjusts PTD(dr) immediately reflecting revised premium obligations.

**6. Null PTD Default Behavior**
Given no payments allocated or no invoices generated, when PTD is requested, then system returns NULL for inclusive PTD and member record effective date for UI display.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=603359848"
]

---

#### Feature: Manage Multiple Premium Sequences with Proportional Splits
- **Role**: Billing Administrator
- **Action**: proportionally allocate prorated premium amounts across multiple premium sequences during mid-period policy transactions
- **Value**: payment allocation strategies can be executed based on premium sequence priority while ensuring accurate compensation tracking and financial reconciliation

**Description:**

As a **Billing Administrator**,
I want to **proportionally allocate prorated premium amounts across multiple premium sequences during mid-period policy transactions**,
So that **payment allocation strategies can be executed based on premium sequence priority while ensuring accurate compensation tracking and financial reconciliation**


**Key Capabilities:**

**1. Prorated Period Identification**
Upon policy transaction occurring mid-modal period, system identifies prorated periods before and after transaction effective date and retrieves unrounded modal premium amounts for each period.

**2. Premium Sequence Effectiveness Determination**
System evaluates each premium sequence holder's effectiveness for prorated periods based on effective and expiration dates, assigning zero amounts to inactive sequences.

**3. Proportional Coefficient Calculation**
For each effective premium sequence holder within each prorated period, system calculates proportional coefficient using annual amounts and applies coefficient to prorated period amount while maintaining full precision.

**4. Cross-Period Aggregation and Final Allocation**
System aggregates premium sequence holder amounts across all prorated periods, calculates final coefficients against total distributed amount, and applies these to whole modal premium amount.

**5. Precision Rounding with Adjustment**
System rounds each premium sequence portion to two decimals using HALF_UP strategy, tracks rounding differences, and applies cumulative adjustment to last sequence ensuring sum equals modal premium.

**6. Billable Item Generation**
System generates billable and invoice items at granularity of Billing Product Item + Premium Sequence, enabling priority-based payment allocation and compensation domain notification.


**Acceptance Criteria:**

**1. Mid-Period Transaction Proration**
Given policy amendment occurs mid-modal period, When system calculates premium splits, Then separate prorated periods are identified and processed independently with unrounded intermediate values.

**2. Premium Sequence Effectiveness Validation**
Given premium sequence holder with defined effective dates, When determining applicability to prorated period, Then sequence contributes zero amount if not effective for that period based on date range logic.

**3. Proportional Distribution Accuracy**
Given multiple effective premium sequences in prorated period, When calculating individual portions, Then each sequence receives portion based on coefficient of its annual amount divided by sum of all effective annual amounts.

**4. Financial Integrity Reconciliation**
Given all premium sequence portions calculated and rounded, When summing individual sequence amounts, Then total equals whole modal premium amount with rounding adjustments applied to last sequence.

**5. Granular Billing Output**
Given multiple premium sequences with calculated portions, When generating billable items, Then system creates separate items per Billing Product Item + Premium Sequence combination for payment allocation.

**6. Precision Maintenance Throughout Calculation**
Given multi-step calculation process, When processing intermediate values, Then system maintains full decimal precision until final rounding stage to prevent cumulative errors.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=746133917"
]

---

#### Feature: Calculate Modal Periods Based on Modality Frequency
- **Role**: Billing Administrator
- **Action**: calculate modal billing periods based on policy modality frequency to establish premium payment schedules
- **Value**: premiums are billed accurately across diverse payment frequencies while maintaining alignment with policy terms and lifecycle changes

**Description:**

As a **Billing Administrator**,
I want to **calculate modal billing periods based on policy modality frequency to establish premium payment schedules**,
So that **premiums are billed accurately across diverse payment frequencies while maintaining alignment with policy terms and lifecycle changes**


**Key Capabilities:**

**1. Initialize Modal Period Foundation**
System establishes first modal period using Modal Premium Effective Date (Master Policy Effective Date for policy-level or Member Record Effective Date for member-level), calculating period start and end dates per modality specifications.

**2. Calculate Subsequent Billing Cycles**
System determines next period start (previous end + 1 day) and end dates using modality-specific rules: fixed-day modalities (Weekly/Bi-Weekly/Every 28 Days) add fixed days; month-based modalities (Monthly/Quarterly/Semi-Annual/Annual) align to calendar dates with overflow handling.
    2.1 Upon date alignment conflicts (e.g., Jan 31Feb), system applies largest-available-date logic
    2.2 When effective date is month-end, system enforces last-day-of-month calculation rules

**3. Apply Policy Term Boundaries**
System limits modal periods to policy expiration/maturity dates for term policies or continues indefinitely for perpetual policies, adjusting final period end dates for month-based modalities.

**4. Recalculate Upon Modality Changes**
When payment frequency changes, system recalculates all modal periods from original effective date using new modality rules, regardless of change transaction date.


**Acceptance Criteria:**

**1. Fixed-Day Modality Accuracy**
Given policy with Weekly modality effective Jan 15, When system calculates periods, Then first period spans Jan 15-21, second period Jan 22-28, with billable periods continuing every 7 days until policy expiration.

**2. Month-Based Alignment Handling**
Given Monthly modality effective Jan 31, When calculating February period, Then system sets Feb start to Feb 28 (or 29 leap year) using largest-available-date logic, maintaining month-end alignment for subsequent periods.

**3. Term Policy Boundary Enforcement**
Given Quarterly modality with policy expiring mid-period, When system calculates final modal period, Then period end date aligns to one day before expiration, excluding incomplete period days from billing.

**4. Modality Change Recalculation**
Given policy switches from Monthly to Bi-Weekly mid-year, When change processes, Then system recalculates all periods from original effective date using Bi-Weekly rules, regenerating all billable item date ranges.

**5. Semi-Monthly Dual-Period Logic**
Given Semi-Monthly modality effective on 15th, When system calculates periods, Then first period spans 15 days, second period adjusts to month-end using alignment rules, alternating pattern throughout policy term.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=447622140"
]

---

#### Feature: Generate Payment Requests for Self-Bill Accounts
- **Role**: Billing Administrator
- **Action**: generate payment requests for self-bill accounts with automated invoice timing
- **Value**: I can ensure timely billing cycles and accurate payment collection schedules without manual date calculations

**Description:**

As a **Billing Administrator**,
I want to **generate payment requests for self-bill accounts with automated invoice timing**,
So that **I can ensure timely billing cycles and accurate payment collection schedules without manual date calculations**


**Key Capabilities:**

**1. Billing Account and Period Management**
System establishes and tracks billing periods for self-bill accounts throughout their lifecycle.

**2. Invoice Generation Date Determination**
Upon billing period activation, system applies calculation rules to establish when invoices should be created based on business calendars.

**3. Payment Due Date Calculation**
System automatically computes payment due dates using configured business rules and calendar events.

**4. Calendar Event Integration**
When date calculations require business event context, system retrieves relevant calendar-based events to inform timing decisions.


**Acceptance Criteria:**

**1. Invoice Generation Timing**
Given a self-bill billing period exists, When the generation date calculation executes, Then system determines invoice creation date according to configured business rules.

**2. Payment Due Date Assignment**
Given invoice generation date is established, When payment due date calculation runs, Then system assigns payment deadline based on business rule logic.

**3. Business Event Retrieval**
Given calendar-dependent calculations are required, When system queries business events, Then relevant events are retrieved and applied to date determination.

**4. Billing Period Tracking**
Given multiple billing periods exist, When administrator reviews account, Then all periods and associated payment schedules are accessible.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=790073890"
]

---

#### Feature: Adjust Premium for Self-Bill Billing Accounts
- **Role**: Billing Administrator
- **Action**: adjust premium amounts for billing periods on self-bill accounts
- **Value**: accurate invoicing reflects actual member enrollment and consumption patterns

**Description:**

As a **Billing Administrator**,
I want to **adjust premium amounts for billing periods on self-bill accounts**,
So that **accurate invoicing reflects actual member enrollment and consumption patterns**


**Key Capabilities:**

**1. Access Control & Validation**
User is able to initiate premium adjustment when authorized and billing period preconditions are satisfied (prior period invoiced, no active holds).

**2. Premium Review & Navigation**
Upon accessing adjustment interface, system displays billing period summary with master policies, plan-coverages, and historical adjustment data if previously saved.

**3. Manual Premium Adjustment**
User is able to modify enrollment lives, volume metrics, and adjusted amounts per unique class-tier-subgroup combination across reporting periods.

**4. Calculation Integrity**
When user submits adjustments, system validates total adjusted amount equals sum of individual adjustments and prevents negative values.

**5. Concurrent Change Protection**
If concurrent modifications detected from other sessions, system alerts user and refreshes data to prevent overwrites.

**6. Invoice Generation & Reconciliation**
Upon confirmation, system generates new invoice or calculates delta billable items, updates balances, processes automatic payment consumption if configured, and triggers variance tracking integration.


**Acceptance Criteria:**

**1. Authorization Enforcement**
Given user lacks premium adjustment privilege or billing account has active invoice hold, When accessing billing period actions, Then adjust option remains unavailable.

**2. Historical Context Preservation**
Given previous adjustments exist for billing period, When user accesses adjustment interface, Then system displays previously saved values as baseline for further modifications.

**3. Data Validation**
Given user submits adjustments with negative values or mismatched totals, When system validates submission, Then errors are highlighted and submission prevented until corrected.

**4. Concurrency Control**
Given another user confirms changes during current session, When user attempts to save, Then system displays warning with refresh option to retrieve latest data.

**5. Invoice Impact Processing**
Given confirmed adjustments and no existing invoice for period, When system processes submission, Then new invoice generated with adjusted premium amounts and BAM messages triggered.

**6. Payment Automation**
Given automatic consumption configured and unapplied balance exists, When invoice generated, Then system applies payments sequentially and updates invoice status accordingly.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=526293900"
]

---

#### Feature: Manage Modal Premium Versions for Policy Transactions
- **Role**: Billing Administrator
- **Action**: manage versioned modal premium calculations across policy lifecycle transactions
- **Value**: accurate premium amounts are maintained with complete audit history as policy changes occur

**Description:**

As a **Billing Administrator**,
I want to **manage versioned modal premium calculations across policy lifecycle transactions**,
So that **accurate premium amounts are maintained with complete audit history as policy changes occur**


**Key Capabilities:**

**1. Transaction Receipt and Version Initialization**
Upon receiving policy transactions, system determines versioning requirements and initiates modal premium calculation based on transaction type and effective dates.

**2. Premium Calculation and Proration Application**
System calculates modal premium amounts applying proration logic when transaction effective dates do not align with modal period start dates, creating partial period amounts.

**3. Version Creation and Duplication Management**
System duplicates existing modal premium records with incremented version numbers before applying transaction changes, marking previous versions as inactive while retaining audit history.

**4. Cross-Account Premium Coordination**
When portability or continuation transactions occur, system creates zero-amount records on origin accounts and full premium amounts on destination accounts, maintaining synchronized version histories.

**5. Out-of-Sequence Transaction Handling**
If backdated transactions are received, system inactivates subsequent transactions and applies mandatory roll-on procedures, recalculating affected premium versions from the OOS effective date.

**6. Active Version Display and History Preservation**
System displays only origin versions and current active versions to users while preserving all inactive versions in the database for complete transactional audit trail.


**Acceptance Criteria:**

**1. New Business Premium Initialization**
Given a new business transaction is received, when no existing versions exist, then system creates initial modal amount with version 1 and effective date matching transaction date.

**2. Prorated Premium Creation**
Given a transaction effective date does not align with modal period start, when premium calculation occurs, then system creates prorated amount for partial period and full amount starting next modal period.

**3. Version Duplication on Amendments**
Given an amendment transaction is received, when existing modal premiums exist, then system duplicates all current versions with incremented version number before applying changes and marks previous versions inactive.

**4. Cross-Account Zero Premium Assignment**
Given a portability transaction moves member to Individual Direct billing, when modal premiums are calculated, then system creates zero-amount on List Bill account and full premium on Individual Direct account.

**5. OOS Transaction Inactivation**
Given an out-of-sequence amendment with earlier effective date is received, when processing occurs, then system inactivates all subsequent transactions and prevents further policy actions until roll-on is performed.

**6. Premium Waiver Offset Creation**
Given a premium waiver transaction is initiated, when waiver period begins, then system creates offsetting positive and negative modal amounts resulting in net zero premium while maintaining coverage records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=576498936"
]

---

#### Feature: Calculate Modal Premium for Seasonal Billing Members
- **Role**: Billing Administrator
- **Action**: calculate and prorate modal premiums for seasonal billing arrangements
- **Value**: members are billed accurately based on active billing periods and mid-cycle changes are properly reconciled

**Description:**

As a **Billing Administrator**,
I want to **calculate and prorate modal premiums for seasonal billing arrangements**,
So that **members are billed accurately based on active billing periods and mid-cycle changes are properly reconciled**


**Key Capabilities:**

**1. Determine Actual Billing Paymode**
Upon member record creation or modification, system calculates actual paymode by subtracting excluded billing periods from annual cycle (12 months minus non-billable periods per invoicing schedule configuration).

**2. Calculate Standard Modal Premium**
System divides annual premium by actual paymode to determine modal premium amount, applying two-decimal rounding using half-up mode for each active billing period.

**3. Compute Daily Rates for Proration**
System pre-calculates daily rates for all modal period lengths (28/29/30/31 days) by dividing modal premium by period days, storing rates with eight-decimal precision.

**4. Execute Mid-Cycle Proration**
When amendments occur during billing period, system prorates premium by multiplying applicable daily rates by days before and after change, summing results with two-decimal rounding.


**Acceptance Criteria:**

**1. Accurate Paymode Calculation**
Given invoicing schedule excludes specific billing periods, When member record is issued, Then system calculates actual paymode correctly excluding configured non-billable periods.

**2. Precise Modal Premium Determination**
Given annual premium and actual paymode are established, When system calculates modal premium, Then amount equals annual premium divided by actual paymode rounded to two decimals using half-up mode.

**3. Daily Rate Pre-Computation**
Given modal premium is calculated, When member record is issued, Then system generates and stores daily rates for all period lengths (28/29/30/31 days) with eight-decimal precision.

**4. Mid-Cycle Proration Accuracy**
Given amendment occurs during active billing period, When system prorates premium, Then prorated amount reflects proportional daily rates before and after change date with two-decimal rounding.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=741915400"
]

---

#### Feature: Recalculate Modal Premium on Billing Account Transitions
- **Role**: Billing Administrator
- **Action**: recalculate modal premium amounts when member records transition between billing accounts
- **Value**: premium accuracy is maintained during account changes and proper proration occurs for partial billing periods

**Description:**

As a **Billing Administrator**,
I want to **recalculate modal premium amounts when member records transition between billing accounts**,
So that **premium accuracy is maintained during account changes and proper proration occurs for partial billing periods**


**Key Capabilities:**

**1. Premium Expiration Alignment Validation**
System determines whether premium expiration date aligns with modal period start date. When alignment exists, system finalizes premium without proration and ceases further calculations.

**2. Proration Determination and Calculation**
Upon detecting mid-period transition, system calculates daily rate and prorates premium for partial period. System applies rounding and distributes amounts across premium sequences.
    2.1 For seasonal billing accounts, system applies specialized modal-based daily rate calculation
    2.2 For standard accounts, system uses standard daily rate methodology

**3. Premium Amount Finalization**
System creates product modal amount record linking prorated premium to appropriate billing product group and establishes effective period boundaries


**Acceptance Criteria:**

**1. Aligned Expiration Handling**
Given expiration date matches modal period start, When system validates alignment, Then premium is finalized without proration and no further calculations occur for that product.

**2. Mid-Period Proration**
Given expiration occurs mid-period with seasonal billing disabled, When system calculates premium, Then daily rate is computed, premium is prorated and rounded to two decimals using half-up strategy.

**3. Seasonal Billing Exception**
Given old account has seasonal billing enabled, When proration is required, Then system applies modal-based daily rate calculation methodology.

**4. Premium Split Application**
Given multiple premium sequences exist, When prorated amount is finalized, Then system distributes premium across sequences according to split rules.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523017173"
]

---

#### Feature: Process Policy Transactions in Billing
- **Role**: Billing Administrator
- **Action**: process policy transactions across their lifecycle
- **Value**: premium calculations remain accurate and billing reflects all policy changes in real-time

**Description:**

As a **Billing Administrator**,
I want to **process policy transactions across their lifecycle**,
So that **premium calculations remain accurate and billing reflects all policy changes in real-time**


**Key Capabilities:**

**Transaction Identification & Routing**
System identifies incoming transaction type using business rule reference and routes to appropriate processing workflow per BillingTransactionTypes catalog.

**New Business Processing**
System processes new policy transactions integrated with Policy Administration System to establish initial billing records.

**Lifecycle Transaction Handling**
System sequentially processes amendments, cancellations, premium waivers, reinstatements, rescind cancellations, renewals, rewrites, and roll-on transactions.
    3.1 Upon amendment received, system applies billing adjustments per amendment-specific rules.
    3.2 When cancellation initiated, system executes cancellation procedures and adjusts billing accordingly.

**Transaction Validation**
System validates transaction completeness and business rule compliance before processing.

**Billing Record Synchronization**
System updates billing records to reflect processed transactions maintaining audit trail.


**Acceptance Criteria:**

**1. Transaction Type Recognition**
Given a policy transaction is received, When system applies identification rules, Then correct transaction type is determined and routed to appropriate handler.

**2. New Business Integration**
Given new policy created in PAS, When transaction flows to Billing subsystem, Then billing account is established with accurate premium calculations.

**3. Amendment Processing**
Given policy amendment occurs, When billing processes amendment transaction, Then premium adjustments are calculated and applied correctly.

**4. Cancellation Handling**
Given cancellation transaction received, When system processes cancellation, Then billing ceases and final premium adjustments are calculated.

**5. Transaction Sequence Integrity**
Given multiple transactions for same policy, When processed sequentially, Then billing reflects cumulative impact in correct chronological order.

**6. Processing Failure Management**
Given transaction fails validation, When system detects incomplete data, Then transaction is rejected with error logged for resolution.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=585304865"
]

---

#### Feature: Validate Active Modal Amount on Billing Account
- **Role**: Billing Administrator
- **Action**: validate active modal amounts on billing accounts to ensure accurate premium calculations
- **Value**: premium charges align with current policy configurations and prevent billing discrepancies

**Description:**

As a **Billing Administrator**,
I want to **validate active modal amounts on billing accounts to ensure accurate premium calculations**,
So that **premium charges align with current policy configurations and prevent billing discrepancies**


**Key Capabilities:**

**1. Modal Amount Verification Initiation**
User is able to trigger validation of active modal amounts against billing account configurations

**2. Premium Calculation Assessment**
System evaluates current modal amounts against policy terms, coverage levels, and billing frequency parameters

**3. Discrepancy Detection & Analysis**
When inconsistencies are identified, system flags discrepancies between expected and actual modal amounts for review

**4. Validation Outcome Processing**
Upon completion, system provides validation results indicating alignment status or required corrective actions


**Acceptance Criteria:**

**1. Successful Validation Completion**
Given active billing accounts exist, When validation is initiated, Then system confirms all modal amounts align with policy configurations

**2. Discrepancy Identification**
Given modal amount mismatches exist, When validation executes, Then system identifies and reports all discrepancies with specific account references

**3. Incomplete Data Handling**
Given billing account data is incomplete, When validation is attempted, Then system prevents processing and indicates missing configuration requirements

**4. Multiple Account Processing**
Given multiple billing accounts require validation, When batch validation executes, Then system processes all accounts and provides consolidated results


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=509876853"
]

---

#### Feature: Display Consolidated Billing Views for Group Sponsors
- **Role**: Billing Administrator
- **Action**: access consolidated billing information across group sponsor hierarchies
- **Value**: I can monitor aggregated financial positions and drill down into individual billing accounts for effective oversight

**Description:**

As a **Billing Administrator**,
I want to **access consolidated billing information across group sponsor hierarchies**,
So that **I can monitor aggregated financial positions and drill down into individual billing accounts for effective oversight**


**Key Capabilities:**

**1. Navigate to Consolidated Billing Section**
User accesses billing workspace and locates consolidated billing views for the selected group sponsor organization.

**2. Review Aggregated Financial Summary**
System presents collapsed view displaying context customer identity with expandable card for consolidated balance figures across all hierarchy levels.

**3. Expand Consolidated View**
Upon expansion, system displays aggregated metrics including due and unpaid amounts, unbilled amendments, and overall account balance with hierarchical tabs.

**4. Navigate Billing Account Hierarchy**
User is able to switch between group sponsor, location, and division tabs to view billing accounts per organizational level, with pagination for accounts exceeding default display limit.

**5. Access Detailed Account Information**
User expands individual billing account cards to reveal comprehensive balance breakdowns, invoice status distribution, and associated product details specific to billing model type.


**Acceptance Criteria:**

**1. Consolidated Summary Display**
Given a group sponsor with multiple billing accounts, when accessing consolidated billing views, then system aggregates and displays total due amounts, unbilled amendments, and account balance across all hierarchy levels.

**2. Hierarchical Tab Filtering**
Given billing accounts exist at different organizational levels, when user selects a hierarchy tab, then system displays only billing accounts associated with that level with appropriate pagination.

**3. Billing Model Differentiation**
Given accounts using different billing models, when displaying account details, then system shows model-specific balance fields distinguishing True Group from Individual Premium Accounting.

**4. State Preservation on Collapse**
Given user has expanded view with active tab and opened accounts, when collapsing and re-expanding consolidated view, then system restores previous tab selection and account expansion states.

**5. Invoice Status Visibility**
Given billing account contains multiple invoices, when expanding account card, then system displays categorized invoice counts for overdue, issued, and partially paid statuses.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=456496163"
]

---

#### Feature: Configure Billing Setup for Individual Direct Accounts
- **Role**: Billing Administrator
- **Action**: configure and finalize billing setup for individual direct purchase accounts
- **Value**: premium collection is established with validated account assignment and flexible draft management

**Description:**

As a **Billing Administrator**,
I want to **configure and finalize billing setup for individual direct purchase accounts**,
So that **premium collection is established with validated account assignment and flexible draft management**


**Key Capabilities:**

**1. Billing Account Management Initiation**
User is able to initiate billing setup within the purchase flow by providing installation process identification and product context.

**2. Account Selection and Assignment**
User is able to create new billing accounts or select from existing accounts for premium collection assignment.

**3. Draft State Persistence**
Upon choosing to save without finalization, system persists billing setup in draft state without account validation requirements.

**4. Validated Finalization**
When issuing the billing setup, system validates billing account selection and finalizes configuration upon successful validation.

**5. Error Handling**
If finalization validation fails or operations encounter errors, system returns error information with billing setup reference when available.


**Acceptance Criteria:**

**1. Draft Persistence Success**
Given billing setup is in progress, When user saves without finalization, Then system persists draft state without requiring billing account selection and returns setup reference.

**2. Finalization Validation Enforcement**
Given billing setup is ready for issuance, When user finalizes without selecting billing account, Then system prevents finalization and returns validation error.

**3. Successful Finalization**
Given billing account is selected, When user finalizes billing setup, Then system validates selection, finalizes configuration, and returns billing setup resource reference.

**4. Error Response Handling**
Given operation encounters failure, When save or issue process fails, Then system returns error information with available setup reference data.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=761796029"
]

---

#### Feature: Manage Premium Sequences for Billing and Commission
- **Role**: Billing Administrator
- **Action**: configure and apply premium sequence splits to modal premium amounts
- **Value**: accurate premium distribution across multiple holders with proper historical tracking and automated billing integration

**Description:**

As a **Billing Administrator**,
I want to **configure and apply premium sequence splits to modal premium amounts**,
So that **accurate premium distribution across multiple holders with proper historical tracking and automated billing integration**


**Key Capabilities:**

**1. Policy Transaction Intake**
System receives policy events from various transaction types (new business, amendments, cancellations, renewals, portability moves) and validates configuration for multiple premium sequence support.

**2. Premium Sequence Processing**
System processes premium sequences and holder information, mapping them to billing product items while preserving historical data and reflecting current assignments.

**3. Transaction Alignment Validation**
System validates transaction effective date alignment with modal period start date.
    3.1 When aligned: applies standard splits to calculated modal amounts
    3.2 When non-aligned: applies prorated splits to adjusted modal amounts

**4. Billed Invoice Assessment**
System checks for existing billed invoices covering the transaction effective period and calculates amendments not yet billed at sequence level when applicable.

**5. Split Distribution Execution**
System applies validated premium sequence splits to modal premium amounts across affected billing product items for downstream consumption.


**Acceptance Criteria:**

**1. Successful Premium Sequence Registration**
Given a policy transaction is issued, When premium sequence event is received with valid configuration, Then system registers sequences and holders mapped to billing product items with historical preservation.

**2. Aligned Transaction Processing**
Given transaction effective date aligns with modal period start, When premium splits are applied, Then system distributes modal premium using standard split calculations across sequences.

**3. Prorated Transaction Handling**
Given transaction effective date is non-aligned with modal period, When premium splits are calculated, Then system applies prorated split methodology to adjusted modal amounts.

**4. Amendment Calculation Trigger**
Given billed invoices exist for the transaction period, When splits are processed, Then system calculates and updates amendments not yet billed at premium sequence level.

**5. Downstream Integration Readiness**
Given premium splits are finalized, When subsequent processes execute, Then projection, draft billing, and invoice generation consume accurate split data without manual intervention.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=696500203"
]

---

#### Feature: Calculate Paid-to-Date for Individual Premium Accounting
- **Role**: Billing Administrator
- **Action**: calculate and monitor paid-through coverage dates for member premium accounts using dual-method validation
- **Value**: I can accurately track premium payment status, ensure coverage continuity, and resolve payment allocation discrepancies across billing cycles

**Description:**

As a **Billing Administrator**,
I want to **calculate and monitor paid-through coverage dates for member premium accounts using dual-method validation**,
So that **I can accurately track premium payment status, ensure coverage continuity, and resolve payment allocation discrepancies across billing cycles**


**Key Capabilities:**

**1. Dual-Method PTD Calculation Execution**
System calculates paid-through coverage using daily-rate accumulation (annual premium / 365 days  elapsed days vs. allocated payments) and invoice-based tracking (last fully paid invoice in uninterrupted sequence), selecting maximum value for member record.

**2. Payment Allocation Processing**
System includes regular payments, small balance write-offs, and member record overpayments in calculation while excluding unapplied amounts. Upon payment reversal, system recalculates both methods immediately.

**3. Lifecycle Event Adjustment**
When member record amendments occur, system recalculates daily rate from amendment effective date forward. If cancellation processed, system freezes PTD at cancellation date when coverage exceeds termination. Upon reinstatement with lapse, system applies zero daily rate during gap period.

**4. Multi-Record and Modality Handling**
System calculates PTD independently for each member record with different effective dates. When billing modality mismatches invoicing frequency, system aligns payment allocation to modal period boundaries.


**Acceptance Criteria:**

**1. Accurate Dual-Method Calculation**
Given member has allocated payments and generated invoices, When system calculates PTD, Then both daily-rate method and invoice-based method execute and maximum value determines final paid-through date displayed as exclusive date (calculation result + 1 day).

**2. Payment Reversal Recalculation**
Given payment previously allocated to invoice is reversed, When system processes reversal transaction, Then both PTD methods recalculate immediately and paid-through date adjusts to reflect remaining payment allocation without manual intervention.

**3. Lifecycle Event Accuracy**
Given member record undergoes cancellation with PTD exceeding cancellation date, When system processes cancellation, Then PTD freezes at cancellation effective date and displays cancellation date (exclusive) preventing coverage extension beyond termination.

**4. Amendment Rate Adjustment**
Given member record amendment changes premium amount, When system recalculates daily rate from amendment effective date, Then PTD reflects new rate for dates equal to or after amendment date while preserving prior period calculations.

**5. Null PTD Display Logic**
Given member record has no allocated payments or first invoice unpaid, When system determines PTD is null, Then UI displays member record effective date as coverage reference point instead of paid-through date.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=606246842"
]

---

#### Feature: Calculate Paid-to-Date for Individual Direct Accounts
- **Role**: Billing Administrator
- **Action**: manage paid-to-date calculations when transitioning members between billing account types
- **Value**: premium payment status remains accurate and auditable across account movements, cancellations, and reinstatements

**Description:**

As a **Billing Administrator**,
I want to **manage paid-to-date calculations when transitioning members between billing account types**,
So that **premium payment status remains accurate and auditable across account movements, cancellations, and reinstatements**


**Key Capabilities:**

**1. Member Account Transition Processing**
When member moves from List Bill to Individual Direct, system freezes source PTD at transition date minus one day, initializes target PTD as NULL until invoices paid, and routes API responses based on current date relative to transition milestones.

**2. PTD Calculation with Payment Gaps**
If invoice payment sequences contain gaps or transition date equals existing PTD boundary, system maintains source PTD unchanged, freezes member PTD at boundary, and recalculates daily rate accumulation from transition point.

**3. Cancellation and Reinstatement Handling**
Upon member cancellation, system freezes PTD at cancellation date minus one day, sets daily rate to zero, and recalculates cumulative premium; upon reinstatement, system resumes PTD calculation accounting for lapse periods.

**4. Multi-Movement PTD Tracking**
When member transitions multiple times across billing accounts, system maintains separate PTD histories per account, accumulates daily premiums cumulatively for same-account returns, and resets for different-account movements.


**Acceptance Criteria:**

**1. Successful Transition with Continuous Coverage**
Given member has paid invoices through a date on List Bill, When transition effective date falls after existing PTD with no payment gaps, Then system freezes List Bill PTD unchanged and sets Individual Direct PTD to transition date minus one day until new payments received.

**2. Transition with Mid-Period Timing**
Given transition occurs within an invoicing period, When member moves to Individual Direct, Then system prorates invoice for partial period, calculates daily rate from transition date, and freezes source PTD at boundary.

**3. Cancellation Before Payment Completion**
Given member has active PTD on Individual Direct, When cancellation date falls before calculated PTD, Then system recalculates and freezes PTD at cancellation date minus one day, zeroes daily rate, and displays frozen date in UI.

**4. API Routing Across Multiple Transitions**
Given member moved between billing accounts multiple times, When API requests PTD for specific transaction date, Then system returns PTD from billing account active during that date range based on transition date sequencing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=607695512"
]

---

#### Feature: Calculate Paid-to-Date for Self-Bill Master Policies
- **Role**: Billing Administrator
- **Action**: calculate and maintain paid-through-date coverage tracking for master policies using combined invoice and daily-rate strategies
- **Value**: the organization accurately tracks paid coverage periods, manages payment allocations, and ensures compliant billing operations across complex payment scenarios

**Description:**

As a **Billing Administrator**,
I want to **calculate and maintain paid-through-date coverage tracking for master policies using combined invoice and daily-rate strategies**,
So that **the organization accurately tracks paid coverage periods, manages payment allocations, and ensures compliant billing operations across complex payment scenarios**


**Key Capabilities:**

**1. Invoice Generation & Full Payment Processing**
User is able to process fully paid invoices whereby the system calculates daily rate from total billed amount, determines days covered from allocated payments, establishes invoice-based PTD from period end date, and computes combined PTD as maximum of rate-based and invoice-based values using cumulative totals.

**2. Partial Payment & Allocation Management**
When invoice receives partial payment, user is able to trigger recalculation whereby system updates cumulative allocated amounts, recalculates days covered using partial allocation against daily rate, and determines PTD where rate-based calculation becomes limiting factor.

**3. Payment Reversal & Decline Handling**
Upon payment reversal or decline, user is able to initiate recalculation whereby system reduces allocated amounts, reverts invoice status, recalculates days covered with reduced allocations, adjusts invoice-based PTD to previous fully-paid period, and moves PTD backward reflecting reduced coverage.

**4. Gap Management Between Paid Invoices**
When unpaid invoices create gaps between fully-paid periods, user is able to process subsequent payments whereby system applies special gap-credit logic advancing invoice-based PTD by one period per paid invoice after gap while rate-based calculation reflects actual allocated coverage.

**5. Multi-Policy Payment Distribution**
User is able to process payments covering multiple master policies whereby system distributes amounts proportionally based on billed amounts, maintains independent calculations per policy including separate daily rates and PTD values, and tracks divergent coverage dates across policies.

**6. Null PTD & Mode Handling**
When no payments exist or no invoices are fully paid, user is able to apply mode-specific rules whereby INCLUSIVE mode returns NULL and EXCLUSIVE mode returns policy effective date, ensuring proper coverage date representation under zero-payment conditions.


**Acceptance Criteria:**

**1. Sequential Invoice Payment Success**
Given invoices are generated sequentially and fully paid, When each payment is processed, Then system calculates cumulative totals, recalculates daily rate across all periods, updates both rate-based and invoice-based PTD components, and sets combined PTD to maximum value reflecting continuous coverage progression.

**2. Partial Payment Limitation**
Given invoice is partially paid, When PTD calculation executes, Then system computes days covered using partial allocation divided by daily rate, sets invoice-based PTD to previous fully-paid period end, and ensures rate-based PTD becomes controlling factor reflecting incomplete period coverage.

**3. Payment Reversal Backward Movement**
Given previously applied payment is reversed, When recalculation triggers, Then system reduces allocated amounts, reverts affected invoice status, recalculates days covered with reduced totals, moves both rate-based and invoice-based PTD backward, and updates combined PTD to reflect reduced paid coverage period.

**4. Gap Credit Application**
Given unpaid invoice gap exists between fully-paid invoices, When payment after gap is processed, Then system applies gap-credit advancing invoice-based PTD by one period per paid invoice after gap while rate-based PTD reflects actual allocated coverage, with combined PTD as maximum.

**5. Multi-Policy Independent Tracking**
Given single invoice covers multiple master policies, When payment is distributed, Then system allocates proportionally per policy, maintains separate cumulative totals and daily rates, calculates independent PTD values per policy, and allows divergent coverage dates across policies.

**6. Null Condition Mode Handling**
Given no payments applied or no fully-paid invoices exist, When PTD calculation executes with null components, Then INCLUSIVE mode returns NULL while EXCLUSIVE mode returns policy effective date, preventing invalid future-dated coverage representation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=678436130"
]

---

#### Feature: View Modal Premium History and Versions
- **Role**: Billing Administrator
- **Action**: review historical premium changes and versions for a certificate
- **Value**: I can audit premium calculation lineage, validate transaction impacts, and ensure billing accuracy over time

**Description:**

As a **Billing Administrator**,
I want to **review historical premium changes and versions for a certificate**,
So that **I can audit premium calculation lineage, validate transaction impacts, and ensure billing accuracy over time**


**Key Capabilities:**

**1. Certificate Premium History Retrieval**
User selects a certificate to access comprehensive premium change records organized by coverage and plan hierarchy.

**2. Premium Waiver Period Visibility**
System displays historical waiver periods when member was exempt from premium obligations, with defined start and end dates.

**3. Version-Controlled Premium Records**
User is able to view modal premium versions sorted by future-first ordering (version, effective date) with currently active version highlighted per business rules.

**4. Transaction Lineage Traceability**
System displays transaction metadata including type, effective dates, classification segments (location, division, class, tier), and conditional billing flags (stop, resume, seasonal).

**5. Out-of-Sequence Amendment Handling**
Upon identifying List Bill versus Individual Direct billing accounts, system applies distinct transaction effective date rules for amendments processed outside normal sequence.


**Acceptance Criteria:**

**1. Premium History Accessibility**
Given a certificate exists, When user requests premium history, Then system presents all modal premium versions with transaction lineage.

**2. Active Version Identification**
Given multiple premium versions exist, When viewing history, Then system highlights the currently active record per versioning business rules.

**3. Waiver Period Display**
Given member had premium waivers, When accessing history, Then system displays waiver periods with start/end dates; if none exist, section is omitted.

**4. Classification Data Integrity**
Given premium records contain classification segments, When displaying history, Then system shows location, division, class, tier values or dash for null fields.

**5. Billing Account Type Rules**
Given out-of-sequence amendments, When certificate belongs to Individual Direct account, Then transaction effective date cannot precede modal premium effective date; When List Bill account, Then dates may differ.

**6. Transaction Flag Visibility**
Given special billing transactions, When reviewing history, Then system conditionally displays stop/resume/seasonal flags near transaction type.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=538486041"
]

---

#### Feature: Handle Payroll Frequency Changes for Member Records
- **Role**: Billing Administrator
- **Action**: manage member payroll frequency changes across billing accounts with accurate premium proration
- **Value**: billing accuracy is maintained during membership transitions and modal premiums are correctly calculated across different billing cycles

**Description:**

As a **Billing Administrator**,
I want to **manage member payroll frequency changes across billing accounts with accurate premium proration**,
So that **billing accuracy is maintained during membership transitions and modal premiums are correctly calculated across different billing cycles**


**Key Capabilities:**

**1. Initiate Payroll Frequency Amendment**
User submits payroll frequency change request with effective date for member record modification

**2. Deactivate Previous Billing Arrangement**
System terminates modal premium on original billing account or modality effective on amendment date. Upon mid-period amendment, system applies proration using daily rate calculation for partial period coverage

**3. Activate New Billing Arrangement**
System establishes modal premium on target billing account or modality effective on amendment date. System calculates modal periods from product effective date. Upon misalignment with period start, system prorates premium for partial period using daily rate methodology with half-up rounding

**4. Process Complex Multi-Transaction Scenarios**
When multiple transitions occur (continuation, amendment, removal), system evaluates each transaction independently and applies proration logic separately per billing account change


**Acceptance Criteria:**

**1. Aligned Amendment - Single Proration**
Given amendment date aligns with one modality period start but not the other, When frequency change is processed, Then system applies proration only to misaligned billing arrangement while other transitions at full modal premium

**2. Mid-Period Amendment - Dual Proration**
Given amendment date falls mid-period for both modalities, When frequency change executes, Then system prorates both deactivating and activating arrangements using daily rate for respective partial periods

**3. Modality Change Without Account Transfer**
Given member remains on same billing account with modality change, When amendment processes, Then system deactivates old modality with proration and activates new modality with period calculation from product effective date

**4. Multi-Transaction Independence**
Given member undergoes continuation then amendment then removal, When each transaction processes, Then system evaluates proration requirements independently without compound effects from prior transactions


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=662936050"
]

---

#### Feature: Prorate Modal Premium for First Invoicing Period
- **Role**: Billing Administrator
- **Action**: configure and execute modal premium proration logic for new member enrollments
- **Value**: ensure accurate first-period billing aligned with invoicing cycles and member effective dates

**Description:**

As a **Billing Administrator**,
I want to **configure and execute modal premium proration logic for new member enrollments**,
So that **I can ensure accurate first-period billing aligned with invoicing cycles and member effective dates**


**Key Capabilities:**

**1. Invoicing Period Identification**
System identifies the invoicing period containing the member record effective date using date range comparison logic.

**2. Modal Period Alignment (Configuration Enabled)**
System aligns first modal period start date to invoicing period start date and triggers proration for overlapping modal periods.

**3. Direct Modal Period Calculation (Configuration Disabled)**
System sets first modal period start date equal to member record effective date without invoicing alignment.

**4. Proration Execution**
System applies daily rate calculation and proration rules to determine accurate premium amounts for partial periods.


**Acceptance Criteria:**

**1. Alignment Configuration Enabled**
Given alignment is enabled, When member effective date falls within an invoicing period, Then system aligns modal start date to invoicing period start and applies proration.

**2. Alignment Configuration Disabled**
Given alignment is disabled, When member enrollment occurs, Then system sets modal start date equal to member effective date without invoicing alignment.

**3. Proration Calculation Accuracy**
Given modal period spans partial invoicing period, When proration triggers, Then system calculates premium using daily rate methodology.

**4. Date Range Validation**
Given member effective date, When system identifies invoicing period, Then effective date must satisfy invoicing period boundary conditions.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=573316911"
]

---

#### Feature: Create Modal Premium Versions for Seasonal Gap Updates
- **Role**: Billing Administrator
- **Action**: manage modal premium versioning and recalculations triggered by seasonal gap configuration changes
- **Value**: accurate premium distribution across billing periods is maintained when seasonal billing parameters change, ensuring billing integrity and complete audit history

**Description:**

As a **Billing Administrator**,
I want to **manage modal premium versioning and recalculations triggered by seasonal gap configuration changes**,
So that **accurate premium distribution across billing periods is maintained when seasonal billing parameters change, ensuring billing integrity and complete audit history**


**Key Capabilities:**

**1. Seasonal Configuration Update Initiation**
Upon seasonal gap parameter modification on billing account, system identifies all existing billing transactions requiring recalculation based on new billing period distribution.

**2. Automated Modal Premium Recalculation**
System recalculates modal amounts for each affected transaction using formula (Premium / new billing period count), applying proration rules when transaction dates misalign with period boundaries.

**3. Product Revision and Version Creation**
System generates new product revisions for each recalculated transaction, preserving original transaction parameters while updating amounts and assigning sequential version numbers with 'Seasonal Update' designation.

**4. Historical Transaction Type Preservation**
System maintains original transaction classifications (New Business, Amendment, Cancellation, Portability, Reinstatement, Rewrite) throughout recalculation process, including out-of-sequence transaction integrity.

**5. Version Display and Audit Management**
System presents current version records with visual indicators in user interfaces while maintaining complete version history with origin tracking for audit purposes.


**Acceptance Criteria:**

**1. Configuration Change Triggering**
Given seasonal gap parameters are modified, When system processes the update, Then all existing billing transactions on the account are identified and queued for recalculation.

**2. Accurate Recalculation Execution**
Given affected transactions exist, When recalculation executes, Then modal amounts reflect new billing period count with correct proration applied to partial periods.

**3. Version Integrity Preservation**
Given recalculation completes, When new product revisions are created, Then each revision maintains original transaction type, sequential version numbering, and 'Seasonal Update' flag.

**4. Complex Transaction Handling**
Given multiple transaction types exist (amendments, cancellations, reinstatements), When recalculation processes, Then each transaction type generates corresponding versioned record maintaining chronological integrity.

**5. Audit Trail Completeness**
Given version history exists, When users access audit views, Then system displays all original records with origin version tracking and current version highlighting for regulatory compliance.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=757142719"
]

---

#### Feature: Execute End-to-End Premium Sequence Billing Scenarios
- **Role**: Billing Administrator
- **Action**: orchestrate multi-sequence premium billing lifecycle across policy transactions
- **Value**: accurate premium allocation, payment distribution, and financial reconciliation are maintained across complex policy changes and amendments

**Description:**

As a **Billing Administrator**,
I want to **orchestrate multi-sequence premium billing lifecycle across policy transactions**,
So that **accurate premium allocation, payment distribution, and financial reconciliation are maintained across complex policy changes and amendments**


**Key Capabilities:**

**1. Policy Transaction Intake & Premium Sequence Processing**
Upon receiving policy transactions, system creates/updates billing product items, calculates modal premium splits per premium sequence, and manages sequence holder lifecycle based on effective dates.

**2. Invoice Generation with Sequence-Level Items**
System projects billable items from modal premium splits and generates invoice items at premium sequence level containing related sequence information for active sequences only.

**3. Payment & Write-off Allocation**
Payments allocated proportionally across premium sequences spanning multiple invoices; write-offs allocated at premium sequence level; distribution events fired with sequence-specific allocation details.

**4. Backdated & Out-of-Sequence Amendment Handling**
When amendments have past effective dates, system calculates any-bill adjustments, optionally unallocates existing payments, triggers back-off/roll-on processing for out-of-sequence transactions, and regenerates invoices with updated sequence structures including new sequence IDs for replaced sequences.


**Acceptance Criteria:**

**1. Premium Sequence Lifecycle Management**
Given policy transaction with new premium sequence, When effective date is outside billed period, Then system creates new sequence holders from effective date, recalculates modal premium splits, and includes sequence in subsequent invoices without proration.

**2. Backdated Amendment Processing**
Given amendment effective within already-billed period, When transaction is received, Then system calculates any-bill adjustments, optionally unallocates payments, fires distribution events for unallocation, and includes unbilled adjustments in subsequent invoices.

**3. Out-of-Sequence Transaction Reconciliation**
Given out-of-sequence amendment with earlier effective date, When processing occurs, Then system backs off subsequent transactions, processes OOS change, rolls on transactions with new sequence IDs replacing removed sequences, and regenerates invoices reflecting only active sequences.

**4. Cancellation Event Completeness**
Given policy cancellation, When cancellation is processed, Then system fires cancellation event containing total billable, total paid, and per-sequence totals including removed sequences flagged with 'Removed' status and zero amounts for audit trail.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=758591679"
]

---

#### Feature: Support Single Bill Billing Setup Configuration
- **Role**: Billing Administrator
- **Action**: configure single billing account parameters for policy management
- **Value**: I can establish centralized billing arrangements that streamline premium collection and account administration

**Description:**

As a **Billing Administrator**,
I want to **configure single billing account parameters for policy management**,
So that **I can establish centralized billing arrangements that streamline premium collection and account administration**


**Key Capabilities:**

**1. Billing Account Initialization**
User is able to create a new single billing account in the system for policy association.

**2. Parameter Configuration**
User is able to define billing account parameters including payment terms, billing cycles, and account ownership details.

**3. Policy Association**
Upon account creation, user is able to link policies to the established billing account for consolidated invoicing.

**4. Legacy Workflow Handling**
When encountering deprecated purchase-without-billing-account scenarios, system redirects to standard billing account setup process.


**Acceptance Criteria:**

**1. Successful Account Creation**
Given billing administrator initiates setup, When all required parameters are provided, Then system creates active billing account with unique identifier.

**2. Parameter Validation**
Given account configuration is submitted, When mandatory billing parameters are missing or invalid, Then system prevents account creation and requests complete information.

**3. Policy Linkage**
Given billing account exists, When policies are associated, Then system enables single bill invoicing for all linked policies.

**4. Legacy Prevention**
Given deprecated workflow is attempted, When system detects purchase-without-billing-account request, Then system blocks transaction and requires standard billing account setup.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=466114578"
]

---

#### Feature: Purchase Product Groups with Billing Integration
- **Role**: Billing Administrator
- **Action**: purchase product groups and establish billable premium structures with automated installment generation
- **Value**: products are accurately billed across designated accounts with proper premium allocation and payment scheduling

**Description:**

As a **Billing Administrator**,
I want to **purchase product groups and establish billable premium structures with automated installment generation**,
So that **products are accurately billed across designated accounts with proper premium allocation and payment scheduling**


**Key Capabilities:**

**1. Product Group Purchase Initiation**
User initiates product group acquisition by providing product hierarchy, billing timeframes, account associations, and optional payment plan configuration for automated installment scheduling

**2. Premium Structure & Billing Assignment**
System processes premium data across service periods, assigns premiums to price components, and applies billing account overrides at premium level when distinct account allocation is required

**3. Hierarchical Processing & Inheritance**
System validates nested product groups, cascades effective dates and billing accounts from root to children, and ensures child product dates fall within parent boundaries

**4. Billable Item Generation**
System converts product premiums into billable items, generates installment schedules when payment plans are specified, and persists all billing data to database

**5. Transaction Validation & Completion**
System validates request structure, enforces business rules, and returns comprehensive product image with billing data upon success or detailed error response upon validation failure


**Acceptance Criteria:**

**1. Successful Product Group Purchase**
Given valid product hierarchy with billing accounts and service periods, When purchase request is submitted, Then system saves products, creates billable items from premiums, generates installment schedule if configured, and returns product image with HTTP 200

**2. Premium-Level Billing Override**
Given premium data contains specific billing account reference, When processing premium allocation, Then system assigns that premium to specified account instead of inherited group billing account

**3. Hierarchical Date Validation**
Given nested products with effective and expiration dates, When validating product hierarchy, Then system prevents purchase if child dates fall outside parent boundaries

**4. Missing Required Data Rejection**
Given incomplete request missing required attributes or invalid parameter values, When validation executes, Then system returns HTTP 400 without persisting data

**5. Service Period Boundary Enforcement**
Given service periods defined within product purchase, When validating period dates, Then system ensures period boundaries align within product effective and expiration dates


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=271040499"
]

---

### Epic: Policy Transaction & Lifecycle Processing

#### Feature: Process Policy New Business Transactions
- **Role**: Billing Administrator
- **Action**: process and purchase new business master quotes through policy issuance
- **Value**: I can efficiently convert validated quotes into active policies with proper billing setup and financial product creation

**Description:**

As a **Billing Administrator**,
I want to **process and purchase new business master quotes through policy issuance**,
So that **I can efficiently convert validated quotes into active policies with proper billing setup and financial product creation**


**Key Capabilities:**

**1. Purchase Initiation & Validation**
User initiates purchase process. System validates quotes are marked sold, billing types match setup, master quote exists, and billing setup is complete.

**2. Billing Product Creation**
Upon successful validation, system creates billing products for each master quote in installation flow according to billing arrangement (list bill or self-bill).

**3. Policy Issuance**
System issues master policies for validated quotes. If issuance fails, processing halts without rolling back previously issued policies.

**4. Premium Sequence Assignment**
For self-bill master policies, system sets premium sequence numbers. List bill policies bypass this step and complete processing.


**Acceptance Criteria:**

**1. Successful Purchase Completion**
Given all quotes are validated and marked sold, When user initiates purchase, Then system creates billing products and issues all master policies with appropriate premium sequences.

**2. Validation Failure Handling**
Given billing types mismatch or setup incomplete, When purchase initiates, Then system returns specific error message and exits without processing.

**3. Partial Failure Recovery**
Given billing product creation fails for one quote, When processing continues, Then valid products remain created without rollback and specific error returns.

**4. Billing Type Differentiation**
Given self-bill master policy issued, When premium sequence step executes, Then system assigns sequence number; for list bill policies, process completes without sequence assignment.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=504534917"
]

---

#### Feature: Process Policy Amendment Transactions
- **Role**: Billing Administrator
- **Action**: process policy amendment transactions and synchronize billing calculations
- **Value**: billed amounts remain accurate and reflect policy changes across all member records and coverage structures

**Description:**

As a Billing Administrator,
I want to process policy amendment transactions and synchronize billing calculations,
So that billed amounts remain accurate and reflect policy changes across all member records and coverage structures


**Key Capabilities:**

**1. Amendment Initiation and Reception**
User is able to receive amendment triggers from Policy subsystem via Issue action or automated issuing, capturing transaction date and updated member record details for billing synchronization.

**2. Premium Recalculation and Adjustment Processing**
User is able to recalculate modal premium based on received changes (benefit amounts, rates, coverages, riders, tier changes).
    2.1 When amendment date falls into already-billed period, calculate amendments not yet billed for retroactive adjustment tracking.
    2.2 Upon classification segment changes (tier, class, payroll frequency), apply classification group change handling rules.

**3. Location-Division Transfer Handling**
When member record location or division changes via CEM Employment card update, system automatically moves premium to appropriate billing account using bill segmentation functionality.

**4. Transaction Confirmation and Logging**
User is able to view processed amendment transactions via Modal Premium interface and generate Business Activity Monitoring messages upon successful completion.


**Acceptance Criteria:**

**1. Standard Amendment Processing**
Given a policy amendment is initiated from Policy subsystem, When billing receives member record updates with transaction date, Then system recalculates modal premium and makes transaction viewable with BAM message generated.

**2. Retroactive Amendment Handling**
Given amendment transaction date falls within already-billed period, When billing processes the amendment, Then system calculates amendments not yet billed and tracks adjustment separately from standard billing cycle.

**3. Classification Change Processing**
Given amendment includes tier, class, or payroll frequency changes, When system processes classification segment changes, Then premium calculation applies classification group change rules with proper member reassignment.

**4. Location Transfer Management**
Given member record location or division changes via CEM, When employment card update triggers billing event, Then system automatically transfers premium to correct billing account using bill segmentation without standard amendment flow.

**5. Case Type Differentiation**
Given list-bill case versus self-administered case, When amendments are propagated, Then system processes member-level changes only for list-bill and master policy changes for self-administered cases respectively.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541991121"
]

---

#### Feature: Process Policy Cancellation Transactions
- **Role**: Billing Administrator
- **Action**: process policy cancellation transactions and recalculate premium obligations
- **Value**: accurate financial settlement occurs when policies terminate, ensuring proper prorated adjustments and billing integrity

**Description:**

As a **Billing Administrator**,
I want to **process policy cancellation transactions and recalculate premium obligations**,
So that **accurate financial settlement occurs when policies terminate, ensuring proper prorated adjustments and billing integrity**


**Key Capabilities:**

**1. Cancellation Request Initiation**
User initiates cancellation for active policies through policy administration system upon receiving cancellation trigger from insured party or company decision

**2. Cross-System Transaction Processing**
System communicates cancellation event from policy core to billing platform, triggering billing transaction workflow with cancellation transaction type designation

**3. Premium Recalculation & Proration**
System recalculates modal premium amounts for current billing period using proration logic and zeroes subsequent period amounts based on cancellation effective date

**4. Transaction Recording & Audit Trail**
System records cancellation transaction with complete audit history and updates premium history records for compliance and reconciliation purposes


**Acceptance Criteria:**

**1. Successful Single Policy Cancellation**
Given an active policy exists, When user submits cancellation request with valid privileges, Then system processes cancellation, prorates current period premium, and zeros future period amounts

**2. Cross-System Data Synchronization**
Given cancellation initiated in policy system, When billing system receives cancellation notification, Then premium recalculation completes and transaction history reflects cancellation status across both systems

**3. Master Policy Cascading Cancellation**
Given master policy with multiple member records requires cancellation, When master cancellation processes, Then each member record follows cancellation workflow sequentially with independent premium adjustments

**4. Incomplete Cancellation Prevention**
Given cancellation prerequisites not met, When user attempts cancellation, Then system prevents transaction processing and maintains current policy and billing status


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=571482956"
]

---

#### Feature: Process Policy Renewal Transactions
- **Role**: Billing Administrator
- **Action**: process policy renewal transactions and synchronize billing records
- **Value**: insurance carriers can adjust rates based on historical claims data and ensure continuous coverage for group benefits policies

**Description:**

As a **Billing Administrator**,
I want to **process policy renewal transactions and synchronize billing records**,
So that **insurance carriers can adjust rates based on historical claims data and ensure continuous coverage for group benefits policies**


**Key Capabilities:**

**1. Renewal Initiation**
Manual or automatic renewal is triggered for Master Policy and Member records through upstream policy system integration.

**2. Billing Data Synchronization**
Upon receiving renewal transaction data, system saves Member record renewal information and establishes baseline premium calculations.

**3. Transaction Recording**
System creates renewal transaction entry with modal premium amount and maintains historical premium records for audit trails.

**4. Premium Proration Processing**
System executes Member record proration calculations to adjust premium amounts based on coverage periods and effective dates.

**5. Out-of-Sequence Transaction Handling**
When transactions occur with earlier effective dates, system applies backing off or roll-on logic based on transaction type (amendment, cancellation, portability, continuation).

**6. Business Event Notification**
System generates billing adjustment message and fires business event to notify downstream systems of renewal completion.


**Acceptance Criteria:**

**1. Successful Renewal Processing**
Given Master Policy renewal is initiated upstream, When BillingCore receives Member record renewal data, Then system saves renewal information, creates renewal transaction with modal premium, and completes proration process.

**2. Out-of-Sequence Amendment Handling**
Given an amendment with effective date earlier than existing transactions, When system detects out-of-sequence condition, Then mandatory roll-on is applied to affected transactions excluding continuation and moved to list bill transactions.

**3. Out-of-Sequence Cancellation Processing**
Given cancellation with effective date earlier than renewal or amendment, When system processes the cancellation, Then affected transactions are backed off without invoking roll-on procedures.

**4. Premium History Maintenance**
Given renewal transaction is completed, When user reviews premium records, Then system displays renewal transaction with modal premium amount in historical records UI.

**5. Eligibility Validation**
Given Member record belongs to list bill or individual direct billing account, When renewal is processed, Then system allows transaction; otherwise system prevents renewal processing.

**6. Business Event Generation**
Given proration process completes successfully, When system finalizes renewal transaction, Then billing adjustment message is generated and renewal business event is fired to downstream systems.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=729647183"
]

---

#### Feature: Process Policy Reinstatement Transactions
- **Role**: Billing Administrator
- **Action**: process policy reinstatement transactions triggered by policy system events
- **Value**: billing accounts reflect accurate policy status and financial obligations are properly restored

**Description:**

As a **Billing Administrator**,
I want to **process policy reinstatement transactions triggered by policy system events**,
So that **billing accounts reflect accurate policy status and financial obligations are properly restored**.


**Key Capabilities:**

**1. Reinstatement Event Detection**
System receives and validates policy reinstatement or out-of-sequence cancellation events from PolicyCore for Master Policy self-bill accounts.

**2. Billing Account Restoration**
System reinstates billing account status and recalculates financial obligations based on policy effective dates and coverage terms.

**3. Transaction Synchronization**
System processes reinstatement transaction across BillingCore, ensuring billing schedules, balances, and payment arrangements are updated accordingly.

**4. Exception Management**
When validation failures or data inconsistencies occur, system routes transactions for manual review and resolution.


**Acceptance Criteria:**

**1. Successful Reinstatement Processing**
Given a valid policy reinstatement event from PolicyCore, When the transaction is processed, Then the billing account status is restored and financial obligations are recalculated.

**2. Out-of-Sequence Handling**
Given an out-of-sequence cancellation event, When processed, Then billing adjustments reflect the corrected policy timeline.

**3. Data Validation**
Given incomplete or inconsistent reinstatement data, When received, Then system prevents automatic processing and flags for manual intervention.

**4. System Synchronization**
Given successful reinstatement, When completed, Then BillingCore reflects updated status consistent with PolicyCore records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=549094392"
]

---

#### Feature: Process Policy Rescind Cancellation Transactions
- **Role**: Billing Administrator
- **Action**: process rescind cancellation transactions to restore previously scheduled policy cancellations
- **Value**: coverage continuity is maintained and billing obligations are accurately reinstated without service disruption

**Description:**

As a **Billing Administrator**,
I want to **process rescind cancellation transactions to restore previously scheduled policy cancellations**,
So that **coverage continuity is maintained and billing obligations are accurately reinstated without service disruption**


**Key Capabilities:**

**1. Transaction Initiation & Authorization**
User initiates rescind cancellation for self-bill master policies with future-dated cancellations; system validates eligibility and authorizes billing processing.

**2. Billing Obligation Restoration**
System updates payment requests for affected billing periods with original premium, rate basis, enrollment volumes, and coverage values from pre-cancellation policy version.

**3. Audit Trail & Notification Generation**
System generates business activity messages documenting rescind action and payment request updates.

**4. Cross-System Integration**
System communicates reinstatement events to third-party systems (commissions, accounting) ensuring data consistency across enterprise platforms.


**Acceptance Criteria:**

**1. Eligible Transaction Processing**
Given a self-bill master policy with future-dated cancellation exists, When user initiates rescind cancellation with effective date matching original cancellation date, Then system processes transaction and restores policy to active status.

**2. Payment Request Restoration**
Given rescind cancellation is processed, When billing period includes rescind effective date, Then system updates payment request with original premium components and enrollment metrics from rescinded policy version.

**3. System Communication & Audit**
Given rescind transaction completes successfully, When billing processing finalizes, Then system generates audit messages and fires reinstatement events to downstream systems.

**4. Ineligible Transaction Prevention**
Given cancellation effective date is in the past, When user attempts rescind cancellation, Then system prevents transaction submission and maintains current cancellation status.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=811437241"
]

---

#### Feature: Process Policy Rewrite Transactions
- **Role**: Billing Administrator
- **Action**: process policy rewrite transactions cascading changes from master policy to member records
- **Value**: I can maintain accurate billing data, premium calculations, and invoice integrity when policy effective dates and business data are updated

**Description:**

As a **Billing Administrator**,
I want to **process policy rewrite transactions cascading changes from master policy to member records**,
So that **I can maintain accurate billing data, premium calculations, and invoice integrity when policy effective dates and business data are updated**


**Key Capabilities:**

**1. Master Policy Rewrite Initiation**
Upon receiving rewritten master policy effective date and business data, system updates master policy record and generates audit activity with completion status

**2. Billing Account Configuration Assessment**
System determines account type (True Group vs Individual Premium Accounting) and evaluates invoicing start date reset requirements and deduction date shift rules

**3. Invoice Impact Evaluation**
When existing invoices are present, system validates discard requirements per business rules and automatically processes invoice discards cascading balance updates

**4. Member Record Synchronization**
System receives member record effective dates, initiates state resets when applicable, updates effective dates, and recalculates modal premium amounts

**5. Premium Distribution and Versioning**
System creates modal premium amounts, processes multiple premium sequences if enabled, overrides previous premium versions, and displays rewrite transactions

**6. Completion and Event Processing**
System generates member record audit activities and fires billing rewrite events for downstream system integration


**Acceptance Criteria:**

**1. Master Policy Processing**
Given master policy rewrite is initiated, when billing receives updated effective date, then system updates master policy, generates audit activity, and fires billing rewrite event

**2. Account Type Handling**
Given Individual Premium Accounting account detected, when effective date changes, then system shifts deduction start date per business rules and displays updated payroll calendar

**3. Invoice Management**
Given non-discarded invoices exist, when discard criteria are met per business rules, then system automatically discards invoices and updates billing account balances

**4. Member Record Cascade**
Given member records associated with rewritten master policy, when system receives updated effective dates, then all member records update and premium recalculation initiates

**5. Premium Calculation Integrity**
Given member record effective dates updated, when premium calculation completes, then system creates new modal premium versions, obsoletes previous versions, and displays transaction history

**6. Audit Trail Completion**
Given all rewrite processing completed, when system finalizes, then audit activities generated for master policy and each member record with completion status


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=654980797"
]

---

#### Feature: Process Out-of-Sequence (OOS) Transactions
- **Role**: Billing Administrator
- **Action**: process back-dated amendments and restore subsequent transactions
- **Value**: historical premium corrections are accurately applied without losing future policy changes

**Description:**

As a **Billing Administrator**,
I want to **process back-dated amendments and restore subsequent transactions**,
So that **historical premium corrections are accurately applied without losing future policy changes**


**Key Capabilities:**

**1. OOS Amendment Initiation**
User initiates back-dated amendment for past modal period. System reverses all transactions occurring after the amendment effective date.

**2. Amendment Processing**
System recalculates modal premium amounts for affected historical periods and applies corrected values.

**3. Transaction Roll-On**
Upon amendment completion, user triggers roll-on process. System recreates previously backed-off transactions with proper sequencing.
    3.1 Automatic mode executes without user intervention
    3.2 Manual mode allows user to select changes for roll-on

**4. Cross-System Synchronization**
System submits OOS and roll-on transaction details from PolicyCore to BillingCore for billing account reconciliation.


**Acceptance Criteria:**

**1. Amendment Eligibility**
Given an active policy with transactions, when user initiates OOS amendment for past period, then system backs off all subsequent transactions.

**2. Premium Recalculation**
Given backed-off transactions, when amendment processes, then system recalculates modal premiums for affected periods with correct prorated amounts.

**3. Roll-On Execution**
Given completed OOS amendment, when roll-on initiates, then system recreates backed-off transactions preserving original effective dates and sequencing.

**4. Data Integrity**
Given roll-on completion, when viewing billing history, then all transactions display correct chronological order with adjusted premium amounts.

**5. Exception Handling**
Given OOS cancellation or continuation transaction, when processing, then system prevents roll-on invocation for these transaction types.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=594611111"
]

---

#### Feature: Execute Transaction Roll-On Processing
- **Role**: Billing Administrator
- **Action**: orchestrate sequential application of future-dated policy transactions on top of out-of-sequence amendments
- **Value**: policy data integrity is maintained across time-sequenced changes and premium calculations remain accurate

**Description:**

As a **Billing Administrator**,
I want to **orchestrate sequential application of future-dated policy transactions on top of out-of-sequence amendments**,
So that **policy data integrity is maintained across time-sequenced changes and premium calculations remain accurate**


**Key Capabilities:**

**1. Transaction Sequence Intake**
System receives future-dated member transactions (amendments, cancellations, renewals, premium waivers) where effective date exceeds the underlying out-of-sequence amendment date

**2. Transaction Layering Execution**
System applies requested transactions sequentially on top of amendment per established roll-on rules, preserving chronological integrity

**3. Premium Sequence Detection**
System evaluates configuration to determine if multiple premium sequences require processing

**4. Premium Sequence Recalculation**
When multiple sequences are enabled, system reapplies premium splits across product modal amounts per defined allocation logic

**5. Premium Waiver Handling**
System processes premium waiver additions/removals from claims or policy domains based on exclusive configuration rules


**Acceptance Criteria:**

**1. Future Transaction Acceptance**
Given an out-of-sequence amendment exists, when a future-dated transaction arrives with effective date exceeding amendment date, then system accepts transaction for roll-on processing

**2. Chronological Layering**
Given multiple transactions require roll-on, when system executes sequencing, then each transaction applies atop prior state maintaining temporal order

**3. Premium Sequence Conditional Processing**
Given multiple premium sequences configuration is enabled, when roll-on completes, then system recalculates and splits premium amounts across sequences

**4. Premium Waiver Exclusivity**
Given premium waiver functionality is configured, when processing waiver transactions, then system enforces single-source rule preventing simultaneous claims and policy domain configuration

**5. Transaction Type Coverage**
Given various transaction types (cancellation, renewal, reinstatement), when roll-on executes, then system processes each type per applicable business rules


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=838437395"
]

---

#### Feature: Process Classification Group Changes
- **Role**: Billing Administrator
- **Action**: process premium-bearing classification group changes and adjust billing accordingly
- **Value**: billing reflects accurate premium adjustments when member classifications change, ensuring correct invoicing and payment allocation

**Description:**

As a **Billing Administrator**,
I want to **process premium-bearing classification group changes and adjust billing accordingly**,
So that **billing reflects accurate premium adjustments when member classifications change, ensuring correct invoicing and payment allocation**


**Key Capabilities:**

**1. Classification Change Initiation**
User is able to trigger classification group changes via policy amendments (class, plan, tier, location/division) or CEM integration (location/division only). System recognizes premium-bearing classification parameters.

**2. Modal Premium Versioning**
Upon classification change detection, system creates new modal premium version by setting previous version to zero, applying proration rules based on effective dates.

**3. Retroactive Period Reconciliation**
When change falls within already-billed invoicing period, system automatically calculates amendments not yet billed, generates negative invoice items, and triggers excessive payment unallocation based on configuration.

**4. Billing Account Migration**
If split billing by classification group is configured, system automatically moves member record to appropriate billing account aligned with new classification.


**Acceptance Criteria:**

**1. Premium Version Creation**
Given a premium-bearing classification change occurs, When system processes the change, Then new modal premium version is created and previous version set to zero with proper effective dating.

**2. Retroactive Adjustment Processing**
Given classification change affects already-billed period, When system detects billing overlap, Then amendments not yet billed are calculated, negative invoice items generated, and excessive payments unallocated per configuration rules.

**3. Billing Account Realignment**
Given split billing by classification is configured, When member classification changes, Then member record migrates to correct billing account maintaining billing continuity.

**4. Multi-Channel Support**
Given classification changes from policy or CEM, When change is submitted through either channel, Then system processes classification consistently applying same business rules and adjustment logic.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=716870205"
]

---

#### Feature: Process Employment Change Transactions
- **Role**: Billing Administrator
- **Action**: process employment change transactions to update member billing assignments and premium calculations
- **Value**: members are billed accurately based on current organizational structure and employment details

**Description:**

As a **Billing Administrator**,
I want to **process employment change transactions to update member billing assignments and premium calculations**,
So that **members are billed accurately based on current organizational structure and employment details**


**Key Capabilities:**

**1. Employment Change Intake**
System receives employment updates from CEM, Policy UI, or Enrollment channels with mandatory effective dates and validates Location/Division combinations against existing billing records.

**2. Transaction Processing and Validation**
System applies business rules: creates first records chronologically, replaces non-matching periods, preserves partial matches, eliminates duplicates, and handles out-of-sequence transactions by rolling forward effective dates.

**3. Premium Calculation and Account Assignment**
System calculates modal premium amounts and reassigns member records between billing accounts for Split Bill setups or maintains same account for other configurations.

**4. Exception Handling**
When billing setup is incomplete, invalid Location/Division provided, or IPA configurations conflict, system routes member to Dead Letter Queue requiring manual resolution.

**5. Billing Reflection**
Updated employment details appear in Modal Premium views, history records, draft bills, and invoices for corresponding coverage periods.


**Acceptance Criteria:**

**1. Successful Employment Change Processing**
Given valid Location/Division update received from CEM, When billing setup is complete and organizational hierarchy exists, Then system creates employment change transaction, calculates premium, assigns member to correct billing account, and reflects changes in subsequent invoices.

**2. Out-of-Sequence Transaction Handling**
Given employment change dated earlier than existing policy transaction, When system processes chronologically, Then classification segments remain unchanged until future transaction effective date, then employment change rolls forward.

**3. Split Bill Account Reassignment**
Given Split Bill per Location/Division configuration, When member's Location/Division changes, Then member record moves to destination organizational customer while maintaining premium calculation accuracy.

**4. Exception Queue Management**
Given incomplete billing setup or invalid Location/Division, When employment change cannot be processed automatically, Then system routes member to DLQ with error details for manual intervention.

**5. Retroactive Change Processing**
Given employment change effective date falls in already-billed period, When transaction is processed, Then system applies Amendments Not Yet Billed logic to handle retroactive adjustments.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=838438545"
]

---

#### Feature: Process Premium Waiver Transactions (RPU/ET)
- **Role**: Billing Administrator
- **Action**: reinstate billing for policies previously converted to Reduced Paid-Up or Extended-Term status
- **Value**: members can resume premium payments and restore full policy benefits after temporary non-payment periods

**Description:**

As a **Billing Administrator**,
I want to **reinstate billing for policies previously converted to Reduced Paid-Up or Extended-Term status**,
So that **members can resume premium payments and restore full policy benefits after temporary non-payment periods**


**Key Capabilities:**

**1. Receive and Validate Reinstatement Transaction**
Upon receiving amendment transaction with null NonForfeiture attribute and reinstatement reason (Payment Received/Home Office Error/Other), system validates active Stop Billing status and transaction effective date alignment

**2. Recalculate Premium and Create Version**
System recalculates modal premium based on pre-RPU/ET annual premium amount and creates new modal premium version record

**3. Resume Billing Operations**
System reactivates member record for invoice generation, processes retroactive invoicing periods if applicable, and updates modal premium effective from reinstatement date

**4. Process Rolled-On Transactions**
System processes subsequent queued transactions following standard amendment transaction workflows without interruption


**Acceptance Criteria:**

**1. Successful Reinstatement Processing**
Given active Stop Billing amendment exists, When amendment transaction with null NonForfeiture and valid reinstatement reason is received, Then system recalculates modal premium, creates new version, and resumes invoice generation from effective date

**2. Retroactive Invoice Handling**
Given invoicing periods exist between reinstatement date and current date, When reinstatement is processed, Then system generates retroactive invoice items per standard invoicing rules

**3. Premium Restoration**
Given RPU/ET conversion set modal premium to zero, When reinstatement completes, Then member record modal premium equals pre-conversion annual premium amount

**4. Transaction Display and Audit**
Given reinstatement processed successfully, When viewing modal premium history, Then amendment transaction displays with Resume Billing flag, effective date, and calculated modal amount


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=786405925"
]

---

#### Feature: Calculate Modal Premium Amounts
- **Role**: Billing Administrator
- **Action**: process policy rewrites and recalculate modal premiums when master policy effective dates change
- **Value**: billing accounts remain accurate and synchronized with updated policy terms across all member records

**Description:**

As a **Billing Administrator**,
I want to **process policy rewrites and recalculate modal premiums when master policy effective dates change**,
So that **billing accounts remain accurate and synchronized with updated policy terms across all member records**


**Key Capabilities:**

**Master Policy Rewrite Initiation**
System receives and processes updated master policy effective date and business data, updating internal records and generating tracking activities

**Billing Account Configuration Assessment**
System determines account type (True Group vs Individual Premium Accounting) and applies corresponding billing rules, including deduction start date adjustments when applicable

**Invoice Management and Reset Logic**
Upon detecting existing invoices, system automatically evaluates discard eligibility and processes invoice removal when rewrite conditions warrant reset

**Member Record Synchronization**
System propagates effective date changes to all member records, initiates state reset procedures, and updates member-level billing configurations

**Modal Premium Recalculation**
System calculates new modal premium amounts based on updated effective dates, creates new premium versions, and obsoletes prior versions while maintaining audit history

**Premium Sequence Reapplication**
When multiple premium sequences are configured, system redistributes premium splits across recalculated modal amounts and preserves payment allocation structures


**Acceptance Criteria:**

**Master Policy Rewrite Completion**
Given a master policy rewrite is initiated, When the system processes the effective date change, Then the master policy is updated internally, tracking activity is generated with 'Finished' status, and billing rewrite events are fired

**Invoice Discard Automation**
Given at least one non-discarded invoice exists on the billing account, When the rewrite qualifies for automatic invoice discard per business rules, Then all qualifying invoices are automatically discarded and account balances are recalculated

**Member Record Cascade Processing**
Given member records are associated with the rewritten master policy, When the system receives updated member effective dates, Then all member records are synchronized, state reset is initiated, and member-level rewrite activities are generated

**Modal Premium Version Management**
Given new modal premium amounts are calculated, When premium recalculation completes, Then new modal premium versions are created, all previous versions become obsolete, and the complete transaction history is viewable

**Premium Sequence Redistribution**
Given multiple premium sequences are configured, When modal premium recalculation occurs, Then premium sequence splits are reapplied to each new modal amount entity maintaining the original allocation structure


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=654980797"
]

---

#### Feature: Manage Self-Bill Master Policy Amendments
- **Role**: Billing Administrator
- **Action**: process master policy amendments and automatically update affected payment requests
- **Value**: policy changes are accurately reflected across billing cycles, improving customer satisfaction and reducing manual reconciliation efforts

**Description:**

As a **Billing Administrator**,
I want to **process master policy amendments and automatically update affected payment requests**,
So that **policy changes are accurately reflected across billing cycles, improving customer satisfaction and reducing manual reconciliation efforts**


**Key Capabilities:**

**1. Amendment Transaction Intake**
Upon policy amendment initiation in PolicyCore for active or future-dated master policies, system receives transaction details via integration and validates eligibility

**2. Amendment Classification & Processing**
System determines amendment type (structural vs non-structural, premium-bearing vs non-premium-bearing) and applies changes to product structure considering future-dated transactions

**3. Payment Request Reconciliation**
System automatically updates existing payment requests for affected billing periods when no invoices exist; for periods with invoices, system flags for manual adjustment

**4. Notification & Transparency**
System generates business activity messages and displays amendment impact on billing period details, enabling user verification of applied changes


**Acceptance Criteria:**

**1. Successful Amendment Processing**
Given an active master policy with future billing periods, When a non-structural amendment is submitted with effective date before existing payment requests, Then system updates all affected payment requests and generates confirmation message

**2. Invoice Conflict Handling**
Given billing periods with generated invoices, When structural amendment is processed, Then system prevents automatic payment request updates and notifies user to manually discard and regenerate invoices

**3. Out-of-Sequence Amendment**
Given multiple future-dated transactions exist, When an out-of-sequence amendment is received, Then system considers all subsequent transactions and applies changes chronologically

**4. Ineligible Policy Protection**
Given a master policy in inactive status, When amendment transaction is submitted, Then system rejects the transaction without processing


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=754652035"
]

---

#### Feature: Manage Self-Bill Master Policy Renewals
- **Role**: Billing Administrator
- **Action**: process master policy renewal transactions and synchronize billing impacts across payment requests and invoices
- **Value**: premium adjustments, product modifications, and rate changes are accurately reflected in billing periods, maintaining billing accuracy and supporting strategic rate optimization

**Description:**

As a **Billing Administrator**,
I want to **process master policy renewal transactions and synchronize billing impacts across payment requests and invoices**,
So that **premium adjustments, product modifications, and rate changes are accurately reflected in billing periods, maintaining billing accuracy and supporting strategic rate optimization**


**Key Capabilities:**

**1. Renewal Transaction Initiation & Validation**
User initiates renewal for active master policies or policies with future effective dates through PolicyCore API integration to BillingCore.

**2. Automated Payment Request Processing**
System processes renewal by modifying payment requests based on renewal type: non-structural renewals update all affected requests; structural renewals update only requests without generated invoices.
    2.1 System applies changes to entire reporting periods containing renewal effective dates
    2.2 System generates BAMs documenting renewal processing and payment request updates

**3. Invoice Impact Management**
When invoices exist for affected billing periods, system requires manual invoice discard and regeneration; renewal amounts process as positive or negative items in subsequent invoices.

**4. Renewal Change Notification**
System notifies users of renewal impacts via alerts on billing period and premium adjustment interfaces, displaying specific changes to rates, coverage, and product segments.


**Acceptance Criteria:**

**1. Renewal Transaction Validation**
Given a master policy with active status, when renewal transaction is submitted from PolicyCore, then BillingCore processes renewal and updates affected payment requests according to renewal type.

**2. Payment Request Update Logic**
Given a non-structural renewal, when processing completes, then all payment requests for affected billing periods are updated; given a structural renewal, then only payment requests without generated invoices are updated.

**3. Invoice Conflict Handling**
Given a renewal affecting billing periods with existing invoices, when renewal is processed, then system prevents automatic payment request updates and requires manual invoice discard before updates apply.

**4. Retroactive Renewal Processing**
Given a renewal with past effective date, when processing occurs, then changes apply to entire reporting period containing the effective date and generate appropriate positive or negative invoice items.

**5. Renewal Event Notification**
Given successful renewal processing, when all payment requests are updated, then system fires Billing Renewal event and displays renewal change alerts on relevant billing interfaces.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=811443395"
]

---

#### Feature: Manage Self-Bill Master Policy Rewrites
- **Role**: Billing Administrator
- **Action**: process master policy rewrites and regenerate billing artifacts
- **Value**: the organization can correct policy errors, adjust terms, and maintain billing accuracy while preserving policy continuity and compliance

**Description:**

As a **Billing Administrator**,
I want to **process master policy rewrites and regenerate billing artifacts**,
So that **the organization can correct policy errors, adjust terms, and maintain billing accuracy while preserving policy continuity and compliance**


**Key Capabilities:**

**1. Master Policy Rewrite Initiation**
User initiates rewrite for existing self-admin master policy, system creates new policy quote preserving policy number and rootId while nullifying all pending or completed policy changes

**2. Billing Effective Date Synchronization**
System captures rewritten master policy effective date, resets invoicing start dates across all related billing accounts including split scenarios, and determines earliest effective date for downstream processing

**3. Payment Request Lifecycle Management**
System identifies and discards all payment requests where earliest master policy effective date falls within billing period, preventing premature or incorrect billing based on outdated policy data

**4. Invoice Discard Processing**
System locates and discards invoices aligned with affected billing periods, ensuring no invoices reflect cancelled policy terms or incorrect premium calculations

**5. Billing Artifact Regeneration**
User triggers manual payment request regeneration or system executes automated job to regenerate discarded payment requests; invoices regenerate upon payment request confirmation with adjusted premium details


**Acceptance Criteria:**

**1. Rewrite Initialization Success**
Given active self-admin master policy exists and user has rewrite privilege, When user initiates rewrite, Then system creates new policy quote with identical policy number and rootId while preserving original data structure

**2. Effective Date Cascade Handling**
Given master policy effective date changes during rewrite, When system processes rewrite, Then invoicing start dates reset across all related billing accounts and system captures earliest effective date for processing rules

**3. Payment Request Discard Logic**
Given earliest master policy effective date falls within billing period, When system evaluates payment requests, Then all payment requests from that period forward are discarded regardless of other master policies on billing account

**4. Invoice Discard Alignment**
Given payment requests discarded due to rewrite, When system processes invoices, Then corresponding invoices and all subsequent invoices are discarded with status indicators updated

**5. Regeneration Workflow Completion**
Given discarded payment requests and invoices exist, When user confirms regenerated payment request with adjusted premium, Then system generates new invoice reflecting rewritten policy terms and fires appropriate business events


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=803538239"
]

---

#### Feature: Manage Self-Bill Master Policy Cancellations
- **Role**: Billing Administrator
- **Action**: process master policy cancellations and synchronize billing adjustments across policy and billing subsystems
- **Value**: the organization can discontinue services appropriately, ensure accurate billing calculations, and maintain data integrity between policy and billing systems

**Description:**

As a **Billing Administrator**,
I want to **process master policy cancellations and synchronize billing adjustments across policy and billing subsystems**,
So that **the organization can discontinue services appropriately, ensure accurate billing calculations, and maintain data integrity between policy and billing systems**


**Key Capabilities:**

**1. Cancellation Initiation**
User initiates cancellation process for active self-admin master policy by providing cancellation effective date (backdated, current, or future) and selecting business reason

**2. Cross-System Synchronization**
PolicyCore notifies BillingCore of master policy cancellation and triggers business activity monitoring event for downstream processing

**3. Premium Calculation Adjustment**
When payment request, system calculates premium including full amount for reporting period containing cancellation date and zeros subsequent periods for quarterly/annual billing

**4. Manual Premium Adjustment**
When payment request already generated, user is able to manually adjust metadata and premium per plan-coverage for current and previous billing periods

**5. Payment Request Management**
System generates payment requests for billing periods prior to cancellation date if outstanding, and skips billing account in scheduled jobs when no active policies remain


**Acceptance Criteria:**

**1. Cancellation Recording**
Given active master policy exists, When user submits cancellation with effective date and reason, Then system records cancellation and initiates cross-subsystem notification process

**2. Alert Display Based on Timing**
Given cancellation is submitted, When effective date is backdated or current-dated, Then system displays cancellation confirmed alert; When future-dated, Then system displays pending cancellation alert

**3. Premium Calculation for Unrequested Periods**
Given payment request not yet generated, When cancellation effective date falls within billing period, Then system includes full premium for containing reporting period and zeros all subsequent periods

**4. Manual Adjustment Capability**
Given payment request already generated for affected period, When cancellation is processed, Then system enables manual premium adjustment with save and confirm options

**5. Outstanding Payment Request Generation**
Given prior billing periods lack payment requests, When cancellation occurs, Then system generates requests for earliest periods and cancellation period


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=726964515"
]

---

#### Feature: Generate and Update Payment Requests (Self-Bill)
- **Role**: Billing Administrator
- **Action**: process renewal transactions for self-billed master policies and update payment requests accordingly
- **Value**: rate adjustments and product structure changes are accurately reflected across all affected billing accounts and reporting periods without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **process renewal transactions for self-billed master policies and update payment requests accordingly**,
So that **rate adjustments and product structure changes are accurately reflected across all affected billing accounts and reporting periods without manual intervention**


**Key Capabilities:**

**Renewal Transaction Intake**
System receives renewal or out-of-sequence renewal transaction details from policy subsystem for active or future-effective self-bill master policies.

**Reporting Period Determination**
System defines start and end reporting periods for renewal processing based on transaction effective dates and billing configuration rules.

**Billing Account Identification**
System identifies all billing accounts (single bill or split bill configurations) requiring updates to product structure or rating parameters.

**Payment Request Modification**
When renewal affects product structure, system modifies only non-invoiced payment requests. When renewal affects only rating parameters, system updates all payment requests for affected billing periods.

**Activity Tracking**
System generates master policy renewal activity messages for each affected billing account and payment request update notifications when modifications occur.

**Renewal Confirmation**
System publishes billing renewal business event upon successful completion of all renewal processing activities.


**Acceptance Criteria:**

**Renewal Transaction Processing**
Given a renewal transaction is received for a self-bill master policy, When the system processes the renewal, Then reporting period boundaries are determined and changes are propagated to all identified billing accounts.

**Product Structure Changes**
Given renewal includes product structure modifications, When non-invoiced payment requests exist for affected periods, Then only those payment requests are updated with new product configurations.

**Rating Parameter Changes**
Given renewal includes only rating parameter updates, When payment requests exist for affected billing periods, Then all such payment requests are updated with new rates and volumes.

**Activity Message Generation**
Given renewal processing completes successfully, When billing accounts and payment requests are modified, Then corresponding activity messages are generated for each updated entity.

**No Updates Required**
Given renewal processing identifies no existing payment requests, When system completes renewal distribution, Then master policy renewal activity messages are generated without payment request update notifications.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=794690529"
]

---

#### Feature: Track Variance Against Tolerance Limits (Self-Bill)
- **Role**: Billing Administrator
- **Action**: monitor and flag premium variances exceeding contractual tolerance thresholds for self-bill accounts
- **Value**: contractual compliance is maintained and significant billing discrepancies are proactively identified for investigation

**Description:**

As a **Billing Administrator**,
I want to **monitor and flag premium variances exceeding contractual tolerance thresholds for self-bill accounts**,
So that **contractual compliance is maintained and significant billing discrepancies are proactively identified for investigation**


**Key Capabilities:**

**1. Variance Configuration Activation**
Upon payment request confirmation for a control billing period, system validates that variance tracking is configured and enabled at the billing account level.

**2. Multi-Period Variance Calculation**
System calculates variance by comparing current payment request metrics (premium, lives, volume) against control period baseline and retrieves tolerance thresholds from rules engine.
    2.1 When payment confirmed after control period, system performs dual comparison against both initial and control period values.

**3. Threshold Breach Management**
When calculated variance exceeds tolerance limits, system automatically generates investigation task for back-office review and policyholder communication.


**Acceptance Criteria:**

**1. Configuration Validation**
Given variance tracking is enabled, When payment request enters confirmation workflow, Then system initiates variance calculation process for applicable billing periods.

**2. Baseline Comparison Logic**
Given control period data exists, When variance calculation executes, Then system compares current values against both control period and latest confirmed payment request.

**3. Threshold Enforcement**
Given calculated variance exceeds tolerance limits, When comparison completes, Then system generates variance review task without manual intervention.

**4. Within-Tolerance Scenario**
Given variance remains within acceptable range, When calculation completes, Then system proceeds without generating alerts or tasks.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=835226264"
]

---

#### Feature: Discard and Regenerate Payment Requests Upon Policy Changes
- **Role**: Billing Administrator
- **Action**: automatically invalidate and regenerate payment requests when policy transactions modify coverage or terms
- **Value**: billing accuracy is maintained and payment schedules reflect current policy obligations without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **automatically invalidate and regenerate payment requests when policy transactions modify coverage or terms**,
So that **billing accuracy is maintained and payment schedules reflect current policy obligations without manual intervention**.


**Key Capabilities:**

**Policy Change Detection**
System monitors policy transactions that impact premium calculations or coverage periods

**Payment Request Invalidation**
Upon detecting qualifying policy changes, system automatically identifies and discards existing payment requests associated with the modified policy

**Recalculation and Regeneration**
System recalculates premium obligations based on updated policy terms and generates new payment requests reflecting current coverage

**Billing Schedule Synchronization**
System aligns regenerated payment requests with policy effective dates and installment schedules

**Audit Trail Maintenance**
System records all discarded and regenerated payment requests for reconciliation and compliance tracking


**Acceptance Criteria:**

**Payment Request Discarded**
Given a policy undergoes an endorsement modifying premium, When the transaction is committed, Then existing payment requests are invalidated and marked as superseded

**New Requests Generated**
Given payment requests are discarded, When recalculation completes, Then new payment requests reflecting updated policy terms are created with correct amounts and due dates

**No Duplicate Billing**
Given regeneration occurs, When new requests are issued, Then system prevents duplicate charges by ensuring discarded requests are non-collectible

**Audit Completeness**
Given any regeneration event, When the process completes, Then system maintains a complete audit trail linking original requests, policy changes, and new billing documents


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=716874334"
]

---

#### Feature: Discard and Regenerate Invoices Upon Policy Changes
- **Role**: Billing Administrator
- **Action**: automatically discard and regenerate payment requests and invoices when master policy effective dates are rewritten
- **Value**: billing data remains synchronized with policy changes, preventing incorrect charges and ensuring accurate premium calculations without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **automatically discard and regenerate payment requests and invoices when master policy effective dates are rewritten**,
So that **billing data remains synchronized with policy changes, preventing incorrect charges and ensuring accurate premium calculations without manual intervention**


**Key Capabilities:**

**1. Policy Rewrite Reception and Invoicing Date Reset**
Upon receiving rewritten master policy effective date, system updates invoicing start date based on business rules and generates master policy rewrite activity with finished status

**2. Payment Request Impact Analysis and Automatic Discard**
System determines if payment requests exist within affected billing periods using earliest effective date, then automatically discards impacted payment requests and displays discard labels on billing period lists

**3. Invoice Discard Validation and Execution**
When invoices exist for affected periods, system validates discard eligibility, automatically discards qualifying invoices, and triggers status change activities

**4. Manual Payment Request Regeneration**
User initiates payment request regeneration for discarded periods via billing action menu, confirms regeneration through modal, and system recreates payment request with updated premium calculations

**5. Manual Invoice Regeneration**
User confirms premium adjustments to regenerate previously discarded invoices, system displays adjustment notification, and fires invoice regeneration events

**6. Automated Scheduled Regeneration**
System automatically regenerates discarded payment requests via scheduled job while ignoring actively discarded items


**Acceptance Criteria:**

**1. Successful Policy Rewrite Processing**
Given master policy effective date is rewritten, When billing system receives the update, Then invoicing start date is reset, rewrite activity is generated with finished status, and billing rewrite event is fired

**2. Automatic Payment Request Discard**
Given payment requests exist within affected billing periods, When system evaluates discard rules, Then impacted payment requests are automatically discarded, discard activities are generated, and discard labels are displayed on billing period lists

**3. Automatic Invoice Discard Validation**
Given invoices exist for affected periods, When system validates discard eligibility, Then qualifying invoices are automatically discarded with status changes, or process continues without discard if rules are not met

**4. Manual Regeneration Capability**
Given payment request or invoice was previously discarded, When user confirms regeneration action, Then system recreates billing artifacts with updated premium calculations and fires regeneration events

**5. Scheduled Job Regeneration Exclusion**
Given automated payment request generation job executes, When processing billing periods, Then discarded payment requests are ignored and only eligible periods are processed

**6. Data Integrity and Audit Trail**
Given any discard or regeneration action occurs, When transaction completes, Then billing balances are recalculated, all activities are logged, and business events are fired for downstream processing


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=790078201"
]

---

#### Feature: Manage Billing Product Structure for Master and Member Policies
- **Role**: Billing Administrator
- **Action**: establish and maintain hierarchical billing relationships between master policies and derived certificates with associated coverage amounts
- **Value**: billing amounts are accurately tracked and managed across policy hierarchies, ensuring proper premium allocation and financial reconciliation

**Description:**

As a **Billing Administrator**,
I want to **establish and maintain hierarchical billing relationships between master policies and derived certificates with associated coverage amounts**,
So that **billing amounts are accurately tracked and managed across policy hierarchies, ensuring proper premium allocation and financial reconciliation**


**Key Capabilities:**

**1. Master Policy Billing Foundation**
User is able to establish master policy as the root billing entity with associated billing product structure to serve as the parent for all derivative certificates.

**2. Certificate Derivation and Linking**
User is able to create multiple certificate billing products derived from the master policy, where each certificate maintains billing item relationships and amount tracking.

**3. Coverage-Level Amount Management**
User is able to define and maintain individual coverage billing items within each certificate, with dedicated amount associations for granular premium tracking at certificate and coverage levels.


**Acceptance Criteria:**

**1. Master Policy Hierarchy Establishment**
Given a master insurance policy exists, When the billing administrator establishes the master billing product, Then the system creates the hierarchical foundation with master policy billing item ready to support certificate derivation.

**2. Certificate Billing Structure Creation**
Given a master policy billing structure exists, When certificates are derived, Then each certificate contains one certificate-level billing item and multiple coverage-level billing items, all linked to respective amount entities.

**3. Amount Integrity Across Hierarchy**
Given certificates with multiple coverages exist, When billing amounts are assigned, Then the system maintains accurate amount associations at both certificate and individual coverage levels without orphaned amount records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=473406620"
]

---

#### Feature: Generate Business Activity Monitoring (BAM) Messages for Policy Transactions
- **Role**: Billing Administrator
- **Action**: automatically generate and transmit Business Activity Monitoring (BAM) messages for policy lifecycle transactions
- **Value**: stakeholders receive real-time visibility into policy transaction events for operational monitoring, compliance tracking, and system integration

**Description:**

As a **Billing Administrator**,
I want to **automatically generate and transmit Business Activity Monitoring (BAM) messages for policy lifecycle transactions**,
So that **stakeholders receive real-time visibility into policy transaction events for operational monitoring, compliance tracking, and system integration**


**Key Capabilities:**

**Policy Transaction Event Detection**
System identifies qualifying policy lifecycle events (new business, endorsements, cancellations, renewals) triggering BAM message generation requirements.

**BAM Message Composition and Enrichment**
System assembles standardized message payloads containing transaction metadata, policy identifiers, and business context attributes.

**Message Transmission and Acknowledgment**
System transmits BAM messages to designated monitoring platforms and logs transmission status for audit trail purposes.


**Acceptance Criteria:**

**Successful Message Generation**
Given a policy transaction is completed, When the transaction meets BAM criteria, Then the system generates a structured BAM message within defined timeframes.

**Message Content Completeness**
Given BAM message generation, When payload is assembled, Then all mandatory transaction attributes and identifiers are included without data loss.

**Transmission Failure Handling**
Given message transmission encounters errors, When failure is detected, Then system logs error details and initiates retry mechanism per configured policies.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=721327076"
]

---

#### Feature: Fire Business Events for Policy Transaction Lifecycle
- **Role**: Billing Administrator
- **Action**: process rescind cancellation transactions to reinstate self-billed master policies
- **Value**: previously cancelled policies are restored with accurate billing information and downstream systems are notified

**Description:**

As a **Billing Administrator**,
I want to **process rescind cancellation transactions to reinstate self-billed master policies**,
So that **previously cancelled policies are restored with accurate billing information and downstream systems are notified**


**Key Capabilities:**

**1. Initiate Rescind Transaction**
Upon receiving master policy rescind request from policy system, billing subsystem creates rescind cancellation transaction with effective date matching original cancellation date

**2. Reinstate Master Policy**
System restores master policy using premium and rate values provided in rescind transaction details

**3. Update Payment Request**
System identifies payment request for billing period containing rescind effective date and updates with reinstated values including premium, rate, rate basis, lives count, and volume

**4. Publish Lifecycle Events**
System generates business activity monitoring records for rescind cancellation and payment request updates, then fires reinstatement business event


**Acceptance Criteria:**

**1. Successful Rescind Processing**
Given a cancelled self-bill master policy with future cancellation date, when rescind request is received from policy system, then billing system creates rescind transaction and reinstates policy with provided financial values

**2. Payment Request Reconciliation**
Given a reinstated master policy, when system identifies associated payment request, then all billing components are updated with current policy values

**3. Event Publication**
Given completed rescind transaction, when policy reinstatement finishes, then system generates monitoring records with finished status and fires rescind cancellation business event

**4. Data Integrity**
Given rescind effective date, when processing reinstatement, then system prevents processing if effective date does not match original cancellation date


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=749179578"
]

---

#### Feature: Validate Policy Transaction Sequences and Dependencies
- **Role**: Billing Administrator
- **Action**: validate and process policy transactions in correct sequence with automated dependency resolution
- **Value**: policy lifecycle integrity is maintained and out-of-sequence scenarios are handled consistently

**Description:**

As a **Billing Administrator**,
I want to **validate and process policy transactions in correct sequence with automated dependency resolution**,
So that **policy lifecycle integrity is maintained and out-of-sequence scenarios are handled consistently**


**Key Capabilities:**

**1. Sequential Transaction Processing**
System processes chronological policy transactions (New Business, Rewrite, Amendment, Cancellation, Renewal, Reinstatement, Rescind, Continuation, Portability, Move to List Bill, Premium Waiver) applying them to member records and master policies in order.

**2. Out-of-Sequence Detection and Resolution**
When backdated transactions arrive with existing future-dated operations, system applies sequencing rules: BackOff1 (auto-remove future operations requiring explicit roll-on), BackOff2 (invoicing modality changes preserved), or RollOn (changes cascade forward).

**3. Transaction Type Compatibility Enforcement**
System validates each backdated transaction type against supported future-dated operations matrix, rejecting unsupported combinations and enforcing cascading constraints (e.g., Rewrite from master policy only).

**4. Special Transaction Handling**
Upon Amendment with location/division changes, system generates separate Employment Change transactions; upon master policy operations, cascading rules apply to dependent member records automatically.


**Acceptance Criteria:**

**1. Chronological Processing**
Given transactions arrive in sequence, When system processes them, Then operations apply directly to member and master policy records without intervention.

**2. Backdated Transaction Conflict Resolution**
Given backdated transaction received with future-dated operations, When system evaluates sequencing rules, Then appropriate BackOff1, BackOff2, or RollOn behavior executes based on transaction type matrix.

**3. Unsupported Combination Rejection**
Given backdated New Business or out-of-sequence Renewal attempted, When system validates transaction, Then operation is rejected as unsupported with appropriate notification.

**4. Cascading Dependency Enforcement**
Given master policy Rewrite initiated, When system processes operation, Then changes cascade to member records automatically while standalone member Rewrite is blocked.

**5. Employment Change Generation**
Given Amendment includes location/division changes, When system processes transaction, Then separate Employment Change transaction generates instead of standard amendment processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=825003335"
]

---
## Initiative: Invoicing & Statement Generation

### Epic: Billing Cycle & Period Control

#### Feature: Calculate Invoice Period Start and End Dates
- **Role**: Billing Administrator
- **Action**: automate invoice period date determination based on billing frequency and configuration rules
- **Value**: ensure accurate, consistent billing cycles aligned with customer agreements and reduce manual calculation errors

**Description:**

As a **Billing Administrator**,
I want to **automate invoice period date determination based on billing frequency and configuration rules**,
So that **I can ensure accurate, consistent billing cycles aligned with customer agreements and reduce manual calculation errors**


**Key Capabilities:**

**1. Initialize Period Calculation Context**
System receives invoicing frequency configuration (monthly, quarterly, weekly, biweekly, semi-monthly, etc.), due day calculation type, invoicing start date, and previous period data for subsequent invoices.

**2. Apply Frequency-Specific Calculation Rules**
When due day type is month-based, system applies monthly duration rules with day-of-month alignment. When fixed-day type is selected, system applies fixed-interval calculations (7/14/28 days).

**3. Calculate Initial Period Boundaries**
For first invoice, system sets period start as invoicing start date and calculates period end by adding frequency duration with appropriate alignment rules.

**4. Calculate Subsequent Period Boundaries**
System sets new period start as previous period end plus one day, calculates period end using frequency rules while maintaining alignment with original modal period reference date.

**5. Handle Month-End Edge Cases**
When calculated dates fall on non-existent days, system applies last-day-of-month logic and adjusts based on whether original start date was month-end.

**6. Recalculate Upon Frequency Changes**
When billing frequency is modified, system identifies last period end date, initiates new period sequence from next day, and applies new frequency rules while preserving original start date reference.


**Acceptance Criteria:**

**1. First Invoice Period Generation**
Given a new billing account with configured frequency and start date, when the first invoice is triggered, then system calculates period start equal to invoicing start date and period end based on frequency duration rules.

**2. Subsequent Invoice Period Continuity**
Given an existing invoice history, when generating next invoice, then system sets period start as previous period end plus one day and calculates period end maintaining day-of-month alignment with first modal period.

**3. Fixed-Interval Frequency Accuracy**
Given a weekly/biweekly/28-day frequency with last-day-of-period configuration, when calculating any invoice period, then system applies exact day-count intervals (6/13/27 days) without month alignment.

**4. Month-End Date Normalization**
Given a period calculation resulting in non-existent date (e.g., February 30), when system applies alignment rules, then period end becomes last day of target month adjusted per first period start date month-end status.

**5. Semi-Monthly Alternating Pattern**
Given semi-monthly frequency, when calculating periods, then system alternates between 14-day intervals and month-end alignment creating predictable mid-month and end-of-month period boundaries.

**6. Frequency Change Transition Integrity**
Given a billing account with frequency modification, when calculating first invoice under new frequency, then system starts new period sequence from day after last period end applying new rules while preserving original start date reference for alignment.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=447619868"
]

---

#### Feature: Calculate Invoice Due Dates Based on Billing Rules
- **Role**: Billing Administrator
- **Action**: calculate invoice due dates dynamically based on configurable billing parameters and business timing rules
- **Value**: invoices are issued with accurate, compliant due dates that align with organizational cash flow strategies and prevent billing sequence errors

**Description:**

As a **Billing Administrator**,
I want to **calculate invoice due dates dynamically based on configurable billing parameters and business timing rules**,
So that **invoices are issued with accurate, compliant due dates that align with organizational cash flow strategies and prevent billing sequence errors**.


**Key Capabilities:**

**1. Configuration Retrieval & Period Determination**
System retrieves billing parameters (frequency: monthly/quarterly/semi-monthly/weekly; timing: arrears/advance/on-time; period offset; due day mode) and calculates invoicing period boundaries.

**2. Due Date Formula Application**
System applies timing-specific formulas: arrears adds offset to period end, advance subtracts offset from period start, on-time uses period boundary with due day alignment.
    2.1 Calendar-based semi-monthly selects closest configured due day value to calculated date
    2.2 Period-start-based mode applies positive/negative day offset from period commencement
    2.3 Last-day mode assigns final calendar day of applicable period

**3. Temporal Validation & Auto-Correction**
System validates calculated due date against current system date and previous invoice due date, automatically shifting forward to next valid period when conflicts detected to maintain chronological integrity.


**Acceptance Criteria:**

**1. Standard Due Date Calculation**
Given invoicing configuration (monthly, arrears, offset 0, due day 15), When invoice period ends 3/31/2024, Then system calculates due date as 4/15/2024.

**2. Semi-Monthly Dual Due Day Selection**
Given semi-monthly frequency with due days 1st and 17th, When calculated date falls on 8/10, Then system assigns 8/17 as closest due day.

**3. Forward Shifting for Past Dates**
Given calculated due date 7/5/2024, When current system date is 8/31/2024, Then system shifts due date to next valid period (9/5/2024).

**4. Sequence Integrity Enforcement**
Given previous invoice due date 3/28/2024, When new invoice calculates 3/25/2024 after configuration change, Then system shifts to 3/28/2024 to prevent out-of-sequence.

**5. Negative Offset Handling**
Given period-start mode with offset -2 days and period start 1/1/2024, Then system calculates due date 12/30/2023.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=447620118"
]

---

#### Feature: Manage Semi-Monthly Due Day Filtering and Validation
- **Role**: Billing Administrator
- **Action**: Configure and validate sequential due day assignments for semi-monthly invoicing cycles
- **Value**: Invoices are generated on two valid dates each month with enforced chronological integrity and automatic validation

**Description:**

As a **Billing Administrator**,
I want to **configure and validate sequential due day assignments for semi-monthly invoicing cycles**,
So that **invoices are generated on two valid dates each month with enforced chronological integrity and automatic validation**


**Key Capabilities:**

**1. Initialize Primary Due Day Selection**
User establishes the first billing milestone by selecting the primary due day within the allowed range, enabling subsequent configuration steps.

**2. Enable and Filter Secondary Due Day Options**
Upon primary due day confirmation, system activates secondary due day selection with dynamically filtered options ensuring chronological sequence.

**3. Modify Secondary Due Day Independently**
User adjusts the secondary due day from pre-filtered valid options while maintaining primary due day integrity without re-validation triggers.

**4. Reset Configuration Upon Primary Due Day Change**
When primary due day is modified, system automatically clears secondary due day assignment and regenerates filtered options based on the new primary value, ensuring data consistency.


**Acceptance Criteria:**

**1. Initial Configuration State**
Given no due days are configured, When billing administrator accesses semi-monthly setup, Then primary due day is enabled with full range (1-27) and secondary due day is disabled.

**2. Sequential Due Day Enforcement**
Given primary due day is selected as day 10, When secondary due day options are displayed, Then only values 11-31 are available for selection.

**3. Independent Secondary Modification**
Given both due days are configured (primary=8, secondary=20), When secondary due day changes to 25, Then primary due day remains unchanged and available secondary options stay filtered (9-31).

**4. Primary Change Cascade Reset**
Given both due days are configured (primary=5, secondary=15), When primary due day changes to 12, Then secondary due day resets to blank and available options refilter to 13-31.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=571486148"
]

---

#### Feature: Configure Invoicing Start Date Alignment and Defaults
- **Role**: Billing Administrator
- **Action**: configure invoicing period calculation rules based on frequency patterns
- **Value**: the system automatically generates accurate invoice periods aligned with business billing cycles and regulatory requirements

**Description:**

As a **Billing Administrator**,
I want to **configure invoicing period calculation rules based on frequency patterns**,
So that **the system automatically generates accurate invoice periods aligned with business billing cycles and regulatory requirements**


**Key Capabilities:**

**1. Monthly-Based Period Configuration**
User is able to configure monthly, bi-monthly, quarterly, semi-annual, or annual frequencies where the system maintains day-of-month consistency and automatically adjusts for month-end dates and leap year scenarios.

**2. Alternative Frequency Pattern Setup**
User is able to configure semi-monthly (two cycles per month), every-28-days (fixed 4-week cycles), or weekly/bi-weekly patterns independent of calendar month boundaries.

**3. Automatic Period Transition Management**
When a billing period ends, the system automatically calculates the next period start date using frequency-specific rules, ensuring continuous coverage without gaps or overlaps between consecutive periods.


**Acceptance Criteria:**

**1. Monthly-Based Frequency Accuracy**
Given invoicing frequency is set to monthly-based pattern, When the start date falls on month-end (28th-31st), Then the system adjusts subsequent periods to the last available day of each target month.

**2. Leap Year Handling**
Given the invoicing start date is February 29th with annual frequency, When the next period falls in a non-leap year, Then the system adjusts the start date to February 28th.

**3. Continuous Period Coverage**
Given any configured invoicing frequency, When the system calculates the next invoice period, Then the new period starts immediately following the previous period end date with no gaps or overlaps.

**4. Alternative Frequency Pattern Execution**
Given semi-monthly, 28-day, or weekly-based frequency is configured, When periods are generated, Then the system calculates periods independent of calendar month boundaries using fixed-day increments.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=447619809"
]

---

#### Feature: Generate Payment Requests for Upcoming Billing Periods
- **Role**: Billing Administrator
- **Action**: generate payment requests for upcoming billing periods on self-bill accounts
- **Value**: proactive cash flow management is enabled and billing cycle continuity is maintained without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **generate payment requests for upcoming billing periods on self-bill accounts**,
So that **proactive cash flow management is enabled and billing cycle continuity is maintained without manual intervention**


**Key Capabilities:**

**1. Payment Request Initiation & Confirmation**
User initiates payment request generation action and confirms intent to proceed with the billing cycle advancement

**2. Account Eligibility Validation**
System validates billing account hold status and verifies no invoice holds are active for the current period
    2.1 Upon detecting active hold, system blocks generation and notifies user of restriction

**3. Billing Period Calculation & Modal Amount Validation**
System calculates earliest eligible billing period and validates active product modal amounts exist for payment generation

**4. Payment Request Creation & Account Update**
System opens billing period, populates premium amounts, updates next payment due date, and generates payment request with business activity monitoring message


**Acceptance Criteria:**

**1. Successful Payment Request Generation**
Given account has no holds and valid modal amounts exist, When user confirms generation, Then system creates payment request for calculated billing period and updates next payment due date

**2. Hold Status Prevention**
Given active invoice hold exists on account, When generation is attempted, Then system blocks action and displays hold restriction notification

**3. Modal Amount Validation**
Given no active modal amount exists for period, When system validates eligibility, Then generation fails with account configuration error message

**4. First Period Premium Calculation**
Given first open billing period, When calculating period amount, Then system sums all product modal amounts across plan coverages


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=517605382"
]

---

#### Feature: Validate Billing Hold Status Before Invoice Actions
- **Role**: Billing Administrator
- **Action**: generate payment requests for self-bill accounts while respecting billing holds
- **Value**: I can ensure timely premium collection while preventing invoice actions on accounts with active holds

**Description:**

As a **Billing Administrator**,
I want to **generate payment requests for self-bill accounts while respecting billing holds**,
So that **I can ensure timely premium collection while preventing invoice actions on accounts with active holds**


**Key Capabilities:**

**1. Payment Request Initiation**
User initiates payment request generation for self-bill billing account and confirms the action.

**2. Hold Status Validation**
System validates that no active invoice hold exists (hold type invoice, effective date before or equal to current date, expiration date after current date). Upon detecting active hold, system prevents payment request generation and notifies user.

**3. Billing Period Determination**
System calculates earliest billing period requiring payment request based on predefined period calculation rules.

**4. Modal Amount Verification**
System validates existence of active product modal amount for the payment generation period.

**5. Payment Request Finalization**
System generates payment request, updates billing period details, recalculates next payment due date, and confirms successful generation.


**Acceptance Criteria:**

**1. Successful Payment Request Generation**
Given a self-bill account without active invoice holds and valid modal amounts, When user confirms payment request generation, Then system creates payment request, updates next payment due date, and displays success confirmation.

**2. Hold Violation Prevention**
Given a self-bill account with active invoice hold, When user attempts payment request generation, Then system blocks the action, displays hold-related error alert, and generates cancellation message.

**3. Missing Modal Amount Handling**
Given no active product modal amount exists for the payment period, When system validates modal amount, Then system displays error message and terminates without generating payment request.

**4. Cancellation Processing**
Given user initiates payment request generation, When user cancels confirmation modal, Then system closes modal and terminates process without any data changes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=517605382"
]

---

#### Feature: Calculate Reporting Periods for Self-Bill Products
- **Role**: Billing Administrator
- **Action**: calculate reporting periods for self-billed products using predefined business rules
- **Value**: accurate billing cycles are established and reporting compliance is maintained for self-service billing arrangements

**Description:**

As a **Billing Administrator**,
I want to **calculate reporting periods for self-billed products using predefined business rules**,
So that **accurate billing cycles are established and reporting compliance is maintained for self-service billing arrangements**


**Key Capabilities:**

**Access Business Rule Definitions**
User is able to retrieve predefined business rules for reporting period calculations specific to self-billed products at Core/Reference level.

**Execute Reporting Period Calculation**
System applies calculation logic to determine reporting periods based on product configuration and billing arrangements.

**Validate Period Boundaries**
System ensures calculated reporting periods align with billing cycle requirements and regulatory constraints.

**Reference Documentation**
User is able to access detailed rule specifications through centralized documentation links when clarification is needed.


**Acceptance Criteria:**

**Successful Calculation Execution**
Given a self-billed product with defined parameters, When the reporting period calculation is triggered, Then the system generates accurate period boundaries per business rule specifications.

**Rule Accessibility**
Given business rules exist in the system, When the user requests rule documentation, Then the system provides access to detailed calculation specifications.

**Invalid Configuration Handling**
Given incomplete product configuration, When reporting period calculation is attempted, Then the system prevents execution and identifies missing data requirements.

**Audit Trail Creation**
Given a successful calculation, When reporting periods are established, Then the system records calculation parameters and results for compliance tracking.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=547989731"
]

---

#### Feature: Manage Reporting Period Length Alignment with Invoicing Frequency
- **Role**: Billing Administrator
- **Action**: configure reporting period alignment with invoicing frequency for self-bill products
- **Value**: billing cycles comply with business rules and generate accurate financial statements across different coverage types

**Description:**

As a **Billing Administrator**,
I want to **configure reporting period alignment with invoicing frequency for self-bill products**,
So that **billing cycles comply with business rules and generate accurate financial statements across different coverage types**


**Key Capabilities:**

**1. Invoicing Frequency Selection**
User selects invoicing frequency (Monthly, Quarterly, or Annual) for self-bill product configuration, establishing the billing period framework

**2. Reporting Period Configuration**
User configures reporting periods for coverages based on selected invoicing frequency. System enforces core business rule ensuring reporting period equals or is smaller than invoicing period
    2.1 Monthly invoicing permits only monthly reporting (12 billing periods/year)
    2.2 Quarterly invoicing permits monthly or quarterly reporting (4 billing periods/year)
    2.3 Annual invoicing permits monthly, quarterly, or annual reporting (1 billing period/year)

**3. Multi-Coverage Period Management**
User assigns different compliant reporting periods across coverages within the same plan

**4. Configuration Validation**
System prevents invalid combinations and rejects configurations where reporting period exceeds invoicing period


**Acceptance Criteria:**

**1. Valid Configuration Acceptance**
Given a self-bill product setup, When the reporting period is equal to or smaller than the invoicing period, Then the system accepts and persists the configuration

**2. Invalid Configuration Rejection**
Given a configuration attempt, When the reporting period exceeds the invoicing period, Then the system rejects the configuration and prevents persistence

**3. Monthly Invoicing Constraint**
Given monthly invoicing frequency is selected, When user attempts non-monthly reporting periods, Then the system blocks the configuration

**4. Quarterly Invoicing Flexibility**
Given quarterly invoicing frequency, When user configures monthly or quarterly reporting periods, Then the system accepts both options across different coverages

**5. Annual Invoicing Maximum Flexibility**
Given annual invoicing frequency, When user selects any reporting period (monthly, quarterly, annual), Then system permits all combinations

**6. Multi-Coverage Independence**
Given multiple coverages within a plan, When each has compliant reporting periods, Then system generates correct billing periods per coverage independently


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=521348131"
]

---

#### Feature: Display and Sort Billing Period Details by Master Policy and Plan-Coverage
- **Role**: Billing Administrator
- **Action**: view and navigate billing period policy structures with organized hierarchical sorting
- **Value**: I can efficiently review and manage billing period details across master policies and their coverage arrangements to ensure accurate statement generation

**Description:**

As a **Billing Administrator**,
I want to **view and navigate billing period policy structures with organized hierarchical sorting**,
So that **I can efficiently review and manage billing period details across master policies and their coverage arrangements to ensure accurate statement generation**.


**Key Capabilities:**

**1. Billing Period Structure Access**
System presents billing period details for self-bill accounts, displaying master policies in an organized, collapsed initial state to support efficient navigation.

**2. Master Policy Hierarchy Navigation**
User is able to expand individual master policies to reveal associated plan-coverage combinations, maintaining alphanumeric ascending sort order (A-Z, 0-9) at the policy level.

**3. Plan-Coverage Detail Review**
Upon expansion, system displays nested plan-coverage combinations sorted alphanumerically within each master policy, showing respective reporting periods for billing validation.

**4. Hierarchical Data Organization**
System automatically applies consistent alphanumeric sorting at both master policy and plan-coverage levels to ensure predictable data presentation.


**Acceptance Criteria:**

**1. Master Policy Display**
Given an active billing period with multiple master policies, when the billing period details are accessed, then the system presents all master policies in collapsed state sorted alphanumerically.

**2. Plan-Coverage Expansion**
Given a collapsed master policy, when the user expands the policy node, then the system reveals all associated plan-coverage combinations sorted alphanumerically with reporting periods.

**3. Hierarchical Sorting Consistency**
Given multiple master policies and plan-coverage combinations, when the hierarchy is displayed, then alphanumeric ascending order (A-Z, 0-9) is applied consistently at both levels.

**4. Self-Bill Account Filtering**
Given the billing period contains mixed account types, when displaying details, then only self-bill billing account structures are presented with proper policy-plan relationships.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=828508835"
]

---

#### Feature: Update Next Payment Due Date Based on Invoice Status
- **Role**: Billing Administrator
- **Action**: automatically update the next payment due date based on invoice payment status and billing period changes
- **Value**: accurate payment tracking and timely collection of outstanding obligations are maintained

**Description:**

As a **Billing Administrator**,
I want to **automatically update the next payment due date based on invoice payment status and billing period changes**,
So that **accurate payment tracking and timely collection of outstanding obligations are maintained**


**Key Capabilities:**

**1. Initial Due Date Population**
Upon first product issuance and invoicing start date establishment, system populates next payment due date with first billing period due date.

**2. Due Date Advancement on Payment**
When invoice achieves paid status, system advances next payment due date to subsequent billing period due date after the paid period.

**3. Due Date Recalculation on Period Changes**
If invoicing start date is reset, system recalculates all billing periods and updates next payment due date to maintain alignment.

**4. Due Date Reversion on Status Change**
When paid invoice status changes to any other status, system resets next payment due date to earliest unpaid invoice due date.


**Acceptance Criteria:**

**1. Initial Population Accuracy**
Given first product issued and invoicing start date set, When billing account is activated, Then next payment due date equals first billing period due date.

**2. Payment-Driven Advancement**
Given invoice exists for billing period, When invoice status changes to paid, Then next payment due date advances to next billing period due date.

**3. Reversal Handling**
Given previously paid invoice, When invoice status changes from paid to any other status, Then next payment due date reverts to earliest unpaid invoice due date.

**4. Period Recalculation Integrity**
Given invoicing start date is reset, When billing periods are recalculated, Then next payment due date updates to reflect new billing structure.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=562434955"
]

---

#### Feature: Calculate and Track Amendments Not Yet Billed
- **Role**: Billing Administrator
- **Action**: calculate and track policy amendments that have not yet been billed across billing cycles
- **Value**: accurate premium calculations and financial reporting are maintained despite unbilled policy changes

**Description:**

As a **Billing Administrator**,
I want to **calculate and track policy amendments that have not yet been billed across billing cycles**,
So that **accurate premium calculations and financial reporting are maintained despite unbilled policy changes**


**Key Capabilities:**

**1. Amendment Value Initialization**
System identifies policy amendments that have occurred but remain unbilled in the current billing cycle

**2. Unbilled Amount Calculation**
System applies calculation methodology to determine financial impact of each unbilled amendment using predefined business rules

**3. Value Update Processing**
System updates amendment values in the tracking system to reflect current unbilled amounts

**4. Multiple Premium Sequence Reconciliation**
When multiple premium sequences exist, system aggregates and reconciles unbilled amendments across all sequences

**5. Billing Cycle Integration**
Upon billing cycle execution, system incorporates tracked amendments into invoice generation process


**Acceptance Criteria:**

**1. Amendment Identification**
Given policy amendments exist, When billing cycle has not processed them, Then system captures all unbilled amendments for tracking

**2. Calculation Accuracy**
Given unbilled amendments are identified, When calculation methodology is applied, Then system produces accurate financial values per business rules

**3. Multi-Sequence Handling**
Given multiple premium sequences exist, When amendments span sequences, Then system correctly aggregates values without duplication

**4. Value Persistence**
Given amendments are calculated, When values are updated, Then system maintains accurate unbilled amounts until billing occurs

**5. Billing Cycle Synchronization**
Given unbilled amendments are tracked, When next billing cycle executes, Then system includes all tracked amendments in invoice generation


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=547989902"
]

---

### Epic: Premium Calculation & Allocation

#### Feature: Calculate Reporting Periods for Self-Bill Products
- **Role**: Billing Administrator
- **Action**: automate reporting period calculations for self-bill master policies to align with configured billing cycles
- **Value**: accurate premium allocation and regulatory compliance are achieved through systematic period segmentation

**Description:**

As a **Billing Administrator**,
I want to **automate reporting period calculations for self-bill master policies to align with configured billing cycles**,
So that **accurate premium allocation and regulatory compliance are achieved through systematic period segmentation**


**Key Capabilities:**

**Billing Period Alignment Validation**
System validates master policy effective dates fall within billing period boundaries before initiating reporting period calculations.

**Initial Reporting Period Establishment**
System establishes first reporting period starting from billing period start date and determines end date based on configured period length.

**Iterative Period Calculation**
System iteratively generates subsequent reporting periods by adding configured intervals (monthly/quarterly/annual) aligned to invoicing start date, adjusting for month-end boundaries.

**Boundary Enforcement**
When calculated reporting period exceeds billing period end date, system terminates calculation sequence without saving incomplete periods.

**Multi-Coverage Support**
System independently calculates reporting periods for each coverage within master policy, accommodating different period configurations simultaneously.


**Acceptance Criteria:**

**Valid Period Generation**
Given master policy effective date falls within billing period, When system calculates reporting periods, Then all generated periods have start dates >= billing period start and end dates &lt;= billing period end.

**Configuration-Based Intervals**
Given monthly/quarterly/annual reporting period configuration, When system calculates subsequent periods, Then intervals advance by 1/3/12 months respectively from previous period start date.

**Invoicing Date Alignment**
Given invoicing start date on 15th of month, When calculating period start dates, Then system aligns to 15th of target month or last available day if date doesn't exist.

**Boundary Termination**
Given calculated reporting period end date exceeds billing period boundary, When system performs validation, Then calculation stops without saving invalid period.

**Zero-Premium Handling**
Given master policy effective date exceeds reporting period end date, When period is generated, Then system creates period with zero lives and premium allocation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=527534425"
]

---

#### Feature: Calculate Premium Using Modal-Based Daily Rate
- **Role**: Billing Administrator
- **Action**: configure and manage seasonal billing cycles with adjusted premium calculations across non-consecutive invoicing periods
- **Value**: annual coverage is maintained for seasonal employees while spreading premiums only across active billing periods and accommodating unpaid leave gaps

**Description:**

As a **Billing Administrator**,
I want to **configure and manage seasonal billing cycles with adjusted premium calculations across non-consecutive invoicing periods**,
So that **annual coverage is maintained for seasonal employees while spreading premiums only across active billing periods and accommodating unpaid leave gaps**


**Key Capabilities:**

**1. Seasonal Gap Configuration**
User configures billing account with designated non-billing periods at account level for list bill products with monthly invoicing frequency.

**2. Premium Calculation & Distribution**
System calculates modal premium based on total active invoicing periods annually (excluding gap months) and applies modal-based daily rate for proration when coverage dates misalign.

**3. Automated Invoice Generation Control**
Upon reaching configured seasonal gap period, system automatically skips invoice generation and advances to next active billing cycle without creating billable items.

**4. Premium Change Reconciliation**
When premium adjustments occur during gap periods, system defers reflection until first invoice after billing resumes.

**5. Paid-to-Date Management**
Upon full payment of pre-gap invoices, system advances paid-to-date marker to seasonal gap end date.

**6. Gap Period Reconfiguration**
If seasonal gap periods require update and issued/paid invoices exist, user must discard those invoices before modifying gap configuration, triggering full premium recalculation.


**Acceptance Criteria:**

**1. Seasonal Gap Enforcement**
Given billing account has designated seasonal gap periods, When invoice generation batch runs during gap month, Then system skips generation and proceeds to next active billing period without creating billable items.

**2. Premium Recalculation Upon Configuration Change**
Given seasonal gap periods are modified, When update is saved, Then system recalculates all member premiums based on new active invoice count and creates new modal premium history records.

**3. Premium Change Deferral During Gap**
Given premium adjustments occur during seasonal gap, When billing resumes, Then first post-gap invoice reflects all accumulated changes from gap period.

**4. Paid-to-Date Advancement**
Given all pre-gap invoices are fully paid, When system evaluates paid-to-date status, Then marker shifts to end of seasonal gap period.

**5. Configuration Update Prerequisites**
Given billing account has issued/paid invoices, When user attempts seasonal gap modification, Then system prevents update until those invoices are discarded.

**6. Multi-Period Gap Support**
Given business requires non-consecutive gaps, When configuring seasonal billing, Then system accepts selection of 1-11 discontinuous invoicing periods within annual cycle.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=792238839"
]

---

#### Feature: Manage Seasonal Billing Gap Configuration
- **Role**: Billing Administrator
- **Action**: configure and manage seasonal billing gaps for accounts with payroll interruptions
- **Value**: I can ensure annual premium is accurately distributed across active billing periods while maintaining continuous coverage during non-billing gaps

**Description:**

As a **Billing Administrator**,
I want to **configure and manage seasonal billing gaps for accounts with payroll interruptions**,
So that **I can ensure annual premium is accurately distributed across active billing periods while maintaining continuous coverage during non-billing gaps**


**Key Capabilities:**

**1. Seasonal Gap Configuration**
User is able to designate 1-11 non-billing periods annually during billing account setup for monthly invoicing frequency accounts, supporting consecutive or non-consecutive gaps.

**2. Automated Premium Redistribution**
System recalculates annual premium across active billing periods only, applying modal-based daily proration when coverage dates misalign with billing cycles.

**3. Billing Period Validation**
When generating billable items or invoices, system verifies whether the current period falls within configured gaps and suppresses generation accordingly.

**4. Gap Configuration Updates**
User is able to modify seasonal gap periods. Upon update with issued invoices, system requires invoice discarding first, then recalculates premium and modal amounts across all member records.

**5. Payment Tracking Continuity**
System maintains paid-to-date status throughout gaps, automatically shifting coverage markers to gap-end once preceding periods are settled.


**Acceptance Criteria:**

**1. Initial Configuration Success**
Given monthly invoicing frequency is selected, When user activates advanced schedule and designates 1-11 seasonal gap periods, Then system accepts configuration and calculates premium based on active period count only.

**2. Premium Calculation Accuracy**
Given seasonal gaps are configured, When annual premium is distributed, Then system divides premium across active billing periods only and applies modal proration for partial coverage periods.

**3. Gap Period Suppression**
Given invoicing period falls within configured seasonal gap, When invoice generation is initiated, Then system skips that period and processes next active billing period without creating billable items.

**4. Modification with Active Invoices**
Given billing account has issued/paid invoices, When user attempts gap period modification, Then system prevents update until invoices are discarded, then recalculates all premiums upon successful modification.

**5. Coverage Continuity Validation**
Given seasonal gaps exist, When billing periods are suppressed, Then system maintains continuous insurance coverage status throughout non-billing periods without termination.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=792238839"
]

---

#### Feature: Calculate Paid-To-Date for Self-Bill Accounts
- **Role**: Billing Administrator
- **Action**: calculate and retrieve the paid-to-date coverage timeline for self-bill master policies
- **Value**: I can accurately determine payment coverage status, support delinquency processing decisions, and provide integration data to external subsystems

**Description:**

As a **Billing Administrator**,
I want to **calculate and retrieve the paid-to-date coverage timeline for self-bill master policies**,
So that **I can accurately determine payment coverage status, support delinquency processing decisions, and provide integration data to external subsystems**


**Key Capabilities:**

**1. PTD Calculation Triggering**
User is able to initiate paid-to-date calculation on-demand through UI access, automated delinquency processes, or external API requests for any active self-bill master policy.

**2. Invoice-Based Strategy Execution**
Upon selecting By Invoice strategy, system identifies fully-paid invoices, determines uninterrupted invoice sequences from policy effective date, and calculates PTD as the sequence end date.

**3. Daily Rate Strategy Execution**
When Daily Rate strategy applies, system computes average daily rate from total invoiced amounts, divides total payments by this rate, and projects PTD as covered days from policy effective date.

**4. Maximum Strategy Arbitration**
If Maximum strategy is configured, system calculates PTD using both Invoice and Daily Rate methods, then selects the later date as final PTD value.

**5. Default Fallback Handling**
When no paid invoices or allocated payments exist, system defaults PTD to master policy effective date regardless of selected strategy.


**Acceptance Criteria:**

**1. Strategy-Based Calculation Accuracy**
Given a configured PTD strategy (Invoice/Daily Rate/Maximum), When calculation is triggered for a master policy with payment history, Then system returns PTD value consistent with the selected strategy's business rules.

**2. Real-Time Calculation Execution**
Given user accesses billing account consolidated view or external system requests PTD via API, When master policy has active invoices and payments, Then system calculates and returns current PTD value without pre-generation requirements.

**3. Fallback to Policy Effective Date**
Given a master policy with no fully-paid invoices or allocated payments, When PTD calculation executes under any strategy, Then system defaults PTD to the master policy effective date.

**4. Multi-Channel Availability**
Given valid self-bill master policy context, When PTD is requested through UI displays, delinquency jobs, or external API calls, Then system provides consistent PTD value across all access channels.

**5. Dynamic Recalculation**
Given new invoices generated or payments allocated to master policy, When subsequent PTD calculation occurs, Then system recalculates PTD reflecting updated invoice and payment data.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=726964318"
]

---

#### Feature: Calculate Amendments Not Yet Billed (ANYB) Balance
- **Role**: Billing Administrator
- **Action**: automate calculation and display of unbilled premium amendments across member and account levels
- **Value**: stakeholders have real-time visibility into pending financial obligations before invoice generation

**Description:**

As a **Billing Administrator**,
I want to **automate calculation and display of unbilled premium amendments across member and account levels**,
So that **stakeholders have real-time visibility into pending financial obligations before invoice generation**


**Key Capabilities:**

**1. Asynchronous ANYB Calculation Initiation**
Upon scheduled job execution, system identifies all member records requiring ANYB recalculation and processes each systematically.

**2. Member-Level Value Determination**
System computes unbilled amendment values per member record, applies business rules, and timestamps completion.

**3. Account-Level Balance Aggregation**
System consolidates member-level ANYB values to billing account balance and updates timestamp reflecting latest calculation.

**4. Multi-Channel Balance Presentation**
System displays current ANYB balances across payment application, refund processing, account management, and billing inquiry interfaces.

**5. Iterative Processing Completion**
When all member records for current billing account are processed, system proceeds to next account until all entities are updated.


**Acceptance Criteria:**

**1. Scheduled Calculation Execution**
Given scheduled job triggers, When system processes billing accounts, Then ANYB values are calculated for all associated member records asynchronously.

**2. Member Record Update Accuracy**
Given member record requires calculation, When processing completes, Then member record reflects updated ANYB value with completion timestamp.

**3. Account Balance Aggregation**
Given multiple member records per billing account, When calculations complete, Then account-level ANYB balance equals sum of member values with latest timestamp.

**4. Cross-System Balance Visibility**
Given ANYB calculation completes, When users access payment, refund, or account management interfaces, Then current ANYB balances display at appropriate levels.

**5. Processing Continuity**
Given multiple billing accounts require processing, When current account completes, Then system automatically proceeds to next account until all are updated.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=726964716"
]

---

#### Feature: Generate Invoice Items from Pending Billable Items
- **Role**: Billing Administrator
- **Action**: generate invoice items from pending billable items based on invoicing period and payment allocation rules
- **Value**: accurate invoices are produced aligned with billing frequencies, payroll deduction schedules, and customer payment arrangements

**Description:**

As a **Billing Administrator**,
I want to **generate invoice items from pending billable items based on invoicing period and payment allocation rules**,
So that **accurate invoices are produced aligned with billing frequencies, payroll deduction schedules, and customer payment arrangements**


**Key Capabilities:**

**1. Invoicing Period Determination**
System calculates invoicing period start and end dates based on billing account's assigned invoicing frequency, establishing the eligibility window for pending invoice items.

**2. GROUP Mode Inclusion Logic**
System applies configured inclusion criterion (periodFrom or periodTo comparison) to select pending invoice items where item period boundaries fall within or before invoicing period end date.

**3. INDIVIDUAL Mode Payroll Matching**
System matches invoice items to payroll deduction dates from payroll calendar, including items where deduction date falls within item period boundaries and invoicing period.
    3.1 Upon no payroll match, system applies frequency-specific fallback rules (standard or semi-monthly logic) to include items based on period start relative to payroll deduction start date.
    3.2 When payroll date precedes current invoicing period, system cross-references prior invoicing periods and includes items in current invoice with historical billing period assignment.

**4. Migration Account Handling**
System excludes invoice items for migrated policies where modal period predates aligned billing start date, while including regular modal premiums per standard allocation rules.


**Acceptance Criteria:**

**1. Invoicing Period Establishment**
Given a billing account with defined invoicing frequency, When invoice generation initiates, Then system calculates period start and end dates establishing the invoice scope boundary.

**2. GROUP Mode Item Selection**
Given GROUP payment allocation mode and configured inclusion criterion, When system evaluates pending invoice items, Then items matching periodFrom or periodTo comparison against invoicing period end are included.

**3. INDIVIDUAL Mode Payroll Alignment**
Given INDIVIDUAL mode with payroll calendar, When invoice items match payroll deduction dates within their period boundaries and invoicing period, Then those items are included in the invoice.

**4. Payroll Mismatch Handling**
Given invoice items without direct payroll date match, When system applies frequency-specific fallback rules, Then eligible items based on period start and payroll deduction start date comparisons are included without duplication.

**5. Historical Payroll Date Resolution**
Given payroll dates preceding current invoicing period, When system identifies match with prior invoicing periods, Then items are included in current invoice with appropriate historical billing period assignment.

**6. Migration Exclusion**
Given migrated billing account, When evaluating migrated policy premiums, Then system excludes items with modal period start before aligned billing start date while including regular premiums per standard rules.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=478743142"
]

---

#### Feature: Manage Premium Allocation Across Billing Entities
- **Role**: Billing Administrator
- **Action**: configure and execute seasonal billing schedules with premium redistribution across active billing periods
- **Value**: employees with unpaid vacation gaps maintain continuous coverage while ensuring accurate premium collection and paid-to-date calculation

**Description:**

As a **Billing Administrator**,
I want to **configure and execute seasonal billing schedules with premium redistribution across active billing periods**,
So that **employees with unpaid vacation gaps maintain continuous coverage while ensuring accurate premium collection and paid-to-date calculation**


**Key Capabilities:**

**1. Seasonal Billing Account Configuration**
User enables seasonal billing on monthly-frequency billing accounts and activates advanced scheduling to access gap configuration options.

**2. Gap Period Definition**
User selects 1 to 11 consecutive or non-consecutive invoicing periods during which premium billing is suspended while coverage remains active.

**3. Premium Redistribution Calculation**
System recalculates annual premium across active billing periods using modal-based daily rates for proration when effective dates misalign with period boundaries.

**4. Invoice Generation Control**
System validates invoicing periods against configured gaps and automatically skips invoice generation during suspended periods for manual and batch processes.

**5. Premium Adjustment Handling**
When premium changes occur during gaps, system defers adjustments until active billing resumes and reflects changes in the first post-gap invoice.

**6. Gap Configuration Updates**
User modifies gap periods post-creation; system recalculates all member premiums and modal amounts, requiring invoice discard if paid/issued invoices exist.


**Acceptance Criteria:**

**1. Gap Configuration Validation**
Given monthly invoicing frequency is configured, When user enables advanced scheduling, Then seasonal billing options become accessible and gap period selection allows 1-11 period choices.

**2. Premium Redistribution Accuracy**
Given seasonal gaps are defined, When system calculates billing period premium, Then annual premium is proportionally distributed across non-gap periods using modal daily rates for proration.

**3. Invoice Suppression During Gaps**
Given invoicing period falls within configured gap, When invoice generation is initiated manually or automatically, Then system skips period and prevents billable item generation.

**4. Paid-To-Date Progression**
Given all pre-gap invoices are paid, When system updates paid-to-date status, Then coverage date extends to end of seasonal gap period maintaining continuous protection.

**5. Configuration Update Impact**
Given gap periods are modified post-setup, When issued/paid invoices exist, Then system prevents updates until invoices are discarded and recalculates all premiums upon successful modification.

**6. Premium Change Deferral**
Given premium changes occur during gap periods, When active billing resumes, Then system applies accumulated adjustments to first post-gap invoice without retroactive gap billing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=792238839"
]

---

#### Feature: Process Premium Waiver Events for Member Records
- **Role**: Billing Administrator
- **Action**: process and record premium waiver transactions for member records within generated invoices
- **Value**: accurate billing adjustments are captured and invoiced, ensuring compliant premium waivers and reversals are properly documented across Group and Individual Benefits products

**Description:**

As a **Billing Administrator**,
I want to **process and record premium waiver transactions for member records within generated invoices**,
So that **accurate billing adjustments are captured and invoiced, ensuring compliant premium waivers and reversals are properly documented across Group and Individual Benefits products**


**Key Capabilities:**

**1. Premium Waiver Event Capture**
Upon invoice generation, system captures waived premium events with comprehensive invoice metadata including account identifiers, invoicing periods, status, currency, and timestamp.

**2. Member Record Context Management**
System associates waiver with appropriate member record context, populating master policy details for Group products or leaving blank for Individual Benefits per product type rules.

**3. Waiver Amount Processing**
System records waived amounts as negative values and unwaived amounts as positive values, calculating modal and invoicing period dates per defined business rules.

**4. Multi-Item Waiver Handling**
When multiple invoice items exist for single member record, system processes collection of waived items each with distinct coverage and period information.


**Acceptance Criteria:**

**1. Standard Premium Waiver Recording**
Given invoice is generated with waived premium for member record, When waiver event triggers, Then system captures negative waived amount with complete invoice, member, and coverage details.

**2. Product Type Data Population**
Given waiver event occurs, When member belongs to Group policy, Then master policy fields are populated; When Individual Benefits product, Then master policy fields remain blank.

**3. Premium Unwaiver Reversal**
Given previously waived premium requires reversal, When unwaiver event processes, Then system records positive waived amount value indicating restoration.

**4. Multiple Item Waiver Collection**
Given member record has multiple invoice items with waivers, When event triggers, Then system captures collection with distinct item identifiers, amounts, and periods for each entry.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628370916"
]

---

#### Feature: Configure Invoice Generation Schedule with Advanced Options
- **Role**: Billing Administrator
- **Action**: configure compliant invoice generation schedules for FlexiBill accounts with enforced timing restrictions
- **Value**: the system prevents non-compliant advance scheduling configurations and ensures regulatory adherence across billing frequencies

**Description:**

As a **Billing Administrator**,
I want to **configure compliant invoice generation schedules for FlexiBill accounts with enforced timing restrictions**,
So that **the system prevents non-compliant advance scheduling configurations and ensures regulatory adherence across billing frequencies**


**Key Capabilities:**

**1. Initiate Schedule Configuration**
Administrator accesses billing account schedule settings for FlexiBill accounts requiring compliance controls.

**2. Apply Frequency-Based Restrictions**
System dynamically enforces timing restrictions based on selected invoicing frequency (weekly, bi-weekly, semi-monthly, monthly, bi-monthly, quarterly, annual), preventing advance configuration.
    2.1 System disables non-compliant due day offset options
    2.2 System restricts generation date offset ranges

**3. Enforce Configuration Guardrails**
System prevents enabling advanced scheduling options and in-advance offset selections for FlexiBill accounts.

**4. Validate and Persist Settings**
System validates all configuration constraints are met before allowing schedule activation.


**Acceptance Criteria:**

**1. Frequency-Specific Restriction Enforcement**
Given a FlexiBill account with monthly frequency, When administrator configures invoice generation schedule, Then system disables calendar options and restricts offset values beyond 29 days from period start.

**2. Advanced Scheduling Prevention**
Given FlexiBill account configuration, When administrator attempts to enable advanced schedule toggle, Then system maintains toggle in disabled state preventing activation.

**3. In-Advance Offset Blocking**
Given invoice due day offset configuration, When administrator views offset direction options, Then system disables in-advance radio button for FlexiBill accounts.

**4. Dynamic UI State Management**
Given invoicing frequency changes, When administrator selects different frequency, Then system immediately recalculates and applies corresponding restriction rules to all schedule configuration options.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=823330570"
]

---

#### Feature: Calculate Invoice Balances and Due Amounts
- **Role**: Billing Administrator
- **Action**: calculate and allocate invoice balances with accurate due amounts
- **Value**: financial records remain accurate and payment tracking is transparent across all billing accounts

**Description:**

As a **Billing Administrator**,
I want to **calculate and allocate invoice balances with accurate due amounts**,
So that **financial records remain accurate and payment tracking is transparent across all billing accounts**


**Key Capabilities:**

**1. Invoice Balance Calculation**
System computes outstanding balances based on premium charges, adjustments, and applied payments for generated invoices.

**2. Financial Reconciliation Processing**
Upon invoice adjustment or correction, system recalculates balances and reconciles adjusted items to maintain data integrity.

**3. Payment Allocation Tracking**
User is able to monitor payment distributions against specific invoices and update due amounts accordingly.

**4. Balance Verification Across Accounts**
System validates balance accuracy for list bills, individual direct billing accounts, and consolidated invoice views.


**Acceptance Criteria:**

**1. Accurate Balance Computation**
Given an invoice with charges and payments, When the system calculates balances, Then the due amount reflects all financial transactions without discrepancies.

**2. Adjustment Reconciliation**
Given adjusted invoice items exist, When reconciliation processing executes, Then all balance recalculations maintain financial integrity across affected accounts.

**3. Payment Allocation Integrity**
Given multiple payments applied, When tracking allocation, Then the system accurately reflects distributed amounts against corresponding invoices.

**4. Incomplete Data Handling**
Given missing or invalid transaction data, When balance calculation attempts, Then the system prevents processing and flags data issues for resolution.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541990848"
]

---

#### Feature: Support Multiple Premium Sequences for Billing Products
- **Role**: Billing Administrator
- **Action**: configure and manage multiple premium sequences across billing products
- **Value**: premium projections accurately reflect policy amendments and support flexible billing arrangements for diverse product lines

**Description:**

As a **Billing Administrator**,
I want to **configure and manage multiple premium sequences across billing products**,
So that **premium projections accurately reflect policy amendments and support flexible billing arrangements for diverse product lines**


**Key Capabilities:**

**1. Premium Sequence Configuration**
User is able to establish multiple premium sequences for billing products during projection cycles, enabling parallel billing arrangements.

**2. Amendment Value Calculation**
When policy amendments occur, system calculates unbilled value impacts across affected premium sequences prior to invoice generation.

**3. Excessive Payment Processing**
Upon identifying payment overages, system automatically calculates allocation across True Group and Individual Direct contexts following established invoice calculation procedures.

**4. Projection and Reconciliation**
System projects future premium obligations incorporating configured sequences and pending amendments to support accurate financial forecasting.


**Acceptance Criteria:**

**1. Multi-Sequence Support**
Given billing products require diverse payment schedules, When administrator configures multiple premium sequences, Then system maintains independent calculation streams for each configured sequence.

**2. Amendment Integration**
Given unbilled amendments exist, When premium projection executes, Then system incorporates amendment values into appropriate sequences before billing cycle completion.

**3. Excessive Payment Handling**
Given payment exceeds invoiced amount, When system processes transaction, Then excessive payment calculation follows True Group or Individual Direct rules and allocates correctly.

**4. Configuration Validation**
Given multiple sequences are configured, When projection initiates, Then system validates sequence compatibility and prevents processing if conflicts exist.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=773136337"
]

---

### Epic: Invoice Draft & Review Lifecycle

#### Feature: Generate Draft Bill Document for Review
- **Role**: Billing Administrator
- **Action**: generate and review draft billing statements before finalizing invoices
- **Value**: validate billing accuracy and resolve discrepancies proactively, reducing billing disputes and improving cash flow predictability

**Description:**

As a **Billing Administrator**,
I want to **generate and review draft billing statements before finalizing invoices**,
So that **I can validate billing accuracy and resolve discrepancies proactively, reducing billing disputes and improving cash flow predictability**.


**Key Capabilities:**

**1. Draft Bill Initiation & Validation**
User initiates draft generation from billing account. System validates generation eligibility using invoice generation rules, checking for concurrent processes and data completeness.

**2. Billing Period & Item Calculation**
System determines applicable billing period, generates billable items from policy data, creates invoice line items, and calculates balances excluding prior draft bills.

**3. Document Generation & Storage**
System produces draft bill document with standardized layout and stores in document repository with appropriate classification metadata.

**4. Review & Access**
User retrieves generated draft from document folder, reviews billing content, and confirms accuracy before proceeding to final invoice issuance.


**Acceptance Criteria:**

**1. Successful Draft Generation**
Given user initiates draft bill for eligible billing account, When system validates all generation rules pass, Then draft document is created with success notification and activity log entry.

**2. Concurrent Process Prevention**
Given another invoice/draft process is active, When user attempts draft generation, Then system prevents execution with explanatory message.

**3. Balance Calculation Accuracy**
Given multiple billing periods exist, When system calculates draft balances, Then balances reference last finalized invoice, excluding prior draft bills.

**4. Document Accessibility**
Given draft generation completes successfully, When user accesses document repository, Then draft bill is retrievable with correct classification and period identification.

**5. Failed Generation Handling**
Given system error during generation, When process fails, Then activity log reflects failure status without partial document creation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=511118646"
]

---

#### Feature: Determine Draft Bill Generation Period
- **Role**: Billing Administrator
- **Action**: determine the appropriate billing period for draft bill generation based on account history and product associations
- **Value**: the system generates draft bills for the correct invoicing period, accounting for discarded invoices, new product associations, and existing draft bills to ensure accurate billing progression

**Description:**

As a **Billing Administrator**,
I want to **determine the appropriate billing period for draft bill generation based on account history and product associations**,
So that **the system generates draft bills for the correct invoicing period, accounting for discarded invoices, new product associations, and existing draft bills to ensure accurate billing progression**


**Key Capabilities:**

**1. Initiate Period Determination Workflow**
System evaluates billing account history to identify the appropriate invoicing period for draft bill creation

**2. Assess Invoice Generation History**
When billing account has no generated invoices, system identifies earliest unbilled invoicing period; When invoices exist, system checks for discarded invoice status

**3. Handle Discarded Invoice Scenarios**
Upon finding discarded invoices, system prioritizes earliest discarded period for regeneration; If new product effective dates create earlier periods, system validates period sequencing before selection

**4. Manage Draft Bill Conflicts**
When draft bills exist for periods without invoices and new products are added with misaligned dates, system identifies earlier unbilled periods or selects earliest period with existing draft

**5. Finalize Period Selection**
System confirms determined period and initiates draft bill document generation process


**Acceptance Criteria:**

**1. Period Selection for New Billing Accounts**
Given billing account has no invoices or draft bills, When period determination executes, Then system selects earliest available invoicing period

**2. Discarded Invoice Priority Handling**
Given billing account has discarded invoice, When system evaluates periods, Then earliest discarded invoice period is selected unless earlier unbilled period exists due to new product association

**3. New Product Date Alignment Validation**
Given new product with effective date creates earlier period than discarded invoice, When system detects period conflict, Then system validates invoice history and selects appropriate earlier period or discarded period based on sequencing rules

**4. Existing Draft Bill Period Management**
Given draft bill exists for period and new product creates misaligned earlier period, When determination process runs, Then system identifies and selects earlier unbilled period or uses existing draft period

**5. Multiple Draft Bills Support**
Given same period may have multiple draft bills, When period determination completes, Then system allows regeneration for selected period without blocking


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=512767124"
]

---

#### Feature: Validate Draft Bill Generation Eligibility
- **Role**: Billing Administrator
- **Action**: validate eligibility and generate draft bills for billing accounts
- **Value**: stakeholders can review projected invoices before final issuance, ensuring accuracy and enabling proactive adjustments

**Description:**

As a **Billing Administrator**,
I want to **validate eligibility and generate draft bills for billing accounts**,
So that **stakeholders can review projected invoices before final issuance, ensuring accuracy and enabling proactive adjustments**


**Key Capabilities:**

**1. Eligibility Assessment**
System validates generation prerequisites including account status, absence of concurrent processes, and applicability of invoice generation rules per policy product allocation modes

**2. Document Generation Orchestration**
System determines billing period, generates billable items, creates invoice line items, calculates balances excluding previous drafts, and produces document per layout specifications

**3. Exception Handling**
When eligibility fails or concurrent processes detected, system prevents execution and notifies user with actionable guidance

**4. Audit Trail Management**
System records generation outcomes as business activity records, stores documents in structured repository with classification metadata for retrieval


**Acceptance Criteria:**

**1. Successful Generation**
Given eligible billing account, When administrator initiates draft bill, Then system completes generation, stores document with proper classification, and records success activity

**2. Concurrent Process Prevention**
Given active invoice/draft bill process, When administrator attempts generation, Then system blocks execution and alerts user to retry later

**3. No Invoice Required**
Given billing account with no applicable charges, When administrator initiates draft bill, Then system prevents generation and explains ineligibility

**4. Generation Failure Recovery**
Given system error during document production, When generation fails, Then system records cancellation activity without corrupting account state


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=511118646"
]

---

#### Feature: Export Draft Bill to CSV Format
- **Role**: Billing Administrator
- **Action**: export generated draft billing documents to CSV format for external analysis and reporting
- **Value**: I can perform offline analysis, share billing data with stakeholders, and integrate invoice details into external financial systems

**Description:**

As a **Billing Administrator**,
I want to **export generated draft billing documents to CSV format for external analysis and reporting**,
So that **I can perform offline analysis, share billing data with stakeholders, and integrate invoice details into external financial systems**


**Key Capabilities:**

**1. Draft Bill Selection for Export**
User is able to identify and select previously generated draft billing documents (List Bill or Individual Direct) for CSV export.

**2. CSV File Generation**
Upon export request, system transforms draft bill document structure into CSV format, preserving header summary data, current period invoice details, and prior period adjustments as separate data sections.

**3. File Delivery**
System provides the CSV file for download with naming convention indicating billing account, invoicing period, and export timestamp for traceability.


**Acceptance Criteria:**

**1. Successful Export for Complete Draft Bill**
Given a draft bill with header summary, current period charges, and prior period adjustments, When user initiates CSV export, Then system generates CSV file containing all three sections with proper structure and data integrity.

**2. Zero Balance Draft Bill Export**
Given a draft bill with zero balances (no current period details displayed), When user exports to CSV, Then system generates CSV containing header summary section only with zero values preserved.

**3. File Naming and Format Validation**
Given any draft bill export request, When CSV generation completes, Then file follows naming convention including billing account identifier, invoicing period, and timestamp in machine-readable format.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=512772624"
]

---

#### Feature: Trigger Automatic Draft Bill Generation
- **Role**: Billing Administrator
- **Action**: automate scheduled draft bill generation for qualifying billing accounts
- **Value**: I can ensure timely invoice preparation without manual intervention, reducing processing delays and improving billing accuracy

**Description:**

As a **Billing Administrator**,
I want to **automate scheduled draft bill generation for qualifying billing accounts**,
So that **I can ensure timely invoice preparation without manual intervention, reducing processing delays and improving billing accuracy**


**Key Capabilities:**

**1. Job Initialization & Account Selection**
System identifies qualifying billing accounts based on automation enablement, invoicing configurations, and optional inclusion/exclusion parameters. Accounts with self-bill tags are automatically excluded.

**2. Generation Date Calculation & Validation**
System determines job run date (current or specified), calculates draft bill generation dates per business rules, and validates timing against business calendars when non-working day parameters are provided.

**3. Draft Bill Creation Execution**
System triggers draft bill generation for each validated account. Upon failure, system continues processing remaining accounts and reports first five failed account numbers per batch without affecting existing drafts.

**4. Subsequent Period Processing**
System evaluates whether additional draft bills are required for subsequent invoicing periods and automatically generates them within the same job run.

**5. Non-Working Day Handling**
When configured, system either skips accounts (postpone mode) or advances processing date to next working day (inAdvance mode) based on business calendar validation.


**Acceptance Criteria:**

**1. Eligible Account Processing**
Given qualifying accounts exist with automation enabled and valid configurations, When the job executes, Then system processes all accounts without self-bill tags and linked product modal amounts.

**2. Date-Based Generation Control**
Given a job run date is established, When the date meets or exceeds calculated generation dates, Then system triggers draft bill creation; otherwise skips the account.

**3. Business Calendar Compliance**
Given non-working day parameters are provided, When job run date falls on non-working day, Then system either skips account (postpone) or shifts to next working day (inAdvance).

**4. Failure Isolation & Reporting**
Given draft generation fails for specific accounts, When processing continues, Then system reports first five failed account numbers per batch without affecting other accounts or existing drafts.

**5. Multi-Period Generation**
Given subsequent invoicing periods require drafts, When current period completes successfully, Then system automatically processes additional periods within same job execution.

**6. Parameter-Driven Execution**
Given inclusive/exclusive account parameters are specified, When conflicts exist, Then exclusive criteria takes precedence and system skips affected accounts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=638329519"
]

---

#### Feature: Regenerate Invoice After Discard
- **Role**: Billing Administrator
- **Action**: regenerate discarded invoices to restore billing continuity
- **Value**: customers receive accurate, timely invoices without disrupting payment reconciliation workflows

**Description:**

As a **Billing Administrator**,
I want to **regenerate discarded invoices to restore billing continuity**,
So that **customers receive accurate, timely invoices without disrupting payment reconciliation workflows**


**Key Capabilities:**

**Invoice Type Detection and Routing**
System identifies account type (List Bill, Individual Direct, or Self Bill) and validates regeneration eligibility, including special handling for Self Bill rewrite scenarios.

**Regeneration Authorization and Validation**
User initiates regeneration action for eligible discarded invoices. System validates user privileges, confirms no blocking processes exist, and verifies billing account is not on hold.

**New Invoice Generation with History Preservation**
Upon confirmation, system maintains original invoice in discarded status, generates new invoice for same period, and notifies user of successful initiation.

**Automatic Payment Allocation**
When applicable, system applies unapplied balances to outstanding invoices following account-specific allocation rules and consumption strategies.

**Negative Item Reconciliation**
System recalculates overpayments or excessive payments for negative invoice items and reconciles with corresponding positive items per account type.

**Export and Audit Trail**
If configured, system automatically exports regenerated invoice data and maintains complete audit history.


**Acceptance Criteria:**

**Authorized Regeneration Initiation**
Given user has regenerate privileges and selects regenerate action on discarded invoice, When system validates no holds or blocking processes exist, Then confirmation modal displays and regeneration proceeds upon user confirmation.

**Original Invoice Preservation**
Given invoice regeneration is confirmed, When new invoice is generated, Then original invoice remains in discarded status and new invoice is created for identical invoicing period.

**Hold Status Enforcement**
Given billing account has active Invoice On Hold tag, When user attempts regeneration, Then system prevents regeneration and displays hold notification without creating new invoice.

**Automatic Payment Application**
Given regenerated invoice for eligible account type with unapplied balance and strategy enabled, When invoice generation completes, Then system automatically allocates payments from oldest to newest outstanding invoices.

**Self Bill Rewrite Handling**
Given discarded Self Bill invoice originated from policy rewrite, When rewrite adjustment is confirmed via premium adjustment interface, Then regeneration occurs automatically without manual regenerate action availability.

**Concurrent Process Prevention**
Given another invoice process is active for same billing account, When user initiates regeneration, Then system blocks action and notifies user to retry later.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=490607355"
]

---

#### Feature: Discard Invoice and Reverse Allocations
- **Role**: Billing Administrator
- **Action**: discard generated invoices and reverse associated financial allocations
- **Value**: billing corrections can be processed while maintaining accurate account balances and payment integrity

**Description:**

As a **Billing Administrator**,
I want to **discard generated invoices and reverse associated financial allocations**,
So that **billing corrections can be processed while maintaining accurate account balances and payment integrity**


**Key Capabilities:**

**1. Discard Authorization & Validation**
User initiates discard action for eligible invoice. System validates invoice status eligibility, absence of conflicting processes, and business rule compliance before allowing discard.

**2. Status Update & Balance Preservation**
Upon confirmation, system changes invoice status to 'Discarded' while preserving original balances. System generates audit messages and notifies stakeholders of status change.

**3. Payment & Write-off Reversal**
System automatically unallocates previously allocated payments. When write-offs exist, system triggers automatic reversal processes.

**4. Negative Item Processing**
For invoices containing negative items, system identifies matching positive items in prior invoices, recalculates balances, adjusts payment allocations, and updates affected invoice statuses across True Group, IPA, or Self Bill accounts.

**5. Self Bill Payment Request Management**
When structural amendments exist post-generation, system automatically updates corresponding payment requests and generates notification messages.


**Acceptance Criteria:**

**1. Successful Discard Execution**
Given an eligible invoice in non-discarded status, when user confirms discard action, then system changes status to 'Discarded', preserves balances, and generates success notification.

**2. Concurrent Process Prevention**
Given another process is active for the invoice, when user attempts discard, then system displays error alert and prevents discard execution.

**3. Payment Unallocation Integrity**
Given invoice has allocated payments, when discard completes, then system automatically unallocates all payments and recalculates billing account balances.

**4. Negative Item Adjustment**
Given discarded invoice contains negative items, when processing completes, then system identifies matching positive items, recalculates remaining due balances, and updates prior invoice statuses.

**5. Write-off Reversal**
Given discarded invoice has write-offs, when discard executes, then system automatically triggers write-off reversal and adjusts account balances.

**6. Self Bill Payment Update**
Given self-bill account with structural amendments, when invoice discard completes, then system updates payment requests and generates audit messages.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=488572623"
]

---

#### Feature: Generate Invoice for Billing Period
- **Role**: Billing Administrator
- **Action**: initiate and confirm invoice generation for a billing account's current period
- **Value**: I can ensure accurate and timely billing statements are produced while maintaining control over the generation process

**Description:**

As a **Billing Administrator**,
I want to **initiate and confirm invoice generation for a billing account's current period**,
So that **I can ensure accurate and timely billing statements are produced while maintaining control over the generation process**


**Key Capabilities:**

**1. Invoice Generation Initiation**
User is able to trigger invoice generation workflow from billing account management interface, launching eligibility validation process.

**2. Period Eligibility Validation**
System evaluates billing account status against generation rules: no prior invoices exist, or previous invoices are not discarded, or discarded invoice periods require regeneration.

**3. Generation Confirmation**
Upon meeting eligibility criteria, user is able to review and confirm generation intent before system execution.
    3.1 When user cancels, system aborts generation without creating records
    3.2 When user confirms, system proceeds with invoice creation for calculated billing period

**4. Invoice Record Creation**
System executes invoice generation using calculated period boundaries, creating billing statement for the eligible cycle.


**Acceptance Criteria:**

**1. Eligibility Validation**
Given a billing account with existing non-discarded invoices for the current period, When generation is initiated, Then system prevents duplicate invoice creation.

**2. Confirmation Requirement**
Given eligible billing account, When user initiates generation, Then system requires explicit confirmation before proceeding.

**3. Cancellation Handling**
Given confirmation prompt displayed, When user cancels action, Then system aborts generation without creating invoice records or modifying account state.

**4. Successful Generation**
Given user confirms generation for eligible account, When system executes process, Then invoice is created with accurately calculated period boundaries.

**5. Discarded Invoice Regeneration**
Given discarded invoice exists for calculated period, When generation is initiated, Then system permits regeneration for that specific billing cycle.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=490608720"
]

---

#### Feature: Calculate Invoice Balances and Amounts
- **Role**: Billing Administrator
- **Action**: calculate and review invoice balances with comprehensive member details
- **Value**: I can ensure accurate billing amounts and resolve discrepancies before finalizing invoices

**Description:**

As a **Billing Administrator**,
I want to **calculate and review invoice balances with comprehensive member details**,
So that **I can ensure accurate billing amounts and resolve discrepancies before finalizing invoices**


**Key Capabilities:**

**1. Invoice Balance Aggregation**
User is able to access invoice details presenting calculated balances including previous balance, payments received, current period charges, adjustments, and total due. Upon accessing different account types, system applies corresponding calculation logic.

**2. Member Records Analysis**
User is able to review member-level billing data including coverage details, tier classifications, and amounts. When tolerance or delinquency conditions exist, system displays appropriate indicators.

**3. Data Filtering and Inquiry**
User is able to search member records and apply coverage filters. System supports data export for external reconciliation.

**4. Exception Handling**
When premium waivers or overpayment allocations apply, system displays indicators on affected records for audit visibility.


**Acceptance Criteria:**

**1. Balance Calculation Accuracy**
Given an invoice for a specific account type, When the system calculates balances, Then amounts reflect account-specific formula components and prior period transactions.

**2. Member Data Completeness**
Given member records on an invoice, When user reviews details, Then all contractual coverage attributes and financial amounts are displayed without omission.

**3. Exception Flagging**
Given tolerance or delinquency thresholds are met, When invoice is accessed, Then system displays exception indicators triggering appropriate business rule evaluation.

**4. Data Retrieval Performance**
Given large member datasets, When user searches or filters records, Then system returns results within acceptable response time supporting pagination and export.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=457778501"
]

---

#### Feature: View Invoice Details by Product Item
- **Role**: Billing Administrator
- **Action**: review detailed invoice product item breakdowns for customer billing accounts
- **Value**: I can verify billing accuracy, investigate discrepancies, and provide transparent account information to stakeholders

**Description:**

As a **Billing Administrator**,
I want to **review detailed invoice product item breakdowns for customer billing accounts**,
So that **I can verify billing accuracy, investigate discrepancies, and provide transparent account information to stakeholders**


**Key Capabilities:**

**1. Invoice Selection & Access**
User initiates review by selecting a specific invoice from available billing account invoices or navigating from payment records.

**2. Product Item Detail Presentation**
System retrieves and displays invoice header summary with itemized product charges organized by default ordering rules.

**3. Data Navigation & Organization**
User applies sorting controls to reorder product items by available columns and navigates multi-page results via pagination.
    3.1 System applies business sorting rules when user modifies column order
    3.2 User closes detail view to return to previous context

**4. Review Completion**
User confirms invoice details and exits detailed view to proceed with billing operations.


**Acceptance Criteria:**

**1. Invoice Detail Retrieval**
Given a valid invoice exists, When user requests invoice details, Then system displays product item breakdown with header information in slide-out interface.

**2. Data Sorting Capability**
Given product items are displayed, When user selects a sortable column, Then system reorders items according to defined sorting business rules.

**3. Pagination Support**
Given invoice contains multiple product items exceeding page limit, When user navigates pages, Then system displays appropriate item subset with pagination controls.

**4. Exit Workflow**
Given user has reviewed invoice details, When user closes detail view, Then system returns to previous invoice management context without data loss.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=818187581"
]

---

#### Feature: Sort and Filter Invoice Details
- **Role**: Billing Administrator
- **Action**: sort and order invoice details across multiple organizational dimensions
- **Value**: I can efficiently review and analyze billing information by organizing member records according to business-relevant criteria

**Description:**

As a **Billing Administrator**,
I want to **sort and order invoice details across multiple organizational dimensions**,
So that **I can efficiently review and analyze billing information by organizing member records according to business-relevant criteria**


**Key Capabilities:**

**1. Default Invoice Details Presentation**
Upon initial display, system presents invoice details ordered hierarchically by member: last name ascending, first name ascending, customer number ascending, member record number ascending, with case-sensitive uppercase-first ordering.

**2. Member-Based Reordering**
User is able to reverse the complete member hierarchy ordering (descending across all levels) when toggling member sort, then revert to default on subsequent toggles.

**3. Policy-Based Organization**
User is able to sort records alphanumerically by policy value with secondary member name ordering maintained.

**4. Coverage and Location Grouping**
User is able to organize invoice details by coverage type or organizational location/division while preserving member name sequences and identity groupings.


**Acceptance Criteria:**

**1. Initial Display State**
Given invoice details are loaded, When the page renders, Then records display ordered by last name ascending, first name ascending, customer number ascending, member record number ascending with uppercase preceding lowercase.

**2. Policy Sorting Behavior**
Given user activates policy column sort, When the sort executes, Then records organize alphanumerically by policy with secondary member name ordering maintained, and repeated clicks preserve this order.

**3. Coverage and Location Sorting**
Given user sorts by coverage or location, When members share identical first and last names, Then system maintains their presorted grouping by identifier without additional reordering.

**4. Member Identity Handling**
Given multiple member records exist for the same individual, When displayed in Individual Direct Billing, Then records order by member record number following identity matching rules.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=546715757"
]

---

#### Feature: Validate Concurrent Invoice Processes
- **Role**: Billing Administrator
- **Action**: ensure mutual exclusion of conflicting invoice operations to maintain billing data integrity
- **Value**: prevent data corruption and ensure accurate invoice processing by blocking simultaneous execution of incompatible billing actions

**Description:**

As a **Billing Administrator**,
I want to **ensure mutual exclusion of conflicting invoice operations to maintain billing data integrity**,
So that **prevent data corruption and ensure accurate invoice processing by blocking simultaneous execution of incompatible billing actions**


**Key Capabilities:**

**1. Process Conflict Detection**
Upon initiating any billing action (draft bill generation, invoice generation, invoice discard, or invoice regeneration), system validates no conflicting processes are executing on the billing account or invoice.

**2. Mutual Exclusion Enforcement**
When conflicts are detected, system prevents action execution and notifies user of blocking process, requiring users to retry after completion.
    2.1 Exception: Invoice regeneration proceeds even when invoice generation is in progress

**3. Safe Operation Resumption**
User is able to retry the requested action after conflicting process completes, ensuring data integrity throughout the billing lifecycle.


**Acceptance Criteria:**

**1. Successful Process Initiation**
Given no conflicting processes are running, When user initiates any billing action, Then system proceeds with the requested operation without blocking.

**2. Conflict Prevention for Competing Actions**
Given a billing process is in progress, When user attempts an incompatible action, Then system blocks execution and notifies user of the conflicting process type.

**3. Regeneration Exception Rule**
Given invoice generation is in progress, When user initiates invoice regeneration, Then system allows the regeneration action to proceed.

**4. Data Integrity Protection**
Given process conflict exists, When system prevents action execution, Then no partial or corrupted billing data is created in the system.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=536088626"
]

---

#### Feature: Calculate Invoice Generation Date
- **Role**: Billing Administrator
- **Action**: configure automated invoice generation timing based on business rules
- **Value**: invoices are generated at the optimal time relative to payment due dates, ensuring sufficient customer notice and operational efficiency

**Description:**

As a **Billing Administrator**,
I want to **configure automated invoice generation timing based on business rules**,
So that **invoices are generated at the optimal time relative to payment due dates, ensuring sufficient customer notice and operational efficiency**.


**Key Capabilities:**

**1. Select Generation Strategy**
User is able to choose between day-of-month generation or units-in-advance generation approaches based on business requirements.

**2. Configure Day-of-Month Rule**
When day-of-month strategy is selected, system calculates target month by subtracting specified offset from due date month, applies designated generation day with automatic validation for month boundaries.

**3. Configure Units-in-Advance Rule**
When units-in-advance strategy is selected, system calculates generation date by subtracting specified days, weeks, or months from invoice due date with calendar-aware adjustments.

**4. Apply Date Validation**
Upon calculation, if target date is invalid for the month, system defaults to last valid day of that month.


**Acceptance Criteria:**

**1. Day-of-Month Calculation Success**
Given generation rule type is DAY_OF_MONTH, When system calculates using valid day and month offset, Then invoice generation date reflects specified day in target month.

**2. Day-of-Month Boundary Handling**
Given specified day exceeds target month days, When system performs calculation, Then invoice generation date defaults to last valid day of target month.

**3. Units-in-Advance Calculation**
Given generation rule type is UNITS_IN_ADVANCE with offset type, When system subtracts specified units from due date, Then invoice generation date reflects accurate calendar arithmetic.

**4. Month-Based Advance Validation**
Given months offset type with invalid target date, When system calculates generation date, Then system applies last valid day adjustment automatically.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=543267536"
]

---

#### Feature: Apply Invoice Generation Rules
- **Role**: Billing Administrator
- **Action**: apply automated invoice generation rules to produce accurate draft bills across standard and flexible billing account types
- **Value**: invoices are systematically generated according to premium calculations, billing schedules, and business constraints without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **apply automated invoice generation rules to produce accurate draft bills across standard and flexible billing account types**,
So that **invoices are systematically generated according to premium calculations, billing schedules, and business constraints without manual intervention**


**Key Capabilities:**

**1. Invoice Period Calculation & Initiation**
System calculates billing cycle dates and applies invoicing start date defaults when billing arrangements are established or renewed.

**2. Premium Calculation & Draft Bill Production**
System generates draft invoices according to premium calculations, billing schedules, and account type configurations (standard or FlexiBill).

**3. Premium Adjustment Processing**
When premium adjustments occur during billing periods, system recalculates invoice amounts and regenerates invoices accordingly.

**4. Billing Exception Handling**
Upon encountering stop billing transactions, premium waivers, or zero-amount scenarios, system applies corresponding business rules and generates appropriate notifications.


**Acceptance Criteria:**

**1. Standard Invoice Generation**
Given billing account with active policies, when billing cycle triggers, then system produces draft invoice with calculated premiums and correct period dates.

**2. Premium Adjustment Handling**
Given active billing period with premium change, when adjustment is processed, then system recalculates invoice and regenerates draft reflecting new amounts.

**3. Stop Billing Enforcement**
Given policy with stop billing transaction, when invoice generation triggers, then system halts billing for affected policy and issues notification.

**4. Zero Invoice Management**
Given calculated invoice amount of zero, when generation rules execute, then system handles per business rules (suppress or generate zero-amount record).


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=577780021"
]

---

#### Feature: Manage Invoice Status Transitions
- **Role**: Billing Administrator
- **Action**: manage dynamic invoice status transitions based on payment distribution and adjustments
- **Value**: accurate invoice lifecycle tracking reflects real-time payment and adjustment activity without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **manage dynamic invoice status transitions based on payment distribution and adjustments**,
So that **accurate invoice lifecycle tracking reflects real-time payment and adjustment activity without manual intervention**


**Key Capabilities:**

**1. Runtime Status Determination**
System calculates invoice status dynamically when global status is ISSUED, evaluating remaining balance against current period charges and positive adjustments to assign ISSUED, PAID, or PARTIALLY_PAID status

**2. Adjustment-Driven Status Recalculation**
When backdated amendments generate premium adjustments, system recalculates affected invoice statuses applying positive adjustments to future periods and negative adjustments to originating periods

**3. Status Inheritance for Terminal States**
When global invoice status reaches DISCARDED, runtime status inherits terminal state without calculation; IN_PROGRESS invoices bypass runtime status assignment

**4. Event-Driven Status Change Notification**
System generates status change events upon each transition to enable downstream accounting, collections, and reporting processes


**Acceptance Criteria:**

**1. Fully Paid Invoice Recognition**
Given an issued invoice with complete payment allocation, When remaining balance reaches zero, Then system transitions status to PAID and broadcasts status change event

**2. Partial Payment Status Assignment**
Given an issued invoice with partial payment, When remaining balance falls between zero and total charges, Then system assigns PARTIALLY_PAID status

**3. Backdated Adjustment Impact**
Given a paid invoice affected by negative adjustment from backdated amendment, When adjustment eliminates remaining balance, Then system maintains PAID status for historical invoice and adjusts current period invoice balance

**4. Terminal Status Preservation**
Given an invoice with DISCARDED global status, When status calculation executes, Then runtime status inherits DISCARDED without applying payment-based calculation logic


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=507458680"
]

---

#### Feature: Handle FlexiBill Product Item Reconciliation
- **Role**: Billing Administrator
- **Action**: reconcile product items across billing cycles to ensure accurate invoice generation
- **Value**: financial adjustments are properly reflected across invoices and payment allocations remain accurate

**Description:**

As a **Billing Administrator**,
I want to **reconcile product items across billing cycles to ensure accurate invoice generation**,
So that **financial adjustments are properly reflected across invoices and payment allocations remain accurate**


**Key Capabilities:**

**1. Product Item Registration & Evaluation**
Upon receiving product item with transaction date and amount, system registers pending invoice item and evaluates product ID history within billing account.

**2. Reconciliation Determination**
System identifies unbilled or previously billed product items for same product ID, applying transaction-date-based reconciliation rules.

**3. Invoice Item Generation for Net Transactions**
When no prior product items exist or reconciliation completes, system generates invoice items on current monthly invoice reflecting net amounts.

**4. Historical Invoice Adjustment Processing**
When reconciling against previously billed items, system creates negative/positive adjustment pairs, unallocates payments to unapplied balance if needed, and marks previous invoice as paid.


**Acceptance Criteria:**

**1. Single Product Item Billing**
Given no previous product items exist for product ID, When positive product item is received, Then system generates single invoice item with original amount on current invoice.

**2. Simple Unbilled Reconciliation**
Given one unbilled positive product item exists, When negative product item is received, Then system creates single invoice item with reconciled net amount.

**3. Paid Invoice Adjustment with Payment Reallocation**
Given previously billed and paid product item exists, When negative adjustment is received, Then system unallocates payment to unapplied balance, generates adjustment pairs on current invoice, and marks previous invoice paid.

**4. Multi-Item Transaction-Date Reconciliation**
Given multiple unbilled product items exist, When negative item is received, Then system reconciles against latest transaction-dated item first, generating appropriate invoice items.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=803539764"
]

---

#### Feature: Notify Draft Bill Generation Status
- **Role**: Billing Administrator
- **Action**: receive automated notifications regarding draft bill generation status across billing types
- **Value**: I can proactively monitor billing workflow progress and ensure timely bill finalization without manual status checks

**Description:**

As a **Billing Administrator**,
I want to **receive automated notifications regarding draft bill generation status across billing types**,
So that **I can proactively monitor billing workflow progress and ensure timely bill finalization without manual status checks**


**Key Capabilities:**

**1. Draft Bill Generation Initiation**
System triggers draft bill document creation when billing data becomes available for List Bill or Individual Direct billing types.

**2. Document Assembly Execution**
System compiles preliminary bill documentation aggregating relevant billing data and applying business rules from billing domain model.

**3. Status Notification Broadcasting**
Upon completion or failure of draft generation, system broadcasts notification containing generation status, billing type, and document identifiers.

**4. Notification Receipt Confirmation**
Billing personnel receive status updates through designated communication channels enabling immediate awareness of draft availability.


**Acceptance Criteria:**

**1. Successful Generation Notification**
Given billing data is complete, When draft bill generation completes successfully, Then system sends notification confirming availability with document reference.

**2. Generation Failure Alert**
Given system encounters errors during draft creation, When generation process fails, Then system sends failure notification with error classification.

**3. Multi-Type Support**
Given billing type is List Bill or Individual Direct, When draft generation executes, Then notification accurately reflects corresponding billing type context.

**4. Prerequisite Validation**
Given billing data is incomplete, When generation is attempted, Then system prevents execution and notifies of prerequisite failures.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=515222175"
]

---

#### Feature: Notify Invoice Regeneration Status
- **Role**: Billing Administrator
- **Action**: receive confirmation when invoice regeneration is initiated
- **Value**: I can verify the regeneration process has started successfully and continue with other tasks

**Description:**

As a **Billing Administrator**,
I want to **receive confirmation when invoice regeneration is initiated**,
So that **I can verify the regeneration process has started successfully and continue with other tasks**


**Key Capabilities:**

**Regeneration Initiation Confirmation**
When invoice regeneration process is triggered, system immediately confirms initiation to user

**Status Communication**
System communicates regeneration commencement through standardized notification mechanism

**Acknowledgment Dismissal**
User is able to dismiss confirmation once acknowledged to maintain clean workspace


**Acceptance Criteria:**

**Successful Initiation Notification**
Given invoice regeneration is triggered, When process initialization completes, Then system displays confirmation notification to user

**Dismissible Acknowledgment**
Given notification is displayed, When user acknowledges the confirmation, Then system allows dismissal of notification

**Standard Notification Delivery**
Given regeneration commences, When notification is presented, Then system follows enterprise notification standards for consistency


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=553157563"
]

---

### Epic: Invoice Query, Retrieval & Reporting

#### Feature: Retrieve Invoice Summary Details
- **Role**: Billing Administrator
- **Action**: retrieve invoice summary details on demand
- **Value**: I can quickly access critical invoice information for customer inquiries and payment tracking without navigating complex systems

**Description:**

As a **Billing Administrator**,
I want to **retrieve invoice summary details on demand**,
So that **I can quickly access critical invoice information for customer inquiries and payment tracking without navigating complex systems**


**Key Capabilities:**

**Invoice Lookup Initiation**
User is able to request invoice summary by providing invoice identifier and authentication credentials.

**Request Validation**
Upon submission, system validates completeness and format of provided information, ensuring data integrity and authentication.

**Invoice Data Retrieval**
System locates invoice record using unique identifier and extracts summary information including amount, due date, and tracking reference.

**Summary Delivery**
When invoice exists, system returns consolidated summary with financial details and reference identifiers for tracking purposes.

**Exception Handling**
If invoice cannot be located or request parameters are invalid, system provides diagnostic information with error classification and tracking reference for troubleshooting.


**Acceptance Criteria:**

**Successful Retrieval**
Given valid invoice identifier and authentication, when user requests summary, then system returns invoice amount, due date, and tracking reference within acceptable response time.

**Non-Existent Invoice**
Given invoice identifier not found in system, when user requests summary, then system notifies user of unavailability with diagnostic reference for support escalation.

**Invalid Request Format**
Given incomplete or malformed request parameters, when user attempts retrieval, then system prevents processing and provides specific validation guidance without exposing sensitive system details.

**Data Integrity**
Given successful retrieval, when summary is displayed, then all financial amounts and dates conform to standard formats and business rules for accuracy.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=219538769"
]

---

#### Feature: View Invoice Details with Filtering and Sorting
- **Role**: Billing Administrator
- **Action**: access and analyze invoice details with dynamic filtering and sorting capabilities
- **Value**: I can efficiently review billing period transactions, identify discrepancies, and provide accurate account information to stakeholders

**Description:**

As a **Billing Administrator**,
I want to **access and analyze invoice details with dynamic filtering and sorting capabilities**,
So that **I can efficiently review billing period transactions, identify discrepancies, and provide accurate account information to stakeholders**


**Key Capabilities:**

**Invoice Access Initiation**
User initiates detail review from invoice action menu or payment coverage view. System validates billing account type and presents appropriate interface.

**Billing Period Navigation**
User expands collapsed billing periods to reveal transaction details organized by default ordering rules. System maintains period hierarchy with collapsible structure.

**Search and Filtering**
When user requires specific data, system enables member search by name or advanced criteria, and coverage-based filtering to narrow transaction scope.

**Dynamic Sorting**
User applies column-based sorting to reorder transaction details. System retains sorting preferences when toggling period expansion states.

**Session Management**
Upon completion, user closes detail view and system returns to previous context with all review actions logged.


**Acceptance Criteria:**

**Valid Invoice Display**
Given billing account with List Bill or Individual Direct type, When user initiates invoice detail view, Then system displays billing periods in collapsed state with accurate header information.

**Period Expansion Behavior**
Given collapsed billing period, When user expands period, Then system reveals transaction details with default ordering applied and maintains structure integrity.

**Sorting Persistence**
Given expanded period with applied sorting, When user collapses and re-expands same period, Then system retains previously selected sort order without reset.

**Search Integration**
Given active invoice detail view, When user performs member search or coverage filtering, Then system updates displayed transactions matching criteria while preserving period grouping.

**Alternative Billing Types**
Given Self-Bill account type, When user initiates detail view, Then system routes to specialized Self-Bill interface per defined workflow.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=502432863"
]

---

#### Feature: Search and Filter Invoices by Multiple Criteria
- **Role**: Billing Administrator
- **Action**: search and filter invoices by multiple criteria to efficiently locate and manage billing account invoices
- **Value**: I can quickly retrieve relevant invoices, monitor billing status, and take appropriate actions on current and historical invoice records

**Description:**

As a **Billing Administrator**,
I want to **search and filter invoices by multiple criteria to efficiently locate and manage billing account invoices**,
So that **I can quickly retrieve relevant invoices, monitor billing status, and take appropriate actions on current and historical invoice records**


**Key Capabilities:**

**1. Invoice Collection Access**
User accesses billing account invoice section displaying recent invoices. Upon selecting view all option, system presents complete invoice history for the billing account.

**2. Multi-Criteria Filtering**
User applies filtration criteria including invoice status, invoicing period date ranges, and invoice number. System dynamically filters results using combined AND logic across selected criteria when focus changes or confirmation is triggered.

**3. Invoice Detail Expansion**
User expands individual invoice records to review allocated payment information. System displays payment allocation details associated with the selected invoice.

**4. Contextual Invoice Actions**
User initiates invoice-specific actions through menu options. System presents available actions based on invoice status, period recency, and business rules for discard or regeneration eligibility.


**Acceptance Criteria:**

**1. Complete Invoice Retrieval**
Given a billing account with multiple invoices, When user requests full invoice list, Then system displays all invoices associated with the billing account beyond the initial preview.

**2. Combined Filter Application**
Given active filter criteria across status, period dates, and invoice number, When user applies multiple filters, Then system returns only invoices matching ALL specified criteria simultaneously.

**3. Payment Allocation Visibility**
Given an invoice with allocated payments, When user expands the invoice record, Then system reveals payment allocation details without navigation away from the invoice list.

**4. Status-Based Action Availability**
Given invoices in different statuses and periods, When user accesses invoice actions, Then system presents contextually appropriate options based on invoice state and regeneration eligibility rules.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=463473529"
]

---

#### Feature: Export Invoice Data to External Files
- **Role**: Billing Administrator
- **Action**: export invoice data to external files for downstream processing and archival
- **Value**: invoice information is accessible in standardized file formats for integration with external systems, regulatory compliance, and long-term record retention

**Description:**

As a **Billing Administrator**,
I want to **export invoice data to external files for downstream processing and archival**,
So that **invoice information is accessible in standardized file formats for integration with external systems, regulatory compliance, and long-term record retention**


**Key Capabilities:**

**1. Export Initiation**
User initiates invoice data export from billing account invoice views, or system automatically triggers export based on account configuration settings.

**2. File Generation and Storage**
System creates structured invoice file using standardized naming conventions and layout specifications, then stores document in designated billing account electronic folder structure.

**3. Export Event Tracking**
System generates business activity monitoring events to track export completion status and distinguish between manual versus automated export triggers.

**4. User Confirmation (Manual Exports)**
When manually triggered, system notifies user of export initiation and confirms file destination location within account folder hierarchy.


**Acceptance Criteria:**

**1. Successful Manual Export**
Given user has appropriate permissions and invoice details exist, When user initiates export from invoice view, Then system generates file with correct naming convention and stores in account's designated folder, and displays confirmation message to user.

**2. Successful Automated Export**
Given billing account configured for automated export, When system trigger activates, Then export executes without user intervention and generates success monitoring event without displaying user notification.

**3. Export Failure Handling**
Given export process encounters system error or data validation issue, When export fails at any stage, Then system generates failure monitoring event and prevents incomplete file creation.

**4. File Accessibility Verification**
Given export completed successfully, When user navigates to electronic folder, Then exported file exists in correct location with proper document classification and timestamp metadata.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=531206975"
]

---

#### Feature: View Self-Bill Invoice Details by Billing Period
- **Role**: Billing Administrator
- **Action**: review self-bill invoice details organized by billing periods
- **Value**: I can verify invoice accuracy, understand billing composition across time periods, and resolve customer inquiries efficiently

**Description:**

As a **Billing Administrator**,
I want to **review self-bill invoice details organized by billing periods**,
So that **I can verify invoice accuracy, understand billing composition across time periods, and resolve customer inquiries efficiently**


**Key Capabilities:**

**1. Invoice Access & Validation**
User accesses invoice from billing account, payment, or billing period pages. System validates bill type as self-bill and opens invoice details.

**2. Billing Period Navigation**
User reviews invoice header information and expands current or prior billing period sections. All periods display collapsed by default.

**3. Hierarchical Invoice Review**
System presents invoice details grouped by master policies, coverages, classes, tiers, and sub-groups with default business rule sorting applied.

**4. Optional Data Refinement**
User optionally applies custom sorting or collapses/expands periods as needed before closing the review session.


**Acceptance Criteria:**

**1. Self-Bill Type Enforcement**
Given invoice is accessed, When bill type is self-bill, Then system displays billing period-organized details; When bill type is list-bill, Then system redirects to list-bill invoice view.

**2. Default Presentation State**
Given invoice details open, When user views interface, Then all billing periods display collapsed with header information visible and default sorting applied per business rules.

**3. Period Expansion Capability**
Given billing periods are collapsed, When user expands current or prior period, Then system displays hierarchical invoice details split by policies, coverages, classes, tiers, and sub-groups.

**4. Multi-Source Navigation**
Given user navigates from billing account, payment, or billing period pages, When invoice is selected, Then system opens correct invoice details with consistent behavior.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=515212130"
]

---

#### Feature: Export Billing Period Details for Self-Bill Accounts
- **Role**: Billing Administrator
- **Action**: export comprehensive billing period details for self-billed accounts to support external reporting and reconciliation
- **Value**: I can efficiently retrieve and share billing data with authorized parties for analysis, compliance, and reconciliation activities

**Description:**

As a **Billing Administrator**,
I want to **export comprehensive billing period details for self-billed accounts to support external reporting and reconciliation**,
So that **I can efficiently retrieve and share billing data with authorized parties for analysis, compliance, and reconciliation activities**


**Key Capabilities:**

**1. Billing Period Selection**
User is able to specify the target billing period for self-bill accounts requiring detailed reporting

**2. Account Filtering**
User is able to identify and select self-bill accounts within the specified period for data extraction

**3. Data Compilation**
System aggregates all relevant billing transactions, adjustments, and balances for the selected period and accounts

**4. Export Execution**
User is able to generate and download billing period details in a standardized format suitable for external distribution and analysis


**Acceptance Criteria:**

**1. Valid Period Selection**
Given a billing administrator accesses the export function, When a valid billing period is selected for self-bill accounts, Then the system retrieves all applicable account data for that period

**2. Account Type Filtering**
Given multiple account types exist, When the export is initiated, Then only self-bill accounts are included in the output

**3. Complete Data Export**
Given billing period details are compiled, When the export is executed, Then all transactions, adjustments, and balances are included in the standardized output format

**4. Export Failure Handling**
Given incomplete or missing data, When export is attempted, Then the system prevents execution and notifies the user of data integrity issues


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=809867368"
]

---

#### Feature: Filter Invoice Contents by Coverage and Member
- **Role**: Billing Administrator
- **Action**: filter invoice contents by member identity and product coverage to isolate relevant billing records
- **Value**: I can quickly analyze billing activity for specific members and products, improving audit efficiency and customer inquiry resolution

**Description:**

As a **Billing Administrator**,
I want to **filter invoice contents by member identity and product coverage to isolate relevant billing records**,
So that **I can quickly analyze billing activity for specific members and products, improving audit efficiency and customer inquiry resolution**


**Key Capabilities:**

**1. Coverage Selection Initiation**
User accesses product coverage filter options within invoice detail view. System presents available products associated with existing invoice items for the current billing cycle.

**2. Multi-Product Filtering Application**
User selects one or multiple product coverages. Upon confirmation, system applies combined logic filtering member records matching both member criteria and selected product coverages across all billing periods.

**3. Filter Refinement and Removal**
User can incrementally remove individual coverage selections or clear all filters. System dynamically refreshes member record visibility based on updated filter parameters.


**Acceptance Criteria:**

**1. Accurate Product List Presentation**
Given an invoice contains multiple product types, When user initiates coverage filtering, Then system displays only products with associated invoice items for current invoice.

**2. Combined Filter Logic**
Given member and coverage filters are active, When user selects multiple products, Then system displays member records matching member criteria AND at least one selected product coverage.

**3. Filter Cancellation Behavior**
Given active coverage filters exist, When user clears all selections, Then system reverts to displaying all member records matching remaining member filter parameters without coverage restrictions.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=521354704"
]

---

#### Feature: Retrieve Total Billed Amount for Third-Party Integration
- **Role**: Billing Administrator
- **Action**: retrieve aggregated billed amounts for master policies to support third-party system integration
- **Value**: external systems receive accurate financial data for downstream reporting and reconciliation processes

**Description:**

As a **Billing Administrator**,
I want to **retrieve aggregated billed amounts for master policies to support third-party system integration**,
So that **external systems receive accurate financial data for downstream reporting and reconciliation processes**


**Key Capabilities:**

**1. Master Policy Identification & Validation**
System validates master policy existence and confirms policy type before initiating calculation process

**2. Period-Based Invoice Retrieval**
For each specified date, system retrieves all invoices generated within the corresponding billing period

**3. Plan-Level Amount Aggregation**
System calculates total billed amounts with granular breakdown by individual plan for each date requested

**4. Structured Data Submission**
System submits calculated amounts with exact plan identifiers to requesting third-party system

**5. Error Handling for Invalid Requests**
When policy does not exist or member record is provided instead of master policy, system returns descriptive error without processing


**Acceptance Criteria:**

**1. Successful Amount Calculation**
Given valid master policy number and date list, when system processes request, then total billed amounts per plan are calculated for each date with corresponding plan names

**2. Invalid Policy Rejection**
Given non-existent master policy number, when system validates policy, then calculation is prevented and error message is returned without further processing

**3. Member Record Detection**
Given member record identifier instead of master policy, when system verifies policy type, then process terminates with appropriate error notification

**4. Multi-Date Processing**
Given multiple dates in request, when system retrieves invoices, then amounts are calculated separately for each date period with plan-level detail

**5. Complete Data Transmission**
Given successful calculation, when system submits results, then all plan breakdowns and identifiers are included for third-party consumption


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=596020891"
]

---

#### Feature: Manage Invoice Actions and Status Transitions
- **Role**: Billing Administrator
- **Action**: Access and manage invoice lifecycle operations across billing accounts
- **Value**: I can efficiently monitor invoice statuses, perform authorized actions, and maintain billing integrity through controlled status transitions

**Description:**

As a **Billing Administrator**,
I want to **access and manage invoice lifecycle operations across billing accounts**,
So that **I can efficiently monitor invoice statuses, perform authorized actions, and maintain billing integrity through controlled status transitions**


**Key Capabilities:**

**1. Account-Level Invoice Access**
User navigates to billing account and retrieves invoice collections based on bill type configuration. System presents invoices in type-specific ordering (ascending for List Bill/Individual Direct, descending for Self Bill).

**2. Invoice Information Review**
User examines invoice summaries including balance details and payment allocations. Upon request, system expands to display complete invoice history beyond recent entries.

**3. Contextual Action Execution**
User initiates invoice actions through system-validated menu. System enforces business rules to display authorized operations including detail viewing, discarding, regeneration, and manual write-off application based on invoice state and user permissions.


**Acceptance Criteria:**

**1. Bill Type Handling**
Given valid billing account authorization, When user accesses account with specific bill type, Then system displays invoices in correct format and sorting order per bill type rules.

**2. Action Authorization**
Given invoice in specific status, When user requests action menu, Then system presents only permitted operations based on current invoice state and business rules.

**3. Payment Visibility**
Given invoice with allocated payments, When user expands payment details, Then system displays complete payment allocation history linked to invoice.

**4. Incomplete Data Protection**
Given mandatory invoice operation prerequisites missing, When user attempts action execution, Then system prevents submission and prompts for required information completion.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=488571828"
]

---

#### Feature: Generate Invoice Export Events and Notifications
- **Role**: Billing Administrator
- **Action**: generate and distribute invoice export events with notifications
- **Value**: downstream systems and stakeholders receive timely invoice data for payment processing and reporting

**Description:**

As a **Billing Administrator**,
I want to **generate and distribute invoice export events with notifications**,
So that **downstream systems and stakeholders receive timely invoice data for payment processing and reporting**


**Key Capabilities:**

**1. Export Request Initiation**
User is able to trigger invoice data export operations for specified billing periods or invoice selections

**2. Data Compilation and Transformation**
System compiles invoice records and transforms data into required export format for target systems

**3. Event Generation and Publishing**
System generates export events and publishes to designated channels or integration endpoints

**4. Notification Distribution**
Upon successful export completion, system dispatches notifications to configured recipients and monitoring systems


**Acceptance Criteria:**

**1. Successful Export Event Creation**
Given valid invoice data exists, When export is triggered, Then system generates export event and confirms successful publication

**2. Notification Delivery Confirmation**
Given export completes successfully, When event is published, Then notifications are sent to all designated stakeholders

**3. Error Handling and Alerting**
Given export process encounters failures, When error occurs, Then system logs incident and sends alert notifications without data loss

**4. Export Traceability**
Given export event is generated, When queried later, Then system provides complete audit trail with timestamps and data lineage


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=532318155"
]

---

### Epic: Billing Amendments & Adjustments

#### Feature: Calculate Amendments Not Yet Billed (ANYB) Balance
- **Role**: Billing Administrator
- **Action**: calculate and track premium adjustments from policy amendments that occurred during already-billed periods
- **Value**: I can accurately reflect outstanding premium changes and ensure the next invoice captures all unbilled amendments

**Description:**

As a **Billing Administrator**,
I want to **calculate and track premium adjustments from policy amendments that occurred during already-billed periods**,
So that **I can accurately reflect outstanding premium changes and ensure the next invoice captures all unbilled amendments**


**Key Capabilities:**

**1. Amendment Initiation & Classification**
Upon policy amendment issuance, system evaluates whether amendment is premium-bearing and determines classification as out-of-sequence type requiring additional member and coverage data retrieval.

**2. Invoice Validation & Comparison**
System compares amendment effective date against existing invoices and validates eligibility for ANYB classification based on billing period coverage.

**3. Premium Delta Calculation**
System calculates differences between original and amended premium amounts, generating billable items reflecting adjustment values.

**4. Balance Accumulation & Display**
Generated billable items feed into billing account where deltas accumulate; system calculates and displays total unbilled premium amounts until next invoice generation cycle.


**Acceptance Criteria:**

**1. Premium-Bearing Amendment Processing**
Given a premium-bearing amendment is issued, When the amendment affects an already-billed period, Then system generates or regenerates invoice and proceeds with ANYB calculation.

**2. Out-of-Sequence Amendment Handling**
Given an out-of-sequence amendment, When processing for ANYB, Then system retrieves amended member and coverage data before delta calculation.

**3. Delta Accumulation**
Given multiple amendments exist for billed periods, When calculating ANYB balance, Then system accumulates all premium deltas at billing account level and displays accurate unbilled amount.

**4. Balance Visibility**
Given billable items are generated, When ANYB balance is calculated, Then balance remains classified as unbilled until next invoice generation cycle completes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=528755587"
]

---

#### Feature: Process Mid-Cycle Premium Adjustments with Proration
- **Role**: Billing Administrator
- **Action**: process mid-cycle member cancellations with prorated premium adjustments and invoice corrections
- **Value**: accurate invoicing and timely reconciliation of over-billed amounts are ensured across different payment allocation modes

**Description:**

As a **Billing Administrator**,
I want to **process mid-cycle member cancellations with prorated premium adjustments and invoice corrections**,
So that **accurate invoicing and timely reconciliation of over-billed amounts are ensured across different payment allocation modes**


**Key Capabilities:**

**1. Cancellation Request Intake**
User is able to initiate member record cancellation with effective date, payment allocation mode (True Group or IPA), and invoice generation status

**2. Proration Determination**
Upon mid-period cancellation, system calculates prorated premium based on days active within billing period using modality rules

**3. Modal Premium Adjustment**
System sets member modal premium to zero effective from cancellation date or next period start based on timing

**4. Over-Billing Reconciliation**
When invoice already generated, system creates ANYB (Amendments Not Yet Billed) entry to track over-billed amounts and applies offset to next invoice

**5. Invoice Regeneration for IPA**
If IPA mode requires cleanup, system discards original invoice, reallocates payments to overpayments, and regenerates corrected invoice


**Acceptance Criteria:**

**1. Period-Start Cancellation Without Invoice**
Given cancellation effective at period start and no invoice generated, When member is cancelled, Then modal premium becomes zero and member excluded from current period invoice without proration

**2. Mid-Period Cancellation With Proration**
Given cancellation during billing period and no invoice generated, When cancellation processed, Then system calculates prorated premium for partial period and includes in current invoice

**3. Post-Invoice Cancellation Reconciliation**
Given invoice already generated for cancelled member, When cancellation processed, Then ANYB entry created with over-billed amount and offset applied to next invoice

**4. IPA Invoice Cleanup**
Given IPA mode and invoice already generated, When cleanup required, Then system discards invoice, reallocates payments to member overpayments, and regenerates corrected invoice


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=567631777"
]

---

#### Feature: Manage Out-of-Sequence (OOS) Amendment Processing
- **Role**: Billing Administrator
- **Action**: process retroactive policy amendments and adjust future invoicing to reconcile billing discrepancies
- **Value**: premium calculations remain accurate across time periods and billing accounts reflect correct amounts owed despite backdated policy changes

**Description:**

As a **Billing Administrator**,
I want to **process retroactive policy amendments and adjust future invoicing to reconcile billing discrepancies**,
So that **premium calculations remain accurate across time periods and billing accounts reflect correct amounts owed despite backdated policy changes**


**Key Capabilities:**

**1. Retroactive Amendment Registration**
User is able to create out-of-sequence amendments with past effective dates that modify premium structures for specific member records, triggering recalculation of affected billing periods.

**2. Forward Propagation Management**
User is able to apply roll-on transactions with future effective dates to extend amendment impacts forward, establishing new premium baselines for subsequent billing cycles.

**3. Billing Discrepancy Calculation**
Upon amendment processing, system calculates amendments-not-yet-billed balances tracking over-billed or under-billed amounts when invoices already exist for affected periods.
    3.1 When transactions occur mid-period, system prorates premiums using daily rate calculation
    3.2 When member records transfer between accounts, system apportions adjustments across originating and receiving billing accounts

**4. Invoice Correction Application**
System incorporates recalculated premiums and accumulated adjustment balances into next generated invoice, resetting discrepancy tracker to zero after correction applied.


**Acceptance Criteria:**

**1. Retroactive Premium Recalculation**
Given an out-of-sequence amendment with past effective date, When system processes the amendment, Then modal premiums recalculate for all affected billing periods from effective date forward.

**2. Discrepancy Tracking Accuracy**
Given invoices already generated for affected periods, When amendment changes premium amounts, Then system calculates under-billed (positive) or over-billed (negative) adjustment balance reflecting cumulative billing variance.

**3. Proration for Mid-Period Changes**
Given amendment or roll-on effective date falls within billing period, When system calculates premiums, Then daily rate proration applies based on partial period days using 365-day year basis.

**4. Cross-Account Adjustment Allocation**
Given member record transfers to different billing account during affected periods, When system generates invoices, Then adjustment balances apportion correctly between originating and receiving accounts based on membership periods.

**5. Invoice Correction Completion**
Given adjustment balance exists from prior amendments, When next invoice generates incorporating corrections, Then adjustment balance resets to zero and invoice reflects corrected total amount.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=582460325"
]

---

#### Feature: Process Retroactive Cancellations and Refund Adjustments
- **Role**: Billing Administrator
- **Action**: Process out-of-system cancellations with retroactive effective dates and manage resulting billing adjustments across affected periods
- **Value**: Accurate financial reconciliation is achieved, over-billed amounts are recovered systematically, and member records reflect true coverage obligations without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **process out-of-system cancellations with retroactive effective dates and manage resulting billing adjustments across affected periods**,
So that **accurate financial reconciliation is achieved, over-billed amounts are recovered systematically, and member records reflect true coverage obligations without manual intervention**


**Key Capabilities:**

**1. Retroactive Cancellation Intake and Validation**
System receives out-of-system cancellation request with effective date and validates against existing coverage periods, invoice status, and billing account configuration.

**2. Premium Adjustment and Amendment Reconciliation**
System sets modal premium to zero from cancellation effective date, evaluates pending amendments against cancellation date, marks future amendments ineffective, and applies proration when cancellation date falls mid-period.

**3. Over-Billing Calculation and ANYB Management**
System calculates over-billed amounts for all affected periods by comparing invoiced amounts to corrected premiums, accumulates negative ANYB balances, and tracks adjustments separately for member record movements between billing accounts.

**4. Invoice Correction and Recovery Processing**
Upon next invoice generation, system offsets billable amounts by negative ANYB, generates negative invoices when over-billing exceeds current charges, carries forward remaining balances, and supports discard-regenerate workflow for already-billed periods.

**5. Cross-Account Adjustment Coordination**
When cancellations affect member records moved between List Bill and Individual Direct accounts, system calculates independent ANYB for each account and propagates zero-premium status to target billing account.

**6. Payment Reconciliation and Overpayment Handling**
If invoices with allocated payments are discarded, system transfers payment amounts to Member Record Overpayments balance for subsequent refund or credit processing.


**Acceptance Criteria:**

**1. Cancellation Without Existing Invoices**
Given a cancellation effective date within an unbilled period aligned to period start, when processing completes, then modal premium becomes zero from effective date, member record excluded from future invoices, and ANYB remains zero.

**2. Cancellation With Generated Invoices (No Proration)**
Given a cancellation within already-invoiced period aligned to period start, when system calculates adjustments, then negative ANYB equals over-billed amount, next invoice reduces by ANYB or generates negative invoice if ANYB exceeds charges.

**3. Mid-Period Cancellation With Proration**
Given cancellation effective date not aligned to period start within already-invoiced period, when processing occurs, then system prorates modal premium based on active days, calculates negative ANYB as difference between prorated and invoiced amounts, and supports invoice discard-regenerate correction.

**4. Cancellation With Existing ANYB Balance**
Given member record has existing ANYB from prior amendments, when cancellation processes, then system combines existing and new over-billed amounts into cumulative negative ANYB, zeros out ANYB from ineffective amendments, and recovers total balance across subsequent billing cycles.

**5. Cross-Account Cancellation Processing**
Given member record moved from List Bill to Individual Direct with cancellation date prior to movement, when processing completes, then source account calculates ANYB for periods through movement date, target account calculates ANYB from movement date, and both accounts reflect zero modal premium appropriately.

**6. Payment Handling on Invoice Correction**
Given discarded invoices had allocated payments, when discard processes, then payment amounts transfer to Member Record Overpayments balance, ANYB resets to zero for affected periods, and regenerated invoices reflect corrected premium amounts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=582462767"
]

---

#### Feature: Handle Member Record Portability and Continuation Transitions
- **Role**: Billing Administrator
- **Action**: manage member record transfers between billing accounts with automated premium adjustments
- **Value**: accurate invoicing reflects member movements and premium changes without manual recalculation

**Description:**

As a Billing Administrator,
I want to manage member record transfers between billing accounts with automated premium adjustments,
So that accurate invoicing reflects member movements and premium changes without manual recalculation


**Key Capabilities:**

**1. Member Record Transfer Initiation**
User initiates portability or continuation action specifying transaction effective date. System validates date against modal period boundaries and identifies proration requirements.

**2. Premium Deactivation and Activation**
System deactivates modal premium on source billing account from transaction date. System activates modal premium on target billing account applying appropriate modality and rate structure.

**3. Proration and Adjustment Calculation**
When transaction date falls mid-period, system applies daily rate proration across source and target accounts. System calculates Amounts Not Yet Billed (ANYB) for periods with existing invoices.

**4. Amendment Transaction Processing**
System applies amended premium rates based on transaction sequence: pre-movement amendments affect both accounts; post-movement amendments affect target account only; out-of-sequence portability overrides amendments.

**5. Invoice Generation and Adjustment Application**
System generates future invoices reflecting updated member assignments. ANYB adjustments automatically applied to next invoice, reconciling over-billed or under-billed amounts.

**6. Modality Change Handling**
When target account uses different billing frequency, system recalculates modal periods and determines invoice item inclusion based on period overlap criteria.


**Acceptance Criteria:**

**1. Aligned Transaction Date Processing**
Given transaction effective date aligns with modal period start and no invoices exist for future periods, When transfer processes, Then no proration or ANYB adjustment occurs and future invoices reflect correct member assignments.

**2. Mid-Period Transfer with Proration**
Given transaction effective date falls mid-period with existing invoices, When transfer processes, Then system prorates premium using daily rate and creates negative ANYB on source account equal to over-billed amount.

**3. Amendment Before Transfer**
Given amendment changes premium and subsequent transfer requires proration, When transfer processes with amended rate, Then ANYB reflects both amendment under-billing for remaining members and over-billing adjustment for transferred member.

**4. Out-of-Sequence Portability Override**
Given amendment changes premium and out-of-sequence portability precedes amendment date, When portability processes, Then transferred member retains original premium ignoring amendment on target account.

**5. Modality Change Calculation**
Given continuation changes member modality with mid-period amendment, When system generates invoices, Then modal periods calculate per new modality with proration at transaction and amendment dates.

**6. ANYB Adjustment Application**
Given ANYB adjustment exists on billing account, When next invoice generates, Then invoice amount reduces by ANYB value and ANYB resets to zero after application.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=585317489"
]

---

#### Feature: Process Premium Waiver Adjustments
- **Role**: Billing Administrator
- **Action**: process premium waiver adjustments across policy billing cycles
- **Value**: accurate invoices reflect waiver periods without manual reconciliation

**Description:**

As a Billing Administrator,
I want to process premium waiver adjustments across policy billing cycles,
So that accurate invoices reflect waiver periods without manual reconciliation


**Key Capabilities:**

**1. Waiver Initiation Processing**
Upon waiver effective date, system sets member modal premium to $0 and includes member in invoice generation. When waiver starts mid-period without prior invoice, system prorates premium for partial period before waiver. When waiver starts after invoice generation, system calculates ANYB as negative adjustment and reduces next invoice.

**2. Waiver Termination Processing**
When waiver ends, system restores original modal premium. Upon mid-period expiration without invoice, system prorates restored premium for partial period. When waiver ends after invoice generation, system calculates positive ANYB and increases next invoice for catch-up billing.

**3. Amendment Integration During Waiver**
User is able to process member amendments during active waiver periods while preserving waiver status. System maintains modal premium records but displays $0 on invoices. Upon backdated amendments during waiver, system avoids ANYB adjustments since waived periods already billed at $0.

**4. Multi-Scenario Proration Engine**
System applies BR>Prorate Modal Premium calculation (MP  12/365  days) for mid-period transactions. When amendment and waiver end overlap, system executes three-phase calculation covering pre-waiver, waived, and post-waiver periods within single billing cycle.

**5. Invoice Cleanup Mechanism (IPA Mode)**
User is able to trigger invoice cleanup when waiver starts after invoice generation in IPA mode. System discards original invoice, resets ANYB to $0, regenerates invoice with adjusted amounts, and transfers allocated payments to Member Record Overpayments per billing balance rules.

**6. Portability and Continuation Handling**
When member transfers between List Bill and Individual Direct billing arrangements, system preserves waiver status. Upon portability or continuation transactions, system maintains $0 invoicing during waiver and resumes normal billing only after waiver removal across all billing arrangements.


**Acceptance Criteria:**

**1. Mid-Period Waiver Start Without Prior Invoice**
Given waiver effective date falls mid-modal period and no invoice generated yet, When system processes waiver, Then invoice includes prorated premium for partial pre-waiver period and subsequent invoices show $0 for waived member.

**2. Waiver Start After Invoice Generation**
Given waiver effective date falls within period with existing invoice, When system calculates ANYB, Then ANYB equals negative difference between $0 and originally billed amount, and next invoice reduces by ANYB amount before resetting ANYB to $0.

**3. Waiver End With Catch-Up Billing**
Given waiver ends after invoice already generated for that period, When system processes waiver removal, Then positive ANYB calculated equals restored premium minus $0 billed, and next invoice includes both current period premium and ANYB adjustment.

**4. Backdated Amendment During Active Waiver**
Given backdated amendment issued while waiver active and prior invoices exist, When system updates modal premium retroactively, Then no ANYB adjustment generated since all waived periods already billed at $0, and new premium applies only after waiver ends.

**5. Invoice Cleanup Execution (IPA Mode)**
Given waiver starts after invoice generation in IPA payment allocation mode, When user triggers invoice cleanup process, Then system discards invoice, resets ANYB to $0, regenerates invoice with adjusted amounts, and transfers payments to Member Record Overpayments.

**6. Waiver Status Portability**
Given member with active waiver undergoes portability or continuation transaction, When member moves between List Bill and Individual Direct billing arrangements, Then waiver status persists across arrangements, invoices show $0 during waiver, and normal billing resumes only after waiver removal.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=596035111"
]

---

#### Feature: Manage Member Record Reinstatement Billing Impact
- **Role**: Billing Administrator
- **Action**: process member record reinstatements and recalculate billing obligations across lapse and invoice generation scenarios
- **Value**: billing accuracy is maintained through automated premium adjustments and proper revenue recognition for reinstated coverage periods

**Description:**

As a **Billing Administrator**,
I want to **process member record reinstatements and recalculate billing obligations across lapse and invoice generation scenarios**,
So that **billing accuracy is maintained through automated premium adjustments and proper revenue recognition for reinstated coverage periods**


**Key Capabilities:**

**1. Reinstatement Classification**
Upon member record reinstatement request, system determines lapse status and identifies whether reinstatement effective date falls within current modal period or spans multiple periods.

**2. Premium Recalculation Engine**
System calculates modal premiums from reinstatement effective date using daily rate methodology. When reinstatement occurs mid-period, premiums are prorated based on active coverage days.

**3. Invoice State Analysis**
System determines if invoices were already generated for affected periods. If invoices exist with reduced or zero amounts due to cancellation, system calculates Amendments Not Yet Billed.

**4. ANYB Management**
When invoices already issued, system computes difference between correct premium and billed amount, accumulates as ANYB, includes in next invoice cycle, then clears to zero.

**5. Period-Based Premium Restoration**
For reinstatements without lapse, full modal premium restored from reinstatement date. For reinstatements with lapse, premium remains zero during lapse period, restores from reinstatement date forward.


**Acceptance Criteria:**

**1. Reinstatement Without Lapse - Pre-Invoice**
Given member record cancelled mid-period and no invoice generated, When reinstated without lapse matching cancellation date, Then modal premium restored to full amount and included in next invoice for entire period.

**2. Reinstatement Without Lapse - Post-Invoice**
Given member record cancelled mid-period and invoice generated with prorated amount, When reinstated without lapse, Then ANYB calculated as difference between full and prorated premium, included in next invoice, then cleared to zero.

**3. Reinstatement With Lapse - Period Start**
Given member record cancelled at period start with lapse period, When reinstated at new period start, Then premium remains zero for lapse period, full amount restored from reinstatement period forward.

**4. Reinstatement With Lapse - Mid-Period Proration**
Given member record reinstated mid-period after lapse, When invoice not yet generated, Then premium prorated for partial period, subsequent periods include full amount.

**5. ANYB Accumulation and Clearance**
Given reinstatement creates billing adjustment after invoice generation, When ANYB calculated, Then amount added to next invoice alongside current period premium and cleared to zero after invoice generation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=581111204"
]

---

#### Feature: Process Member Record Renewal Premium Changes
- **Role**: Billing Administrator
- **Action**: process premium adjustments during member record renewals
- **Value**: premium changes are accurately applied and reconciled based on invoice generation timing without disrupting billing cycles

**Description:**

As a **Billing Administrator**,
I want to **process premium adjustments during member record renewals**,
So that **premium changes are accurately applied and reconciled based on invoice generation timing without disrupting billing cycles**


**Key Capabilities:**

**1. Renewal Initiation and Premium Evaluation**
When member record renewal is triggered with new effective date and updated premium amount, system evaluates invoice generation status for renewal period coverage.

**2. Direct Premium Application (Pre-Invoice Scenario)**
If invoices covering renewal period have not been generated, system applies new premium amount directly to next invoice generation without adjustments or tracking mechanisms.

**3. Differential Tracking via ANYB (Post-Invoice Scenario)**
If invoices already exist for renewal periods, system calculates premium differentials and creates Additional Not Yet Billed amounts for each affected period while preserving existing invoices.

**4. ANYB Accumulation and Reconciliation**
System accumulates ANYB across affected periods and reconciles full balance in next new invoice generation, combining current period premium with accumulated differentials.


**Acceptance Criteria:**

**1. Pre-Invoice Premium Application**
Given renewal processed before invoice generation for renewal period, When next invoice is generated, Then new premium applies directly without ANYB or adjustment entries.

**2. Post-Invoice Differential Tracking**
Given renewal processed after invoices generated for renewal periods, When system evaluates timing, Then ANYB amounts are created for each affected period reflecting premium differential.

**3. ANYB Reconciliation Completeness**
Given accumulated ANYB from multiple affected periods, When next new invoice is generated, Then invoice includes current period premium plus total accumulated ANYB, and ANYB balance resets to zero.

**4. Negative Premium Adjustment Handling**
Given renewal with decreased premium, When unallocation and reconciliation logic applies, Then negative adjustments follow established amendment rules without billing disruption.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=680305289"
]

---

#### Feature: Handle Stop Billing and Resume Billing Transactions
- **Role**: Billing Administrator
- **Action**: manage stop billing and resume billing transactions through amendment processing
- **Value**: premium collection is suspended or restored accurately based on nonforfeiture events and policy changes

**Description:**

As a **Billing Administrator**,
I want to **manage stop billing and resume billing transactions through amendment processing**,
So that **premium collection is suspended or restored accurately based on nonforfeiture events and policy changes**


**Key Capabilities:**

**1. Initiate Stop Billing Amendment**
User is able to create stop billing amendment with effective date and nonforfeiture attribute (reduced paid-up or extended term), automatically setting modal premium to zero and applying stop billing flag.

**2. Process Sequential Billing Suspension**
Upon amendment processing, system sets modal premium to zero for effective period and all subsequent periods, excluding invoice items from effective date forward.

**3. Handle Out-of-Sequence Adjustments**
When stop billing amendment has effective date prior to existing amendments, system automatically performs roll-on processing, overriding modal premiums to zero and inheriting stop billing attributes across all subsequent transactions.

**4. Apply Differential Billing Account Treatment**
System suppresses invoice generation for individual direct accounts while continuing zero-amount invoices for list bill accounts based on payment allocation mode.


**Acceptance Criteria:**

**1. Sequential Stop Billing Activation**
Given a member record with established premium, when stop billing amendment is created with nonforfeiture attribute, then modal premium becomes zero from effective date forward and invoices exclude member items.

**2. Out-of-Sequence Amendment Processing**
Given existing amendments with future effective dates, when out-of-sequence stop billing amendment is created with prior effective date, then system performs automatic roll-on setting all subsequent premiums to zero while inheriting stop billing flag.

**3. Downstream Transaction Inheritance**
Given active stop billing amendment, when subsequent transactions are created after stop billing effective date, then new transactions automatically inherit stop billing flag and nonforceiture attribute with zero premium.

**4. Billing Account Type Differentiation**
Given stop billing is active, when invoice generation occurs, then individual direct accounts produce no invoices while list bill accounts generate invoices with zero amounts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=737156559"
]

---

#### Feature: Process Policy Rewrite Billing Adjustments
- **Role**: Billing Administrator
- **Action**: process policy rewrite transactions to recalculate billing obligations and regenerate affected invoices
- **Value**: billing records accurately reflect updated policy terms and prevent revenue leakage or overcharging

**Description:**

As a **Billing Administrator**,
I want to **process policy rewrite transactions to recalculate billing obligations and regenerate affected invoices**,
So that **billing records accurately reflect updated policy terms and prevent revenue leakage or overcharging**


**Key Capabilities:**

**1. Rewrite Transaction Initiation**
Upon master policy effective date change, system validates new date against existing coverage periods and triggers adjustment workflow for all associated member records and billing accounts.

**2. Invoice Start Date Recalculation**
System determines revised billing start date based on earliest active policy effective date across all master policies, applying business rules to manage multi-policy hierarchies.

**3. Invoice Discard and Regeneration Management**
When revised effective dates exclude previously billed periods, system automatically discards affected invoices and enables sequential regeneration based on zero-balance validation rules.

**4. Member Record State Reset**
If billing periods contain zero balances or no prior billing exists, system cascades effective date changes to member records and recalculates unbilled amounts.

**5. Payment Reallocation**
When invoices are discarded after payment receipt, system un-allocates funds to unapplied status and recalculates outstanding balances across regenerated invoices.

**6. Payroll Deduction Adjustment (IPA Accounts)**
For installment payment arrangements, system automatically shifts deduction start dates proportionally to policy effective date changes and recalculates deduction schedules per payroll frequency.


**Acceptance Criteria:**

**1. Single Policy Forward Date Change**
Given a master policy with no generated invoices, when effective date moves forward beyond member record dates, then system updates invoice start date, resets member states, and generates zero-balance invoices for skipped periods.

**2. Multi-Policy Hierarchy Date Change**
Given multiple master policies with staggered effective dates, when one policy date changes, then system recalculates invoice start date using earliest remaining policy date and discards only affected invoice periods.

**3. Retroactive Date Change with Paid Invoices**
Given invoices already generated and paid, when master policy effective date moves backward, then system discards future invoices, enables sequential regeneration after backfill invoices are created, and maintains payment allocation integrity.

**4. Amendment Override During Rewrite**
Given a member record with unbilled amendments, when master policy rewrite changes member effective date, then system overrides amendment transactions and resets premium to original values.

**5. Split Billing Account Synchronization**
Given a master policy spanning multiple billing accounts, when rewrite occurs, then system applies invoice start date changes and discard logic consistently across all accounts with location-specific transaction visibility.

**6. IPA Deduction Date Recalculation**
Given an installment payment account with defined payroll frequency, when master policy effective date shifts, then system automatically adjusts deduction start date by equivalent offset and regenerates payment schedule.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=654980735"
]

---

#### Feature: Manage Rescind Cancellation Adjustments
- **Role**: Billing Administrator
- **Action**: restore billing for previously cancelled coverage with appropriate premium adjustments
- **Value**: accurate billing restoration is achieved without manual calculation or revenue leakage

**Description:**

As a **Billing Administrator**,
I want to **restore billing for previously cancelled coverage with appropriate premium adjustments**,
So that **accurate billing restoration is achieved without manual calculation or revenue leakage**


**Key Capabilities:**

**1. Rescind Initiation**
User submits rescind cancellation request specifying effective date for a previously cancelled coverage arrangement. System validates cancellation history and billing status.

**2. Invoice Status Assessment**
System determines whether invoice has been generated for the period containing the rescind effective date. This determines restoration approach and adjustment calculation.

**3. Premium Restoration - No Prior Invoice**
When invoice not yet generated, system restores full modal premium from rescind effective date. Subsequent invoices include standard premium amounts.

**4. Premium Restoration - Invoice Already Generated**
When prorated invoice exists, system restores premium from period start date and calculates adjustment amount (ANYB) representing difference between full and prorated premiums already billed. ANYB added to next invoice then cleared.


**Acceptance Criteria:**

**1. Successful Rescind Without Prior Invoice**
Given coverage cancelled with future effective date and invoice not yet generated, When rescind processed, Then full modal premium restored from rescind effective date and included in next invoice without adjustments.

**2. Successful Rescind With Prior Invoice**
Given coverage cancelled mid-period and prorated invoice already generated, When rescind processed, Then system calculates ANYB adjustment as difference between full and prorated premium, adds to next invoice, and clears adjustment thereafter.

**3. Subsequent Billing Normalization**
Given rescind processed and catch-up adjustments applied, When subsequent billing periods occur, Then invoices include only standard modal premium without further adjustments.

**4. Invalid Rescind Request**
Given no prior cancellation exists for specified coverage, When rescind attempted, Then system prevents processing and maintains current billing state.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=621214721"
]

---

#### Feature: Update ANYB Balance Upon Amendment Processing
- **Role**: Billing Administrator
- **Action**: automatically update the Amendments Not Yet Billed balance when policy amendments occur
- **Value**: billing accounts reflect accurate premium adjustments before invoice generation

**Description:**

As a **Billing Administrator**,
I want to **automatically update the Amendments Not Yet Billed balance when policy amendments occur**,
So that **billing accounts reflect accurate premium adjustments before invoice generation**


**Key Capabilities:**

**1. Amendment Event Detection**
System monitors policy events including member amendments, out-of-sequence changes, cancellations, premium waivers, reinstatements, renewals, new business records, and invoicing frequency changes

**2. Invoice Comparison & Validation**
System compares transaction effective dates against generated invoices and validates whether balance update is required per business rules

**3. Billable Item Delta Generation**
System generates and stores billable items with premium deltas for affected billing product items

**4. Balance Accumulation & Update**
System accumulates billable item deltas across billing account and updates Amendments Not Yet Billed balance value through nightly batch processing


**Acceptance Criteria:**

**1. Amendment Trigger Recognition**
Given a qualifying policy event occurs, When system evaluates the transaction, Then billable item generation process initiates for affected member records

**2. Validation Gate Enforcement**
Given amendment data is received, When business rule criteria are not satisfied, Then system exits without updating balance and logs the exclusion

**3. Delta Calculation Accuracy**
Given multiple amendments exist, When system accumulates deltas, Then Amendments Not Yet Billed balance reflects net premium impact across all unbilled transactions

**4. Batch Update Completion**
Given nightly job executes, When balance calculations complete successfully, Then UI displays updated Amendments Not Yet Billed value for billing accounts


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=516392394"
]

---

### Epic: Invoice Production & Distribution

#### Feature: Generate Invoice Documents with Unique Numbering and Issue Dates
- **Role**: Billing Administrator
- **Action**: generate and issue invoices with unique identifiers and calculated billing periods
- **Value**: customers receive accurate, timely billing statements with proper documentation and tracking capabilities

**Description:**

As a **Billing Administrator**,
I want to **generate and issue invoices with unique identifiers and calculated billing periods**,
So that **customers receive accurate, timely billing statements with proper documentation and tracking capabilities**


**Key Capabilities:**

**1. Invoice Initialization & Validation**
Upon receiving generation request, system creates invoice draft with calculated period boundaries, validates against seasonal gaps, and establishes IN PROGRESS status.

**2. Billable Items Aggregation & Projection**
System generates billable items for the period, creates pending invoice items with amounts, and transitions to INVOICE_PROJECTED state.
    2.1 When multiple premium sequences configured, system populates sequence identifiers for tracking.

**3. Invoice Items Inclusion & Balance Preparation**
System applies bill-type-specific inclusion criteria, converts pending items to invoiced items, groups by accountable entity, merges prior period balances, and calculates detail-level and invoice-level totals.

**4. Invoice Finalization & Distribution**
System assigns unique invoice number, registers balance operations for payment allocation, sets ISSUED status with issue date, and fires generation event.
    4.1 Upon automated export enabled, system triggers invoice data export immediately.


**Acceptance Criteria:**

**1. Valid Invoice Creation**
Given billing period does not fall within seasonal gap, When generation triggered, Then system creates invoice with unique number, calculated start/end dates, and due date.

**2. Billable Items Processing**
Given pending invoice items exist for period, When inclusion criteria applied, Then system converts eligible items to invoiced items and calculates balances per accountable entity.

**3. Zero-Amount Invoice Handling**
Given no billable items meet inclusion criteria, When invoice generated, Then system creates zero-amount invoice with ISSUED status and proceeds normally.

**4. Seasonal Gap Prevention**
Given invoicing period overlaps configured seasonal gap, When validation performed, Then system terminates generation without creating invoice.

**5. Payment Allocation Trigger**
Given invoice finalized with ISSUED status, When balance register operations created, Then system enables payment-to-invoice allocation processing.

**6. Bill Type Differentiation**
Given Self-Bill account type, When items included, Then system applies Self-Bill specific inclusion rules bypassing standard group/direct validation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=447621743"
]

---

#### Feature: Generate Draft Bill Documents for Pre-Invoice Review
- **Role**: Billing Administrator
- **Action**: generate and review draft billing statements prior to final invoice production
- **Value**: I can validate billing accuracy and completeness before committing invoices, reducing downstream corrections and customer disputes

**Description:**

As a **Billing Administrator**,
I want to **generate and review draft billing statements prior to final invoice production**,
So that **I can validate billing accuracy and completeness before committing invoices, reducing downstream corrections and customer disputes**


**Key Capabilities:**

**1. Draft Bill Initiation & Validation**
User initiates draft generation from billing account; system validates invoice eligibility per business rules and ensures no conflicting processes are active.

**2. Billing Period Determination**
System calculates appropriate billing period using draft bill generation rules and invoice logic.

**3. Billable Content Assembly**
System generates billable items and invoice items, calculating balances based on previous regular invoices (excluding prior drafts when spanning multiple periods).

**4. Document Generation & Storage**
System produces draft bill per layout specifications and stores document in electronic folder structure.

**5. Review & Access**
User retrieves generated draft from document repository for validation and approval.


**Acceptance Criteria:**

**1. Successful Draft Generation**
Given billing account meets invoice generation criteria, when user initiates draft bill, then system completes document production and confirms via success notification.

**2. Ineligible Account Handling**
Given billing account fails invoice generation rules, when user attempts draft creation, then system prevents generation with explanatory error.

**3. Concurrent Process Prevention**
Given active invoice/draft process exists, when user initiates new draft, then system blocks action until prior process completes.

**4. Balance Calculation Accuracy**
Given multiple draft bills in same period, when generating next period draft, then system calculates balances from last regular invoice, not previous drafts.

**5. Document Accessibility**
Given successful draft generation, when user navigates to electronic folder, then draft document is retrievable for review.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=511118646"
]

---

#### Feature: Calculate Invoice Balances and Due Amounts
- **Role**: Billing Administrator
- **Action**: generate invoices with calculated balances and due amounts for billing product items
- **Value**: customers receive accurate invoices with proper balance details and payment allocations are processed correctly

**Description:**

As a **Billing Administrator**,
I want to **generate invoices with calculated balances and due amounts for billing product items**,
So that **customers receive accurate invoices with proper balance details and payment allocations are processed correctly**


**Key Capabilities:**

**Invoice Initiation and Period Definition**
System receives generation request and establishes invoicing period with start date, end date, and due date while validating against seasonal gap exclusions.

**Billable Items Projection**
System generates billable items and waiver items for billing product items, creates pending invoice items, and progresses invoice to projected state.

**Invoice Items Inclusion and Grouping**
System applies bill type and payment allocation mode rules to include pending items as invoiced items, groups them into balance details, and merges with previous invoice balances.

**Balance Calculation and Finalization**
System calculates balances at both invoice detail and invoice levels, assigns invoice number, and progresses to balance-calculated state.

**Issuance and Registration**
System creates balance register operations for each invoiced item, triggers payment allocation, updates invoice status to issued, and optionally exports invoice data based on automation configuration.


**Acceptance Criteria:**

**Successful Invoice Generation**
Given billing product items exist for invoicing period, When generation is triggered and period falls outside seasonal gap, Then system creates invoice with calculated balances and issues it with assigned invoice number.

**Seasonal Gap Exclusion**
Given invoicing period falls within configured seasonal gap, When invoice generation is attempted, Then system prevents invoice creation and terminates process.

**Bill Type Handling**
Given different bill types (List Bill, Self-Bill, Individual Direct), When invoice items are included, Then system applies corresponding inclusion criteria and payment allocation mode rules.

**Balance Calculation Accuracy**
Given invoiced items and previous invoice balance details exist, When balance calculation occurs, Then system merges historical balances and computes current invoice-level and detail-level balances correctly.

**Payment Allocation Trigger**
Given invoice reaches issued status, When balance register operations are created, Then system automatically initiates payment-to-invoice allocation process and updates source-to-distribute data.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=447621743"
]

---

#### Feature: Determine Invoicing Periods and Billing Cycles
- **Role**: Billing Administrator
- **Action**: configure and manage billing period calculations and invoice item assignments across product types
- **Value**: billing cycles align with invoicing frequencies, payment expectations, and product-specific business rules

**Description:**

As a **Billing Administrator**,
I want to **configure and manage billing period calculations and invoice item assignments across product types**,
So that **billing cycles align with invoicing frequencies, payment expectations, and product-specific business rules**


**Key Capabilities:**

**1. Billing Period Calculation Workflow**
System establishes first billing period using invoicing start date, then calculates subsequent periods by applying frequency rules (1/3/12 months) with month-end alignment logic. Upon frequency changes, recalculates only periods without generated invoices.

**2. Invoice Item Period Assignment**
System assigns items to current or prior billing periods based on product type, payment allocation mode, and inclusion criteria (periodFrom/periodTo comparisons).

**3. List-Bill GROUP Mode Processing**
When GROUP allocation applies, system compares item period boundaries against all invoice periods using configured inclusion criterion.

**4. List-Bill INDIVIDUAL Mode Processing**
When INDIVIDUAL allocation applies with payroll deduction, system matches deduction dates within item and invoicing period ranges.

**5. Self-Bill Period Management**
System determines periods at payment request generation, handles first adjustments as full invoices, and subsequent adjustments as deltas in unamortized balances.


**Acceptance Criteria:**

**1. Sequential Period Calculation**
Given invoicing frequency is configured, When first period starts on invoicing start date, Then subsequent periods align to same day-of-month or month-end based on start date characteristics.

**2. Frequency Change Handling**
Given billing periods exist, When invoicing frequency changes, Then periods with generated invoices remain unchanged and future periods recalculate using new frequency.

**3. GROUP Allocation Assignment**
Given List-Bill product with GROUP mode, When invoice item periodFrom/periodTo falls within invoicing period boundaries, Then system assigns item to corresponding billing period per inclusion criterion.

**4. INDIVIDUAL Allocation with Payroll**
Given List-Bill INDIVIDUAL mode, When payroll deduction date exists within item and invoicing periods, Then system assigns to appropriate period; otherwise uses periodFrom comparison.

**5. Self-Bill Adjustment Processing**
Given Self-Bill billing period, When first adjustment occurs, Then system generates invoice with matching period dates; subsequent adjustments create delta items in unamortized balance.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=507459671"
]

---

#### Feature: Configure Invoice Generation Rules and Timing
- **Role**: Billing Administrator
- **Action**: configure invoice generation rules and timing parameters
- **Value**: invoices are produced automatically according to business calendar schedules and advance notice requirements

**Description:**

As a **Billing Administrator**,
I want to **configure invoice generation rules and timing parameters**,
So that **invoices are produced automatically according to business calendar schedules and advance notice requirements**


**Key Capabilities:**

**1. Rule Configuration Setup**
User is able to establish invoice generation rules by defining advance notice parameters and associating billing calendar references to control automated production timing.

**2. Timing Parameter Definition**
User is able to specify lead time values for invoice generation to determine how many days ahead invoices are produced relative to billing dates.

**3. Calendar Association**
User is able to link invoice generation rules to specific billing calendars to align production schedules with organizational calendar structures.

**4. Rule Validation**
Upon rule submission, system validates timing parameters fall within acceptable ranges and calendar associations are unique across all configured rules.


**Acceptance Criteria:**

**1. Successful Rule Creation**
Given valid timing parameters and unique calendar reference, When administrator submits invoice generation rule configuration, Then system persists rule and enables automated invoice production according to specified parameters.

**2. Timing Parameter Constraint Enforcement**
Given timing parameter outside valid range (0-90 days), When administrator attempts rule configuration, Then system prevents submission and requires correction to acceptable range.

**3. Calendar Uniqueness Validation**
Given calendar reference already associated with existing rule, When administrator attempts duplicate calendar assignment, Then system rejects configuration and enforces one-to-one calendar-to-rule relationship.

**4. Mandatory Attribute Compliance**
Given incomplete rule configuration missing required parameters, When administrator submits configuration, Then system prevents rule creation until all mandatory attributes are provided.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=243506839"
]

---

#### Feature: Calculate Invoice Due Dates Based on Configuration
- **Role**: Billing Administrator
- **Action**: configure and calculate invoice due dates based on invoicing frequency settings
- **Value**: invoices are generated with accurate start dates and periods aligned to business billing cycles

**Description:**

As a **Billing Administrator**,
I want to **configure and calculate invoice due dates based on invoicing frequency settings**,
So that **invoices are generated with accurate start dates and periods aligned to business billing cycles**


**Key Capabilities:**

**1. Invoicing Frequency Configuration**
System maintains invoicing frequency settings that govern period start date calculations and alignment rules.

**2. Invoicing Start Date Derivation**
System automatically calculates and aligns invoicing start dates based on configured frequency parameters, applying default values where applicable.

**3. Period Start Value Calculation**
System derives the 'periodStart' value for each invoice generation cycle, ensuring proper period boundary alignment.

**4. Invoice Period Alignment**
System applies alignment rules to establish correct invoicing period boundaries for downstream invoice production workflows.


**Acceptance Criteria:**

**1. Frequency-Based Start Date Calculation**
Given invoicing frequency is configured, When invoice generation is triggered, Then system calculates invoicing start date aligned to frequency rules.

**2. Automatic Default Application**
Given no manual start date override exists, When invoice period is determined, Then system automatically applies default start date based on frequency.

**3. Period Start Value Derivation**
Given invoicing start date is aligned, When invoice is generated, Then system populates periodStart value correctly for invoice record.

**4. Alignment Rule Enforcement**
Given alignment rules exist for frequency, When period boundaries are calculated, Then system enforces proper period start and end alignment.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=562434601"
]

---

#### Feature: Discard and Regenerate Invoices with Status Management
- **Role**: Billing Administrator
- **Action**: discard generated invoices and restore billing account integrity through automated financial reconciliation
- **Value**: the organization can correct billing errors, handle structural amendments, and maintain accurate financial records without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **discard generated invoices and restore billing account integrity through automated financial reconciliation**,
So that **the organization can correct billing errors, handle structural amendments, and maintain accurate financial records without manual intervention**


**Key Capabilities:**

**Initiate Authorized Invoice Discard**
User with proper authorization requests invoice discard through confirmation workflow; system validates eligibility based on current status and account activity.

**Execute Financial Reconciliation**
Upon confirmation, system changes invoice status to 'Discarded', automatically unallocates associated payments, reverses write-offs (SBWO) if present, and maintains original invoice balances.

**Process Account-Type Specific Adjustments**
When billing account is Self Bill, system updates Next Payment Due and Payment Request for structural amendments; when account is True Group or IPA with negative invoice items, system recalculates Remaining Due, PTD, and reallocates payments to corresponding positive items across affected invoices.

**Manage Concurrent Process Conflicts**
If another process is in progress or invoice status changes during confirmation, system prevents discard action and notifies user with specific reason.

**Complete Balance Recalculation**
System recalculates all billing account balances, updates related invoice statuses based on payment allocation rules, and fires business events for downstream processing.


**Acceptance Criteria:**

**Successful Invoice Discard Execution**
Given an authorized user requests discard for an eligible invoice, When confirmation is provided and no concurrent processes exist, Then system changes status to 'Discarded', unallocates payments, reverses write-offs, and notifies success.

**Account-Type Specific Processing**
Given a Self Bill account with structural amendments, When invoice is discarded, Then system updates Payment Request and Next Payment Due; Given True Group/IPA account with negative items, Then system reallocates payments to corresponding positive items and recalculates PTD.

**Concurrent Process Prevention**
Given another process is active on the invoice or billing account, When user attempts discard, Then system prevents action and displays specific error without modifying data.

**Status Change Conflict Handling**
Given invoice status changes to non-actionable state during user confirmation, When system validates discard eligibility, Then system rejects action and alerts user that status no longer permits operation.

**Financial Integrity Preservation**
Given invoice discard completes successfully, When system recalculates balances, Then all affected invoice statuses update correctly, billing account balances reflect accurate financial state, and business events fire for audit trails.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=488572623"
]

---

#### Feature: Maintain Invoice Repository with Issued Invoice Records
- **Role**: Billing Administrator
- **Action**: maintain a comprehensive repository of issued invoices with complete financial and temporal data
- **Value**: accurate financial records are preserved for reconciliation, audit compliance, and downstream payment processing across all billing account types

**Description:**

As a **Billing Administrator**,
I want to **maintain a comprehensive repository of issued invoices with complete financial and temporal data**,
So that **accurate financial records are preserved for reconciliation, audit compliance, and downstream payment processing across all billing account types**


**Key Capabilities:**

**1. Invoice Record Generation and Storage**
System captures invoice records during billing account invoice generation, storing identification data (invoice number, billing account link), temporal boundaries (issue date, invoicing period, due date), and generation source indicators (manual or automated initiation).

**2. Financial Calculation and Balance Reconciliation**
System calculates and stores comprehensive financial data including previous balance carryforward, outstanding balance from all prior invoices, current period charges, period-specific adjustments, current due amounts, and total due reconciliation.

**3. Multi-Period Adjustment Tracking**
System records retroactive adjustments from prior periods including balance write-offs, credit adjustments, added adjustments, and payment allocations specific to List Bill Individual Premium Accounting mode.

**4. Overpayment Allocation Integration**
System captures member record overpayment amounts allocated to current invoices through automated allocation processes, maintaining cross-reference between payment sources and invoice applications.


**Acceptance Criteria:**

**1. Complete Invoice Record Persistence**
Given an invoice generation event occurs, When the system processes billing account data, Then all invoice identification, temporal, financial calculation, and supplementary fields are stored in the repository with appropriate status indicators.

**2. Accurate Financial Reconciliation**
Given previous invoice balances and current period charges exist, When the system calculates total due, Then the amount equals current due plus previous balance minus payments received, incorporating all retroactive adjustments.

**3. Source-Specific Adjustment Handling**
Given List Bill with Individual Premium Accounting mode, When payments are allocated to previous invoice items, Then the Payments Allocated To Invoices field captures only amounts that reduced remaining due between invoice generations.

**4. Generation Source Differentiation**
Given invoice creation initiation, When generation occurs manually, Then Generation Source is marked Manual; When automated processes trigger generation, Then Generation Source is marked Automated.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=604806926"
]

---

#### Feature: Validate Invoice Generation Eligibility and Process Conflicts
- **Role**: Billing Administrator
- **Action**: manage concurrent invoice production processes to prevent data conflicts
- **Value**: invoice integrity is maintained and processing errors are eliminated through coordinated workflow execution

**Description:**

As a **Billing Administrator**,
I want to **manage concurrent invoice production processes to prevent data conflicts**,
So that **invoice integrity is maintained and processing errors are eliminated through coordinated workflow execution**


**Key Capabilities:**

**Process Initiation Assessment**
When user requests billing action (Draft Bill, Invoice Generation, Discard, or Regeneration), system validates no conflicting operations are active on target billing account.

**Conflict Detection & Prevention**
System enforces mutual exclusivity rules across all billing processes, blocking execution if concurrent operation detected.

**Exception Handling for Regeneration**
Invoice Regeneration follows specialized conflict rules, allowing execution when Invoice Generation is running but blocking for other concurrent processes.

**Process Retry Guidance**
Upon conflict detection, system prevents action submission and notifies user to retry after current operation completes, maintaining data consistency throughout billing lifecycle.


**Acceptance Criteria:**

**1. Conflict-Free Execution**
Given no active billing processes exist, When user initiates any billing action, Then system processes request without blocking.

**2. Standard Mutual Exclusivity**
Given Draft Bill/Invoice Generation/Discard is running, When user attempts conflicting action, Then system prevents execution and notifies user of conflict.

**3. Regeneration Exception Rule**
Given Invoice Generation is active, When user initiates Invoice Regeneration, Then system allows execution; When user initiates Draft Bill/Discard, Then system blocks operation.

**4. Process Isolation**
Given billing action is in progress on Account A, When user initiates action on Account B, Then system processes independently without conflict.

**5. Sequential Processing**
Given conflict prevented earlier, When blocking process completes, Then user can successfully retry original action.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=536088626"
]

---

#### Feature: Sort and Display Invoice Details by Member and Coverage
- **Role**: Billing Administrator
- **Action**: organize and view invoice details by member, policy, coverage, and location hierarchies
- **Value**: I can efficiently review and reconcile billing records with accurate member identification and flexible organization options

**Description:**

As a Billing Administrator,
I want to organize and view invoice details by member, policy, coverage, and location hierarchies,
So that I can efficiently review and reconcile billing records with accurate member identification and flexible organization options.


**Key Capabilities:**

**Default Member Hierarchy Display**
System presents invoice details ordered by member using cascading sort: last name ascending, first name ascending within identical last names, customer number ascending for name matches, member record number ascending for complete name/number duplicates. Case-sensitive ordering displays uppercase before lowercase.

**Alternative Sorting Dimensions**
User is able to reorganize records by policy, coverage, or location/division in alphanumeric/alphabetic ascending order, with secondary member hierarchy applied within identical values to maintain member identification clarity.

**Member Sort Reversal**
When user toggles member sort, system reverses hierarchy to descending order with lowercase preceding uppercase; subsequent toggle restores default ascending configuration.


**Acceptance Criteria:**

**1. Default Member Hierarchy Applied**
Given invoice details are loaded, When no user sorting action is taken, Then system displays records by last name ascending, first name ascending, customer number ascending, member record number ascending with uppercase characters preceding lowercase.

**2. Policy-Based Organization Maintained**
Given user selects policy sort, When multiple members share the same policy, Then system applies alphanumeric ascending policy order with default member hierarchy as secondary sort.

**3. Coverage/Location Grouping with Member Context**
Given user sorts by coverage or location, When identical values exist, Then system alphabetically orders primary dimension and applies member hierarchy within groups, preserving pre-sorted order for names appearing more than twice.

**4. Sort Toggle Behavior Controlled**
Given user activates member sort toggle, When first click occurs, Then system reverses to descending order; when clicked again, Then system restores default ascending hierarchy.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=546715757"
]

---

#### Feature: Export Invoice Data to External Formats
- **Role**: Billing Administrator
- **Action**: generate and review draft billing documents for member accounts prior to final invoice production
- **Value**: I can validate billing accuracy, identify adjustments, and ensure comprehensive charge documentation before customer distribution

**Description:**

As a **Billing Administrator**,
I want to **generate and review draft billing documents for member accounts prior to final invoice production**,
So that **I can validate billing accuracy, identify adjustments, and ensure comprehensive charge documentation before customer distribution**


**Key Capabilities:**

**1. Draft Document Creation**
User is able to generate draft bill documents for specified invoicing periods with standardized naming conventions and timestamps for version control.

**2. Current Period Charge Consolidation**
System aggregates member-level charges by unique classification combinations (product, plan, coverage, tier, class, modality, location, division) with corresponding amounts.

**3. Historical Adjustment Integration**
When prior billing period adjustments exist, system includes separate section documenting retroactive charges unavailable during original invoice generation.

**4. Balance Summary Calculation**
System computes header-level financial summaries including previous balance, payments received, outstanding balance, current charges, adjustments, and total due amounts.

**5. Conditional Content Rendering**
Upon zero-balance scenarios or specialized account templates, system adapts document structure by suppressing or enhancing sections with relevant data elements.

**6. Data Privacy Compliance**
System masks sensitive member information while maintaining member identification capabilities for billing verification purposes.


**Acceptance Criteria:**

**1. Document Generation Success**
Given a billing account with active member records, When the invoicing period is processed, Then system produces draft bill with proper naming convention and timestamp.

**2. Charge Aggregation Accuracy**
Given multiple classification combinations within the period, When member records have varying effective dates, Then system creates separate line items with amounts corresponding to specific billed segments.

**3. Adjustment Section Logic**
Given prior billing periods, When no retroactive adjustments exist, Then system excludes prior period adjustment section from draft document.

**4. Zero Balance Handling**
Given an individual direct account with zero current charges, When draft bill is generated, Then system suppresses invoice details section and displays dash for due date.

**5. Balance Calculation Integrity**
Given historical payment and charge data, When draft bill processes, Then system accurately calculates previous balance, payments received, outstanding balance, current period amount, adjustments, and total due.

**6. Template Customization**
Given a billing account configured with specialized document templates, When draft bill is generated, Then system includes template-specific data columns while maintaining core structure.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=512772624"
]

---

#### Feature: Trigger Automated Invoice Generation via Scheduled Jobs
- **Role**: Billing Administrator
- **Action**: trigger automated invoice generation through scheduled jobs based on billing calendar schedules and invoice generation rules
- **Value**: invoices are produced systematically and timely for all billing accounts without manual intervention, ensuring consistent billing cycles across all lines of business

**Description:**

As a **Billing Administrator**,
I want to **trigger automated invoice generation through scheduled jobs based on billing calendar schedules and invoice generation rules**,
So that **invoices are produced systematically and timely for all billing accounts without manual intervention, ensuring consistent billing cycles across all lines of business**


**Key Capabilities:**

**Job Initiation & Configuration**
System executes automated job according to scheduling parameters, utilizing configured invoice generation rules and billing calendar schedules to determine processing scope.

**Billing Account Processing**
System processes billing accounts systematically, evaluating invoice generation date eligibility for each installment based on numberOfdaysAhead configuration and calendar schedules.

**Invoice Production Execution**
System generates invoices for eligible billing accounts and installments that meet the generation date criteria established by business rules.

**Exception Management**
When processing exceptions occur, system halts further processing for affected records while continuing with remaining eligible accounts.


**Acceptance Criteria:**

**Successful Scheduled Execution**
Given the automated job is configured with billing calendar and invoice generation rules, When the scheduled execution time arrives, Then system initiates invoice generation processing for all eligible billing accounts.

**Rule-Based Invoice Generation**
Given billing accounts with installments approaching invoice generation dates, When the job evaluates eligibility using numberOfdaysAhead configuration, Then system produces invoices only for accounts meeting the defined criteria.

**Exception Isolation**
Given multiple billing accounts are being processed, When an exception occurs for specific records, Then system stops processing those affected records while continuing invoice generation for remaining eligible accounts.

**Processing Completion Status**
Given the job has completed its execution cycle, When all eligible accounts are processed, Then system updates job status to reflect completion and records any exceptions encountered.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=243504231"
]

---

#### Feature: Manage Invoice Actions Based on Status and Privileges
- **Role**: Billing Administrator
- **Action**: manage invoice actions according to business rules and invoice status conditions
- **Value**: I can ensure compliant invoice lifecycle management while maintaining operational flexibility and data integrity

**Description:**

As a **Billing Administrator**,
I want to **manage invoice actions according to business rules and invoice status conditions**,
So that **I can ensure compliant invoice lifecycle management while maintaining operational flexibility and data integrity**


**Key Capabilities:**

**Invoice Information Access**
User is able to view invoice details at any time regardless of invoice status or business conditions.

**Conditional Discard Execution**
Upon validation of discard eligibility criteria, user is able to discard invoices that meet all business rule conditions defined for discard operations.

**Conditional Regeneration Processing**
When regeneration prerequisites are satisfied per business rules, user is able to regenerate invoices to correct billing errors or update information.

**Manual Write-Off Application**
If invoice status is Issued or Partially Paid AND billing product type is List Bill or Individual Direct, user is able to apply manual write-off to outstanding balances.


**Acceptance Criteria:**

**Invoice Details Accessibility**
Given any invoice exists in the system, When user requests to view invoice details, Then system displays complete invoice information without status restrictions.

**Discard Action Validation**
Given an invoice requiring discard, When user attempts discard action, Then system validates all business rule criteria and enables action only when all conditions are met.

**Regenerate Action Authorization**
Given an invoice needing correction, When user initiates regeneration, Then system evaluates eligibility against regeneration business rules and permits execution only upon successful validation.

**Write-Off Conditional Execution**
Given an invoice with outstanding balance, When user applies manual write-off, Then system verifies billing product type is List Bill or Individual Direct AND status is Issued or Partially Paid before processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=678433988"
]

---

#### Feature: Allocate Payments and Adjustments to Invoice Items
- **Role**: Billing Administrator
- **Action**: allocate payments and adjustments to invoice items when regenerating invoices
- **Value**: accurate financial reconciliation is maintained and previous invoice data is properly preserved during invoice regeneration cycles

**Description:**

As a **Billing Administrator**,
I want to **allocate payments and adjustments to invoice items when regenerating invoices**,
So that **accurate financial reconciliation is maintained and previous invoice data is properly preserved during invoice regeneration cycles**


**Key Capabilities:**

**1. Invoice Regeneration Initiation**
User is able to trigger invoice regeneration for a billing account through manual or automated processes, creating a new invoice while preserving the previous invoice state.

**2. Financial Data Allocation**
System allocates payments, adjustments, and balances from the discarded invoice to the regenerated invoice, including previous balance, outstanding balance, current period amounts, retroactive adjustments, payments received, overpayments, and write-offs.

**3. Invoice Lifecycle Management**
System captures complete state of discarded invoice with all financial amounts, dates, and status, then transitions it to 'Discarded' status while activating the regenerated invoice with recalculated totals and current due amounts.


**Acceptance Criteria:**

**1. Successful Invoice Regeneration**
Given a billing account requires invoice correction, When regeneration is initiated, Then system creates new invoice with recalculated financial allocations and marks previous invoice as discarded.

**2. Financial Reconciliation Accuracy**
Given payments and adjustments exist on original invoice, When regeneration occurs, Then system accurately transfers previous balance, payments allocated, retroactive adjustments, and overpayments to regenerated invoice.

**3. Audit Trail Preservation**
Given invoice regeneration is completed, When viewing invoice history, Then system retains complete snapshot of discarded invoice including all financial amounts, dates, and identifiers at time of original generation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=612423298"
]

---

#### Feature: Generate Invoice Events for Downstream Integration
- **Role**: Billing Administrator
- **Action**: capture and transmit invoice discard events with comprehensive financial snapshots to downstream systems
- **Value**: downstream systems maintain synchronized billing state and accurate financial reporting when invoices are discarded

**Description:**

As a **Billing Administrator**,
I want to **capture and transmit invoice discard events with comprehensive financial snapshots to downstream systems**,
So that **downstream systems maintain synchronized billing state and accurate financial reporting when invoices are discarded**


**Key Capabilities:**

**1. Invoice Discard Trigger Detection**
Upon invoice status change to 'Discarded', system initiates event capture workflow automatically.

**2. Financial State Snapshot Assembly**
System aggregates comprehensive billing account state including previous balances, current period amounts, adjustments, payments, and write-offs calculated per business rules.

**3. Adjustment Calculation Execution**
System computes retroactive credit/debit adjustments across all bill types and applies small balance write-off amounts from previous invoice cycles.

**4. Event Data Packaging**
System structures event payload with invoice identification, date markers, financial balances, and transaction timestamp.

**5. Downstream Event Publication**
System transmits complete invoice discard event to integrated systems ensuring synchronized billing state across enterprise platforms.


**Acceptance Criteria:**

**1. Discard Event Initiation**
Given an invoice exists in the system, When status changes to 'Discarded', Then system captures event with comprehensive financial snapshot and transaction timestamp.

**2. Financial Calculation Accuracy**
Given invoice discard occurs, When system calculates Total Due, Then result equals Current Due plus Previous Balance minus Payments Received per business rules.

**3. Adjustment Aggregation Completeness**
Given multiple adjustment types exist, When event is generated, Then system includes all retroactive credits, debits, and write-offs from previous invoice cycles.

**4. Data Integrity Validation**
Given event payload assembly, When system packages data, Then all mandatory identification, date, and financial balance elements are present and valid.

**5. Downstream Transmission Success**
Given event data is complete, When system publishes to downstream systems, Then event delivers successfully without data loss or corruption.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=612423254"
]

---

#### Feature: Support FlexiBill Product Item-Based Invoicing
- **Role**: Billing Administrator
- **Action**: automate invoice generation and product item inclusion for billing accounts
- **Value**: invoices are accurately produced with correct product items, periods, and due dates based on account configuration

**Description:**

As a **Billing Administrator**,
I want to **automate invoice generation and product item inclusion for billing accounts**,
So that **invoices are accurately produced with correct product items, periods, and due dates based on account configuration**


**Key Capabilities:**

**1. Automated Invoice Triggering**
System initiates invoice generation based on billing account configuration (invoicing frequency, start date, generation date). Invoicing period boundaries are calculated from frequency and start date parameters.

**2. Product Item Capture and Status Management**
Upon generation trigger, system identifies all product items in 'not invoiced' status assigned to the billing account. Product items are marked 'invoiced' and included in the current invoice.

**3. Due Date Calculation**
System calculates due date using configured rules: last day of invoicing period, or in arrears with period offset plus additional days from period start date.

**4. Manual Generation Override**
When user manually generates invoice before automatic date, system creates invoice with full period dates, marks items as invoiced, and skips automatic generation for that period if no remaining items exist.

**5. Period Progression Management**
If manual invoice is generated mid-period, subsequent automatic generation advances to next period and captures product items received after manual invoice, maintaining period sequence integrity.


**Acceptance Criteria:**

**1. Automatic Generation Completeness**
Given invoicing period end date is reached, When automatic generation executes, Then invoice includes all product items in 'not invoiced' status received up to generation time, and items are marked 'invoiced'.

**2. Due Date Accuracy**
Given billing account has in-arrears configuration with period offset, When invoice is generated, Then due date equals period start date plus configured offset days, regardless of generation date.

**3. Manual Generation Period Handling**
Given user manually generates invoice before automatic date, When automatic generation date arrives and not-invoiced items exist, Then system generates invoice for next period including items received after manual invoice.

**4. Empty Period Skip Logic**
Given all product items are already invoiced, When automatic generation date arrives, Then system skips invoice creation entirely for that period.

**5. Product Item Exclusivity**
Given product item is marked 'invoiced' in a generated invoice, When subsequent invoice generation occurs, Then that product item is excluded from all future invoices.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=818187642"
]

---

### Epic: Invoice & Payment Reconciliation

#### Feature: View Payment Allocations to Invoices
- **Role**: Billing Administrator
- **Action**: review payment allocation history and linkages for invoices
- **Value**: I can reconcile payments, resolve customer inquiries, and verify financial transactions accurately

**Description:**

As a **Billing Administrator**,
I want to **review payment allocation history and linkages for invoices**,
So that **I can reconcile payments, resolve customer inquiries, and verify financial transactions accurately**


**Key Capabilities:**

**1. Invoice Selection & Access**
User navigates to target invoice from billing account view or invoice listing and expands the record to access allocation details.

**2. Payment Allocation Review**
System displays all payments currently linked to the invoice with transaction metadata including payment identifiers, transaction dates, allocation timestamps, status indicators, and allocated amounts ordered chronologically.

**3. Dynamic Allocation Updates**
When payment linkages are modified through business transactions (transfers, declines, discards), system automatically refreshes allocation display to reflect current associations.
    3.1 Upon removal of payment allocation, affected payment records are excluded from the view
    3.2 Empty state is presented when no active allocations exist


**Acceptance Criteria:**

**1. Successful Allocation Display**
Given an invoice has associated payments, When user expands the invoice record, Then system presents allocation table with all current payment linkages sorted by payment number in descending order.

**2. Empty State Handling**
Given an invoice has no payment allocations, When user accesses allocation details, Then system displays empty allocation section without error.

**3. Real-Time Allocation Refresh**
Given a payment allocation is removed due to business transaction, When user views the invoice allocation table, Then system excludes the dissociated payment and displays only currently linked payments.

**4. Allocation Data Completeness**
Given payment allocations exist, When displayed to user, Then system includes payment identifier, transaction date, allocation date, status, and allocated amount for each record.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541991517"
]

---

#### Feature: Calculate Excessive Payment for Invoice Reconciliation
- **Role**: Billing Administrator
- **Action**: automatically calculate and unallocate excessive payments when premium-decreasing adjustments occur on invoiced Master Policies
- **Value**: payment allocations remain accurate, account balances reflect current obligations, and downstream reconciliation processes can proceed without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **automatically calculate and unallocate excessive payments when premium-decreasing adjustments occur on invoiced Master Policies**,
So that **payment allocations remain accurate, account balances reflect current obligations, and downstream reconciliation processes can proceed without manual intervention**.


**Key Capabilities:**

**1. Negative Adjustment Detection**
System identifies Master Policies with newly generated invoices containing negative items from premium-decreasing transactions within already-billed periods.

**2. Historical Payment Matching**
System locates paid/partially-paid positive invoice items from prior invoices matching the negative adjustment characteristics, starting from most recent invoices.
    2.1 When no matching paid items exist, calculation process terminates without unallocation.

**3. Excessive Payment Quantification**
System calculates overpayment amount based on paid invoice item amounts and corresponding negative adjustments per business rules.
    3.1 If calculated amount equals zero, unallocation process terminates.

**4. Payment Reallocation Execution**
System unallocates excessive payment from matched invoice items following configured priority order, transfers amount to unapplied balance, recalculates all affected account balances, and updates payment/invoice statuses when thresholds are met.


**Acceptance Criteria:**

**1. Excessive Payment Identification**
Given a Master Policy has a paid invoice with positive items, When a negative adjustment invoice is generated for the same period, Then system calculates excessive payment amount by matching negative items to previously paid positive items.

**2. Zero Overpayment Handling**
Given excessive payment calculation completes, When calculated amount equals zero or no paid items match, Then system terminates process without unallocation or balance modifications.

**3. Automatic Unallocation Processing**
Given excessive payment amount exceeds zero, When unallocation executes, Then system transfers amount from invoice items to unapplied balance per configured priority, fires distribution events, and generates unallocation messages.

**4. Balance and Status Reconciliation**
Given payment unallocation completes, When account balances recalculate, Then all affected billing account balances reflect adjustments and payment/invoice statuses update conditionally per calculation rules with corresponding status change notifications.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=684563333"
]

---

#### Feature: Unallocate Excessive Payments to Unapplied Balance
- **Role**: Billing Administrator
- **Action**: automatically unallocate excessive payments resulting from premium adjustments and transfer amounts to unapplied balance
- **Value**: billing accounts maintain accurate allocation of payments and preserve available funds for future application without manual reconciliation effort

**Description:**

As a **Billing Administrator**,
I want to **automatically unallocate excessive payments resulting from premium adjustments and transfer amounts to unapplied balance**,
So that **billing accounts maintain accurate allocation of payments and preserve available funds for future application without manual reconciliation effort**


**Key Capabilities:**

**1. Excessive Payment Detection**
System identifies Master Policies with negative adjustments and matches negative invoice items against previously paid positive items from recent invoices.

**2. Payment Amount Calculation**
System calculates excessive payment totals from paid or partially paid matching invoice items following configured business rules.
    2.1 When no paid items exist, process terminates without unallocation
    2.2 When calculated amount equals zero, unallocation is skipped

**3. Automated Unallocation Execution**
System unallocates excessive amounts using priority order configuration and transfers funds to billing account unapplied balance.

**4. Balance and Status Reconciliation**
System recalculates billing account balances, updates payment and invoice statuses when thresholds are met, and generates audit messages and business events.


**Acceptance Criteria:**

**1. Negative Adjustment Recognition**
Given a premium-decreasing transaction on a Master Policy, When an invoice with negative items is generated, Then system detects matching paid positive items from prior invoices.

**2. Excessive Payment Calculation Accuracy**
Given matching paid invoice items exist, When excessive payment amount is calculated and exceeds zero, Then system proceeds with unallocation using configured priority rules.

**3. Unallocation Bypass for Zero Scenarios**
Given excessive payment calculation completes, When amount equals zero or no paid items exist, Then system terminates without performing unallocation or balance adjustments.

**4. Unapplied Balance Transfer**
Given unallocation amount is determined, When unallocation executes, Then funds transfer to billing account unapplied balance and all balances recalculate correctly.

**5. Event and Notification Generation**
Given unallocation completes successfully, When balances update, Then system fires distribution events and generates payment unallocated audit messages.

**6. Conditional Status Updates**
Given payment or invoice status thresholds are met, When status calculation rules execute, Then system updates statuses and creates corresponding status change messages.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=684563333"
]

---

#### Feature: Reconcile Negative Invoice Adjustments with Positive Items
- **Role**: Billing Administrator
- **Action**: reconcile invoice balances after unallocating excessive payments from negative adjustments and corresponding positive items
- **Value**: invoice payment statuses accurately reflect remaining obligations and prevent incorrect payment allocations

**Description:**

As a **Billing Administrator**,
I want to **reconcile invoice balances after unallocating excessive payments from negative adjustments and corresponding positive items**,
So that **invoice payment statuses accurately reflect remaining obligations and prevent incorrect payment allocations**


**Key Capabilities:**

**1. Initiate Balance Recalculation Workflow**
Upon excessive payment unallocation, system recalculates remaining due for invoices containing negative adjustments and corresponding positive items across matching policy segments.

**2. Apply Payment Allocation Exclusion Rules**
System excludes negative adjustments and equivalent positive item amounts from payment allocation calculations per business rules.

**3. Determine Status Recalculation Requirements**
System evaluates whether invoice status recalculation is required for both positive and negative item invoices based on payment-based status rules.

**4. Execute Status Updates**
When recalculation is required, system updates invoice statuses reflecting current payment positions and triggers downstream notifications.


**Acceptance Criteria:**

**1. Balance Recalculation for Negative Adjustments**
Given excessive payment has been unallocated from negative adjustment invoices, When the reconciliation process executes, Then system recalculates remaining due for all affected invoices and products.

**2. Corresponding Positive Items Exclusion**
Given negative adjustments exist on policy segments, When payment allocation rules apply, Then system excludes both negative adjustments and equivalent positive item amounts from allocation calculations.

**3. Conditional Status Recalculation**
Given invoice balances have been recalculated, When status evaluation rules determine recalculation is required, Then system updates invoice status for both positive and negative item invoices accordingly.

**4. Validation Prevention**
Given automatic payment consumption is disabled, When reconciliation completes, Then system prevents application of unapplied balance until manual review.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=688787924"
]

---

#### Feature: Recalculate Invoice Balances Upon Payment Activity
- **Role**: Billing Administrator
- **Action**: trigger invoice balance recalculation when payment activities occur
- **Value**: invoice balances accurately reflect current financial positions across different payment allocation modes without retroactive modifications

**Description:**

As a **Billing Administrator**,
I want to **trigger invoice balance recalculation when payment activities occur**,
So that **invoice balances accurately reflect current financial positions across different payment allocation modes without retroactive modifications**


**Key Capabilities:**

**1. Invoice Balance Fixation at Generation**
System calculates and locks invoice balances at generation moment based on payment allocation mode. Balance components include previous balance, payments received, current period amount, adjustments, and total due.

**2. Payment Activity Tracking Between Generations**
System captures all payment movements (payments, transfers, refunds) occurring between previous and current invoice generation dates. When payment allocation mode is IPA, system tracks outstanding balances and overpayments separately.

**3. Future Invoice Adjustment Reflection**
Upon retroactive changes to already-invoiced periods, system reflects these changes as adjustments in subsequent invoices rather than modifying original invoice balances. User is able to view balance components through multiple access points while maintaining invoice immutability.


**Acceptance Criteria:**

**1. Balance Calculation at Generation**
Given an invoice is being generated, When payment allocation mode is True Group/Self-Bill/Individual Direct, Then system calculates Total Due = Current Period Amount + Adjustments + Previous Balance - Payments Received.

**2. IPA Mode Balance Calculation**
Given payment allocation mode is List Bill IPA, When invoice generates, Then system calculates Total Due = Outstanding Balance + Current Amount Due + Positive Adjustments - Overpayment.

**3. Payment Activity Integration**
Given payments occurred between invoice generations, When new invoice generates, Then system includes payment totals in balance calculation without modifying prior invoice balances.

**4. Retroactive Change Handling**
Given retroactive endorsements or cancellations occur after invoice generation, When subsequent invoice generates, Then system reflects changes as adjustments rather than altering original invoice balances.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=615332192"
]

---

#### Feature: Calculate Paid-to-Date for Self-Bill Accounts
- **Role**: Billing Administrator
- **Action**: determine payment coverage periods for master policies through automated paid-to-date calculations
- **Value**: accurate reconciliation of payment allocation and policy coverage enables timely delinquency management and supports claims adjudication decisions

**Description:**

As a **Billing Administrator**,
I want to **determine payment coverage periods for master policies through automated paid-to-date calculations**,
So that **accurate reconciliation of payment allocation and policy coverage enables timely delinquency management and supports claims adjudication decisions**


**Key Capabilities:**

**1. Calculation Strategy Configuration**
User is able to select one of three PTD calculation methodologies: by invoice completion, by daily rate proration, or maximum of both strategies

**2. Invoice-Based PTD Determination**
When payments fully satisfy invoice items, system identifies uninterrupted sequence of paid invoices from policy effective date to establish coverage endpoint

**3. Daily Rate PTD Calculation**
System computes average daily rate from total invoiced amounts, divides total payments by this rate to determine days covered from policy effective date

**4. PTD Exposure and Integration**
Upon user navigation to billing account views or API requests from external subsystems, system dynamically computes and displays current PTD value per master policy


**Acceptance Criteria:**

**1. Default PTD Assignment**
Given no invoices are paid in full and no payments allocated, When PTD calculation executes, Then system assigns policy effective date as PTD value regardless of strategy

**2. Invoice Strategy Accuracy**
Given multiple invoices with some fully paid, When using invoice-based strategy, Then PTD reflects last date of uninterrupted paid invoice sequence ignoring gaps

**3. Daily Rate Dynamic Recalculation**
Given new invoices generated or payments allocated, When daily rate strategy is active, Then system recalculates average daily rate and updates PTD accordingly

**4. Maximum Strategy Selection**
Given both invoice and daily rate strategies yield different dates, When maximum strategy configured, Then system selects later date as official PTD value


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=726964318"
]

---

#### Feature: Manage Negative Adjustment Handling Across Bill Types
- **Role**: Billing Administrator
- **Action**: manage negative adjustment reconciliation across invoice types to handle retroactive policy changes
- **Value**: excessive payments are correctly unallocated, balances are accurate, and invoice integrity is maintained across billing periods

**Description:**

As a **Billing Administrator**,
I want to **manage negative adjustment reconciliation across invoice types to handle retroactive policy changes**,
So that **excessive payments are correctly unallocated, balances are accurate, and invoice integrity is maintained across billing periods**


**Key Capabilities:**

**1. Detect and Calculate Excessive Payments**
System identifies negative invoice items and calculates excessive payment amounts from matching positive items in prior invoices using Master Policy Number, Plan-Coverage, Reporting Period, and Classification segments.

**2. Unallocate and Transfer Balances**
Upon detecting excessive payments, system moves unallocated amounts to Billing Account Unapplied balance and generates distribution events.

**3. Reconcile Matching Invoice Items**
System marks positive items as paid by corresponding negative items across invoices, prohibiting future payment allocation to reconciled items.

**4. Recalculate Financial Status**
System recalculates Remaining Due, billing balances, and invoice statuses per payment-based calculation rules for affected invoices and products.


**Acceptance Criteria:**

**1. Excessive Payment Detection**
Given negative invoice items exist, When system calculates matching positive items from prior periods, Then excessive payment amounts are accurately identified per matching criteria.

**2. Balance Transfer Completion**
Given excessive payment amount exceeds zero, When unallocation occurs, Then funds transfer to Unapplied balance and Payment Unallocated events are generated.

**3. Reconciliation Lock**
Given positive and negative items are reconciled, When reconciliation completes, Then system prohibits any future payment allocation to these items.

**4. Status Accuracy**
Given invoice items are reconciled, When balance recalculation executes, Then invoice statuses, Remaining Due, and account balances reflect correct payment positions.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=726964510"
]

---

#### Feature: Trigger Reconciliation Based on Policy Transactions
- **Role**: Billing Administrator
- **Action**: automatically reconcile invoice overpayments caused by premium-reducing policy transactions
- **Value**: excessive payments are detected and reallocated to prevent billing discrepancies and maintain accurate financial records

**Description:**

As a **Billing Administrator**,
I want to **automatically reconcile invoice overpayments caused by premium-reducing policy transactions**,
So that **excessive payments are detected and reallocated to prevent billing discrepancies and maintain accurate financial records**


**Key Capabilities:**

**1. Transaction Detection & Validation**
Upon premium-reducing transaction affecting billed invoices, system identifies negative billable adjustments and matching positive invoice items, validates absence of write-off transactions.

**2. Write-Off Reversal (If Applicable)**
When write-off exists for detected parameters, system automatically reverses unreversed write-offs and recalculates invoice balances before proceeding.

**3. Excessive Payment Calculation**
System identifies paid/partially paid invoice items, calculates overpayment amount using configured business rules, and determines if reconciliation is required.

**4. Payment Unallocation & Reallocation**
System unallocates excessive amounts from invoice items using priority order, applies to member unapplied balance or account unapplied based on payment category.

**5. Financial Recalculation & Status Updates**
System recalculates all billing account balances, paid-to-date amounts, invoice/payment statuses, and generates audit messages.

**6. Downstream Integration**
System fires business events to compensation and other subsystems for coordinated financial operations.


**Acceptance Criteria:**

**1. Overpayment Detection**
Given a premium-reducing transaction on billed invoice, When paid invoice items exceed adjusted premium, Then system calculates excessive payment amount and initiates unallocation.

**2. Write-Off Handling**
Given existing write-off on affected invoice items, When excessive payment detected, Then system reverses write-offs automatically before reconciliation proceeds.

**3. Payment Category-Based Allocation**
Given unallocated payment amount, When payment category is customer credit, Then funds apply to account unapplied; When other categories, Then funds apply to member record unapplied.

**4. Exit Conditions**
Given negative adjustment detected, When no invoice items are paid or no overpayment exists, Then system exits reconciliation without unallocation.

**5. Balance Integrity**
Given completed reconciliation, When all operations finish, Then billing account balances, paid-to-date, and invoice/payment statuses reflect accurate adjusted state.

**6. Audit Trail**
Given any reconciliation action, When unallocation or reversal occurs, Then system generates appropriate business activity messages and events for downstream systems.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=609531368"
]

---

#### Feature: Trigger Reconciliation Based on Invoice Generation
- **Role**: Billing Specialist
- **Action**: automatically detect and reconcile overpayments when negative invoice adjustments occur
- **Value**: members receive accurate credit allocation and billing integrity is maintained without manual intervention

**Description:**

As a **Billing Specialist**,
I want to **automatically detect and reconcile overpayments when negative invoice adjustments occur**,
So that **members receive accurate credit allocation and billing integrity is maintained without manual intervention**


**Key Capabilities:**

**1. Premium Reduction Detection and Invoice Analysis**
System identifies premium-reducing transactions and detects negative invoice adjustments, then matches them to previously billed positive invoice items in affected modal periods.

**2. Write-Off Validation and Reversal**
System validates absence of write-off transactions; if found, automatically reverses existing write-offs before proceeding with overpayment calculation.

**3. Overpayment Calculation and Unallocation**
System calculates excessive payment amounts from paid/partially-paid items and unallocates overpayments according to configured priority order based on payment category.

**4. Payment Category-Based Allocation**
System applies unallocated amounts to Member Record Unapplied or Billing Account Unapplied based on payment category and transaction type (Amendment vs. non-Amendment).
    4.1 When customer credit category, allocates to BA Unapplied
    4.2 When Amendment transactions and configured accordingly, allocates to Member Record Overpayment

**5. Balance and Status Recalculation**
System recalculates all billing account balances, Paid-To-Date values, invoice statuses, and payment statuses, generating appropriate notifications and business events.

**6. Event and Message Generation**
System fires unallocation events, PTI distribution operations, and creates audit messages for downstream systems and reporting.


**Acceptance Criteria:**

**1. Overpayment Detection Accuracy**
Given negative invoice adjustments exist, When matching positive invoice items are found with payment allocations, Then system accurately calculates excessive payment amount and proceeds with reconciliation.

**2. Write-Off Handling**
Given write-off transactions exist on positive invoice items, When overpayment reconciliation initiates, Then system automatically reverses write-offs and recalculates balances before unallocation.

**3. Payment Category Routing**
Given payment category is identified, When unallocation occurs, Then system applies amounts to correct destination (Member Record Unapplied for standard payments, BA Unapplied for customer credit).

**4. Amendment Transaction Processing**
Given negative adjustment source is Amendment or OOS Amendment, When configuration specifies Member Record Overpayment allocation, Then system routes unallocated amount accordingly instead of default Unapplied balance.

**5. Balance Integrity**
Given overpayment unallocation completes, When all recalculations execute, Then billing account balances, PTD values, invoice statuses, and payment statuses reflect accurate current state.

**6. Exit Conditions**
Given no paid items exist or no overpayment detected, When validation completes, Then system terminates reconciliation without unallocation and maintains existing allocations.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=606252861"
]

---

#### Feature: Configure Reconciliation Trigger Strategy
- **Role**: Billing Administrator
- **Action**: configure the reconciliation trigger strategy for handling negative invoice adjustments and payment reallocations
- **Value**: the system automatically executes payment unallocation and invoice reconciliation according to business timing requirements when retroactive policy changes or member account movements occur

**Description:**

As a **Billing Administrator**,
I want to **configure the reconciliation trigger strategy for handling negative invoice adjustments and payment reallocations**,
So that **the system automatically executes payment unallocation and invoice reconciliation according to business timing requirements when retroactive policy changes or member account movements occur**


**Key Capabilities:**

**Reconciliation Strategy Selection**
Administrator selects between Combined Trigger (single-step execution) or Separate Triggers (two-step execution) strategy based on organizational requirements

**Combined Trigger Processing**
Upon generating invoice with negative adjustments, system automatically calculates ANYB, unallocates excessive payments, and reconciles affected invoice items in single consolidated process

**Separate Trigger Processing**
System executes two-stage workflow: first trigger unallocates payments upon retroactive policy transactions; second trigger reconciles invoices when negative items are generated

**Retroactive Change Detection**
System identifies triggering conditions including policy retroactive updates and member billing account movements that require reconciliation

**ANYB Calculation and Consumption**
System calculates Amount Not Yet Billed and applies it to next generated invoice prior to reconciliation execution


**Acceptance Criteria:**

**Combined Trigger Execution**
Given combined trigger strategy is configured, when invoice with negative adjustments is generated, then system executes complete reconciliation including payment unallocation and invoice item reconciliation in single process

**Separate Trigger First Stage**
Given separate triggers strategy is configured, when retroactive policy transaction occurs, then system unallocates payments from overpaid invoice items without reconciling invoices

**Separate Trigger Second Stage**
Given separate triggers strategy with first stage completed, when invoice with negative items is generated, then system reconciles matching positive and negative invoices

**Retroactive Policy Detection**
Given policy is updated retroactively or member moves between billing accounts post-invoice generation, when reconciliation trigger evaluates conditions, then system initiates configured reconciliation workflow

**ANYB Integration**
Given ANYB is calculated from triggering event, when next invoice is generated, then system consumes calculated ANYB before executing reconciliation process


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=606242589"
]

---

#### Feature: View Invoices Covered by Payment
- **Role**: Billing Administrator
- **Action**: view and reconcile invoices covered by a specific payment allocation
- **Value**: I can verify payment distributions, resolve discrepancies, and maintain accurate financial records across customer accounts

**Description:**

As a **Billing Administrator**,
I want to **view and reconcile invoices covered by a specific payment allocation**,
So that **I can verify payment distributions, resolve discrepancies, and maintain accurate financial records across customer accounts**


**Key Capabilities:**

**Payment Allocation Discovery**
User is able to access payment transaction records and expand allocation details, viewing the complete list of invoices associated with each payment.

**Payment Status Validation**
When a payment is selected, system validates transaction status and determines allocation availability. If payment status is 'Transferred', system presents empty allocation state.

**Invoice Distribution Review**
User is able to review allocation metadata including invoice identifiers, issuance dates, due dates, billing periods, and applied amounts for each covered invoice.

**Detailed Invoice Navigation**
User is able to navigate from allocation summary to full invoice details. System routes to appropriate detail view based on billing account classification (List Bill, Individual Direct, or Self-Bill structures).


**Acceptance Criteria:**

**Valid Payment Allocation Display**
Given a payment with status other than 'Transferred', When user expands the payment transaction, Then system displays complete allocation section with all covered invoices and their financial details.

**Transferred Payment Handling**
Given a payment with 'Transferred' status, When user attempts to view allocations, Then system presents empty allocation section without invoice data.

**Invoice Detail Navigation**
Given an allocation list is displayed, When user selects an invoice identifier, Then system opens appropriate invoice detail view corresponding to the billing account type.

**Multi-Invoice Payment Support**
Given a single payment covering multiple invoices, When allocation is expanded, Then system displays all invoice entries with distinct identifiers and individual applied amounts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=467807832"
]

---

#### Feature: Reconcile Adjusted Invoice Items Across Billing Periods
- **Role**: Billing Administrator
- **Action**: reconcile negative invoice adjustments from retroactive policy changes with prior period positive items
- **Value**: accurate billing account balances are maintained and excessive payments are properly reallocated when retroactive amendments create offsetting invoice items

**Description:**

As a **Billing Administrator**,
I want to **reconcile negative invoice adjustments from retroactive policy changes with prior period positive items**,
So that **accurate billing account balances are maintained and excessive payments are properly reallocated when retroactive amendments create offsetting invoice items**


**Key Capabilities:**

**Detect Excessive Payments from Retroactive Adjustments**
Upon invoice generation containing negative items, system identifies matching positive items in prior invoices using criteria (Member Record, Coverage, Tier, Modal Period for List Bill; Master Policy, Plan-Coverage, Reporting Period, Classification segments for Self Bill) and calculates excessive payment amounts requiring reallocation.

**Reallocate Excessive Payments to Unapplied Balances**
System unallocates excessive payment amounts from prior positive invoice items and applies them to Billing Account Unapplied or Member Record Unapplied balances based on billing type configuration.

**Reconcile Offsetting Invoice Items**
System executes billing-type-specific reconciliation logic to pair negative and positive invoice items, recalculates Remaining Due amounts for affected invoices and products, and updates invoice payment statuses.

**Prevent Duplicate Payment Allocation**
System prohibits further payment allocation to reconciled negative and corresponding positive invoice items after processing completion.


**Acceptance Criteria:**

**Excessive Payment Detection**
Given an invoice contains negative items from retroactive amendments, When the system detects matching positive items in prior paid invoices, Then excessive payment amounts are calculated and identified for unallocation.

**Unapplied Balance Reallocation**
Given excessive payments exist on reconciled positive items, When unallocation executes, Then amounts move to appropriate Unapplied balances and payment unallocation events and BAM messages are generated.

**Invoice Balance Recalculation**
Given negative and positive items have been reconciled, When balance recalculation executes, Then Remaining Due amounts and invoice statuses reflect accurate offsetting across billing periods.

**Payment Allocation Prevention**
Given invoice items have completed reconciliation processing, When subsequent payment allocation attempts occur, Then system prevents allocation to those reconciled items.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=613798682"
]

---
## Initiative: Payment Processing & Cash Application

### Epic: Payment Request & Self-Service Billing

#### Feature: Generate Payment Requests for Billing Periods
- **Role**: Billing Administrator
- **Action**: generate payment requests for billing accounts across billing periods
- **Value**: ensure timely premium collection and maintain accurate billing cycles

**Description:**

As a **Billing Administrator**,
I want to **generate payment requests for billing accounts across billing periods**,
So that **I can ensure timely premium collection and maintain accurate billing cycles**


**Key Capabilities:**

**Payment Request Initialization**
System creates payment request with unique identifier linked to billing account and designated billing period

**Premium Amount Calculation**
For initial open periods, system aggregates product modal amounts across all coverages and master policies; for subsequent periods, system references previous billing period premium

**Billing Account Association**
System captures comprehensive billing account details including master policy products, payment due dates, and period boundaries

**Generation Mode Execution**
User is able to initiate payment request manually or allow automated system generation based on billing schedule

**Payment Request Finalization**
System records generation timestamp, source type, and technical references for downstream processing and audit trail


**Acceptance Criteria:**

**Successful Initial Period Generation**
Given a billing account with first open period, when payment request is generated, then system calculates period amount by summing all product modal amounts across master policy coverages

**Successful Recurring Period Generation**
Given a billing account with subsequent billing period, when payment request is generated, then system applies previous period premium amount as period amount

**Manual Generation Execution**
Given user-initiated generation action, when payment request is created, then system marks generation source as manual and captures user context

**Automated Generation Execution**
Given scheduled billing cycle trigger, when system generates payment request, then generation source is marked as automated with timestamp

**Complete Data Capture**
Given any payment request generation, when process completes, then system persists billing account reference, period boundaries, master policy list, and payment due date


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=796006257"
]

---

#### Feature: Regenerate Payment Requests with Historical Context
- **Role**: Billing Administrator
- **Action**: regenerate payment requests while preserving historical records
- **Value**: customers receive accurate billing amounts and historical payment data remains auditable

**Description:**

As a **Billing Administrator**,
I want to **regenerate payment requests while preserving historical records**,
So that **customers receive accurate billing amounts and historical payment data remains auditable**


**Key Capabilities:**

**1. Payment Request Replacement Initiation**
User is able to trigger regeneration of an existing payment request within a billing account through manual or automated sources.

**2. New Payment Request Generation**
System creates replacement payment request with updated identification, temporal data, financial amounts, and product associations.
    2.1 When first open billing period, system calculates period amount from product modal amounts across all coverages.
    2.2 When subsequent billing periods, system applies premium amount from previous period.

**3. Historical Record Preservation**
System archives the discarded automated payment request with complete temporal and financial context for audit purposes.


**Acceptance Criteria:**

**1. Successful First Period Regeneration**
Given a payment request for the first open billing period exists, When regeneration is triggered, Then system calculates period amount from sum of product modal amounts and creates new request.

**2. Successful Subsequent Period Regeneration**
Given a payment request for non-first billing period exists, When regeneration is triggered, Then system applies previous period's premium amount to new request.

**3. Historical Preservation Validation**
Given an automated payment request is discarded, When replacement is generated, Then system retains complete identification, temporal, and financial data of discarded request for audit trail.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=799346210"
]

---

#### Feature: Discard Payment Requests Automatically
- **Role**: Billing Administrator
- **Action**: automatically discard obsolete payment requests and track transaction history
- **Value**: billing accuracy is maintained and outdated requests are systematically removed without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **automatically discard obsolete payment requests and track transaction history**,
So that **billing accuracy is maintained and outdated requests are systematically removed without manual intervention**


**Key Capabilities:**

**1. Payment Request Discard Trigger**
System identifies payment requests eligible for automated removal based on business rules and billing account status

**2. Transaction Data Capture**
System captures comprehensive discard information including payment request identifiers, billing account references, billing period details, and amount data

**3. Event Publication & Audit Trail**
System publishes discard event with transaction timestamp and automated generation source designation for compliance tracking

**4. Billing Period Information Recording**
System preserves billing period start/end dates, payment due dates, and period amounts for historical reference and reconciliation purposes


**Acceptance Criteria:**

**1. Automated Discard Execution**
Given a payment request exists on a billing account, When discard conditions are met, Then system automatically removes the request and marks generation source as 'Automated'

**2. Complete Event Data Publication**
Given a payment request is discarded, When the transaction completes, Then system publishes event containing payment request number, billing account references, billing period details, and occurrence timestamp

**3. Billing Period Preservation**
Given a discard transaction occurs, When event is generated, Then system includes original billing period start/end dates, payment due date, and period amount

**4. Audit Trail Creation**
Given discard event is published, When downstream systems consume the event, Then complete transaction metadata and technical references are available for reconciliation


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=799345973"
]

---

#### Feature: Calculate Period Amounts Based on Billing History
- **Role**: Billing Administrator
- **Action**: generate payment requests with period amounts calculated from billing history
- **Value**: I can ensure accurate billing charges based on historical premium data and current policy coverage details

**Description:**

As a **Billing Administrator**,
I want to **generate payment requests with period amounts calculated from billing history**,
So that **I can ensure accurate billing charges based on historical premium data and current policy coverage details**


**Key Capabilities:**

**1. Payment Request Generation Initiation**
System creates payment request for billing account during designated billing period, capturing account identifiers, temporal boundaries, and product references.

**2. First Period Amount Calculation**
When processing initial open period, system aggregates product modal amounts across all policy items (class, tier, subgroup combinations) within coverages for all master policies and reporting periods.

**3. Subsequent Period Amount Calculation**
When processing recurring periods, system retrieves premium amount from previous billing period as calculated at generation moment.

**4. Payment Request Finalization**
System records generation source (manual or automated), assigns due date, and establishes technical references to billing account and invoicing root.


**Acceptance Criteria:**

**1. First Period Calculation Accuracy**
Given initial billing period, when payment request generates, then period amount equals sum of all product modal amounts across policy coverages for included reporting periods.

**2. Recurring Period Historical Calculation**
Given subsequent billing period, when payment request generates, then period amount equals premium amount from previous period at generation timestamp.

**3. Manual Generation Tracking**
Given user-initiated request, when payment request completes, then generation source records manual origin with operator identification.

**4. Automated Generation Tracking**
Given system-triggered request, when payment request completes, then generation source records automated origin with triggering event reference.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=796006257"
]

---

### Epic: Recurring Payments & Auto-Debits

#### Feature: Apply Payments to Billing Accounts
- **Role**: Billing Administrator
- **Action**: allocate and apply payments across multiple billing contexts using various allocation methods
- **Value**: I ensure accurate revenue recognition and timely account reconciliation across diverse billing scenarios

**Description:**

As a **Billing Administrator**,
I want to **allocate and apply payments across multiple billing contexts using various allocation methods**,
So that **I ensure accurate revenue recognition and timely account reconciliation across diverse billing scenarios**


**Key Capabilities:**

**1. Payment Receipt and Intake**
System receives payments through manual entry, file upload, or automated channels for processing

**2. Allocation Method Selection**
User selects appropriate allocation approach: automatic rule-based, manual intervention, file-based batch, or strategy-driven allocation

**3. Account and Invoice Matching**
System identifies target billing accounts and outstanding invoices based on payment data and business context

**4. Payment Application Execution**
Payment amounts are applied to invoices and member records following allocation rules
    4.1 When manual intervention required, user applies payment through dedicated UI
    4.2 When predefined strategies exist, system applies configured allocation logic

**5. Reconciliation and Confirmation**
System validates successful application and updates account balances across billing contexts


**Acceptance Criteria:**

**1. Multi-Context Processing**
Given payments for IPA, True Group, or Individual Direct accounts, When payment is submitted, Then system routes to appropriate billing context workflow

**2. Allocation Method Flexibility**
Given various payment scenarios, When user selects allocation method, Then system supports automatic, manual, file-based, or strategy-based processing

**3. Manual Intervention Capability**
Given payment requiring review, When manual allocation initiated, Then system provides interface for both new and existing payments

**4. Batch File Processing**
Given payment file uploaded, When file-based allocation triggered, Then system processes batch payment data and applies to accounts

**5. Strategy Execution**
Given configured allocation strategy, When strategy-based method selected, Then system applies predefined business rules automatically

**6. Application Validation**
Given payment applied, When allocation completes, Then system confirms invoice updates and account balance reconciliation


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=561844119"
]

---

#### Feature: Generate Recurring Payments Automatically
- **Role**: Billing Administrator
- **Action**: automate recurring payment creation for eligible billing accounts
- **Value**: customers are charged automatically without manual intervention, reducing administrative overhead and ensuring timely payment collection

**Description:**

As a **Billing Administrator**,
I want to **automate recurring payment creation for eligible billing accounts**,
So that **customers are charged automatically without manual intervention, reducing administrative overhead and ensuring timely payment collection**


**Key Capabilities:**

**Job Initiation & Account Selection**
System launches scheduled or manual recurring payment job and selects billing accounts authorized for recurring processing.

**Eligibility Validation**
System validates account holds, payment method status, waiting period requirements, and invoice availability before proceeding.

**Payment Calculation & Date Determination**
System calculates payment amounts based on outstanding invoices and determines appropriate payment dates using configured offset rules.

**Payment Generation & Allocation**
System generates pre-authorized recurring payments with proper attributes and allocates amounts to selected invoices according to allocation strategy.
    4.1 Upon validation failure, system skips account and continues with remaining accounts or terminates if single account job
    4.2 System publishes payment events and business activity monitoring messages


**Acceptance Criteria:**

**Successful Payment Generation**
Given eligible billing accounts with authorized payment methods, when the recurring payment job executes, then system creates allocated payments for all invoices meeting payment date criteria.

**Account Hold Prevention**
Given an active recurring payment hold on billing account, when the job processes that account, then system generates hold notification and skips payment generation.

**Expired Payment Method Handling**
Given an inactive or expired payment method, when validation occurs, then system fires expired payment method event and excludes account from processing.

**Insufficient Amount Validation**
Given calculated payment amount is zero or negative, when amount validation executes, then system skips payment generation and continues with next account.

**Batch Processing Continuity**
Given multiple accounts in job with one validation failure, when processing encounters failure, then system continues processing remaining accounts without termination.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=579237058"
]

---

#### Feature: Configure Recurring Payment Waiting Periods
- **Role**: Billing Administrator
- **Action**: configure and enforce waiting periods before automated payment withdrawals on authorized billing accounts
- **Value**: I can control payment timing to mitigate risk and ensure proper authorization validation before funds are debited

**Description:**

As a **Billing Administrator**,
I want to **configure and enforce waiting periods before automated payment withdrawals on authorized billing accounts**,
So that **I can control payment timing to mitigate risk and ensure proper authorization validation before funds are debited**


**Key Capabilities:**

**1. Waiting Period Configuration Management**
Administrator defines waiting period duration by bill type and payment method through business rules repository

**2. Authorization Date Recording**
System captures and persists the authorization date when recurring payment is enabled on billing account

**3. Earliest Processing Date Calculation**
System computes earliest processing date as authorization date plus configured waiting period days

**4. Eligibility Determination**
Upon each processing cycle, system compares current system date against earliest processing date to determine processing eligibility
    4.1 When current date meets or exceeds earliest processing date, account qualifies for payment generation
    4.2 When current date precedes earliest processing date, account is skipped until waiting period elapses


**Acceptance Criteria:**

**1. Zero-Day Waiting Period**
Given waiting period configured as 0 days, When authorization occurs, Then earliest processing date equals authorization date and account is immediately eligible

**2. Active Waiting Period Enforcement**
Given waiting period of 14 days and authorization date of Jan 1, When current date is Jan 10, Then system skips account from payment processing

**3. Elapsed Waiting Period Processing**
Given waiting period of 14 days and authorization date of Dec 20, When current date is Jan 5, Then system includes account for payment generation evaluation

**4. Customer Segment Differentiation**
Given individual customer with 14-day period and organization customer with 3-day period, When both authorized same date, Then organization becomes eligible 11 days earlier


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=648795113"
]

---

#### Feature: Auto-Consume Unapplied Balance for Recurring Payments
- **Role**: Billing Administrator
- **Action**: automatically apply unapplied account balances to eligible recurring payment invoices
- **Value**: payment allocation is optimized, manual reconciliation effort is reduced, and outstanding invoices are systematically resolved using available funds

**Description:**

As a **Billing Administrator**,
I want to **automatically apply unapplied account balances to eligible recurring payment invoices**,
So that **payment allocation is optimized, manual reconciliation effort is reduced, and outstanding invoices are systematically resolved using available funds**.


**Key Capabilities:**

**1. Eligibility Assessment**
When the recurring payments job executes, the system identifies invoices eligible for payment generation and verifies that unapplied balance autoconsumption is enabled for the billing account's type.

**2. Available Balance Calculation**
The system computes net available unapplied balance by excluding amounts designated for pending refunds from the total unapplied balance.

**3. Strategic Balance Allocation**
The system distributes available unapplied funds to eligible invoices following account-type-specific distribution rules, overriding standard allocation parameters to ensure consumption proceeds from earliest unpaid invoices, accommodates partial coverage, and prioritizes prior period corrections.

**4. Priority-Based Consumption Sequencing**
The system applies payment category priority configurations, exhausting highest-priority transactions before progressing to lower-priority levels systematically.


**Acceptance Criteria:**

**1. Autoconsumption Activation Control**
Given the billing account type has autoconsumption configured as OFF, When the recurring payments job executes, Then no unapplied balance allocation occurs and the process terminates.

**2. Zero Balance Handling**
Given the billing account has zero unapplied balance, When eligibility assessment completes, Then the allocation process stops immediately without invoice modification.

**3. Refund Reservation Protection**
Given the account has unapplied balance with refund-pending amounts, When calculating available funds, Then the system excludes refund-designated amounts from allocation calculations.

**4. Account-Specific Distribution Compliance**
Given eligible invoices exist for True Group or Individual Direct accounts, When allocating unapplied balance, Then the system applies the respective account-type distribution and allocation rules accurately.

**5. Configuration Override Enforcement**
Given standard allocation parameters conflict with autoconsumption requirements, When processing balance allocation, Then the system overrides gap restrictions, amount matching, partial coverage, and priority settings to ensure systematic consumption from earliest invoices.

**6. Priority Sequencing Execution**
Given multiple payment categories exist, When consuming unapplied balance, Then the system fully exhausts highest-priority transactions before applying funds to lower-priority categories.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=636887098"
]

---

#### Feature: Allocate Payments to Invoices Using Multiple Strategies
- **Role**: Billing Administrator
- **Action**: automate recurring payment processing with strategic invoice allocation
- **Value**: I ensure consistent cash flow through automated payment capture and intelligent allocation to outstanding invoices

**Description:**

As a **Billing Administrator**,
I want to **automate recurring payment processing with strategic invoice allocation**,
So that **I ensure consistent cash flow through automated payment capture and intelligent allocation to outstanding invoices**


**Key Capabilities:**

**1. Recurring Payment Job Initiation**
User is able to launch automated jobs (scheduled or manual) that identify billing accounts authorized for recurring processing based on active payment methods and absence of payment holds.

**2. Eligibility and Authorization Validation**
System validates account readiness by verifying payment method status, waiting period compliance, billing calendar alignment, and hold status before processing.

**3. Invoice Selection and Payment Calculation**
System identifies issued or partially paid invoices with due dates meeting offset criteria, calculates payment amounts based on configured rules, and excludes future-dated invoices.

**4. Payment Generation and Allocation Execution**
System creates pre-authorized recurring payments with allocated status, publishes billing events, and applies configurable allocation strategies to distribute payment amounts across selected invoices.


**Acceptance Criteria:**

**1. Successful Automated Payment Generation**
Given eligible billing accounts exist with active payment methods, When the recurring payment job executes, Then the system generates allocated payments matching calculated amounts and publishes payment creation events.

**2. Account Hold Prevention**
Given a billing account has an active recurring payment hold, When the job processes that account, Then the system skips payment generation and issues hold notification without terminating multi-account jobs.

**3. Payment Method Expiry Handling**
Given a payment method has expired, When validation occurs, Then the system prevents payment processing and triggers expiry events while continuing with remaining accounts.

**4. Strategic Invoice Allocation**
Given multiple invoices qualify for payment, When allocation executes, Then the system distributes payment amounts according to configured allocation strategy rules and updates invoice statuses accordingly.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=579237058"
]

---

#### Feature: Manage Expired Payment Methods on Recurring Payments
- **Role**: Billing Administrator
- **Action**: monitor and resolve expired payment methods associated with active recurring payment arrangements
- **Value**: uninterrupted automated collections and reduced revenue leakage from failed auto-debits

**Description:**

As a **Billing Administrator**,
I want to **monitor and resolve expired payment methods associated with active recurring payment arrangements**,
So that **uninterrupted automated collections and reduced revenue leakage from failed auto-debits**


**Key Capabilities:**

**1. Payment Method Expiration Detection**
System continuously monitors payment instruments attached to recurring arrangements and flags expiring or expired methods before next scheduled auto-debit

**2. Administrator Notification and Review**
Upon detection, system alerts billing staff of affected arrangements, enabling proactive outreach to account holders for payment method updates

**3. Payment Method Replacement Workflow**
User is able to facilitate customer submission of updated payment credentials and associate replacement method with existing recurring arrangement

**4. Arrangement Continuity Validation**
System validates replacement method against active payment method rules and ensures seamless continuation of scheduled auto-debits without arrangement interruption


**Acceptance Criteria:**

**1. Expiration Detection Accuracy**
Given payment methods with known expiration dates, When system performs scheduled validation checks, Then all methods expiring within configured threshold are flagged for administrator review

**2. Failed Debit Prevention**
Given an expired payment method on active arrangement, When next auto-debit date approaches, Then system prevents transaction attempt and notifies administrator before processing

**3. Replacement Method Integration**
Given administrator initiates payment method update, When replacement credentials pass validation rules, Then system associates new method and schedules next debit without arrangement disruption

**4. Audit Trail Completeness**
Given payment method lifecycle events, When methods are flagged, replaced, or arrangements modified, Then system records all actions with timestamps and responsible user identifiers


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628370732"
]

---

#### Feature: Accept Manual Payments for Billing Accounts
- **Role**: Billing Administrator
- **Action**: accept and process manual payments against billing accounts
- **Value**: customer payments are accurately recorded, validated, and posted to accounts receivable without manual reconciliation errors

**Description:**

As a **Billing Administrator**,
I want to **accept and process manual payments against billing accounts**,
So that **customer payments are accurately recorded, validated, and posted to accounts receivable without manual reconciliation errors**


**Key Capabilities:**

**1. Payment Initialization**
User initiates payment transaction; system creates payment entity with default currency (USD) and current effective date

**2. Payment Detail Submission**
User submits payment amount, effective date, currency, and payment method details for validation
    2.1 System validates amount is positive with maximum two decimal places
    2.2 System validates currency code and payment method compatibility

**3. Payment Method Processing**
Upon validation success, system routes to appropriate payment channel (credit card gateway integration, cash clearing, or check issuance workflow)

**4. Financial Posting**
System posts validated payment to ledger subsystem and updates accounts receivable; returns confirmed payment number and transaction details


**Acceptance Criteria:**

**1. Successful Payment Acceptance**
Given valid payment details submitted, When amount is positive with proper decimal precision and currency matches account settings, Then system accepts payment, assigns payment number, and posts to ledger

**2. Amount Validation Enforcement**
Given payment amount submitted, When value is negative, zero, or exceeds two decimal places, Then system rejects submission and prevents posting

**3. Payment Method Verification**
Given payment method identifier provided, When method does not match customer's registered payment methods or type mismatch occurs, Then system blocks transaction and requires correction

**4. Channel-Specific Processing**
Given payment type identified, When credit card payment accepted, Then system integrates with payment gateway; When cash received, status set to cleared; When check submitted, status set to issued


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=243506577"
]

---

#### Feature: Allocate Payments Using Remittance Files
- **Role**: Billing Administrator
- **Action**: allocate remittance payments to member accounts using stored files
- **Value**: payments are accurately distributed to outstanding balances without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **allocate remittance payments to member accounts using stored files**,
So that **payments are accurately distributed to outstanding balances without manual intervention**


**Key Capabilities:**

**1. Remittance File Retrieval**
User accesses stored payment files from billing document repository; system displays available remittance files with metadata for selection.

**2. File Selection & Allocation Method Configuration**
User selects single remittance file; user optionally configures allocation strategy to target specific invoices versus earliest outstanding balances.

**3. File Validation & Structure Verification**
System validates file format conformance, verifies presence of required member identification and payment amount data columns.

**4. Payment Distribution Execution**
Upon successful validation, system distributes payment amounts to member records according to selected allocation strategy; system applies business rules for payment distribution across invoices.


**Acceptance Criteria:**

**1. Successful Standard Allocation**
Given valid remittance file selected without specific invoice targeting, When user initiates allocation, Then system distributes payments to earliest outstanding member invoices and confirms completion.

**2. Successful Targeted Allocation**
Given valid file selected with specific invoice targeting enabled, When user confirms invoice selection, Then system allocates payments exclusively to designated invoice member records.

**3. Invalid File Rejection**
Given file with incorrect format or missing required data columns, When validation executes, Then system prevents allocation and communicates validation failure without partial processing.

**4. Cancellation Without Impact**
Given allocation process initiated, When user cancels before confirmation, Then system terminates process without modifying any payment records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=691641245"
]

---

#### Feature: Publish Payment Lifecycle Events
- **Role**: Billing Administrator
- **Action**: publish and track payment lifecycle events across recurring payment processes
- **Value**: I can ensure transparent payment processing with comprehensive audit trails and real-time visibility into auto-debit transactions

**Description:**

As a **Billing Administrator**,
I want to **publish and track payment lifecycle events across recurring payment processes**,
So that **I can ensure transparent payment processing with comprehensive audit trails and real-time visibility into auto-debit transactions**


**Key Capabilities:**

**1. Payment Event Capture**
System captures lifecycle milestones for recurring payments including initiation, authorization, execution, completion, and failure states.

**2. Event Publication**
System publishes standardized payment events to enterprise message bus for consumption by downstream systems and external integrations.

**3. Event Traceability**
System maintains complete audit trail linking events to original payment requests, customer accounts, and transaction references.

**4. Real-time Notification**
Upon event publication, system enables real-time notifications to stakeholders and dependent business processes.


**Acceptance Criteria:**

**1. Successful Event Publication**
Given a recurring payment completes processing, When the payment reaches a lifecycle milestone, Then the system publishes the corresponding event with complete transaction context.

**2. Event Data Completeness**
Given an event is published, When downstream systems consume the event, Then all required identifiers, timestamps, and status information are present and accurate.

**3. Audit Trail Integrity**
Given multiple events for a single payment, When retrieving event history, Then the system provides chronological sequence with full traceability to source transactions.

**4. Failure Event Handling**
Given a payment fails during processing, When the failure is detected, Then the system publishes failure events with diagnostic information for remediation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=527538398"
]

---

#### Feature: Export Payment Details for Reporting
- **Role**: Billing Administrator
- **Action**: export payment transaction details to external reporting systems
- **Value**: financial data can be analyzed, audited, and reconciled across enterprise platforms

**Description:**

As a **Billing Administrator**,
I want to **export payment transaction details to external reporting systems**,
So that **financial data can be analyzed, audited, and reconciled across enterprise platforms**


**Key Capabilities:**

**Payment Data Selection**
User is able to define export criteria for payment transactions within specified business parameters.

**Export Execution**
System retrieves payment details based on defined criteria and prepares data for external consumption.

**Data Delivery**
System generates structured export output in formats compatible with downstream reporting and analytics platforms.

**Export Confirmation**
User receives acknowledgment upon successful data export completion with traceability reference.


**Acceptance Criteria:**

**Successful Export Execution**
Given valid export criteria are defined, When the export process is initiated, Then the system successfully retrieves and formats payment data for delivery.

**Data Completeness Validation**
Given payment transactions exist within specified parameters, When export is executed, Then all eligible records are included without data loss.

**Incomplete Criteria Handling**
Given required export parameters are missing, When user attempts export, Then system prevents execution and prompts for complete criteria.

**Export Traceability**
Given export completes successfully, When user reviews confirmation, Then system provides unique reference identifier for audit tracking.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=699244545"
]

---

#### Feature: View Payment Transaction History
- **Role**: Billing Representative
- **Action**: access and review comprehensive payment transaction records with filtering capabilities
- **Value**: I can efficiently respond to customer inquiries by analyzing complete payment histories and identifying specific transactions

**Description:**

As a **Billing Representative**,
I want to **access and review comprehensive payment transaction records with filtering capabilities**,
So that **I can efficiently respond to customer inquiries by analyzing complete payment histories and identifying specific transactions**


**Key Capabilities:**

**1. Payment History Access**
User is able to view recent payment summary from billing account interface showing the four most recent transactions by default.

**2. Complete Transaction Retrieval**
Upon selecting 'View All', user navigates to comprehensive payments page displaying complete transaction history with billing account context and available actions.

**3. Transaction Filtering**
User is able to refine displayed results by applying filters including Transaction Type (payments, refunds, customer credits), Status, and date ranges.

**4. Payment Detail Review**
User is able to examine transaction attributes including payment method type, amounts, transaction dates, effective dates, status, and allocation designations.


**Acceptance Criteria:**

**1. Default View Display**
Given a billing account is accessed, When the payment section loads, Then system displays the four most recent payment transactions without requiring additional user action.

**2. Full History Navigation**
Given user selects 'View All' option, When navigation completes, Then system presents complete payment history with filtering controls and billing account context.

**3. Filter Application**
Given user applies transaction type, status, or date range filters, When filter is submitted, Then system displays only transactions matching specified criteria.

**4. Multi-Method Support**
Given payment history contains diverse transaction types, When user reviews transactions, Then system displays all payment methods (cash, check, credit card, EFT/ACH) with appropriate masking for sensitive data.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=517604253",
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541991005"
]

---

#### Feature: Generate Payment Requests Automatically
- **Role**: Billing Administrator
- **Action**: automate recurring payment request generation and processing
- **Value**: ensure timely revenue collection without manual intervention and reduce processing delays

**Description:**

As a **Billing Administrator**,
I want to **automate recurring payment request generation and processing**,
So that **ensure timely revenue collection without manual intervention and reduce processing delays**


**Key Capabilities:**

**1. Automated Schedule Configuration**
User is able to establish recurring payment schedules based on billing cycles and customer agreements

**2. Payment Request Generation**
System automatically creates payment requests when scheduled triggers occur without manual initiation

**3. Auto-Debit Processing**
Upon successful request generation, system executes payment collection from designated payment methods

**4. Exception Management**
When payment failures occur, system captures error details and initiates retry or escalation workflows

**5. Audit Trail Maintenance**
System records all automated payment activities for compliance and reconciliation purposes


**Acceptance Criteria:**

**1. Successful Automated Generation**
Given a valid recurring schedule exists, When the scheduled trigger time arrives, Then system generates payment request automatically without manual intervention

**2. Payment Processing Completion**
Given payment request is generated, When sufficient funds are available, Then system successfully processes auto-debit and updates account status

**3. Failed Payment Handling**
Given payment processing fails, When system detects the failure, Then system logs the exception and initiates configured retry or notification workflow

**4. Schedule Integrity**
Given multiple recurring schedules exist, When system processes requests, Then each schedule executes independently without conflicts


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=796006159"
]

---

### Epic: Payment Hub & Gateway Integration

#### Feature: Route Inbound Payments from Payment Hub to Billing Accounts
- **Role**: Billing Administrator
- **Action**: automatically route and process third-party payments through Payment Hub to billing accounts
- **Value**: payments are validated, allocated, and accounted for without manual intervention, reducing processing time and errors

**Description:**

As a **Billing Administrator**,
I want to **automatically route and process third-party payments through Payment Hub to billing accounts**,
So that **payments are validated, allocated, and accounted for without manual intervention, reducing processing time and errors**.


**Key Capabilities:**

**Payment Reception and Routing**
Third-party payments are received by Payment Hub and routed to billing subsystem based on configured routing rules.

**Payment Validation**
Billing subsystem validates incoming payments against business rules including billing account existence and payment eligibility criteria.

**Automatic Allocation**
Upon successful validation, system accepts payment and allocates funds according to bill type configuration and payment allocation mode settings.

**Exception Handling**
When validation fails, system rejects payment, provides rejection reason to Payment Hub, which suspends payment in General Suspense for manual review.


**Acceptance Criteria:**

**Successful Payment Routing**
Given a valid payment from third-party system, When Payment Hub routes it to billing per routing rules, Then billing subsystem initiates processing workflow.

**Validation Success Path**
Given payment passes all validation rules, When billing processes the payment, Then system automatically accepts and allocates funds to appropriate billing accounts.

**Validation Failure Path**
Given payment fails validation, When billing rejects the payment, Then Payment Hub suspends payment in General Suspense with rejection reason.

**Multi-Subsystem Routing**
Given Payment Hub receives payments for different subsystems, When routing rules are applied, Then payments are correctly distributed to claims, billing, or cash management.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=573314082"
]

---

#### Feature: Validate and Accept Automated Payments from External Systems
- **Role**: Billing Administrator
- **Action**: process and validate automated payment requests submitted by external systems to ensure accurate application to customer accounts
- **Value**: payments are automatically reconciled, balances are updated in real-time, and downstream systems are notified without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **process and validate automated payment requests submitted by external systems to ensure accurate application to customer accounts**,
So that **payments are automatically reconciled, balances are updated in real-time, and downstream systems are notified without manual intervention**


**Key Capabilities:**

**1. Payment Request Intake and Validation**
Upon receiving payment request from external system, validate customer eligibility, billing account status, and allocation designation details before creating payment record

**2. Payment Application and Balance Reconciliation**
User is able to apply validated payment to designated invoices or unapplied balance, recalculate billing account and invoice balances, and update invoice statuses based on payment allocation rules
    2.1 When designated invoices become paid or discarded by concurrent transactions, allocate payment to unapplied balance

**3. Bank Processing Orchestration**
When bank processing flag indicates charge requirement, route payment to payment gateway for fund collection; otherwise process as received payment

**4. Downstream System Notification**
Generate business activity messages for payment creation and status changes, trigger compensation distribution events, and notify payment hub of processing outcomes


**Acceptance Criteria:**

**1. Valid Payment Request Processing**
Given a valid payment request from external system with active billing account, When system validates allocation availability, Then payment record is created with designated allocation and balances are recalculated

**2. Invalid Request Rejection**
Given a payment request with validation failures, When system detects invalid customer or account status, Then error messages are returned to external system and no payment record is created

**3. Concurrent Transaction Handling**
Given designated invoices become paid or discarded during processing, When allocation validation fails, Then payment is allocated to unapplied balance and processing continues without invoice status updates

**4. Bank Processing Routing**
Given bank processing flag is true, When payment record is created, Then payment hub is notified to initiate fund collection; Given flag is false, Then payment is processed as received

**5. Balance and Status Synchronization**
Given payment is successfully allocated to invoices, When balances are recalculated, Then invoice statuses are updated and business activity messages are generated for all affected entities


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=581112532"
]

---

#### Feature: Allocate Payments to Invoices Using Configurable Strategies
- **Role**: Billing Administrator
- **Action**: automatically allocate unapplied payments to outstanding invoices based on configurable business rules
- **Value**: outstanding balances are systematically resolved without manual intervention, reducing operational overhead and accelerating cash application

**Description:**

As a **Billing Administrator**,
I want to **automatically allocate unapplied payments to outstanding invoices based on configurable business rules**,
So that **outstanding balances are systematically resolved without manual intervention, reducing operational overhead and accelerating cash application**.


**Key Capabilities:**

**1. Configuration Validation**
System verifies automatic payment consumption strategy is enabled for the billing account configuration before processing.

**2. Sequential Invoice Processing**
System applies unapplied balances to unpaid invoices chronologically, starting with earliest invoice first.
    2.1 When invoice cannot be fully covered, system distributes payment according to configured priority groups
    2.2 When priority group exceeds available funds, system allocates remaining balance proportionally

**3. Allocation Event Broadcasting**
System fires events to notify downstream systems of payment-to-invoice allocations and member/policy-level payment applications.

**4. Status Notification Generation**
System generates business activity messages for consumed payments and invoices with changed payment status.


**Acceptance Criteria:**

**1. Configuration Enforcement**
Given automatic consumption is disabled for an account, When invoice is generated, Then system does not apply unapplied payments.

**2. Chronological Application**
Given multiple unpaid invoices exist, When unapplied payment is consumed, Then system allocates to oldest invoice first until balance is exhausted.

**3. Proportional Distribution**
Given insufficient funds to cover priority group, When allocation occurs, Then system distributes remaining balance proportionally across group items.

**4. Event Publication**
Given payment allocation completes, When invoices or payments change status, Then system fires allocation events and generates corresponding BAM messages.

**5. Partial Payment Handling**
Given payment cannot fully cover invoice, When allocation executes, Then system marks invoice as partially paid and applies configured priority rules.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=773137298"
]

---

#### Feature: Allocate Payments by Remittance File for List Bill IPA Accounts
- **Role**: Billing Administrator
- **Action**: allocate payments to member records using remittance file uploads
- **Value**: streamline bulk payment distribution and reduce manual entry errors

**Description:**

As a Billing Administrator,
I want to allocate payments to member records using remittance file uploads,
So that streamline bulk payment distribution and reduce manual entry errors


**Key Capabilities:**

**1. Payment Allocation Initiation**
User selects remittance file (CSV/XLSX) from local storage or E-Folder for existing or new payments. System queues asynchronous processing, applies 'Processing' tag, and disables concurrent allocation actions.

**2. File Validation Execution**
System validates format, CSV comma separation, data structure per column rules, and verifies total amount does not exceed available payment balance.
    2.1 Upon validation failure, system saves draft with error details, fires validation event, and registers error task

**3. Payment Distribution & Draft Creation**
System distributes amounts to member records per remittance rules. Saves draft allocation (existing payment) or draft payment (new payment) with 'Incomplete' tag.

**4. Background Processing Support**
User may exit interface during processing. System continues allocation asynchronously and updates payment status upon completion.


**Acceptance Criteria:**

**1. Successful File-Based Allocation**
Given valid remittance file with amounts within payment balance, when system completes distribution, then draft allocation is saved with 'Incomplete' tag and available for manual completion.

**2. Format Validation Failure**
Given unsupported file format (non-CSV/XLSX), when system validates format, then draft is saved with format error alert and validation failure event fires.

**3. Amount Threshold Breach**
Given file total exceeds available payment amount, when system validates totals, then no balance changes occur and error task registers.

**4. Asynchronous Processing**
Given user exits during processing, when allocation completes in background, then payment status updates and user can retrieve draft via payment search.

**5. CSV Structure Validation**
Given CSV file without comma separation, when system validates structure, then error alert displays and BAM event generates.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=747867606"
]

---

#### Feature: Process Outbound Refund Requests to Payment Hub
- **Role**: Billing Administrator
- **Action**: process voided refund cancellations from the Payment Hub
- **Value**: payment integrity is maintained and financial balances remain accurate across billing accounts

**Description:**

As a **Billing Administrator**,
I want to **process voided refund cancellations from the Payment Hub**,
So that **payment integrity is maintained and financial balances remain accurate across billing accounts**


**Key Capabilities:**

**1. Cancellation Event Reception**
System receives voided payment notification from Payment Hub and identifies cancellation substatus.

**2. Refund Status Update**
System automatically cancels the outbound refund with voided status and applies cancellation reason to payment record.

**3. Balance Reconciliation**
System recalculates Billing Account and Member Record unapplied balances and updates payment allocation amounts based on refund source.

**4. Payment Reapplication Processing**
Upon cancellation, system triggers payment reapplication workflow to original unapplied source (Billing Account or Member Record).

**5. Notification & Audit Trail**
System publishes cancellation events and generates audit messages for refund status changes and payment status transitions.


**Acceptance Criteria:**

**1. Voided Event Processing**
Given an approved refund exists, When Payment Hub sends voided cancellation event, Then system updates refund to voided status with cancellation reason.

**2. Balance Accuracy**
Given a voided refund, When system processes cancellation, Then Billing Account or Member Record unapplied balances reflect the cancelled refund amount per calculation rules.

**3. Source-Based Reapplication**
Given voided refund source is identified, When cancellation completes, Then system fires appropriate payment reapplication event for Billing Account or Member Record unapplied.

**4. Audit Compliance**
Given refund cancellation occurs, When status changes to voided, Then system generates refund voided message and payment status changed message.

**5. Action Availability**
Given refund is voided, When user views payment, Then available payment actions update per business rules preventing invalid operations.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=737153893"
]

---

#### Feature: Map Billing Refund Attributes to Payment Hub Outbound Payment Format
- **Role**: Billing Administrator
- **Action**: map and transmit refund payment attributes from Billing to Payment Hub in standardized format
- **Value**: refund payments are accurately processed through external payment gateway with complete transactional integrity and compliance

**Description:**

As a **Billing Administrator**,
I want to **map and transmit refund payment attributes from Billing to Payment Hub in standardized format**,
So that **refund payments are accurately processed through external payment gateway with complete transactional integrity and compliance**


**Key Capabilities:**

**Refund Payment Initiation & Core Attribute Mapping**
Upon refund initiation (automated or manual), system maps payment identification, domain correlation, recipient information, amount with currency, transaction dates, domain name, and audit tracking from Billing format to Payment Hub format with bank processing always required.

**Payment Method-Specific Data Transformation**
When Check method selected, system maps mailing address from CEM customer entity. When Credit Card selected, system validates card details and maps tokenization profile. When EFT/ACH selected, system transforms bank account details including holder name splitting.

**Payment Status & Exception Management**
Upon payment decline, cancellation, or failure, system captures reason codes and additional information, maintaining audit trail across both systems for reconciliation and compliance reporting.


**Acceptance Criteria:**

**Core Attribute Transmission Validation**
Given refund initiated in Billing, When payment data mapped, Then Payment Hub receives domain correlation ID, payment reference, recipient details, amount with USD currency, transaction dates, and audit fields.

**Payment Method Completion Requirements**
Given payment method selected, When status transitions from DRAFT to completion, Then system validates method-specific required attributes (mailing address for Check, unexpired card with billing address for Credit Card, bank account details for EFT/ACH).

**Payment Method Token Security**
Given Credit Card or EFT/ACH payment, When payment processed, Then system transmits payment method token ID without exposing sensitive financial data.

**Exception Documentation Integrity**
Given payment declined or failed, When exception occurs, Then system captures reason code and description in both Billing and Payment Hub for complete audit trail.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=636889487"
]

---

#### Feature: Synchronize Payment Status Changes from Payment Hub
- **Role**: Billing Administrator
- **Action**: synchronize payment status changes from the external payment hub to maintain accurate billing records
- **Value**: payment transactions are automatically reconciled and billing accounts reflect real-time payment outcomes without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **synchronize payment status changes from the external payment hub to maintain accurate billing records**,
So that **payment transactions are automatically reconciled and billing accounts reflect real-time payment outcomes without manual intervention**


**Key Capabilities:**

**Payment Event Monitoring**
System continuously listens for payment status events (COMPLETED, FAILED) from the integrated Payment Management System.

**Successful Payment Processing**
Upon receiving COMPLETED event, system automatically executes payment clearing workflow to finalize the billing transaction.

**Failed Payment Handling**
When FAILED event is received, system triggers payment decline workflow to reverse provisional account credits and update billing status.

**Continuous Reconciliation**
System processes multiple payment status updates sequentially, ensuring all transmitted payment requests are reconciled with their final outcomes.


**Acceptance Criteria:**

**1. Successful Payment Confirmation**
Given billing system has submitted payment requests, when Payment Hub sends COMPLETED event, then system executes payment clearing workflow and updates billing account balance accordingly.

**2. Failed Payment Notification**
Given pending payment exists, when Payment Hub sends FAILED event, then system executes payment decline workflow and restores previous billing account state.

**3. Event Listener Availability**
Given Payment Hub integration is active, when payment status events are transmitted, then billing system receives and processes events without data loss.

**4. Sequential Processing**
Given multiple payment status events arrive, when system processes one event, then subsequent events are handled in order without blocking or skipping transactions.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=309466827"
]

---

#### Feature: Charge or Register Payments Based on Bank Processing Flag
- **Role**: Billing Administrator
- **Action**: route payments through gateway integration based on bank processing configuration
- **Value**: payments are processed or registered appropriately through third-party processors or internal systems according to business requirements

**Description:**

As a **Billing Administrator**,
I want to **route payments through gateway integration based on bank processing configuration**,
So that **payments are processed or registered appropriately through third-party processors or internal systems according to business requirements**


**Key Capabilities:**

**1. Payment Initiation Classification**
System categorizes incoming payment requests by initiation method (manual UI, web portal, external system), direction (inbound/outbound), and automation level to determine routing path.

**2. Charge Flag Evaluation**
Upon receiving payment request, system evaluates bank processing flag: when true, routes to Payment Hub and third-party gateway for processing; when false, performs internal registration only.

**3. Gateway Processing Execution**
When charge flag is enabled, system transmits payment through Payment Hub to configured external payment processor for authorization and settlement.

**4. Registration-Only Handling**
When charge flag is disabled, system registers payment details internally without external processor interaction for transactions already completed outside the system.

**5. Payment Confirmation**
System receives processing results from gateway or completes registration, updates payment status, and triggers downstream cash application workflows.


**Acceptance Criteria:**

**1. Gateway Processing Activation**
Given charge flag is set to true, When payment is submitted, Then system routes transaction through Payment Hub to third-party processor for authorization.

**2. Registration-Only Execution**
Given charge flag is set to false, When payment is submitted, Then system registers payment internally without contacting external gateway.

**3. Direction-Based Routing**
Given payment direction is outbound with charge flag true, When refund is initiated, Then system processes through Payment Hub to external processor.

**4. Manual Payment Processing**
Given user initiates payment through UI with charge flag true, When payment method is valid, Then system executes gateway transaction and returns confirmation.

**5. Third-Party Initiated Registration**
Given external processor sends payment notification with charge flag false, When received by Payment Hub, Then system registers payment without re-processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=666809236"
]

---

#### Feature: Generate Automated Refunds for Overpayments and Cancellations
- **Role**: Billing Administrator
- **Action**: automatically generate refund records based on defined business triggers and thresholds
- **Value**: customers receive timely refunds without manual intervention, reducing operational overhead and improving customer satisfaction

**Description:**

As a **Billing Administrator**,
I want to **automatically generate refund records based on defined business triggers and thresholds**,
So that **customers receive timely refunds without manual intervention, reducing operational overhead and improving customer satisfaction**.


**Key Capabilities:**

**1. Evaluate First Invoice Overpayment Eligibility**
When payment allocation to first invoice results in overpayment, system evaluates thresholds (10% of invoice amount OR TWD 2,000) and automatically generates refund record upon criteria satisfaction.

**2. Process Policy Cancellation and Amendment Credits**
Upon member record cancellation or amendment creating negative premium difference, system automatically generates refund record for negative invoice amounts.

**3. Calculate Master Policy Cancellation Refunds**
System calculates refund eligibility using unearned premium, unbilled amendments, unapplied amounts, and overpayments. Generates refund record when net calculation is positive upon cancellation confirmation.

**4. Manage Experience Refund Generation**
When policy year ends with renewal, qualifying claim performance, profitability, and negative refund amount, system generates refund record after user confirms calculation results.


**Acceptance Criteria:**

**1. First Invoice Overpayment Threshold Validation**
Given payment allocated to first invoice with overpayment, When overpayment meets either threshold criterion (10% OR TWD 2,000), Then system automatically generates refund record without user intervention.

**2. Cancellation/Amendment Credit Processing**
Given member record cancellation or amendment, When premium recalculation results in negative invoice amount, Then system generates refund record automatically.

**3. Master Policy Cancellation Refund Decision**
Given Master Policy cancellation confirmation, When calculation (Unearned Premium + Unbilled Amendments - Unapplied Amount - Overpayment) is positive, Then system generates refund record; otherwise system generates invoice/receipt.

**4. Experience Refund Confirmation Workflow**
Given all experience refund conditions satisfied, When user confirms calculation results in policy function, Then billing system generates refund record for legacy system execution.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=704847805"
]

---

#### Feature: Configure Payment Allocation Priorities by Premium Sequence and Invoicing Period
- **Role**: Billing Administrator
- **Action**: configure payment allocation priorities based on premium sequence and invoicing period rules
- **Value**: payments are distributed accurately across member records according to business priorities, reducing manual reconciliation and ensuring compliance with allocation policies

**Description:**

As a **Billing Administrator**,
I want to **configure payment allocation priorities based on premium sequence and invoicing period rules**,
So that **payments are distributed accurately across member records according to business priorities, reducing manual reconciliation and ensuring compliance with allocation policies**


**Key Capabilities:**

**1. Payment Grouping and Prioritization**
System groups unpaid invoice items by member identifier, then applies three-tier prioritization: oldest unpaid invoice first, configured premium sequence/invoicing period second, and premium sequence effective date third.

**2. Sequential Priority-Based Distribution**
System allocates payment amounts following priority hierarchy, fully covering higher-priority items before advancing to lower-priority items, ensuring systematic fund application.

**3. Proportional Allocation for Equal Priority**
When multiple items share identical effective dates or priority levels, system distributes payments proportionally based on remaining due amounts using standardized coefficient calculations.

**4. Modal Period Processing**
When members are billed under multiple modal periods within an invoicing period, system processes oldest modal period first, applying proportional allocation if unable to fully cover.

**5. Overpayment Redistribution**
When payment exceeds total due for member records under same identifier, system distributes surplus proportionally based on annual premium amounts across applicable records.

**6. Member Identifier Boundary Enforcement**
System maintains strict SSN/Employee ID boundaries throughout all allocation processes, preventing cross-member fund transfers.


**Acceptance Criteria:**

**1. Multi-Tier Priority Enforcement**
Given multiple unpaid invoices exist for a member identifier, When payment allocation executes, Then system applies funds to oldest invoice first, then by configured premium sequence priority, then by oldest effective date.

**2. Proportional Distribution Accuracy**
Given multiple invoice items with identical effective dates exist, When payment amount is insufficient to cover all items, Then system distributes funds proportionally based on remaining due amounts with HALF_UP rounding to 8 digits.

**3. Modal Period Sequential Coverage**
Given member is billed under multiple modal periods within single invoicing period, When payment allocation processes, Then system covers oldest modal period completely before advancing to subsequent periods.

**4. Overpayment Handling**
Given payment amount exceeds total remaining due for all member records under same identifier, When allocation completes, Then system distributes surplus proportionally based on annual premium amounts across records.

**5. Missing Effective Date Management**
Given invoice items lack premium sequence effective dates, When prioritization occurs, Then system treats these items as lowest priority after all dated items are processed.

**6. Member Identifier Isolation**
Given payments are grouped by member identifier, When allocation executes across multiple identifiers, Then system prevents fund transfer between different SSN/Employee ID groups under all scenarios.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=779984004"
]

---

#### Feature: Validate Payment Allocation Configuration Rules in OpenL
- **Role**: Billing Administrator
- **Action**: validate payment allocation configuration rules in OpenL to ensure proper setup across billing account types
- **Value**: payment processing operates correctly with compliant allocation strategies, preventing configuration errors that could cause payment misapplication

**Description:**

As a **Billing Administrator**,
I want to **validate payment allocation configuration rules in OpenL to ensure proper setup across billing account types**,
So that **payment processing operates correctly with compliant allocation strategies, preventing configuration errors that could cause payment misapplication**.


**Key Capabilities:**

**1. Configuration Initialization & Account Type Validation**
User provides payment allocation configuration specifying billing account type, payment allocation mode, strategy name, and unique configuration ID. System validates that List Bill accounts include required payment allocation mode (Individual Premium Accounting or True Group).

**2. Automated Allocation Approach Verification**
When automated payment allocation is enabled, system validates that appropriate allocation approaches are configured (allocationRules and/or remittanceFile for List Bill IPA; allocationRules only for other types) with required parameters.

**3. Allocation Rules Compliance Check**
System enforces that allocationRules approach includes all three required rule definitions (allowAllocationWithGaps, allowAllocationOfMismatchedAmounts, allowPartialInvoiceCoverage), noting type-specific constraints.

**4. Autoconsumption Settings Validation**
System validates autoconsumption configurations are permitted for billing account type and use supported actions (invoiceGeneration, recurringPayments), preventing invalid configurations for List Bill IPA accounts.


**Acceptance Criteria:**

**1. Payment Allocation Mode Enforcement**
Given a List Bill billing account configuration, When payment allocation mode is missing or invalid, Then system rejects configuration with error indicating required mode values (Individual Premium Accounting or True Group).

**2. Automated Allocation Approach Requirement**
Given automated payment allocation is enabled, When no allocation approach is specified or invalid approach provided for account type, Then system prevents configuration acceptance and displays supported approach values.

**3. Allocation Rules Completeness**
Given allocationRules approach is selected, When required rule definitions (allowAllocationWithGaps, allowAllocationOfMismatchedAmounts, allowPartialInvoiceCoverage) are missing, Then system rejects configuration indicating all three rules must be defined.

**4. Autoconsumption Constraint Validation**
Given autoconsumption from unapplied is configured for List Bill IPA, When validation executes, Then system rejects configuration as autoconsumption is not supported for this billing account type.

**5. Configuration Uniqueness Verification**
Given configuration ID is submitted, When ID matches existing configuration, Then system prevents duplicate and requires unique identifier.

**6. Complete Valid Configuration Acceptance**
Given all validation rules pass for billing account type, When configuration is submitted, Then system accepts configuration and enables payment allocation processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=644464309"
]

---

#### Feature: Enable or Disable Automated Payment Allocation by Bill Type
- **Role**: Billing Administrator
- **Action**: configure automated payment allocation rules based on bill type to control distribution behavior
- **Value**: payments are processed consistently according to business policies, reducing manual intervention and allocation errors

**Description:**

As a **Billing Administrator**,
I want to **configure automated payment allocation rules based on bill type to control distribution behavior**,
So that **payments are processed consistently according to business policies, reducing manual intervention and allocation errors**.


**Key Capabilities:**

**1. Configuration Access and Management**
User is able to access billing account-level payment allocation settings and modify automation preferences for specific bill types.

**2. Allocation Strategy Selection**
User is able to enable or disable automated allocation and define distribution strategies aligned with organizational policies.

**3. Rule Validation and Activation**
Upon configuration submission, system validates rules against business logic constraints and activates approved allocation behavior.

**4. Processing Execution**
When payments are received, system automatically applies configured allocation strategy based on associated bill type, distributing funds to eligible invoices according to defined rules.


**Acceptance Criteria:**

**1. Configuration Persistence**
Given a billing administrator modifies allocation settings for a bill type, When changes are saved, Then system retains configuration and applies rules to subsequent payment transactions.

**2. Selective Automation Control**
Given multiple bill types exist, When administrator disables automation for specific types, Then system routes those payments to manual allocation queue while processing others automatically.

**3. Validation Enforcement**
Given invalid configuration parameters, When administrator attempts activation, Then system prevents implementation and provides business-level error guidance.

**4. Allocation Execution**
Given enabled automation for a bill type, When payment is received, Then system distributes funds according to configured strategy without manual intervention.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=550274992"
]

---

### Epic: Payment Reversal & Unallocation Operations

#### Feature: Reverse Payment Transactions
- **Role**: Billing Administrator
- **Action**: reverse incorrectly allocated payment transactions and manage downstream impacts
- **Value**: incorrect payments are completely removed from the Billing subsystem, restoring accurate financial records and enabling proper reallocation

**Description:**

As a **Billing Administrator**,
I want to **reverse incorrectly allocated payment transactions and manage downstream impacts**,
So that **incorrect payments are completely removed from the Billing subsystem, restoring accurate financial records and enabling proper reallocation**


**Key Capabilities:**

**1. Initiate Payment Reversal**
User submits reversal action for suspended payments. System validates payment eligibility based on current status and downstream dependencies.
    1.1 If payment is processed/designated to domain, suspension must be completed before reversal becomes available
    1.2 Payments included in already-paid refunds cannot be reversed

**2. Execute Reversal Operations**
System updates payment status to 'Reversed' across all affected Billing Accounts and restricts future actions to review-only mode.

**3. Process Invoice Impact**
When reversed payment was allocated to paid invoices, system unallocates payment and recalculates invoice status to reflect accurate balance.

**4. Handle Overpayment Reallocation**
For Individual Premium and Direct Billing Accounts, system automatically reallocates existing overpayments to now-unpaid invoices.

**5. Manage Draft Allocation Cleanup**
System deletes all draft allocations associated with reversed payment and notifies stakeholders.

**6. Resolve Unpaid Refund Dependencies**
System automatically cancels, voids, or stops related unpaid refunds based on their current lifecycle status.


**Acceptance Criteria:**

**1. Successful Payment Reversal**
Given a suspended payment without paid refund dependencies, When user initiates reversal action, Then system updates status to 'Reversed', restricts actions to review-only, and triggers downstream processing notifications.

**2. Invoice Status Recalculation**
Given a reversed payment previously allocated to a paid invoice, When reversal completes, Then system unallocates payment, updates invoice status to reflect unpaid balance, and notifies stakeholders of status change.

**3. Automatic Overpayment Reallocation**
Given an Individual account with overpayment and a reversed payment creating unpaid invoice, When reversal executes, Then system automatically reallocates overpayment to unpaid invoice without user intervention.

**4. Draft Allocation Cleanup**
Given a reversed payment with associated draft allocations, When reversal processes, Then system deletes all draft allocations and triggers deletion notifications.

**5. Unpaid Refund Handling**
Given a reversed payment included in unpaid refund, When reversal completes, Then system cancels/voids/stops refund based on status and notifies stakeholders.

**6. Paid Refund Protection**
Given a payment included in already-paid refund, When user attempts reversal, Then system prevents reversal action and displays business constraint message.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541990990"
]

---

#### Feature: Suspend Payment Transactions
- **Role**: Billing Administrator
- **Action**: suspend and reallocate misdirected payments from billing subsystem to general suspense
- **Value**: I can correct routing errors and enable payments to be redirected to appropriate subsystems without data loss

**Description:**

As a **Billing Administrator**,
I want to **suspend and reallocate misdirected payments from billing subsystem to general suspense**,
So that **I can correct routing errors and enable payments to be redirected to appropriate subsystems without data loss**


**Key Capabilities:**

**Payment Selection and Initiation**
User identifies misdirected payment in billing subsystem and initiates suspension action based on authorized privileges and payment eligibility rules

**Automated Unallocation Process**
Upon suspension trigger, system automatically unallocates payment from all associated invoices, member records, and unapplied balances across multiple billing accounts if applicable

**General Suspense Transfer**
System reallocates unallocated payment to general suspense in Payment Hub subsystem and applies suspended status to all affected billing accounts

**Cascading Effect Resolution**
When suspended payment leaves unpaid invoices, system automatically reallocates existing overpayments to cover gaps; draft allocations and unapproved refunds are cancelled automatically

**Cross-Subsystem Availability**
Payment becomes available in Payment Hub for further routing actions while billing subsystem retains read-only preview access


**Acceptance Criteria:**

**Successful Single-Account Suspension**
Given payment allocated to one billing account without approved refunds, When user with suspension privileges initiates suspend action, Then system unallocates payment from all billing entities, transfers to general suspense, applies suspended status, and makes payment available in Payment Hub

**Multi-Account Suspension Behavior**
Given single payment allocated across multiple billing accounts, When suspension is initiated from any account, Then system suspends payment on ALL associated active billing accounts simultaneously

**Approved Refund Blocking**
Given payment included in approved refund, When user attempts suspension, Then system prevents suspension action and maintains payment in current state

**Automatic Overpayment Reallocation**
Given suspended payment was allocated to invoice AND overpayment exists on member record in Individual Premium/Direct Billing accounts, When suspension completes, Then system automatically reallocates overpayment to unpaid invoice

**Domain Assignment Constraint**
Given payment assigned to specific domain, When user attempts suspension from Payment Hub, Then system blocks action and requires suspension initiation from domain interface


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541990996"
]

---

#### Feature: Decline Payment Transactions
- **Role**: Billing Administrator
- **Action**: decline payment transactions with documented reasoning
- **Value**: payment records remain accurate and decline rationale is captured for audit and dispute resolution

**Description:**

As a **Billing Administrator**,
I want to **decline payment transactions with documented reasoning**,
So that **payment records remain accurate and decline rationale is captured for audit and dispute resolution**


**Key Capabilities:**

**1. Payment Decline Initiation**
User is able to initiate decline operation for a specific payment transaction

**2. Decline Reason Classification**
User provides mandatory decline reason based on payment method type, selecting from predefined categories or customer credit decline reasons

**3. Supplementary Documentation**
When selecting non-standard decline reason, user is able to provide additional contextual information

**4. Decline Transaction Execution**
Upon completing reason documentation, system processes the decline action and updates payment status accordingly


**Acceptance Criteria:**

**1. Mandatory Reason Enforcement**
Given a payment decline operation, When user attempts to proceed, Then system prevents completion until valid decline reason is selected

**2. Method-Specific Reason Filtering**
Given different payment methods, When decline reasons are presented, Then system displays only applicable reasons based on payment method type

**3. Contextual Information Capture**
Given non-standard decline reason selection, When additional context is required, Then system enables supplementary information entry

**4. Decline Confirmation**
Given completed reason documentation, When decline is executed, Then system records decline rationale and updates payment transaction status


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=490610446"
]

---

#### Feature: Unallocate Payment from Invoices Manually
- **Role**: Billing Administrator
- **Action**: unallocate payments from incorrectly assigned invoices and manage unapplied balances
- **Value**: allocation errors are corrected and payment amounts are properly redistributed for accurate financial accounting

**Description:**

As a **Billing Administrator**,
I want to **unallocate payments from incorrectly assigned invoices and manage unapplied balances**,
So that **allocation errors are corrected and payment amounts are properly redistributed for accurate financial accounting**


**Key Capabilities:**

**1. Payment Unallocation Initiation**
User initiates unallocation for a payment previously allocated to invoice(s) or Member Records. System validates eligibility based on payment status and business rules.

**2. Allocation Removal & Balance Transfer**
System removes payment allocation from invoices and transfers amounts to Billing Account Unapplied balance. If amounts exist on Member Record Unapplied balances, these are also consolidated to Billing Account Unapplied balance.

**3. Post-Unallocation Handling by Account Type**
For True Group Billing Accounts, manual reallocation is enabled. For Individual Premium Accounting Accounts, automated allocation strategy applies. Cross-account allocations remain independent.

**4. Automated Cleanup of Draft Allocations**
When unallocation completes, system automatically deletes draft payment allocations on current Billing Account while preserving drafts on other accounts.


**Acceptance Criteria:**

**1. Successful Manual Unallocation**
Given a payment allocated to invoices, When user initiates unallocation and eligibility validation passes, Then system removes allocation, transfers amounts to Billing Account Unapplied balance, and deletes draft allocations on current account.

**2. True Group Account Post-Unallocation**
Given payment unallocated from True Group Billing Account (List Bill or Individual Direct), When unallocation completes, Then user can manually reallocate payment to correct invoice via 'Apply Payment' action without automated consumption.

**3. Individual Premium Account Post-Unallocation**
Given payment unallocated from Individual Premium Accounting Account, When unallocation completes, Then system automatically allocates payment per automated allocation strategy without manual intervention.

**4. Cross-Account Independence**
Given payment allocated to multiple Billing Accounts, When unallocation occurs on one account, Then allocation to other accounts remains unaffected and processes independently.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541991009"
]

---

#### Feature: Unallocate Payment from Member Records Manually
- **Role**: Billing Administrator
- **Action**: manually unallocate payment amounts from selected Member Records to their unapplied balances
- **Value**: expedited refunds can be processed and payment amounts can be repositioned without advancing Paid To Date or triggering commission payouts

**Description:**

As a **Billing Administrator**,
I want to **manually unallocate payment amounts from selected Member Records to their unapplied balances**,
So that **expedited refunds can be processed and payment amounts can be repositioned without advancing Paid To Date or triggering commission payouts**


**Key Capabilities:**

**Initiate Unallocation Operation**
User initiates unallocation action for allocated or partially allocated payment from designated Member Records within Individual Premium Accounting List Bill accounts.

**Select Target Member Records**
User identifies and selects specific Member Records from which payment amounts will be unallocated using search and filtering capabilities.

**Determine Unallocation Scope**
User specifies whether to unallocate entire payment amount including invoice allocations and overpayments, or only the MR Overpayment portion unassociated with invoice items.

**Execute Unallocation Transaction**
System transfers selected payment amounts from Member Record allocations to individual MR Unapplied balances, recalculates billing account balances, and triggers distribution operations for commission adjustments.


**Acceptance Criteria:**

**Successful Unallocation from Selected Member Records**
Given allocated payment exists on Member Records, When user executes unallocation for selected Member Records, Then system transfers amounts to respective MR Unapplied balances and recalculates account balances.

**Scope-Based Unallocation Processing**
Given user selects unallocation scope, When entire amount option is chosen, Then system unallocates both invoice allocations and MR Overpayment; When only MR Overpayment option is chosen, Then system unallocates only overpayment portions.

**Isolation from Other Accounts**
Given payment is allocated across multiple Billing Accounts, When unallocation is executed on one account, Then other Billing Account allocations remain unaffected.

**Event and Balance Integrity**
Given unallocation is completed, When system processes transaction, Then appropriate payment and invoice status events are triggered and Product Balances are recalculated accurately.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=609533871"
]

---

#### Feature: Unallocate Payment Automatically upon Invoice Discard
- **Role**: Billing Administrator
- **Action**: automatically unallocate payments when invoices are discarded
- **Value**: financial records remain accurate and payment balances are correctly redistributed without manual intervention

**Description:**

As a Billing Administrator,
I want to automatically unallocate payments when invoices are discarded,
So that financial records remain accurate and payment balances are correctly redistributed without manual intervention


**Key Capabilities:**

**Invoice Discard Detection**
Upon invoice discard, system identifies payment allocations (Banking, Internal, or Customer Credit) associated with the discarded invoice.

**Account Type Identification**
System evaluates billing account type and payment allocation mode to determine unallocation strategy (Individual Premium Accounting, List Bill True Group, or Self Bill).

**Payment Reallocation Execution**
When Individual Premium Accounting or Individual Direct accounts are detected, system reallocates payment to member record overpayments or oldest unpaid invoices; for List Bill True Group or Self Bill accounts, system moves payment to unapplied balance.

**Balance Recalculation**
System recalculates billing account balances and next payment due dates according to established calculation rules.

**Downstream Notification**
System triggers compensation subsystem events and generates audit messages for payment status changes and internal fund movements.


**Acceptance Criteria:**

**Partial Payment Protection**
Given a payment allocated across multiple invoices, When one invoice is discarded, Then only the allocation to the discarded invoice is reversed while other allocations remain intact.

**Account-Specific Processing**
Given different billing account types, When payment unallocation is triggered, Then system applies appropriate strategy: Member Record overpayment for Individual Premium Accounting/Direct, or Unapplied balance for List Bill True Group/Self Bill.

**Automatic Reallocation**
Given member records with unpaid invoice items, When payment is unallocated from a discarded invoice, Then system automatically reallocates to oldest unpaid invoices starting with earliest due date.

**Audit Trail Generation**
Given successful unallocation, When account type is List Bill True Group or Self Bill, Then system generates payment status change messages and unallocation audit records.

**Compensation Synchronization**
Given any unallocation scenario, When payment redistribution completes, Then system notifies compensation subsystem with updated allocation details for commission recalculation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=582455473"
]

---

#### Feature: Delete Draft Payment Transactions
- **Role**: Billing Administrator
- **Action**: remove incomplete payment transactions from the system
- **Value**: I can maintain data integrity and prevent processing of abandoned or erroneous draft payments

**Description:**

As a **Billing Administrator**,
I want to **remove incomplete payment transactions from the system**,
So that **I can maintain data integrity and prevent processing of abandoned or erroneous draft payments**


**Key Capabilities:**

**Payment Identification & Action Selection**
User locates draft payments marked as incomplete with initiated status and selects deletion action from available operations menu based on payment type classification.

**Confirmation & Authorization Workflow**
System presents confirmation dialog requiring explicit user consent before proceeding with irreversible deletion operation.

**Transaction Removal Execution**
Upon confirmation, system permanently removes payment record from billing account, eliminates all associated draft versions, and generates audit message for tracking purposes.

**Cancellation Path**
When user opts to cancel during confirmation stage, system preserves existing payment draft and returns user to payment management view without modifications.


**Acceptance Criteria:**

**Successful Draft Payment Deletion**
Given a draft payment with initiated status exists, when user confirms deletion action, then system removes payment from billing account, deletes all draft versions, generates audit message, and displays success confirmation.

**Authorization Enforcement**
Given user lacks deletion privileges, when attempting to access delete action, then system prevents action availability in operations menu.

**Cancellation Preservation**
Given user initiates deletion but selects cancel, when cancellation is confirmed, then system retains original payment draft unchanged and returns to payment list view.

**Status Restriction**
Given payment status is not initiated, when user accesses actions menu, then system excludes deletion option from available operations.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=543261829"
]

---

#### Feature: Delete Draft Payment Allocation Versions
- **Role**: Billing Administrator
- **Action**: remove incomplete payment allocation drafts to maintain data accuracy
- **Value**: payment records reflect only finalized allocation decisions and incomplete work does not clutter operational views

**Description:**

As a **Billing Administrator**,
I want to **remove incomplete payment allocation drafts to maintain data accuracy**,
So that **payment records reflect only finalized allocation decisions and incomplete work does not clutter operational views**


**Key Capabilities:**

**1. Draft Allocation Identification**
User locates payments with incomplete allocation versions (marked as 'Incomplete') within payment listings for the billing account.

**2. Deletion Authorization**
User initiates deletion action for the identified draft allocation. System validates user privileges and payment eligibility based on payment type rules.

**3. Deletion Confirmation**
User confirms the irreversible removal operation through system-provided confirmation mechanism.

**4. Draft Removal Execution**
System removes the draft allocation version, retains original payment status, clears incomplete indicators, and generates audit message for the billing account.


**Acceptance Criteria:**

**1. Privilege Validation**
Given user lacks 'Delete Draft Allocation' privilege, When attempting deletion action, Then system prevents access to deletion capability.

**2. Successful Draft Deletion**
Given payment has draft allocation version, When user confirms deletion, Then system removes draft, retains payment status (Partially Allocated/Unapplied), removes incomplete indicator, displays success notification, and creates 'Incomplete Payment Allocation Deleted' audit message.

**3. Cancellation Handling**
Given deletion confirmation presented, When user cancels operation, Then system closes confirmation without changes and returns user to payment list with draft intact.

**4. Payment Type Rule Enforcement**
Given payment type (standard/customer credit/internal), When displaying available actions, Then system applies corresponding business rules to determine deletion action availability.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=543264480"
]

---

#### Feature: Reallocate Payment Across Member Records
- **Role**: Billing Administrator
- **Action**: redistribute allocated payments across member records within a billing account
- **Value**: I can correct payment allocation errors, optimize premium coverage distribution, and resolve discrepancies without reversing the entire payment transaction

**Description:**

As a **Billing Administrator**,
I want to **redistribute allocated payments across member records within a billing account**,
So that **I can correct payment allocation errors, optimize premium coverage distribution, and resolve discrepancies without reversing the entire payment transaction**


**Key Capabilities:**

**1. Payment Context Access**
User initiates reallocation for a specific payment, viewing payment identification details and available allocation amount within the billing account context.

**2. Member Portfolio Review**
User reviews all member records with current allocation status, premium obligations, coverage details, and identifies over/underpayment conditions across the account.

**3. Payment Redistribution**
User adjusts allocated amounts across member records; system calculates reallocation impacts, remaining unallocated balances, and flags discrepancies between adjustments and member obligations.
    3.1 When discrepancies exist, system provides informational warnings without blocking reallocation
    3.2 When negative amounts entered, system prevents transaction submission

**4. Reallocation Confirmation**
Upon validation, user submits redistribution; system applies adjusted allocations across member records and updates account balances accordingly.


**Acceptance Criteria:**

**1. Payment Selection & Context Validation**
Given a payment exists with allocated amounts, When user accesses reallocation functionality, Then system displays payment details and all member records with current allocation status.

**2. Reallocation Calculation Accuracy**
Given user adjusts amounts across member records, When system calculates redistribution, Then remaining unallocated balance equals original allocated amount minus sum of adjusted amounts.

**3. Discrepancy Detection**
Given adjusted amount differs from member's remaining due, When system validates input, Then informational warning displays without preventing submission.

**4. Invalid Input Prevention**
Given user enters negative adjustment values, When system validates transaction, Then submission is blocked until corrections are made.

**5. Successful Reallocation**
Given valid adjustments across member records, When user confirms reallocation, Then system updates allocated amounts and member account balances reflect redistribution.

**6. Zero-Adjustment Constraint**
Given all adjustment values remain zero, When user attempts submission, Then system prevents reallocation transaction.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645898990"
]

---

#### Feature: Configure Automatic Unallocation Priority Order by Payment Category
- **Role**: Billing Administrator
- **Action**: configure the automatic unallocation priority sequence by payment category
- **Value**: payments are systematically reversed in a predictable order when invoice adjustments occur

**Description:**

As a **Billing Administrator**,
I want to **configure the automatic unallocation priority sequence by payment category**,
So that **payments are systematically reversed in a predictable order when invoice adjustments occur**


**Key Capabilities:**

**1. Priority Sequence Configuration**
System administrator defines unallocation priority order: Banking payments (first), Internal payments (second), Customer credits (last).

**2. Automatic Unallocation Trigger**
When negative invoice adjustments are posted, system automatically initiates unallocation process following configured priority.

**3. Universal Application Logic**
Configured priority order applies consistently across all bill types (List Bill True Group mode, Individual Premium Accounting, Direct Bill, Self Bill) without manual override.


**Acceptance Criteria:**

**1. Priority Order Enforcement**
Given negative invoice adjustment is triggered, When automatic unallocation initiates, Then banking payments are unallocated first, followed by internal payments, then customer credits.

**2. Cross-Bill Type Consistency**
Given priority configuration is established, When unallocation occurs across different bill types, Then same priority sequence applies universally.

**3. Automatic Process Execution**
Given trigger event occurs, When system processes unallocation, Then no manual intervention is required to apply priority logic.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=763241780"
]

---

#### Feature: Reverse Write-Off Transactions upon Payment Reversal
- **Role**: Billing Administrator
- **Action**: automatically reverse write-off transactions when qualifying payment or invoice adjustments occur
- **Value**: invoice balances accurately reflect current financial obligations without manual intervention

**Description:**

As a Billing Administrator,
I want to automatically reverse write-off transactions when qualifying payment or invoice adjustments occur,
So that invoice balances accurately reflect current financial obligations without manual intervention


**Key Capabilities:**

**1. Small Balance Write-Off Lifecycle Management**
System evaluates invoices in Issued/Partially Paid status and issues write-offs when remaining balance falls within tolerance thresholds.

**2. Negative Adjustment Triggered Reversal**
Upon policy changes creating negative adjustments, system matches write-off parameters (Member Record, Coverage, Modal Period, Classification Segment) and reverses matching write-offs. User is able to automatically unallocate overpayments to appropriate unapplied funds.

**3. Payment Action Reversal Processing**
When payment unallocation, transfer, decline, or reallocation occurs, system completely reverses all write-offs on affected invoices and recalculates account balances.

**4. Invoice Discard Reconciliation**
If invoice is discarded, system reverses all write-offs directly or indirectly related to the discarded invoice and unallocates associated payments.

**5. Post-Reversal Re-evaluation**
After any reversal event, system recalculates balances and re-evaluates eligibility for new write-off issuance based on updated remaining due amounts.


**Acceptance Criteria:**

**1. Negative Adjustment Reversal Validation**
Given invoice has existing write-off, when negative adjustment with matching parameters is created, then system reverses only write-offs matching Member Record, Coverage, Modal Period, and Classification Segment.

**2. Payment Action Completeness**
Given invoice contains write-off, when any payment action occurs (unallocation, transfer, decline, reallocation), then system completely reverses write-off and recalculates invoice and billing account balances.

**3. Discard Impact Processing**
Given invoice is discarded with active write-offs, when discard is executed, then system reverses all write-offs, unallocates payments, and updates related invoice balances.

**4. Re-evaluation After Reversal**
Given write-off reversal is complete, when balance recalculation finishes, then system evaluates invoice for new write-off issuance only if remaining balance falls within tolerance limits.

**5. Transaction Audit Trail**
Given write-off reversal occurs, when reversal is processed, then system creates separate reversed transaction records for each write-off with appropriate status and subtype indicators.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=657908475"
]

---

#### Feature: Track Payment Status Changes
- **Role**: Billing Administrator
- **Action**: track and monitor payment status transitions throughout the payment lifecycle
- **Value**: I can ensure payment integrity, maintain audit compliance, and quickly identify payments requiring attention or reversal actions

**Description:**

As a **Billing Administrator**,
I want to **track and monitor payment status transitions throughout the payment lifecycle**,
So that **I can ensure payment integrity, maintain audit compliance, and quickly identify payments requiring attention or reversal actions**


**Key Capabilities:**

**Payment Status Lifecycle Monitoring**
System tracks payment transitions through defined status states using standardized lookup values from application through allocation to completion or reversal.

**Status-Driven Allocation Management**
Upon payment application, system applies preset allocation rules and updates status to reflect allocation state while supporting both automatic and manual unallocation triggers.

**Multi-Scenario Status Differentiation**
System maintains distinct status tracking for True Group, Self-Bill, and recurring payment scenarios with scenario-specific status validation rules.

**Reversal and Unallocation Tracking**
When unallocation conditions are met, system captures status change rationale and maintains linkage between original and reversed payment states.


**Acceptance Criteria:**

**Successful Status Transition Recording**
Given a payment undergoes allocation or unallocation, When the operation completes, Then system records status change with timestamp and triggering event without data loss.

**Scenario-Specific Status Validation**
Given payment belongs to True Group or Self-Bill scenario, When status change is initiated, Then system enforces scenario-appropriate status transition rules.

**Unallocation Status Integrity**
Given payment requires reversal via manual or automatic unallocation, When unallocation executes, Then system updates status to reflect unallocated state while preserving historical allocation records.

**Cascading Prevention on Status Updates**
Given member record rewrite occurs, When payment status remains unchanged, Then system prevents unintended status cascade to related payment records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=527538535"
]

---

#### Feature: Validate Payment Reversal Eligibility
- **Role**: Billing Administrator
- **Action**: validate payment reversal eligibility before processing automated decline or reverse requests
- **Value**: prevent erroneous reversals on refunded payments and maintain financial integrity

**Description:**

As a **Billing Administrator**,
I want to **validate payment reversal eligibility before processing automated decline or reverse requests**,
So that **I can prevent erroneous reversals on refunded payments and maintain financial integrity**


**Key Capabilities:**

**Payment Eligibility Assessment**
Upon receiving automated decline or reverse request for allocated payment, system validates current payment status against refund history.

**Refund Status Verification**
System determines whether payment has undergone full or partial refund processing in billing system.

**Request Adjudication**
When payment contains no refund history, system approves decline/reverse request for processing. If refund exists (partial or complete), system rejects request and communicates ineligibility status.

**Exception Handling**
System prevents processing of ineligible requests and returns business-appropriate rejection notification to requesting source.


**Acceptance Criteria:**

**Valid Reversal Processing**
Given allocated payment with no refund history, When automated decline/reverse request received, Then system approves request and proceeds with reversal operation.

**Refunded Payment Protection**
Given payment with full or partial refund, When decline/reverse request received, Then system rejects request with refund conflict notification.

**Status Validation**
Given reversal request, When system evaluates eligibility, Then refund status check executes before approval decision.

**Error Communication**
Given rejected reversal request, When refund exists, Then system communicates payment refund status as rejection reason.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=598913757"
]

---

#### Feature: Generate Payment Removal Events for Downstream Systems
- **Role**: Billing Operations Manager
- **Action**: generate payment removal events for downstream system synchronization based on allocation type and operational triggers
- **Value**: downstream systems receive accurate payment lifecycle updates, ensuring financial data consistency across enterprise platforms and enabling proper reconciliation

**Description:**

As a **Billing Operations Manager**,
I want to **generate payment removal events for downstream system synchronization based on allocation type and operational triggers**,
So that **downstream systems receive accurate payment lifecycle updates, ensuring financial data consistency across enterprise platforms and enabling proper reconciliation**.


**Key Capabilities:**

**1. Payment Removal Event Classification**
User is able to identify payment removal requirements based on allocation target, distinguishing between Member Records unapplied balances, Member Records overpayments, invoice-specific allocations, and general unapplied balances.

**2. Allocation-Specific Event Generation**
System generates distinct removal events corresponding to allocation type, ensuring downstream systems receive contextual information for proper financial record updates.

**3. Downstream System Distribution**
Upon event generation, system transmits payment removal notifications to integrated platforms, enabling synchronized balance adjustments and audit trail maintenance across enterprise ecosystem.


**Acceptance Criteria:**

**1. Member Records Unapplied Removal**
Given payment allocated to Member Records unapplied balance requires removal, When removal operation is triggered, Then system generates MR-unapplied-specific event and distributes to downstream systems with member context.

**2. Invoice Allocation Removal**
Given payment allocated to specific invoice requires removal, When removal is initiated, Then system generates invoice-specific removal event preserving invoice reference for downstream reconciliation.

**3. Event Distribution Verification**
Given payment removal event is generated, When distribution process completes, Then system confirms successful transmission to all integrated platforms and logs event delivery status.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=588158119"
]

---

#### Feature: Manage Payment Allocation Discrepancies
- **Role**: Billing Administrator
- **Action**: clear and reset payment allocations to resolve discrepancies
- **Value**: accurate payment distribution is maintained and errors can be corrected without data loss

**Description:**

As a **Billing Administrator**,
I want to **clear and reset payment allocations to resolve discrepancies**,
So that **accurate payment distribution is maintained and errors can be corrected without data loss**


**Key Capabilities:**

**Initiate Allocation Clearing**
User initiates clearing of existing allocations for draft or incomplete payment records, triggering system confirmation to prevent accidental data loss.

**Reset Allocation State**
Upon confirmation, system zeroes all allocated amounts across invoices and member accounts while preserving payment record and disabling final submission until reallocation.

**Preserve Work-in-Progress**
User can save partial reallocation as draft with incomplete status, enabling session resumption without losing progress or affecting previously saved versions.

**Handle Abandonment**
When user cancels or abandons session, system displays warning for unsaved changes and maintains last saved version integrity without automatic overwrites.


**Acceptance Criteria:**

**Allocation Clearing Confirmation**
Given allocated amounts exist, When user initiates clearing action, Then system requests explicit confirmation before proceeding with reset.

**Complete Allocation Reset**
Given user confirms clearing, When system processes request, Then all allocated amounts become zero and submission capability is disabled until reallocation.

**Draft Preservation**
Given user saves without completing allocation, When exiting session, Then system preserves draft with incomplete status and enables future resumption.

**Unsaved Change Protection**
Given modifications exist without save, When user attempts exit, Then system warns of data loss and provides options to save or abandon changes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=547985933"
]

---

### Epic: Payment Reception & Remittance Management

#### Feature: Capture Payment Method Details (Check, EFT/ACH, Credit Card)
- **Role**: Billing Administrator
- **Action**: capture and validate payment method details across multiple payment types during remittance processing
- **Value**: the system accurately processes incoming payments and ensures proper cash application to customer accounts

**Description:**

As a **Billing Administrator**,
I want to **capture and validate payment method details across multiple payment types during remittance processing**,
So that **the system accurately processes incoming payments and ensures proper cash application to customer accounts**


**Key Capabilities:**

**Payment Method Selection & Routing**
User is able to initiate payment capture workflow and designate payment method type (Check, EFT/ACH, Credit Card) to route to appropriate validation logic.

**Mandatory Payment Attribute Capture**
When processing check payments, user is able to provide mandatory payment identifiers (check number, check date, payment amount, reference number) for system validation.

**Optional Payment Metadata Management**
User is able to supplement payment records with optional temporal attributes (effective date, expiration date) to support downstream reconciliation requirements.

**Payment Data Validation & Submission**
Upon completion of attribute capture, system validates mandatory field completeness and submits payment record for cash application processing.


**Acceptance Criteria:**

**Complete Payment Capture**
Given a check payment method is selected, when all mandatory payment attributes are provided, then the system accepts the payment record for processing.

**Incomplete Data Prevention**
Given mandatory payment attributes are missing, when user attempts submission, then the system prevents payment record creation and notifies user of data completeness requirements.

**Optional Metadata Flexibility**
Given a valid payment record with mandatory fields, when optional date attributes are omitted, then the system processes the payment without requiring these fields.

**Cross-LOB Consistency**
Given payment capture workflows across different lines of business, when payment method details are submitted, then the system applies consistent validation rules regardless of business unit origin.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=256772702"
]

---

#### Feature: Validate Incoming Payment Requests from External Systems
- **Role**: Billing Administrator
- **Action**: automatically validate and allocate incoming payments routed from external payment hubs
- **Value**: payments are processed without manual intervention, reducing errors and accelerating cash application to reduce outstanding receivables

**Description:**

As a **Billing Administrator**,
I want to **automatically validate and allocate incoming payments routed from external payment hubs**,
So that **payments are processed without manual intervention, reducing errors and accelerating cash application to reduce outstanding receivables**


**Key Capabilities:**

**1. Payment Validation & Acceptance**
Upon receiving payment from external hub, system validates payment information against business rules and notifies hub of acceptance status.

**2. Allocation Strategy Determination**
System evaluates payment parameters (account number, invoice number) and configuration settings to determine automated allocation eligibility and strategy.
    2.1 When invoice number provided, system validates invoice existence and eligibility
    2.2 When configuration disallows automation, payment routes to unapplied balance

**3. Payment Application Execution**
System allocates payment to invoices, member records, or unapplied balance following configured strategies and generates balance register operations.

**4. Post-Allocation Processing**
System updates payment status, invoice statuses, account balances, and notifies external hub and downstream systems (compensation) of completed allocation.


**Acceptance Criteria:**

**1. Successful Automated Allocation**
Given a valid payment with required information, when validation passes and automation is enabled, then system allocates payment per strategy, updates balances, and confirms success to payment hub.

**2. Validation Failure Handling**
Given an incoming payment with missing or invalid data, when validation fails, then system notifies payment hub with error details and suspends payment without creating billing records.

**3. Invoice-Specific Allocation**
Given a payment containing valid invoice number, when invoice validation succeeds, then system allocates payment to specified invoice and updates invoice status accordingly.

**4. Unapplied Balance Routing**
Given automation is disabled in configuration, when payment is received with only account number, then system adds full payment amount to account unapplied balance.

**5. Allocation Completion Failure**
Given payment allocation in progress, when balance register operation creation fails, then system notifies payment hub of failure and prevents partial allocation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523014967"
]

---

#### Feature: Route Payments to Billing Accounts via Payment Hub
- **Role**: Billing Administrator
- **Action**: route and allocate inbound payments from Payment Hub to billing accounts automatically
- **Value**: payments are efficiently processed, validated, and allocated to appropriate invoices or accounts without manual intervention, reducing processing time and errors

**Description:**

As a **Billing Administrator**,
I want to **route and allocate inbound payments from Payment Hub to billing accounts automatically**,
So that **payments are efficiently processed, validated, and allocated to appropriate invoices or accounts without manual intervention, reducing processing time and errors**.


**Key Capabilities:**

**1. Payment Validation & Intake**
System validates inbound payments against business rules and payment structure requirements. Upon successful validation, system prepares payment for allocation. If validation fails, system notifies Payment Hub with error details and suspends payment.

**2. Payment Allocation Context Determination**
System identifies allocation target using billing account number or invoice number. When invoice number provided, system validates invoice existence and eligibility before proceeding.

**3. Automated Allocation Execution**
System applies configurable allocation strategies to distribute payment across invoices, member records, or unapplied balance. User is able to configure allocation rules and strategies per business requirements.

**4. Payment Completion & Balance Updates**
System generates balance register operations, updates payment status, and links payment to billing items. System calculates new invoice statuses based on remaining balances.

**5. Downstream System Notification**
System notifies Payment Hub of successful allocation, fires events to compensation subsystem for invoice item distributions, and triggers conditional events based on allocation type.


**Acceptance Criteria:**

**1. Successful Payment Allocation**
Given valid payment routed from Payment Hub, When all validations pass and allocation completes, Then system creates payment with status Allocated/Partially Allocated/Unapplied and updates billing account balances.

**2. Validation Failure Handling**
Given payment with missing or invalid data, When validation executes, Then system rejects payment, notifies Payment Hub with error codes, and suspends payment without creating billing records.

**3. Invoice-Specific Allocation**
Given payment with valid invoice number, When invoice validation succeeds, Then system allocates payment to specified invoice and updates invoice status based on remaining due amount.

**4. Unapplied Balance Processing**
Given automated allocation disabled or no matching invoices, When system processes payment, Then payment is added to unapplied balance without invoice linkage.

**5. Downstream Integration**
Given successful payment completion, When system finalizes allocation, Then appropriate events fire to compensation subsystem and Payment Hub receives billing internal reference for reconciliation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523014967"
]

---

#### Feature: Map Third-Party Payment Data to Billing Payment Requests
- **Role**: Billing Administrator
- **Action**: integrate and map third-party payment data from external payment hubs to the billing system
- **Value**: payments are accurately registered, validated, and prepared for allocation without manual data entry

**Description:**

As a **Billing Administrator**,
I want to **integrate and map third-party payment data from external payment hubs to the billing system**,
So that **payments are accurately registered, validated, and prepared for allocation without manual data entry**


**Key Capabilities:**

**1. Payment Reception & Identification**
Upon receiving payment request from Payment Hub, system maps unique payment reference, sets incoming direction, and registers as manual payment type.

**2. Status & Timing Determination**
System captures payment status, registration timestamp, and derives effective date using bank processing date with fallback hierarchy to ensure accurate payment timing.

**3. Financial Validation**
System validates that payment amount and currency match existing billing records to prevent reconciliation discrepancies.

**4. Payment Method Mapping**
System maps method-specific details including profile tokens for electronic methods, check information, EFT account details, or credit card attributes based on payment type.

**5. Exception Handling**
When payment is declined, reversed, or suspended, system captures reason codes and descriptions; for existing payments, system prevents modification of immutable attributes.

**6. Unapplied Amount Documentation**
System records explanations for partially applied payments to support subsequent allocation workflows.


**Acceptance Criteria:**

**1. Successful New Payment Registration**
Given a new payment request from Payment Hub, when all required identification, timing, amount, and method fields are provided, then system registers payment with mapped attributes and incoming direction.

**2. Amount & Currency Validation**
Given payment data with amount and currency fields, when values do not match existing billing records, then system rejects the payment to prevent reconciliation errors.

**3. Declined Payment Processing**
Given a payment with declined/reversed/suspended status, when reason code is provided (with description if code equals 'Other'), then system updates payment record with status and reason information.

**4. Existing Payment Update Constraints**
Given an existing suspended payment update request, when attempt is made to change payment subtype, channel, or creation date, then system rejects the modification and maintains original immutable values.

**5. Method-Specific Attribute Mapping**
Given payment with specific method type (Check/EFT/ACH/Credit Card), when corresponding method details are provided, then system maps appropriate profile tokens, account information, or card attributes.

**6. Effective Date Calculation**
Given payment timing data, when bank processing date is unavailable, then system derives effective date using check date or registration date as fallback hierarchy.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=521348770"
]

---

#### Feature: Accept Payments to Billing Account Balance
- **Role**: Billing Administrator
- **Action**: accept and process customer payments against billing account balances with comprehensive transaction tracking and automated event publication
- **Value**: payment transactions are accurately recorded, properly classified, and seamlessly integrated into the billing system while maintaining complete audit trails for financial reconciliation

**Description:**

As a **Billing Administrator**,
I want to **accept and process customer payments against billing account balances with comprehensive transaction tracking and automated event publication**,
So that **payment transactions are accurately recorded, properly classified, and seamlessly integrated into the billing system while maintaining complete audit trails for financial reconciliation**


**Key Capabilities:**

**1. Payment Registration & Initiation**
User is able to register incoming payments with transaction date, effective date, and system-generated unique payment number associated to specific billing account and customer.

**2. Payment Classification & Routing**
Upon payment submission, system classifies payment by type (incoming/refund), subtype (manual/automatic), category (Banking/Internal/Customer credit), and determines bank processing requirements.

**3. Status Lifecycle Management**
System tracks payment status progression through defined stages, managing transitions based on payment method, processing requirements, and completion criteria.

**4. Automated Event Publication**
When payment is accepted, system publishes comprehensive event containing payment details, billing account linkage, customer information, and complete audit trail with creation and update tracking information.


**Acceptance Criteria:**

**1. Standard Payment Acceptance**
Given a valid payment submission, When payment details are complete and billing account exists, Then system generates unique payment number, records transaction and effective dates, and publishes acceptance event with complete payment data.

**2. Bank Processing Required Scenario**
Given a payment requiring bank processing, When Bank Processing Required flag is true, Then system creates payment record in pending status until bank processing completes before final acceptance.

**3. Refund Transaction Processing**
Given a refund request (outgoing money flow), When Payment Type indicates refund, Then system processes as outgoing transaction with appropriate classification and publishes event reflecting outbound payment direction.

**4. Automatic Payment Handling**
Given an automatically initiated payment, When Payment Subtype is Automatic, Then system processes without manual intervention and records automation indicator in published event data.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=581112291"
]

---

#### Feature: Allocate Payments to Invoices Automatically
- **Role**: Billing Administrator
- **Action**: automatically allocate incoming payments to outstanding invoices and account balances
- **Value**: payments are processed efficiently without manual intervention, reducing operational overhead and accelerating cash application

**Description:**

As a **Billing Administrator**,
I want to **automatically allocate incoming payments to outstanding invoices and account balances**,
So that **payments are processed efficiently without manual intervention, reducing operational overhead and accelerating cash application**


**Key Capabilities:**

**1. Payment Validation & Reception**
Upon receiving payment from PaymentHub, system validates completeness and maps parameters to billing requirements. When validation fails, system suspends payment and notifies upstream.

**2. Configuration-Driven Allocation Strategy**
System checks automation allowance rules and applies configured allocation strategy based on account type and bill mode.

**3. Payment Distribution & Application**
System allocates payment to invoiced items, member records, or unapplied balance. Creates balance register operations (INCOMING_PAYMENT, PTI_DISTRIBUTION, UNAPPLIED).

**4. Post-Allocation Reconciliation**
System updates payment status (Allocated/Partially Allocated/Unapplied), refreshes invoice statuses, notifies integrated subsystems, and fires distribution events for downstream compensation processing.


**Acceptance Criteria:**

**1. Successful Full Allocation**
Given payment with valid account and invoice identifiers, When automated allocation executes, Then system creates completed payment request, links to invoices, updates invoice statuses, and notifies PaymentHub with internal reference.

**2. Validation Failure Handling**
Given payment missing required information, When validation executes, Then system rejects allocation, notifies PaymentHub with error codes, and suspends payment without creating billing records.

**3. Unapplied Balance Treatment**
Given automation disabled or no matching invoices, When allocation attempts, Then system applies payment to unapplied balance and completes request without invoice linkage.

**4. Partial Allocation Processing**
Given payment exceeding invoice total, When allocation distributes funds, Then system marks payment as Partially Allocated and maintains accurate remaining balance across account and invoices.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523014967"
]

---

#### Feature: Allocate Payments to Member Records Automatically
- **Role**: Billing Administrator
- **Action**: automatically allocate incoming payments to member billing accounts
- **Value**: payments are accurately applied without manual intervention, reducing processing time and allocation errors

**Description:**

As a **Billing Administrator**,
I want to **automatically allocate incoming payments to member billing accounts**,
So that **payments are accurately applied without manual intervention, reducing processing time and allocation errors**


**Key Capabilities:**

**Payment Intake & Validation**
System validates incoming payment data against business rules and account information. Upon successful validation, payment is routed for allocation.

**Allocation Strategy Execution**
System applies configurable allocation rules based on payment parameters (account number, invoice number). When automated allocation is enabled, payment is distributed to invoices or member records per strategy.

**Balance Operations & Status Updates**
System generates balance register operations, updates invoice and payment statuses, and allocates amounts as applied or unapplied.

**Exception & Notification Handling**
When validation or allocation fails, system suspends payment in Payment Hub with error details. Upon success, system notifies downstream systems and fires conditional events.


**Acceptance Criteria:**

**Successful Automated Allocation**
Given a valid payment with account number, When allocation configuration permits automation and strategy rules are met, Then payment is allocated to invoices/member records with status updated (Allocated/Partially Allocated).

**Payment Suspension on Validation Failure**
Given payment data fails validation rules, When system processes the payment, Then payment is suspended in Payment Hub with error codes provided.

**Unapplied Balance Assignment**
Given automated allocation is disabled, When payment is received, Then payment is added to account Unapplied balance without invoice linkage.

**Downstream System Notifications**
Given successful payment allocation, When balance operations complete, Then Compensation subsystem and Payment Hub receive event notifications with allocation details.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523014967"
]

---

#### Feature: Apply Payments to Unapplied Balance
- **Role**: Billing Administrator
- **Action**: automate payment allocation from payment hub to billing accounts
- **Value**: payments are accurately distributed according to configured business rules, reducing manual intervention and allocation errors

**Description:**

As a **Billing Administrator**,
I want to **automate payment allocation from payment hub to billing accounts**,
So that **payments are accurately distributed according to configured business rules, reducing manual intervention and allocation errors**


**Key Capabilities:**

**1. Payment Validation & Acceptance**
Upon receiving payment from Payment Hub, system validates against business rules and notifies hub of acceptance status

**2. Payment Request Creation**
System creates draft payment request on billing account and detects allocation parameters including account and invoice identifiers
    2.1 When invoice number provided, system validates invoice eligibility before proceeding

**3. Allocation Strategy Execution**
System checks allocation configuration and executes payment distribution based on configured strategies or applies to unapplied balance when automation disabled

**4. Balance Operations & Status Update**
System completes allocation by generating balance register operations, updating invoice statuses, and triggering downstream notifications to integrated subsystems


**Acceptance Criteria:**

**1. Successful Automated Allocation**
Given valid payment with invoice reference, when allocation strategy executes, then system creates payment items linked to invoices and updates payment status to Allocated or Partially Allocated

**2. Validation Failure Handling**
Given payment failing business rule validation, when system detects errors, then payment allocation terminates and Payment Hub receives failure notification with error codes

**3. Manual Allocation Routing**
Given automation disabled for account, when payment received, then system applies full amount to unapplied balance and sets status accordingly

**4. Invoice Validation Enforcement**
Given invalid invoice number in payment request, when system validates reference, then allocation terminates and payment becomes suspended in Payment Hub


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523014967"
]

---

#### Feature: Allocate Payments Using Remittance Files
- **Role**: Billing Administrator
- **Action**: allocate payments using uploaded remittance files to settle outstanding member invoices
- **Value**: payments are accurately distributed according to business rules, reducing manual reconciliation effort and accelerating cash application

**Description:**

As a **Billing Administrator**,
I want to **allocate payments using uploaded remittance files to settle outstanding member invoices**,
So that **payments are accurately distributed according to business rules, reducing manual reconciliation effort and accelerating cash application**.


**Key Capabilities:**

**1. Remittance File Submission**
User is able to upload payment remittance files from local storage in supported formats (CSV/XLSX) containing member identification and payment amounts.

**2. Allocation Scope Configuration**
User is able to define allocation strategy: system-driven distribution starting from earliest outstanding invoice or targeted allocation to specific invoices.

**3. File Structure Validation**
System validates file format compliance (comma-separated CSV or XLSX), required data columns presence, and structural integrity before processing.

**4. Automated Payment Distribution**
Upon successful validation, system applies configured business rules to allocate payment amounts across member records according to selected strategy.

**5. Process Cancellation**
User is able to abort the allocation process at any point before execution, returning to previous workflow state without data impact.


**Acceptance Criteria:**

**1. Valid File Allocation - Default Strategy**
Given a properly formatted remittance file is uploaded without invoice-specific targeting, When allocation is executed, Then system distributes payments across member records starting from earliest outstanding invoice.

**2. Valid File Allocation - Specific Invoice**
Given allocation scope is configured for specific invoice targeting, When user selects target invoice and executes allocation, Then system applies payment amounts exclusively to designated invoice member records.

**3. File Validation Failure**
Given uploaded file fails structural validation (invalid format, missing required columns, or unsupported file type), When system performs validation check, Then allocation is prevented and user receives actionable error guidance.

**4. Process Cancellation**
Given allocation workflow is in progress but not yet executed, When user cancels operation, Then system returns to previous state without applying any payment changes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=643030436"
]

---

#### Feature: Generate Recurring Payments Automatically
- **Role**: Billing Administrator
- **Action**: automate recurring payment generation and processing
- **Value**: ensure timely, accurate payment cycles without manual intervention and reduce operational overhead

**Description:**

As a **Billing Administrator**,
I want to **automate recurring payment generation and processing**,
So that **ensure timely, accurate payment cycles without manual intervention and reduce operational overhead**


**Key Capabilities:**

**1. Automated Payment Job Initiation**
System autonomously launches recurring payment job based on configured schedule without manual trigger.

**2. Payment Request Data Aggregation**
System collects all required payment request information from billing sources for processing eligibility.

**3. Parallel Account and Invoice Data Retrieval**
System concurrently retrieves billing account dimensions and invoice due dates to optimize performance, then synchronizes data before proceeding.

**4. Master Payment Configuration Resolution**
System retrieves master payment rules and configuration settings from OpenL to determine processing parameters.

**5. Payment Amount Calculation**
System computes recurring payment amounts based on billing cycle, account balances, and configured business rules.

**6. Payment Record Creation and Event Notification**
System generates payment record and publishes event to downstream systems for cash application and reconciliation workflows.


**Acceptance Criteria:**

**1. Successful Automated Payment Generation**
Given OpenL configuration is valid and payment request data exists, When system initiates recurring job, Then payment records are created and events published to downstream systems.

**2. Data Synchronization Enforcement**
Given parallel retrieval tasks are executing, When both billing account dimensions and invoice due dates complete, Then system proceeds to master payment data retrieval without data loss.

**3. Configuration-Driven Processing**
Given OpenL master payment settings are configured, When system calculates payment amounts, Then calculations reflect current configuration rules and billing cycle parameters.

**4. Event Publication Validation**
Given recurring payment is successfully generated, When system completes workflow, Then event notification is published and downstream systems acknowledge receipt.

**5. Incomplete Data Handling**
Given payment request data is missing or invalid, When system attempts data retrieval, Then system prevents payment generation and logs exception for administrative review.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=598911161"
]

---

#### Feature: Consume Unapplied Balance for Recurring Payments
- **Role**: Billing Administrator
- **Action**: automatically consume available unapplied balance to settle eligible recurring invoices
- **Value**: outstanding invoices are paid promptly without manual intervention, reducing account delinquency and administrative overhead

**Description:**

As a **Billing Administrator**,
I want to **automatically consume available unapplied balance to settle eligible recurring invoices**,
So that **outstanding invoices are paid promptly without manual intervention, reducing account delinquency and administrative overhead**


**Key Capabilities:**

**Eligibility Detection & Trigger**
System monitors recurring payment job execution and identifies billing accounts with eligible invoices and positive unapplied balances based on configured bill types (True Group, Self-Bill, Individual Direct).

**Available Balance Calculation**
System determines allocable amount by excluding refund-pending balances from total unapplied balance, ensuring only available funds are consumed.

**Strategic Balance Distribution**
System allocates available balance to eligible invoices following bill-type-specific distribution rules, prioritizing earliest unpaid invoices and applying payment category consumption hierarchies.

**Priority-Based Consumption Sequencing**
System exhausts all highest-priority transactions before processing next priority level according to payment category configuration.

**Configuration Override Enforcement**
When enabled, system bypasses standard allocation constraints (gaps, amount mismatches, partial coverage restrictions) to maximize balance utilization.


**Acceptance Criteria:**

**1. Autoconsumption Activation Validation**
Given autoconsumption is enabled for a bill type, When recurring payment job identifies eligible invoices, Then system initiates balance consumption workflow automatically.

**2. Zero Balance Termination**
Given billing account has zero unapplied balance, When consumption process evaluates balance, Then system terminates processing without allocation attempts.

**3. Refund Protection**
Given unapplied balance includes refund-pending amounts, When calculating allocable balance, Then system excludes refund-pending amounts from consumption allocation.

**4. Bill-Type Distribution Compliance**
Given multiple eligible invoices exist, When system distributes balance, Then allocation follows configured rules specific to account bill type.

**5. Priority Hierarchy Enforcement**
Given multiple payment categories with different priorities, When consuming balance, Then system fully exhausts highest-priority transactions before lower-priority processing.

**6. Configuration Override Application**
Given autoconsumption is active, When standard allocation restrictions conflict, Then system overrides gap, mismatch, and partial coverage constraints per configuration.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=636887098"
]

---

#### Feature: Decline Payments Manually or Automatically
- **Role**: Billing Administrator
- **Action**: decline payments manually or automatically through system commands
- **Value**: I can reject invalid or problematic payment transactions, maintain financial control, and ensure accurate cash application while preserving complete audit trails

**Description:**

As a **Billing Administrator**,
I want to **decline payments manually or automatically through system commands**,
So that **I can reject invalid or problematic payment transactions, maintain financial control, and ensure accurate cash application while preserving complete audit trails**


**Key Capabilities:**

**1. Payment Decline Initiation**
User is able to submit decline command for target payment transaction using payment identifier. System validates payment exists and is eligible for decline operation.

**2. Transaction State Management**
Upon successful validation, system transitions payment state to DECLINED status and persists updated entity with transaction metadata.

**3. Audit Trail Preservation**
System records decline timestamp, saga identifier, and complete payment details including amount, currency, method, and account holder information for compliance tracking.

**4. Error Handling**
When decline operation fails, system returns standardized error response for diagnostic purposes while maintaining transactional integrity.


**Acceptance Criteria:**

**1. Valid Payment Decline**
Given a payment exists in declinable state, When decline command is executed with valid payment URI, Then system transitions payment to DECLINED status and returns updated entity with complete metadata.

**2. Invalid Payment Rejection**
Given payment URI is invalid or non-existent, When decline command is attempted, Then system prevents operation and returns error response without state change.

**3. Audit Trail Completeness**
Given payment decline is successful, When transaction is recorded, Then system persists timestamps, saga ID, payment method details, and account information for audit purposes.

**4. State Constraint Enforcement**
Given payment is not in declinable state, When decline command is submitted, Then system prevents operation and maintains current payment state.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=318711424"
]

---

#### Feature: Reverse Payments
- **Role**: Billing Administrator
- **Action**: reverse processed payments to correct allocation or payment errors
- **Value**: account balances and invoice allocations remain accurate and compliant

**Description:**

As a **Billing Administrator**,
I want to **reverse processed payments to correct allocation or payment errors**,
So that **account balances and invoice allocations remain accurate and compliant**.


**Key Capabilities:**

**Payment Reversal Initiation**
User identifies processed payment requiring correction and initiates reversal operation. System validates payment is in reversible status.

**Allocation Removal Execution**
Upon reversal confirmation, system removes all existing payment allocations from associated invoices and member records. Account balances recalculate automatically.

**Payment Status Update**
System changes payment status to reversed, preventing further allocation. Original payment record preserved for audit purposes.

**Post-Reversal Options**
User is able to reallocate reversed amount to correct invoices, transfer payment to different account, or process refund based on business requirements.


**Acceptance Criteria:**

**Processed Payment Reversal**
Given payment is in processed status, When user executes reversal operation, Then system removes all allocations and updates payment status to reversed.

**Balance Recalculation**
Given payment allocations are reversed, When system completes reversal, Then invoice balances and account balances reflect removal of payment amounts.

**Audit Trail Preservation**
Given payment is reversed, When reversal completes, Then system retains original payment record with reversal timestamp and reason.

**Reversal Prevention**
Given payment is already reversed or in draft status, When user attempts reversal, Then system prevents duplicate reversal operation.

**Post-Reversal Flexibility**
Given payment is successfully reversed, When user accesses payment record, Then reallocation, transfer, and refund options become available.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213979501"
]

---

#### Feature: Suspend Payments to General Suspense
- **Role**: Billing Administrator
- **Action**: suspend payments to general suspense account when allocation cannot be completed or corrections are needed
- **Value**: payments are properly segregated for investigation and resolution without impacting regular billing operations

**Description:**

As a **Billing Administrator**,
I want to **suspend payments to general suspense account when allocation cannot be completed or corrections are needed**,
So that **payments are properly segregated for investigation and resolution without impacting regular billing operations**


**Key Capabilities:**

**1. Identify Payment for Suspension**
User identifies payment requiring suspension due to allocation issues, missing information, or exception conditions requiring investigation.

**2. Execute Suspension Operation**
User initiates manual suspension operation to move payment from current allocation state to General Suspense account.

**3. Confirm Suspension Completion**
System completes suspension transaction, updates payment status, and transfers payment amount to General Suspense for later resolution.

**4. Track Suspended Payment**
User views suspended payment in General Suspense account with full transaction history for future investigation and reallocation.


**Acceptance Criteria:**

**1. Successful Payment Suspension**
Given payment exists in allocated or unallocated state, When user executes suspension operation, Then system moves payment to General Suspense and updates payment status accordingly.

**2. Suspension Prevented for Invalid Payment**
Given payment is in declined or reversed status, When user attempts suspension, Then system prevents operation and maintains current payment state.

**3. Audit Trail Maintained**
Given payment suspension completes, When user views payment history, Then system displays complete transaction record including suspension timestamp and initiating user.

**4. Suspense Account Updated**
Given payment moved to General Suspense, When user views suspense account, Then system reflects increased balance with suspended payment details.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213979501"
]

---

#### Feature: Reallocate Payments Across Invoices or Member Records
- **Role**: Billing Specialist
- **Action**: reallocate applied payments across different invoices or member records
- **Value**: I can correct allocation errors, respond to changing business needs, and optimize cash application without reversing payments

**Description:**

As a Billing Specialist,
I want to reallocate applied payments across different invoices or member records,
So that I can correct allocation errors, respond to changing business needs, and optimize cash application without reversing payments


**Key Capabilities:**

**1. Initiate Payment Reallocation**
User identifies applied payment requiring redistribution and initiates reallocation workflow for IPA, True Group, or Individual Direct payment types.

**2. Remove Existing Allocations**
User unallocates payment from current invoices or member records, returning funds to available balance while maintaining payment integrity.

**3. Apply New Allocation Strategy**
User allocates freed payment amounts to target invoices or member records following business rules and preset allocation configurations.

**4. Validate Reallocation Impact**
System validates allocation integrity, ensuring total allocated amounts match payment value and no overdraft conditions exist on source or target entities.

**5. Complete Reallocation Transaction**
User applies finalized allocations, updating invoice balances and member records while creating comprehensive audit trail of reallocation activity.


**Acceptance Criteria:**

**1. Successful Single-Invoice Reallocation**
Given a payment fully allocated to Invoice A, when user reallocates entire amount to Invoice B, then Invoice A balance increases by payment amount, Invoice B balance decreases by payment amount, and payment remains in applied status.

**2. Partial Reallocation Across Multiple Targets**
Given a payment allocated to one invoice, when user splits reallocation across three different invoices, then total reallocated amounts equal original payment value and all target invoices reflect new allocation.

**3. Member Record Reallocation Handling**
Given a payment allocated to member record with overpayment, when user reallocates to specific invoice, then member record credit decreases and invoice balance decreases by reallocated amount.

**4. Reallocation Validation Enforcement**
Given incomplete allocation data, when user attempts to apply reallocation, then system prevents submission until all required allocation targets and amounts are valid.

**5. Audit Trail Completeness**
Given completed reallocation transaction, when user reviews payment history, then system displays original allocation, unallocation event, new allocation details, and user/timestamp for each action.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213979501"
]

---

#### Feature: Transfer Payments Between Billing Accounts
- **Role**: Billing Specialist
- **Action**: transfer payments across different billing accounts or entities while maintaining payment integrity and allocation history
- **Value**: payments are correctly attributed to the appropriate accounts, ensuring accurate financial reconciliation and customer billing records

**Description:**

As a **Billing Specialist**,
I want to **transfer payments across different billing accounts or entities while maintaining payment integrity and allocation history**,
So that **payments are correctly attributed to the appropriate accounts, ensuring accurate financial reconciliation and customer billing records**


**Key Capabilities:**

**Payment Transfer Initiation**
User identifies completed payment requiring account or entity reassignment based on business need or error correction requirement.

**Account Validation**
System validates target account eligibility and confirms payment can be transferred between source and destination accounts per business rules.

**Transfer Execution**
User executes payment transfer while system maintains original payment record, updates account associations, and preserves payment transaction history.

**Allocation Preservation**
System retains existing payment allocation details during transfer or allows user to reallocate payment to invoices associated with new account.

**Audit Trail Maintenance**
System records transfer transaction including source account, destination account, transfer reason, timestamp, and user identity for compliance tracking.


**Acceptance Criteria:**

**Successful Payment Transfer**
Given a completed payment exists on source account, When user initiates transfer to valid destination account, Then system updates account association while preserving payment amount and original transaction details.

**Cross-Account Type Transfer**
Given payment transfer spans different account types (IPA, True Group, Individual Direct), When system validates compatibility, Then transfer completes if business rules permit cross-type movement.

**Allocation Adjustment**
Given transferred payment had invoice allocations on source account, When transfer completes to destination account, Then system either unallocates from source invoices or allows reallocation to destination account invoices.

**Transfer Rejection**
Given target account fails validation criteria, When user attempts transfer, Then system prevents transfer execution and provides business reason for rejection.

**Audit Compliance**
Given payment transfer completes successfully, When user reviews payment history, Then system displays complete transfer audit trail including both accounts and transfer justification.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213979501"
]

---

#### Feature: Unallocate Payments Manually or Automatically
- **Role**: Billing Administrator
- **Action**: unallocate payments from invoices or member records through manual intervention or automated system triggers
- **Value**: payment allocation can be corrected when errors occur, enabling reallocation to proper invoices and maintaining accurate account balances

**Description:**

As a **Billing Administrator**,
I want to **unallocate payments from invoices or member records through manual intervention or automated system triggers**,
So that **payment allocation can be corrected when errors occur, enabling reallocation to proper invoices and maintaining accurate account balances**


**Key Capabilities:**

**1. Automated Unallocation Trigger**
When system determines business rules require payment reallocation, automated unallocation process initiates. Payment allocation is removed and payment returns to unallocated status without manual intervention.

**2. Manual General Payment Unallocation**
User identifies incorrectly allocated payment and initiates manual unallocation. System validates payment eligibility, removes allocation entries, restores invoice balances, and returns payment to unallocated status for subsequent reallocation.

**3. Member Record-Specific Manual Unallocation**
When payment allocated to Member Record requires correction, user performs specialized unallocation process. System removes Member Record allocation and makes payment available for proper allocation to invoices or alternative targets.

**4. Allocation Reversal and Audit Trail**
Upon unallocation completion, system restores pre-allocation invoice balances, records full transaction history, and maintains complete audit trail for compliance and reconciliation purposes.


**Acceptance Criteria:**

**1. Automated Unallocation Execution**
Given system detects trigger conditions for automated unallocation, When unallocation process executes, Then payment allocation is removed, payment status changes to unallocated, and invoice balances are restored without manual intervention.

**2. Manual Unallocation Authorization**
Given user initiates manual payment unallocation, When system validates user permissions and payment eligibility, Then unallocation proceeds only if payment is in valid state and user has appropriate authorization.

**3. Complete Allocation Removal**
Given payment unallocation is confirmed, When system processes unallocation, Then all allocation entries are removed, invoice balances reflect removal, and payment amount becomes fully available for reallocation.

**4. Member Record Unallocation Handling**
Given payment allocated to Member Record requires unallocation, When user executes Member Record unallocation, Then system removes Member Record allocation specifically while preserving payment record integrity.

**5. Audit Trail Completeness**
Given unallocation transaction completes, When system records transaction, Then full history captures original allocation details, unallocation timestamp, user or system trigger, and reason code for compliance tracking.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213979501"
]

---

#### Feature: Save Draft Payment Allocations
- **Role**: Billing Administrator
- **Action**: save incomplete payment allocations as draft without updating balances
- **Value**: I can preserve work-in-progress and complete payment processing later without data loss

**Description:**

As a **Billing Administrator**,
I want to **save incomplete payment allocations as draft without updating balances**,
So that **I can preserve work-in-progress and complete payment processing later without data loss**


**Key Capabilities:**

**1. Payment Draft Initiation**
User initiates payment application workflow through allocation file, strategy-based, manual allocation, or unapplied payment methods for Individual Premium Accounting or True Group scenarios

**2. Draft Persistence Options**
User is able to save and continue working or save and exit payment allocation interface
    2.1 Upon save, user remains on payment application interface to refine allocations
    2.2 Upon save and exit, user returns to billing account view with draft visible

**3. Allocation Validation**
When allocated amount exceeds payment amount, system prompts confirmation before persisting draft

**4. Status Management**
System sets payment to initiated status, preserves allocation details to invoices or member records without applying amounts or updating balances


**Acceptance Criteria:**

**1. Successful Draft Creation**
Given user has entered payment allocation details, When user executes save action, Then system persists payment with initiated status and displays confirmation without updating account balances

**2. Overage Confirmation**
Given allocated amount exceeds payment amount, When user saves draft, Then system prompts confirmation and proceeds only upon user approval

**3. Navigation Preservation**
Given user selected save option, When draft is persisted, Then system maintains user on payment interface; Given user selected save and exit, Then system navigates to billing account displaying saved draft

**4. Balance Integrity**
Given draft payment is saved, When system persists data, Then no invoice statuses or account balances are modified until payment completion


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=549099968"
]

---

#### Feature: Validate Payment Allocation Amounts
- **Role**: Billing Specialist
- **Action**: validate payment allocation amounts against available payment balances during allocation processing
- **Value**: allocation errors are identified early while preserving work-in-progress, enabling accurate cash application and preventing over-allocation discrepancies

**Description:**

As a **Billing Specialist**,
I want to **validate payment allocation amounts against available payment balances during allocation processing**,
So that **allocation errors are identified early while preserving work-in-progress, enabling accurate cash application and preventing over-allocation discrepancies**


**Key Capabilities:**

**1. Payment Draft Creation & Modification**
User initiates or updates allocation of payments to invoices or member accounts, applicable across IPA, True Group, Direct Bill, and Self Bill contexts. System supports allocations for new payments, unapplied balances, and customer credits.

**2. Synchronous Allocation Validation**
Upon save operation, system validates allocated amounts against payment balance. For new payments, compares against total payment amount. For existing unapplied payments, compares against remaining amount to allocate.

**3. Informational Error Handling**
When allocation exceeds available balance, system displays context-specific informational message without blocking save. Draft is preserved with validation errors intact, allowing user to review and correct subsequently.


**Acceptance Criteria:**

**1. New Payment Over-Allocation Detection**
Given user allocates amount exceeding payment total, When save operation executes, Then system displays informational message and saves draft retaining error state.

**2. Existing Payment Balance Validation**
Given user allocates amount exceeding remaining balance on partially allocated payment, When save operation executes, Then system displays appropriate informational message and preserves draft with errors.

**3. Successful Allocation Persistence**
Given allocated amounts are within available balance, When user saves allocation, Then system persists allocation without validation errors across all billing contexts.

**4. Work-In-Progress Preservation**
Given validation errors exist, When user saves draft, Then system retains all allocation details and error states for subsequent correction.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=747871155"
]

---

#### Feature: Manage Payment Method Tokens and Obfuscation
- **Role**: Billing Administrator
- **Action**: manage tokenization and obfuscation of sensitive payment account data
- **Value**: customer financial information is protected from unauthorized access while maintaining operational visibility

**Description:**

As a **Billing Administrator**,
I want to **manage tokenization and obfuscation of sensitive payment account data**,
So that **customer financial information is protected from unauthorized access while maintaining operational visibility**


**Key Capabilities:**

**Payment Method Data Capture**
User is able to provide electronic funds transfer account details including banking identifiers and account holder information during payment method establishment.

**Dual-Format Data Protection**
Upon submission, system automatically transforms sensitive account numbers into obfuscated database records (retaining final four digits) and generates secure tokenized references for transaction processing.

**Secure Information Display**
When accessing payment method records across all system interfaces, system presents account numbers using consistent obfuscation pattern preserving only last four digits.

**Post-Creation Data Immutability**
After payment method establishment is finalized, system prevents modification of core account identifiers to maintain audit integrity and token validity.


**Acceptance Criteria:**

**Obfuscated Storage Verification**
Given an electronic funds transfer payment method is created, When the account number is persisted to database, Then only the final four digits remain visible with preceding digits replaced by masking characters.

**Tokenization Confirmation**
Given sensitive account data is submitted, When payment method record is generated, Then system creates corresponding token profile identifier for secure transaction processing.

**Consistent Display Protection**
Given a stored payment method exists, When user views the record through any system interface, Then account number displays using identical obfuscation pattern as database storage.

**Edit Prevention Enforcement**
Given a payment method has been successfully established, When user attempts to modify the account number, Then system blocks the edit operation maintaining data immutability.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=622802945"
]

---

#### Feature: View Payment Details and History
- **Role**: Billing Administrator
- **Action**: access comprehensive payment details and allocation history across billing accounts
- **Value**: I can provide accurate, timely responses to customer payment inquiries and resolve billing disputes efficiently

**Description:**

As a **Billing Administrator**,
I want to **access comprehensive payment details and allocation history across billing accounts**,
So that **I can provide accurate, timely responses to customer payment inquiries and resolve billing disputes efficiently**


**Key Capabilities:**

**Payment Details Access**
User is able to retrieve comprehensive payment information through action menu, displaying allocation across invoices and member records for the billing account.

**Historical Payment Review**
User is able to view complete payment history with invoice-level allocation details when account type is True Group or Direct Bill.

**Member Record Search**
User is able to search and identify allocated payment amounts by member first and last name across member records.

**Payment Data Export**
Upon export request, system generates payment details file following naming conventions and data specifications for external analysis or record-keeping.


**Acceptance Criteria:**

**1. Payment Allocation Visibility**
Given a billing account with posted payments, when user accesses payment details, then system displays actual allocation per invoice and member record regardless of payment allocation mode.

**2. Historical Data Availability**
Given account type is True Group or Direct Bill, when user views payment history, then invoice-level allocation appears; given account is List Bill IPA or Self Bill, then invoice-level detail is unavailable.

**3. Member Payment Search**
Given member name search criteria, when user initiates search, then system returns matching member records with corresponding allocated payment amounts.

**4. Export Functionality**
Given valid payment details, when export is triggered, then system generates file adhering to naming conventions and data specifications.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541990998"
]

---

#### Feature: Export Payment Details to File
- **Role**: Billing Representative
- **Action**: export payment allocation details to a structured file for analysis and record-keeping
- **Value**: I can share comprehensive payment information with stakeholders and maintain audit-ready documentation of payment allocations

**Description:**

As a **Billing Representative**,
I want to **export payment allocation details to a structured file for analysis and record-keeping**,
So that **I can share comprehensive payment information with stakeholders and maintain audit-ready documentation of payment allocations**


**Key Capabilities:**

**Payment Details Access**
User is able to access payment allocation information from payment action menu, viewing complete payment history at both Invoice and Member Record levels regardless of billing account payment allocation mode.

**Member-Specific Payment Search**
When user needs payment details for specific members, system enables search by member first and last name to locate allocated payment amounts for individual member records.

**Payment Details Export**
User is able to initiate export of payment details following standardized naming conventions, generating structured files containing payment allocation data for downstream analysis and reporting purposes.


**Acceptance Criteria:**

**Successful Export Generation**
Given valid payment details exist, When user initiates export action, Then system generates file with standardized naming convention containing complete payment allocation data.

**Account Type Support**
Given billing account is True Group or Direct Bill type, When user exports payment details, Then system includes historical invoice-level allocation; Given account is List Bill IPA or Self Bill, Then invoice-level historical allocation is excluded.

**Data Completeness**
Given payment allocation exists at multiple levels, When export is generated, Then file contains both Invoice-level and Member Record-level allocation information.

**Export Failure Handling**
Given payment data is incomplete or inaccessible, When user attempts export, Then system prevents file generation and notifies user of data integrity issue.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=541990998"
]

---

#### Feature: Process Internal Payments (Claim Deduction, Cash Deduction, APL)
- **Role**: Billing Administrator
- **Action**: process internal payments from available funds in other systems to reconcile unpaid premiums
- **Value**: unpaid premium balances are resolved using customer funds from Claims or Cash Management, preventing unnecessary delinquency or cancellation

**Description:**

As a **Billing Administrator**,
I want to **process internal payments from available funds in other systems to reconcile unpaid premiums**,
So that **unpaid premium balances are resolved using customer funds from Claims or Cash Management, preventing unnecessary delinquency or cancellation**


**Key Capabilities:**

**Payment Initiation & Creation**
User with appropriate privilege initiates internal payment on eligible billing accounts, specifying payment subtype and related entity information. System generates unique payment sequence with internal designation.

**Payment Allocation & Distribution**
Upon creation, payment is automatically or manually allocated to member records, master policies, invoices, or unapplied balances. System triggers distribution operations to reconcile premium amounts.

**Post-Creation Payment Operations**
User performs lifecycle management actions including reallocation, transfer between billing accounts, unallocation, preset allocation, and refund processing. Each operation triggers corresponding system events.

**Specialized Account Processing**
When payment is transferred to self-bill accounts or account type changes, system restricts available actions while maintaining essential capabilities for transfer, allocation, viewing, and decline operations.


**Acceptance Criteria:**

**1. Payment Creation Validation**
Given billing account is eligible for internal payments, When user submits payment with valid subtype and related entity information, Then system creates payment with internal category and unique identifier.

**2. Allocation Success**
Given internal payment is created, When automatic or manual allocation is triggered, Then system applies payment to appropriate target and updates account balances accordingly.

**3. Self-Bill Transfer Restriction**
Given billing account type is self-bill, When user attempts payment creation, Then system prevents direct creation but allows transferred payments with restricted operations.

**4. Lifecycle Operation Execution**
Given internal payment exists with allocated or unapplied status, When user initiates reallocation, transfer, or refund operation, Then system processes transaction and triggers corresponding events.

**5. Draft Prevention**
Given user initiates payment creation, When payment details are incomplete and user exits without completing automatic allocation, Then system prevents draft creation or clearly marks incomplete status.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=770577607"
]

---

#### Feature: Generate Payment Receipts Upon Full Payment
- **Role**: Billing Administrator
- **Action**: manage payment receipts throughout their lifecycle from issuance through payment confirmation
- **Value**: customers receive accurate proof of payment while maintaining financial control and audit compliance

**Description:**

As a **Billing Administrator**,
I want to **manage payment receipts throughout their lifecycle from issuance through payment confirmation**,
So that **customers receive accurate proof of payment while maintaining financial control and audit compliance**


**Key Capabilities:**

**1. Receipt Record Creation**
Upon invoice generation, system creates receipt record with 'Issued' status and links to policy owner account.

**2. Payment Reception and Validation**
When payment is received and allocated, system compares payment amount against invoice amount to determine full payment status.

**3. Receipt Document Generation**
Upon full payment confirmation (Payment  Invoice Amount), system generates paper/PDF receipt document and updates status to 'Paid'.

**4. Split Receipt Accommodation**
User is able to divide issued receipts into multiple records with allocated amounts and participant counts for internal financial processing.

**5. Pre-Issuance Processing**
User is able to generate receipt documents before full payment when requested, while maintaining accurate payment status tracking.

**6. Receipt Invalidation**
When receipt remains unpaid or policy changes require adjustment, system allows status update to 'Discarded' only for issued receipts.


**Acceptance Criteria:**

**1. Full Payment Receipt Generation**
Given payment is received and allocated to invoice, When payment amount meets or exceeds invoice amount, Then system generates receipt document and updates status to 'Paid'.

**2. Split Receipt Validation**
Given user initiates split receipt with issued status, When allocated amounts and participant counts are defined, Then sum of split amounts must equal original and each follows independent payment validation.

**3. Pre-Issue Document Generation**
Given customer requests receipt before full payment, When pre-issue function is executed, Then system generates document immediately while status remains 'Issued' until payment confirmation.

**4. Receipt Invalidation Control**
Given receipt invalidation is requested, When receipt status is 'Issued', Then system updates status to 'Discarded'; otherwise system rejects action.

**5. Payment Tracking Integrity**
Given receipt exists in any status, When payment transactions occur, Then system maintains accurate linkage between receipt records, invoice allocation, and payment confirmation regardless of document generation timing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=737155443"
]

---

#### Feature: Publish Payment Status Change Events
- **Role**: Billing Administrator
- **Action**: publish payment status change events to downstream systems
- **Value**: stakeholders receive timely notifications enabling automated reconciliation and accurate financial reporting

**Description:**

As a **Billing Administrator**,
I want to **publish payment status change events to downstream systems**,
So that **stakeholders receive timely notifications enabling automated reconciliation and accurate financial reporting**


**Key Capabilities:**

**Payment Status Event Detection**
System monitors payment transactions and identifies status transitions requiring notification

**Event Message Construction**
System assembles standardized event payload containing payment identifiers, status codes, timestamps, and contextual metadata

**Event Publication**
System transmits events to configured message queues or integration endpoints for consumption by subscribing systems

**Publication Confirmation**
System validates successful event delivery and logs transmission records for audit purposes
    4.1 Upon transmission failure, system initiates retry mechanism based on configured policies
    4.2 System escalates persistent failures to monitoring dashboard


**Acceptance Criteria:**

**Successful Event Publication**
Given payment status transitions occur, When system detects qualifying changes, Then events are published within configured timeframe with complete payload data

**Event Content Integrity**
Given event is published, When downstream consumer receives message, Then payload contains accurate payment identifiers, status values, and transaction timestamps

**Failure Handling**
Given publication failure occurs, When retry attempts are exhausted, Then system logs error details and alerts operations team for manual intervention

**Audit Trail Maintenance**
Given events are published, When transmission completes, Then system records publication timestamp and delivery confirmation for compliance reporting


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=527538398"
]

---

### Epic: Cash Allocation & Suspense Management

#### Feature: Allocate Payments to Invoices Automatically
- **Role**: Billing Administrator
- **Action**: automatically allocate incoming payments to outstanding invoices using configurable allocation strategies
- **Value**: payments are efficiently applied to correct invoices without manual intervention, reducing processing time and allocation errors

**Description:**

As a **Billing Administrator**,
I want to **automatically allocate incoming payments to outstanding invoices using configurable allocation strategies**,
So that **payments are efficiently applied to correct invoices without manual intervention, reducing processing time and allocation errors**


**Key Capabilities:**

**1. Payment Receipt & Strategy Selection**
System receives payment and identifies billing account type, then retrieves configured allocation approach sequence (e.g., remittance file first, allocation rules second) based on bill type and payment mode.

**2. Primary Allocation Execution**
System applies first configured approach. If remittance file approach selected, system distributes per file instructions. If allocation rules approach selected, system applies configuration parameters controlling gap tolerance, amount matching, and partial coverage.

**3. Priority-Based Coverage Distribution**
When priority rules enabled, system applies coverage sequence (e.g., earliest invoicing period first) to determine which invoiced items receive payment allocation within each invoice.

**4. Fallback Strategy Processing**
Upon primary approach failure (file unavailable, non-applicable account type), system proceeds to next configured approach in sequence without error generation.

**5. Unapplied Balance Management**
When no configured approaches succeed or allocation constraints prevent application (e.g., partial coverage disabled with insufficient amount), system routes payment to unapplied balance for manual review.


**Acceptance Criteria:**

**1. Multi-Strategy Allocation Execution**
Given multiple allocation approaches configured in sequence, When primary approach is unavailable or non-applicable, Then system automatically proceeds to next approach without manual intervention.

**2. Configuration-Driven Constraint Enforcement**
Given allocation parameters configured per bill type, When automated payment processing occurs with amount mismatch, Then system enforces allowPartialInvoiceCoverage and allowAllocationOfMismatchedAmounts settings accordingly.

**3. Priority Rule Application**
Given priority rules enabled with invoicing period sequence, When payment amount covers multiple invoiced items, Then system allocates to earliest period items first before subsequent periods.

**4. Remittance File Applicability**
Given remittance file approach configured for True Group billing account, When payment is received, Then system skips remittance approach and proceeds to next configured approach without error.

**5. Unapplied Balance Routing**
Given no applicable allocation approaches succeed, When payment processing completes, Then system routes entire payment amount to unapplied balance for manual review.

**6. Manual Override Capability**
Given user initiates manual allocation via UI, When allocation with gaps or amount mismatch occurs, Then system permits allocation regardless of automated constraint configurations.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=550281247"
]

---

#### Feature: Allocate Payments to Member Records Manually
- **Role**: Billing Administrator
- **Action**: manually allocate payments to member billing records
- **Value**: I can ensure accurate cash application and maintain proper account reconciliation when automated allocation is not feasible

**Description:**

As a **Billing Administrator**,
I want to **manually allocate payments to member billing records**,
So that **I can ensure accurate cash application and maintain proper account reconciliation when automated allocation is not feasible**


**Key Capabilities:**

**1. Payment Application Initiation**
User initiates payment application process from billing account context and selects payment method with associated transaction details.

**2. Allocation Strategy Selection**
User chooses between targeted invoice allocation or manual distribution across multiple member records based on business requirements.

**3. Manual Allocation Execution**
User distributes payment amounts to specific member records or invoices. System validates allocated amounts against outstanding balances and enforces accounting-type-specific business rules.

**4. Payment Validation & Processing**
Upon submission, system validates total allocation against payment amount. When validation succeeds, system creates payment record, updates invoice statuses, recalculates account balances, and notifies external payment systems.

**5. Exception Handling**
When allocated amount exceeds payment or falls short with no further distribution possible, system prompts user to adjust allocations or confirm suspense handling.


**Acceptance Criteria:**

**1. Successful Full Allocation**
Given valid payment details and complete member record allocation, When user applies payment with total allocated amount matching payment amount, Then system creates payment record, updates all invoice statuses, recalculates balances, and displays success confirmation.

**2. Over-Allocation Prevention**
Given payment allocation in progress, When total allocated amount exceeds payment amount, Then system blocks submission and prompts user to adjust allocations before proceeding.

**3. Under-Allocation with Distribution**
Given partial allocation with distributable balance, When allocated amount is less than payment amount and further distribution is possible, Then system prompts for confirmation and proceeds with automatic distribution of remaining balance.

**4. Suspense Balance Handling**
Given True Group accounting type, When allocated amount is less than payment amount with no distribution options remaining, Then system creates unapplied balance and notifies user before completing transaction.

**5. Write-off Reversal Trigger**
Given invoice with prior small balance write-off, When payment is allocated to that invoice, Then system automatically reverses write-off and adjusts account balances accordingly.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=463476927"
]

---

#### Feature: Allocate Payments Using Remittance File
- **Role**: Billing Administrator
- **Action**: allocate payments to member invoices using remittance file data
- **Value**: I can efficiently distribute customer payments across multiple member records and invoices while handling underpayments, overpayments, and complex product-based allocation scenarios automatically

**Description:**

As a Billing Administrator,
I want to allocate payments to member invoices using remittance file data,
So that I can efficiently distribute customer payments across multiple member records and invoices while handling underpayments, overpayments, and complex product-based allocation scenarios automatically


**Key Capabilities:**

**1. Remittance File Ingestion & Validation**
User uploads remittance file; system validates format structure and required columns. Invalid rows are automatically skipped while processing continues with valid entries.

**2. Member Identification & Amount Aggregation**
System identifies member records using priority hierarchy (Member Record Number, SSN, Employee ID). Amounts are accumulated by member or member-product combination based on file structure.

**3. Payment Distribution Calculation**
System compares file amounts against outstanding dues and calculates allocation: proportional distribution for underpayments, full coverage for exact payments, sequential invoice allocation for overpayments using configured formulas.

**4. Multi-Invoice Allocation Processing**
Upon excess payment detection, system automatically allocates to oldest unpaid invoices sequentially. Remaining overpayments are distributed proportionally based on member record annual amounts.

**5. Payment Application & Validation**
User initiates application; system executes allocation following configured strategy rules, validates total amounts, and prevents application if discrepancies exist requiring manual adjustment.


**Acceptance Criteria:**

**1. Valid File Processing**
Given a properly formatted remittance file is uploaded, When the system validates structure, Then all valid rows are processed and invalid rows are skipped without halting execution.

**2. Underpayment Allocation**
Given file amount is less than member remaining due, When distribution is calculated, Then payment is allocated proportionally across member records with prior period items receiving priority.

**3. Overpayment Cascade**
Given file amount exceeds selected invoice total, When allocation is executed, Then system covers selected invoice fully, applies excess to oldest unpaid invoice, and distributes remaining overpayment by annual amount proportion.

**4. Product-Based Distribution**
Given remittance file contains product column with missing values, When allocation is processed, Then system matches SSN-product combinations first and distributes unmatched amounts proportionally across all member records with same SSN.

**5. Application Validation**
Given distributed amount differs from entered payment amount, When user clicks apply, Then system executes standard validation rules and prevents application until manual adjustment or file reselection occurs.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=560980831"
]

---

#### Feature: Manage Unapplied Payment Balance
- **Role**: Billing Administrator
- **Action**: unallocate and reallocate payment funds from member accounts, invoices, or credit entries
- **Value**: financial flexibility is maintained and payment discrepancies are resolved efficiently

**Description:**

As a **Billing Administrator**,
I want to **unallocate and reallocate payment funds from member accounts, invoices, or credit entries**,
So that **financial flexibility is maintained and payment discrepancies are resolved efficiently**


**Key Capabilities:**

**1. Payment Unallocation Initiation**
User is able to trigger unallocation from multiple business contexts including member records, general payment management, or customer credit management workflows.

**2. Automatic System-Driven Unallocation**
When invoice adjustments or excessive payment calculations occur, system automatically removes allocations without manual intervention.

**3. Manual Unallocation Processing**
User is able to manually initiate unallocation from member record or payment management interfaces, selecting specific allocations to reverse.

**4. Credit-Specific Unallocation**
Upon customer credit scenarios, specialized unallocation workflow processes credit entries distinctly from standard payments.

**5. Financial Integrity Preservation**
System maintains complete audit trails and data integrity throughout unallocation operations, ensuring reversals are properly documented.


**Acceptance Criteria:**

**1. Automatic Unallocation Execution**
Given invoice adjustment triggers excessive payment calculation, When system detects allocation mismatch, Then payment is automatically unallocated without user intervention and audit trail is created.

**2. Manual Unallocation from Member Context**
Given user accesses member record with allocated payments, When user initiates manual unallocation, Then system removes allocation and funds become available for reallocation.

**3. Credit Unallocation Handling**
Given customer credit exists with allocation, When unallocation is triggered, Then credit-specific workflow executes and credit balance is restored to unapplied status.

**4. Data Integrity Validation**
Given any unallocation scenario, When process completes, Then system prevents submission if financial records are inconsistent and maintains complete audit history.

**5. Multi-Context Unallocation Support**
Given user operates from different interfaces, When unallocation is initiated from payment management or member record contexts, Then appropriate workflow executes with context-specific handling.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=513999807"
]

---

#### Feature: Reallocate Payments Between Member Records
- **Role**: Billing Administrator
- **Action**: reallocate previously allocated payments across member records within IPA List Bill Billing Accounts
- **Value**: I can correct misallocated payments and optimize cash application accuracy without reversing and reapplying transactions

**Description:**

As a **Billing Administrator**,
I want to **reallocate previously allocated payments across member records within IPA List Bill Billing Accounts**,
So that **I can correct misallocated payments and optimize cash application accuracy without reversing and reapplying transactions**


**Key Capabilities:**

**1. Payment Reallocation Initiation**
User accesses allocated or partially allocated payments in IPA billing accounts and initiates reallocation workflow. System displays current allocation distribution across all member records.

**2. Allocation Adjustment & Validation**
User modifies allocation amounts per member record with real-time discrepancy tracking. System validates negative amounts, calculates remaining reallocation balance, and prevents submission when data integrity rules are violated.

**3. Concurrent Activity Protection**
Upon submission, system validates payment status stability and detects conflicting transactions. When concurrent activities are identified, process is blocked to prevent data corruption.

**4. Automated Reallocation Processing**
System executes unallocation from decreased member records, allocates to increased member records, applies invoice-level allocation rules, and places unreallocated amounts to billing account unapplied balance.

**5. Balance & Status Reconciliation**
System recalculates billing account and invoice balances, updates payment and invoice statuses per lifecycle rules, reverses small balance write-offs if affected, and generates audit messages for all allocation changes.


**Acceptance Criteria:**

**1. Successful Reallocation Execution**
Given a payment with Allocated status and user adjusts amounts across member records totaling original payment amount, When user submits reallocation and no concurrent activities exist, Then system processes unallocation/allocation, updates all balances, generates BAM messages, and displays confirmation on billing home page.

**2. Remaining Amount Handling**
Given user adjusts allocation amounts totaling less than original payment, When user confirms proceeding with positive remaining balance, Then system places unreallocated amount to billing account unapplied, updates payment status to Partially Allocated, and fires appropriate unallocation events.

**3. Concurrent Activity Prevention**
Given another user initiates payment action on same billing account during reallocation, When system detects concurrent allocation changes or ongoing payment processing, Then reallocation is blocked with error message and user is redirected without executing changes.

**4. Payment Status Change Rejection**
Given payment status changes to unapplied, suspended, reversed, or declined during reallocation, When user attempts to submit, Then system displays status error, closes reallocation UI, and shows updated payment status without processing changes.

**5. Negative Amount Validation**
Given user enters negative value in adjusted amount field, When system detects invalid input, Then Reallocate button is disabled and validation message is displayed until correction is made.

**6. Small Balance Write-off Reversal**
Given reallocated payment affects invoice with existing Small Balance Write-off, When reallocation processing completes, Then system automatically triggers write-off reversal and updates invoice status accordingly.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645896573"
]

---

#### Feature: Unallocate Payments from Invoices
- **Role**: Billing Specialist
- **Action**: unallocate payments from invoices and transfer to suspense
- **Value**: funds can be repositioned for proper allocation while maintaining accurate financial records and audit trails

**Description:**

As a **Billing Specialist**,
I want to **unallocate payments from invoices and transfer to suspense**,
So that **funds can be repositioned for proper allocation while maintaining accurate financial records and audit trails**


**Key Capabilities:**

**1. Payment Transaction Identification**
User is able to identify payment requiring unallocation with transaction metadata including dates, currency, payment classification (type/subtype/method/category), and billing account association.

**2. Source Entity Context Determination**
System captures product entity context (Master Policy or Member Record) from which payment is being removed including policy/member identifiers, effective dates, product codes, and jurisdictional details.

**3. Invoice Item Unallocation Processing**
System processes unallocation from invoice items capturing invoice details, item-level coverage periods, billing periods, unallocated amounts, product classifications, and renewal status calculation (new business vs renewal based on 12-month threshold).

**4. Suspense Balance Transfer**
When unallocation is confirmed, system transfers funds to unapplied balance at designated level (Billing Account or Member Record) while recording triggering activity and occurrence timestamp.
    4.1 Upon excessive unallocation scenario, system reports net excessive amount (full unallocation minus re-allocation) rather than gross transactions.

**5. Audit Trail Capture**
System records complete audit trail with user identities and timestamps for compliance and reconciliation purposes.


**Acceptance Criteria:**

**1. Successful Payment Unallocation**
Given a payment currently allocated to invoice items, when unallocation is processed, then system moves funds to unapplied suspense balance at appropriate level and generates complete transaction record.

**2. Renewal Status Classification**
Given invoice item with billing period dates, when unallocation occurs, then system calculates renewal indicator as 0 (New Business) if period falls within 12 months of policy/member effective date, otherwise 1 (Renewal).

**3. Excessive Unallocation Handling**
Given unallocation resulting in excessive amount requiring re-allocation, when transaction is processed, then system reports net excessive amount only rather than separate gross unallocation and re-allocation transactions.

**4. Suspense Level Determination**
Given product entity context, when funds are unallocated, then system correctly assigns unapplied balance to either Billing Account (BA) or Member Record (MR) level based on business rules.

**5. Audit Trail Completeness**
Given any unallocation transaction, when processing completes, then system captures complete audit trail including user identities, timestamps, triggering activity details, and occurrence timestamp.

**6. Incomplete Transaction Prevention**
Given missing required payment or entity context data, when unallocation is attempted, then system prevents transaction completion and maintains data integrity.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=583840237"
]

---

#### Feature: Consume Unapplied Balance Automatically on Invoice Generation
- **Role**: Billing Administrator
- **Action**: automatically apply unapplied payment balances to newly generated invoices
- **Value**: outstanding balances are settled efficiently without manual intervention, reducing administrative overhead and improving cash flow accuracy

**Description:**

As a **Billing Administrator**,
I want to **automatically apply unapplied payment balances to newly generated invoices**,
So that **outstanding balances are settled efficiently without manual intervention, reducing administrative overhead and improving cash flow accuracy**


**Key Capabilities:**

**1. Automated Payment Consumption Trigger**
Upon invoice generation or regeneration, system identifies qualifying billing accounts with positive unapplied balances and enabled automatic consumption configuration

**2. Priority-Based Payment Selection**
System determines consumption sequence using configurable payment category priorities, processing highest priority transactions first before advancing to lower priority levels

**3. Chronological Transaction Processing**
Within each payment category, transactions are consumed starting from earliest payment effective date to oldest outstanding amounts

**4. Bill-Type Allocation Strategy**
System applies Group mode allocation for Self-Bill and List Bill types (earliest invoice paid first) or Individual Direct mode based on billing account configuration

**5. Invoice Status Synchronization**
Invoice payment status is recalculated and reflected on billing accounts page according to established runtime calculation rules


**Acceptance Criteria:**

**1. Consumption Activation**
Given automatic consumption is enabled and unapplied balance exists, When invoice is generated, Then system initiates payment application without manual intervention

**2. Precondition Validation**
Given billing account lacks required bill type or configuration is disabled, When invoice is created, Then automatic consumption does not occur

**3. Priority Enforcement**
Given multiple payment categories exist, When system processes consumption, Then all highest-priority transactions are fully consumed before next priority level is accessed

**4. Chronological Ordering**
Given transactions within same payment category, When consumption executes, Then earliest payment effective date is applied first

**5. Allocation Strategy Compliance**
Given Self-Bill or List Bill type, When payment is consumed, Then Group mode allocation covers earliest invoices with partial coverage allowed for remaining amounts

**6. Status Accuracy**
Given consumption completes successfully, When billing account is accessed, Then invoice status reflects updated payment application per calculation rules


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=546712784"
]

---

#### Feature: Allocate Payments to Member Record Overpayments
- **Role**: Billing Administrator
- **Action**: allocate incoming payments that result in member record overpayments
- **Value**: excess funds are properly tracked and available for future premium obligations or refund processing

**Description:**

As a **Billing Administrator**,
I want to **allocate incoming payments that result in member record overpayments**,
So that **excess funds are properly tracked and available for future premium obligations or refund processing**


**Key Capabilities:**

**1. Payment Transaction Registration**
Upon payment creation, system captures transaction metadata including effective date, currency, payment type (incoming/refund), method, and originating billing account. Bank processing flag indicates whether funds are confirmed or pending receipt.

**2. Policy Context Determination**
System identifies product structure and billing arrangement to determine allocation hierarchy. When individual benefits context detected, master policy references are excluded. When self-bill arrangement identified, member record attribution is bypassed.

**3. Overpayment Allocation Execution**
System allocates excess payment amount to appropriate product level (member record for list-bill, master policy for self-bill), retrieving underwriting company and situs state from policy subsystem.

**4. Audit Trail Establishment**
System records creation and update timestamps with responsible user identification for regulatory compliance and operational transparency.


**Acceptance Criteria:**

**1. Standard Overpayment Allocation**
Given a list-bill payment exceeding member record balance, When payment is processed, Then system allocates overage to member record level with complete policy and member identification.

**2. Individual Benefits Exclusion**
Given payment for individual benefits product, When overpayment is allocated, Then system omits master policy attributes (number, effective date, situs state, product code) from transaction record.

**3. Self-Bill Master Policy Allocation**
Given self-bill payment creating overpayment, When allocation occurs, Then system assigns excess to master policy level excluding member record identifiers and references master policy in product item linkage.

**4. Pending Bank Processing**
Given payment record created before bank confirmation, When bank processing flag is true, Then system maintains transaction in pending state until external funds receipt confirmed.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=733065751"
]

---

#### Feature: Calculate Proportional Payment Allocation Amounts
- **Role**: Billing Administrator
- **Action**: calculate proportional payment allocation amounts across unpaid invoiced items based on configurable strategies
- **Value**: payments are accurately distributed according to business priorities and outstanding balances are systematically reduced

**Description:**

As a Billing Administrator,
I want to calculate proportional payment allocation amounts across unpaid invoiced items based on configurable strategies,
So that payments are accurately distributed according to business priorities and outstanding balances are systematically reduced


**Key Capabilities:**

**1. Coverage Sufficiency Assessment**
Upon payment receipt, system evaluates if payment amount fully covers all unpaid invoiced items; when sufficient, allocate payment completely to all items

**2. Strategy-Driven Allocation Configuration**
When payment is insufficient, system applies configured allocation strategy based on priority rules flag and coverage priority order settings (invoicing period, premium sequence, product, or combinations)

**3. Proportional Distribution Calculation**
System calculates allocation amounts using context-specific formulas: across invoicing periods when no priority exists, within modal periods when partial coverage occurs, or across all items when treated equally; coefficients are rounded to 8 digits

**4. Priority-Based Sequential Coverage**
If priority rules enabled, system processes groups hierarchically (oldest to newest for periods, highest to lowest for products), completing each priority level before advancing

**5. Rounding Reconciliation**
System applies rounding differences to randomly selected invoice items ensuring total allocated amounts precisely match payment amount


**Acceptance Criteria:**

**1. Full Coverage Scenario**
Given payment amount equals or exceeds total unpaid balance, When allocation calculation executes, Then system allocates payment completely to all unpaid invoiced items without applying proportional formulas

**2. Priority-Free Proportional Allocation**
Given usePriorityRules is False and payment is insufficient, When calculation processes, Then system distributes payment proportionally across invoicing periods and modal periods from oldest to newest without hierarchy

**3. Single-Priority Hierarchical Allocation**
Given usePriorityRules is True with single priority order (InvoicingPeriod, PremiumSequence, or Product), When calculation executes, Then system allocates payment following defined priority sequence and completes each priority group before next

**4. Multi-Priority Cascading Allocation**
Given coveragePriorityOrder defines multiple priorities (e.g., InvoicingPeriod then Product), When calculation processes, Then system applies nested grouping with primary priority first, secondary within primary groups, allocating sequentially

**5. Mathematical Precision Validation**
Given any allocation scenario, When proportional amounts calculated, Then coefficient rounding uses HALF_UP to 8 digits and rounding difference applied ensures sum equals payment amount exactly

**6. Partial Period Coverage Handling**
Given modal period cannot be covered fully, When remaining payment insufficient, Then system distributes remaining amount proportionally across granular invoiced items within that period using item-level formula


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=487462852"
]

---

#### Feature: Validate Payment Allocation Rules
- **Role**: Billing Administrator
- **Action**: validate payment allocations against business rules before processing
- **Value**: ensure financial accuracy and prevent over-allocation errors that could create accounting discrepancies

**Description:**

As a **Billing Administrator**,
I want to **validate payment allocations against business rules before processing**,
So that **I can ensure financial accuracy and prevent over-allocation errors that could create accounting discrepancies**.


**Key Capabilities:**

**Payment Allocation Initiation**
User provides payment amount and distributes allocation across invoices or member records within applicable billing contexts.

**Real-Time Allocation Validation**
System validates that total allocated amounts do not exceed payment amount and individual allocations remain within invoice remaining balances.

**Validation Enforcement**
When allocation rules are violated, system prevents payment processing and requires user to correct discrepancies before resubmission.

**Successful Payment Processing**
Upon validation success, system applies payment according to specified allocations and updates account balances.


**Acceptance Criteria:**

**Over-Allocation Prevention**
Given a payment amount of $200, When user allocates a total exceeding $200 across records, Then system blocks submission and displays correction requirement.

**Invoice Balance Enforcement**
Given an invoice with $250 remaining due, When user attempts allocation exceeding this amount, Then system highlights the violation and prevents processing.

**Cross-Context Validation**
Given payment allocation in any billing context (List Bill, Individual, Self Bill), When validation rules are triggered, Then system applies consistent enforcement across all scenarios.

**Successful Processing**
Given valid allocations within all limits, When user submits payment, Then system processes allocation and updates financial records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=549102169"
]

---

#### Feature: Manage Payment Allocation Priority by Product
- **Role**: Billing Administrator
- **Action**: configure and execute priority-based payment distribution across products and invoicing periods
- **Value**: payments are systematically allocated according to business rules, ensuring accurate cash application and minimizing manual intervention

**Description:**

As a **Billing Administrator**,
I want to **configure and execute priority-based payment distribution across products and invoicing periods**,
So that **payments are systematically allocated according to business rules, ensuring accurate cash application and minimizing manual intervention**.


**Key Capabilities:**

**Payment Configuration Assessment**
Upon receiving remittance file without product information, system evaluates billing account's payment allocation configuration to determine presence of product priority and invoicing period priority settings.

**Priority-Driven Distribution Execution**
When priority by product is configured, system allocates payment amounts by matching Employee ID/SSN, applying product and invoicing period hierarchies, treating unconfigured products as lowest priority.

**Proportional Allocation Management**
If invoice items with equal priority cannot be fully covered, system distributes amounts proportionally based on remaining due amounts using standardized calculation formulas.

**Overpayment Resolution**
When member record overpayment occurs, system allocates excess to highest priority product available for that member, distributing proportionally by annual premium if multiple records exist.

**Fallback Distribution Logic**
When priority by product is not configured, system applies invoicing period priority only, or proportional coverage across all periods if no priorities exist.


**Acceptance Criteria:**

**Configuration-Based Routing**
Given remittance file lacks product information, When system evaluates payment allocation configuration, Then appropriate distribution logic (priority-based or proportional) is selected based on configuration presence.

**Product Priority Enforcement**
Given product priorities are configured, When payment distribution executes, Then amounts are allocated to highest priority products first, treating unconfigured products as lowest priority.

**Cross-Member Isolation**
Given payment amounts belong to specific Employee ID/SSN, When allocation occurs, Then system prevents funds from being allocated to different Employee ID/SSN regardless of priority settings.

**Proportional Distribution Accuracy**
Given invoice items with equal priority exceed available payment, When proportional allocation applies, Then system calculates distribution using remaining due amounts with HALF_UP rounding to 8 digits.

**Overpayment Allocation**
Given member record overpayment exists, When highest priority product is identified, Then excess is allocated proportionally by annual premium if multiple records of same product exist.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=755903286"
]

---

#### Feature: Manage Payment Allocation Priority by Invoicing Period
- **Role**: Billing Administrator
- **Action**: configure and execute payment distribution across member records using priority-based allocation rules when remittance files lack product-specific information
- **Value**: payments are accurately distributed according to business priorities, minimizing manual intervention and ensuring compliance with premium sequencing and invoicing period rules

**Description:**

As a **Billing Administrator**,
I want to **configure and execute payment distribution across member records using priority-based allocation rules when remittance files lack product-specific information**,
So that **payments are accurately distributed according to business priorities, minimizing manual intervention and ensuring compliance with premium sequencing and invoicing period rules**


**Key Capabilities:**

**Payment Allocation Configuration Setup**
User is able to establish payment allocation priorities using premium sequence effective dates and invoicing periods through OpenL configuration or default settings.

**Priority-Based Invoice Item Grouping**
Upon receiving remittance file without product information, system groups unpaid invoice items by SSN/Employee ID, then prioritizes oldest unpaid invoices first, applying configured premium sequence and invoicing period hierarchies.

**Proportional Distribution Calculation**
When items share equal priority or partial coverage occurs, system applies proportional allocation based on remaining dues using coefficient formula (fileAmount/totalRemainingDue  MRRemainingDue).

**Sequential Invoice Coverage**
System allocates payment to current invoice completely before progressing to next unpaid invoice, covering oldest modal periods first within each invoicing period.

**Overpayment Allocation**
If all invoiced items are covered, system distributes excess amounts proportionally across member records based on annual premium amounts using coefficient formula (fileAmount/totalAnnualAmount  MRAnnualAmount).


**Acceptance Criteria:**

**1. Priority Configuration Validation**
Given payment allocation configuration is established with premium sequence priorities, When remittance file lacking product information is processed, Then system applies configured hierarchies to invoice item distribution.

**2. Sequential Invoice Coverage**
Given multiple unpaid invoices exist for same SSN/Employee ID, When payment amount is insufficient to cover all invoices, Then system fully covers oldest invoice before allocating to subsequent invoices.

**3. Equal Priority Proportional Distribution**
Given invoice items have identical premium sequence effective dates, When payment is allocated, Then system distributes amount proportionally based on remaining dues across equal-priority items.

**4. Missing Date Lowest Priority**
Given invoice item lacks premium sequence effective date, When prioritization occurs, Then system treats item as lowest priority receiving allocation only after dated items are covered.

**5. Overpayment Handling**
Given all invoiced items are fully covered and excess payment remains, When overpayment allocation executes, Then system distributes remainder proportionally based on member record annual premium amounts.

**6. SSN Isolation Constraint**
Given payment belongs to specific SSN/Employee ID, When allocation process executes, Then system prevents cross-allocation to different SSN/Employee ID member records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=779984004"
]

---

#### Feature: Manage Suspense Queue for Unallocated Payments
- **Role**: Billing Administrator
- **Action**: temporarily hold and track unallocated payments in suspense until they can be properly reconciled and applied to billing accounts
- **Value**: I ensure accurate revenue recognition and maintain audit trails for payments pending allocation or further investigation

**Description:**

As a **Billing Administrator**,
I want to **temporarily hold and track unallocated payments in suspense until they can be properly reconciled and applied to billing accounts**,
So that **I ensure accurate revenue recognition and maintain audit trails for payments pending allocation or further investigation**


**Key Capabilities:**

**1. Suspense Transaction Creation**
Upon receiving payment that cannot be immediately allocated, system creates suspense entry with unique reference identifier and monetary amount on billing account.

**2. Dynamic Parameter Assignment**
System populates reference number and suspense amount at runtime based on payment transaction data.

**3. Exception Handling**
When external integration failures occur, system logs error while preserving core suspense transaction to prevent data loss.

**4. Account-Level Association**
Suspense transactions are linked to billing account context for future reconciliation workflows.


**Acceptance Criteria:**

**1. Successful Suspense Creation**
Given payment lacks allocation details, When system processes transaction, Then suspense entry is added with unique reference and amount populated.

**2. Parameter Uniqueness**
Given multiple unallocated payments, When suspense transactions are created, Then each receives distinct reference number preventing duplicates.

**3. Integration Fault Tolerance**
Given external system unavailable, When suspense activity executes, Then core transaction completes despite integration failure with logged error.

**4. Data Completeness**
Given required suspense parameters missing, When submission attempted, Then system prevents transaction creation until reference and amount provided.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=215326568"
]

---

#### Feature: Transfer Payments Between Billing Accounts
- **Role**: Billing Administrator
- **Action**: transfer payments between billing accounts to resolve allocation discrepancies
- **Value**: ensure accurate financial reconciliation and maintain proper account balances across multiple billing entities

**Description:**

As a **Billing Administrator**,
I want to **transfer payments between billing accounts to resolve allocation discrepancies**,
So that **I can ensure accurate financial reconciliation and maintain proper account balances across multiple billing entities**


**Key Capabilities:**

**1. Payment Transfer Initiation**
User identifies source payment requiring reallocation and selects target billing account for transfer

**2. Cross-Account Validation**
System verifies eligibility of both source and destination accounts, ensuring transfer compliance with business rules

**3. Amount Allocation**
User specifies full or partial payment amount to transfer between accounts

**4. Transfer Execution**
System processes the transfer, updating balances on both accounts and maintaining audit trail

**5. Confirmation and Traceability**
System generates transfer confirmation with reference linkage between original and transferred payment records


**Acceptance Criteria:**

**1. Successful Full Transfer**
Given a valid payment and destination account, When user initiates full payment transfer, Then system moves entire amount and updates both account balances accordingly

**2. Successful Partial Transfer**
Given a payment amount, When user transfers partial amount, Then system splits payment maintaining original reference and creates new payment record

**3. Invalid Account Prevention**
Given incompatible account types, When transfer is attempted, Then system prevents execution and notifies user of constraint violation

**4. Audit Trail Creation**
Given completed transfer, When transaction finalizes, Then system records full traceability linking source and destination payments


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=559410731"
]

---

#### Feature: Suspend Payment Processing
- **Role**: Billing Administrator
- **Action**: suspend unallocated payments for later resolution
- **Value**: payment integrity is maintained while unresolved allocation issues are investigated without blocking payment receipt

**Description:**

As a **Billing Administrator**,
I want to **suspend unallocated payments for later resolution**,
So that **payment integrity is maintained while unresolved allocation issues are investigated without blocking payment receipt**.


**Key Capabilities:**

**1. Payment Suspense Initiation**
When payment allocation cannot be determined automatically, user is able to place payment into suspense status for manual review.

**2. Suspense Account Management**
User is able to view and manage all suspended payments with associated metadata including receipt date, amount, and reason for suspension.

**3. Payment Resolution Processing**
Upon identifying correct allocation, user is able to release payment from suspense and complete allocation to appropriate billing account or invoice.

**4. Exception Tracking & Reporting**
System maintains audit trail of all suspense transactions and resolution activities for compliance purposes.


**Acceptance Criteria:**

**1. Successful Payment Suspension**
Given an unallocated payment exists, when administrator initiates suspension, then payment is moved to suspense status and removed from active allocation queue.

**2. Suspense Visibility**
Given payments are in suspense, when administrator accesses suspense management, then all suspended payments display with complete transaction details.

**3. Payment Release & Allocation**
Given suspended payment has identified allocation, when administrator processes resolution, then payment is released from suspense and successfully allocated to target account.

**4. Audit Trail Completeness**
Given suspense activity occurs, when audit is performed, then all suspension and resolution actions are traceable with timestamp and user information.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=559410686"
]

---

#### Feature: Delete Draft Payment Allocations
- **Role**: Billing Administrator
- **Action**: remove draft payment allocations before finalization
- **Value**: I can correct allocation errors and maintain accurate cash application records without impacting posted transactions

**Description:**

As a **Billing Administrator**,
I want to **remove draft payment allocations before finalization**,
So that **I can correct allocation errors and maintain accurate cash application records without impacting posted transactions**


**Key Capabilities:**

**1. Draft Payment Allocation Identification**
User is able to identify payment allocations in draft status that require removal from the cash application workflow.

**2. Draft Deletion Execution**
User is able to execute deletion of draft payment allocations before finalization, removing the allocation from pending transactions.

**3. Allocation Integrity Validation**
Upon deletion request, system validates that the allocation remains in draft state and has not been posted or finalized.

**4. Cross-Reference Verification**
System verifies no downstream dependencies exist that would be impacted by removing the draft allocation from billing accounts or member records.


**Acceptance Criteria:**

**1. Draft State Validation**
Given a payment allocation exists, When the allocation is in draft status, Then the system permits deletion of the allocation.

**2. Posted Allocation Protection**
Given a payment allocation has been finalized, When deletion is attempted, Then the system prevents deletion and maintains the posted allocation.

**3. Successful Deletion Outcome**
Given a valid draft allocation, When deletion is executed, Then the system removes the allocation and updates related billing account balances.

**4. Audit Trail Preservation**
Given a draft allocation is deleted, When the deletion completes, Then the system records the deletion event with timestamp and user identification for compliance tracking.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=559410609"
]

---

#### Feature: Apply Internal Payments Manually
- **Role**: Billing Administrator
- **Action**: Apply internal payments manually to customer accounts and manage cash allocation
- **Value**: I can accurately process internal payment transactions and resolve suspense items to maintain accurate financial records

**Description:**

As a **Billing Administrator**,
I want to **apply internal payments manually to customer accounts and manage cash allocation**,
So that **I can accurately process internal payment transactions and resolve suspense items to maintain accurate financial records**


**Key Capabilities:**

**Payment Identification & Selection**
User is able to identify and select internal payment transactions requiring manual application from suspense or unallocated cash inventory.

**Account Matching & Validation**
User is able to match payment to appropriate customer account and validate allocation eligibility based on business rules.

**Payment Allocation**
Upon successful validation, user is able to allocate payment amount to outstanding invoices or credit balances.

**Suspense Resolution**
When payment cannot be immediately applied, user is able to hold transaction in suspense with reason codes pending investigation.


**Acceptance Criteria:**

**Successful Payment Application**
Given an identified internal payment, when user allocates to valid account with sufficient outstanding balance, then system processes allocation and updates account receivables accordingly.

**Suspense Management**
Given unallocated payment, when user places in suspense with valid reason, then system retains payment for future resolution without impacting cash reconciliation.

**Allocation Validation**
Given payment allocation attempt, when account or amount constraints are violated, then system prevents processing and notifies user of constraint violations.

**Audit Trail**
Given any manual payment action, when transaction completes, then system records user identity, timestamp, and allocation details for compliance audit.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=790079208"
]

---

#### Feature: Calculate Excessive Payment for Reconciliation
- **Role**: Billing Specialist
- **Action**: detect and reconcile excessive payments resulting from premium reducing transactions applied to already-billed invoices
- **Value**: accurate premium balances are maintained and overpayments are properly reallocated to prevent financial discrepancies

**Description:**

As a **Billing Specialist**,
I want to **detect and reconcile excessive payments resulting from premium reducing transactions applied to already-billed invoices**,
So that **accurate premium balances are maintained and overpayments are properly reallocated to prevent financial discrepancies**


**Key Capabilities:**

**1. Invoice Item Matching**
System identifies positive invoice items matching negative adjustments by member record, coverage, tier, premium sequence, and modal period parameters.

**2. Excessive Payment Detection**
System calculates overpayment delta when paid invoice amounts exceed revised amounts due to premium reducing transactions.
    2.1 Apply formula: Delta = Amount Paid minus Amount to be Paid
    2.2 Flag excessive payment when Delta exceeds zero

**3. Payment Unallocation Execution**
System unallocates excessive payment amounts following configured priority sequences from newest to oldest allocations.

**4. Balance Reallocation**
System transfers unallocated amounts to member record unapplied balance for future application or refund processing.


**Acceptance Criteria:**

**1. Matching Accuracy**
Given a premium reducing transaction within a billed modal period, when invoice items share identical member record, coverage, tier, and period attributes, then system correctly pairs positive and negative items for reconciliation.

**2. Overpayment Detection**
Given a paid invoice item with subsequent premium reduction, when calculated delta exceeds zero, then system identifies excessive payment equal to the delta amount.

**3. Sequential Unallocation**
Given excessive payment requiring unallocation, when multiple payments exist across categories, then system unallocates from newest to oldest per configured priority without exceeding individual payment amounts.

**4. Balance Transfer**
Given successful payment unallocation, when process completes, then system transfers unallocated amount to appropriate unapplied balance and recalculates all affected account balances.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=607686261"
]

---

#### Feature: Validate Remittance File Structure and Data
- **Role**: Billing Administrator
- **Action**: validate incoming remittance file structure and data integrity before payment allocation
- **Value**: ensure accurate cash application and prevent payment misallocation or suspense account errors

**Description:**

As a **Billing Administrator**,
I want to **validate incoming remittance file structure and data integrity before payment allocation**,
So that **ensure accurate cash application and prevent payment misallocation or suspense account errors**


**Key Capabilities:**

**File Structure Validation**
System validates remittance file contains mandatory data elements including at least one member identifier (Member Record Number, Social Security Number, or Employee ID) and payment amount prior to processing.

**Member Matching Prerequisites**
System verifies presence of minimum identification data required to match payments to member records, supporting multiple identifier combinations.

**Payment Allocation Enablement**
Upon successful validation, system enables payment distribution workflow to allocate funds to corresponding member accounts, preventing premature processing of incomplete data.


**Acceptance Criteria:**

**Complete File Acceptance**
Given a remittance file with valid member identifier and payment amount, When validation executes, Then system accepts file for cash allocation processing.

**Incomplete File Rejection**
Given a remittance file missing all member identifiers or payment amount, When validation executes, Then system rejects file and routes to suspense management.

**Multiple Identifier Support**
Given a remittance file with any combination of valid member identifiers, When at least one identifier is present, Then system successfully matches payment to member record.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=557942859"
]

---

#### Feature: Route Payments from Payment Hub with Allocation Instructions
- **Role**: Billing Administrator
- **Action**: automate payment allocation from Payment Hub across multiple invoices based on configurable business rules
- **Value**: payments are efficiently distributed to outstanding invoices without manual intervention, reducing processing time and improving cash application accuracy

**Description:**

As a **Billing Administrator**,
I want to **automate payment allocation from Payment Hub across multiple invoices based on configurable business rules**,
So that **payments are efficiently distributed to outstanding invoices without manual intervention, reducing processing time and improving cash application accuracy**.


**Key Capabilities:**

**1. Payment Request Intake & Validation**
System receives Payment Hub payment request containing multiple invoice numbers, multiple billing account instances, or mixed account-invoice references. System validates automated allocation eligibility based on master configuration switch.

**2. Allocation Rule Evaluation**
System evaluates two key allocation settings: permission for mismatched amount allocation and partial invoice coverage. When both enabled, system proceeds with automated allocation; otherwise payment routes to unapplied status.

**3. Amount Reconciliation & Distribution**
System sums amounts that cannot be allocated per original Payment Hub instructions. System applies oldest-first chronological strategy to distribute total payment across unpaid invoices until amount exhausted or all invoices satisfied.


**Acceptance Criteria:**

**1. Successful Automated Allocation**
Given automated allocation is enabled and both allocation settings are True, When Payment Hub request contains mismatched amounts across multiple invoices, Then system allocates payment chronologically from oldest unpaid invoice until total amount distributed.

**2. Unapplied Payment Routing**
Given at least one allocation setting is False, When Payment Hub request requires amount mismatch or partial coverage, Then system records payment as unapplied on billing account without invoice allocation.

**3. Configuration Enforcement**
Given automated allocation master switch is disabled, When any Payment Hub payment request arrives, Then system bypasses automated allocation process regardless of other settings.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=821661280"
]

---

#### Feature: Track Payment Allocation History and Audit Trail
- **Role**: Billing Analyst
- **Action**: track and audit payment allocation transactions from member overpayments to invoices
- **Value**: I can maintain complete financial transparency, ensure regulatory compliance, and resolve allocation discrepancies efficiently

**Description:**

As a **Billing Analyst**,
I want to **track and audit payment allocation transactions from member overpayments to invoices**,
So that **I can maintain complete financial transparency, ensure regulatory compliance, and resolve allocation discrepancies efficiently**


**Key Capabilities:**

**1. Capture Payment Transaction Context**
System records comprehensive payment identifiers (payment number, type, subtype, method), currency, bank processing requirements, and associated billing account upon allocation event occurrence.

**2. Document Allocation Source Details**
System captures originating member record information including policy data for group products, member record identifiers, product items, and effective dates.

**3. Record Invoice Target Allocation**
System documents target invoice details, billing periods, modal coverage periods, allocated amounts per invoice item, and distinguishes new business versus renewal transactions.

**4. Maintain Audit Trail**
System automatically timestamps all allocation events with transaction date, effective date, occurrence time, and tracks creation/modification history for compliance purposes.


**Acceptance Criteria:**

**1. Complete Transaction Recording**
Given a member overpayment allocation occurs, When the system processes the transaction, Then all payment identifiers, account context, timestamps, and bank processing flags are captured without manual intervention.

**2. Source-to-Target Traceability**
Given an allocation event is recorded, When audit review is performed, Then complete lineage from member record source to invoice item target with amounts and billing periods is retrievable.

**3. Renewal Classification Accuracy**
Given invoice item allocation is processed, When the billing period is evaluated, Then system correctly classifies as new business if period ends before member effective date plus 12 months, otherwise as renewal.

**4. Audit History Preservation**
Given any allocation transaction, When retrieved for compliance review, Then creation/update timestamps, user identifiers, and all modification history are available in standardized format.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=583841103"
]

---

#### Feature: Export Payment Allocation Details
- **Role**: Billing Administrator
- **Action**: export payment allocation details from the system
- **Value**: I can analyze, reconcile, and report on payment distributions across accounts and suspense holdings

**Description:**

As a **Billing Administrator**,
I want to **export payment allocation details from the system**,
So that **I can analyze, reconcile, and report on payment distributions across accounts and suspense holdings**


**Key Capabilities:**

**1. Payment Data Retrieval**
User is able to initiate extraction of payment allocation records from the system repository.

**2. Export Execution**
Upon request submission, system compiles payment details including allocation amounts, target accounts, and transaction identifiers.

**3. Data Delivery**
System generates exportable format containing comprehensive payment allocation information for external consumption and analysis.


**Acceptance Criteria:**

**1. Successful Export**
Given payment allocation data exists, When the administrator requests export, Then the system generates a complete dataset with all allocation details.

**2. Data Completeness**
Given export is initiated, When processing completes, Then all associated payment identifiers, allocation amounts, and account references are included.

**3. Export Failure Handling**
Given system encounters data unavailability, When export is attempted, Then the operation is prevented and administrator is notified of the incomplete state.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=699244545"
]

---

#### Feature: Notify Users of Payment Allocation Failures
- **Role**: Billing Administrator
- **Action**: receive automated notifications when cash allocation to accounts or invoices fails and payments are suspended
- **Value**: I can promptly investigate and resolve allocation issues, preventing revenue recognition delays and maintaining accurate accounts receivable records

**Description:**

As a **Billing Administrator**,
I want to **receive automated notifications when cash allocation to accounts or invoices fails and payments are suspended**,
So that **I can promptly investigate and resolve allocation issues, preventing revenue recognition delays and maintaining accurate accounts receivable records**


**Key Capabilities:**

**1. Failure Detection & Notification**
System identifies payment allocation failures during cash application processing and triggers immediate notification to designated billing personnel.

**2. Suspense Account Assignment**
Upon allocation failure, system automatically transfers payment to suspense account with unique identifier and failure reason code for tracking.

**3. Investigation Enablement**
User is able to access failure details including payment source, attempted allocation target, and system-generated error diagnostics to expedite resolution.

**4. Resolution Workflow Initiation**
When notified, user initiates corrective action workflow to research account discrepancies, adjust allocation rules, or request additional payment information from remitter.


**Acceptance Criteria:**

**1. Notification Trigger**
Given a payment fails allocation criteria, When system completes cash application attempt, Then notification is generated and delivered to billing personnel within defined SLA timeframe.

**2. Suspense Account Creation**
Given allocation failure occurs, When payment is redirected, Then system creates suspense account entry with complete audit trail and reason classification.

**3. Information Completeness**
Given notification is received, When user accesses failure details, Then all diagnostic information necessary for resolution is available without requiring additional system queries.

**4. Prevention of Payment Loss**
Given system encounters allocation error, When suspense process executes, Then payment funds are preserved and traceable until successful reallocation occurs.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=743442037"
]

---

#### Feature: Notify Users of Payment Unallocation Failures
- **Role**: Billing Administrator
- **Action**: receive automated notifications when payment allocation attempts fail
- **Value**: I can promptly investigate and resolve cash application exceptions to maintain accurate financial records

**Description:**

As a **Billing Administrator**,
I want to **receive automated notifications when payment allocation attempts fail**,
So that **I can promptly investigate and resolve cash application exceptions to maintain accurate financial records**


**Key Capabilities:**

**Payment Allocation Monitoring**
System continuously monitors cash application processes and detects allocation failures in real-time

**Automated Alert Generation**
Upon detection of unallocation failure, system automatically generates notifications with relevant payment details and failure context

**Notification Delivery**
User is able to receive alerts through designated channels for immediate visibility into exception cases

**Exception Investigation Access**
System provides direct access to Business Activity Monitoring interface to review payment details and failure reasons

**Resolution Workflow Initiation**
User is able to navigate from notification to suspense management tools for corrective action


**Acceptance Criteria:**

**Failure Detection**
Given payment allocation attempt fails, When system identifies unallocation error, Then automated notification is triggered immediately

**Notification Content**
Given notification is generated, When delivered to administrator, Then includes payment identifier, failure reason, and timestamp without exposing system-level technical details

**Navigation Capability**
Given user receives notification, When accessing alert, Then system provides direct link to Business Activity Monitoring interface for exception investigation

**Audit Trail**
Given notification is sent, When recorded in system, Then maintains complete history of all unallocation alerts for compliance reporting


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=722704538"
]

---

#### Feature: Notify Users of Payment Transfer Failures
- **Role**: Billing Administrator
- **Action**: receive automated notifications when payment transfers fail during cash allocation processing
- **Value**: I can promptly investigate and resolve payment exceptions, ensuring accurate account reconciliation and maintaining cash flow integrity

**Description:**

As a **Billing Administrator**,
I want to **receive automated notifications when payment transfers fail during cash allocation processing**,
So that **I can promptly investigate and resolve payment exceptions, ensuring accurate account reconciliation and maintaining cash flow integrity**


**Key Capabilities:**

**1. Failure Detection & Capture**
System identifies payment transfer failures during cash allocation processing and captures transaction context including payment details and failure reason

**2. Automated Notification Dispatch**
System generates and delivers failure notifications to designated billing administrators through configured communication channels

**3. Exception Queue Management**
Upon notification, user is able to access consolidated view of failed transfers with prioritization based on amount and aging

**4. Investigation & Resolution Workflow**
User is able to review failure details, research root causes, and initiate corrective actions including payment reallocation or suspense account creation


**Acceptance Criteria:**

**1. Real-Time Failure Detection**
Given a payment transfer fails during cash allocation, When the failure is detected by the system, Then notification is generated immediately without manual intervention

**2. Complete Failure Context**
Given notification is triggered, When administrator receives alert, Then all critical payment identifiers, amounts, failure codes, and timestamp are included

**3. Notification Delivery Assurance**
Given notification is generated, When system attempts delivery, Then confirmation of successful transmission is logged for audit purposes

**4. Prevention of Silent Failures**
Given incomplete or missing notification configuration, When transfer failure occurs, Then system prevents processing continuation until notification mechanism is validated


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=722704527"
]

---

### Epic: Payment Transfer & Movement Operations

#### Feature: Apply Internal Payments Automatically from Cash Deductions
- **Role**: Billing Administrator
- **Action**: automatically create and allocate internal payments triggered by cash deduction events from nonforfeiture transactions
- **Value**: member account balances are accurately reconciled without manual intervention when policy cash values are applied to outstanding debts

**Description:**

As a **Billing Administrator**,
I want to **automatically create and allocate internal payments triggered by cash deduction events from nonforfeiture transactions**,
So that **member account balances are accurately reconciled without manual intervention when policy cash values are applied to outstanding debts**


**Key Capabilities:**

**1. Cash Deduction Event Reception & Validation**
Upon receiving CashTransactionCreatedEvent from Cash Management triggered by nonforfeiture transactions, system validates required data (amount, correlation ID, accounting date, Member Record) and confirms billing account operates under List Bill IPA or Individual Direct mode. If validation fails, event is ignored without payment creation.

**2. Internal Payment Initialization**
System creates internal draft payment with subtype 'Cash Deduction', converts negative amount to positive, assigns 'Initiated' status with 'Incomplete' tag, stores correlation ID, and sets bank processing flag to false ensuring no external payment hub communication.

**3. Automated Allocation Execution**
System queues automatic allocation activity, distributes payment to designated Member Record following IPA and Individual Direct rules, applies excess as Member Record overpayment when payment exceeds debt, and prevents duplicate payments via idempotency checks on correlation ID.

**4. Financial Reconciliation & Event Broadcasting**
Upon successful allocation, system removes 'Processing' tag, updates payment status and available actions, recalculates invoice and billing account balances including Paid-To-Date, generates notifications for payment creation and status changes, and fires integration events to Compensation and downstream subsystems.


**Acceptance Criteria:**

**1. Event-Driven Payment Creation**
Given a CashTransactionCreatedEvent from Cash Management with valid data for GPL WL product under List Bill IPA mode, When billing receives the event, Then system creates internal payment with subtype 'Cash Deduction' and 'Initiated' status without external bank processing.

**2. Validation-Based Rejection**
Given event missing required fields or billing account not in IPA/Individual Direct mode, When validation executes, Then system ignores event and exits without creating payment record.

**3. Idempotency Protection**
Given duplicate CashTransactionCreatedEvent with same correlation ID, When system detects existing payment, Then no additional payment is created maintaining single transaction integrity.

**4. Allocation & Balance Reconciliation**
Given successful payment creation, When automatic allocation completes, Then system distributes amount to Member Record debt, calculates updated Paid-To-Date, and allocates excess as Member Record overpayment available for manual reallocation.

**5. Small Balance Write-off Handling**
Given payment allocated to invoice with Small Balance Write-off, When validation detects write-off condition, Then system triggers automatic write-off reversal process before finalizing allocation.

**6. Integration Event Publishing**
Given completed payment allocation, When financial reconciliation finishes, Then system broadcasts payment created, status change, and allocation events to Compensation subsystem and downstream financial systems.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=773142453"
]

---

#### Feature: Apply Internal Payments Manually with Subtype Selection
- **Role**: Billing Administrator
- **Action**: apply internal payments from cash accounts or claim deductions with flexible allocation options
- **Value**: billing accounts and member balances are accurately updated without external payment hub processing

**Description:**

As a **Billing Administrator**,
I want to **apply internal payments from cash accounts or claim deductions with flexible allocation options**,
So that **billing accounts and member balances are accurately updated without external payment hub processing**


**Key Capabilities:**

**1. Payment Initiation & Subtype Selection**
User accesses billing account and initiates internal payment application. Upon selecting payment subtype, system dynamically presents related entity fields (cash account or claim reference) and validates user privileges.

**2. Allocation Strategy Configuration**
User selects allocation approach: add to unapplied balance, allocate to specific invoice, or distribute across member records. System enables manual amount entry, automatic distribution per allocation rules, or file-based batch allocation (for individual product arrangements).

**3. Payment Application & Balance Reconciliation**
Upon submission, system validates allocated amounts match payment total, creates payment record with internal method indicator, updates invoice and billing account balances, recalculates paid-to-date metrics, and fires business events for compensation subsystem integration.
    3.1 If allocated amounts differ from payment total, system prompts user for confirmation or adjustment.
    3.2 If small balance write-offs exist on affected invoices, system automatically reverses write-offs before applying payment.


**Acceptance Criteria:**

**1. Privileged Access & Subtype Filtering**
Given user lacks internal payment application privilege, when accessing billing account actions, then system excludes internal payment option from menu.

**2. Allocation Validation & Adjustment**
Given user allocates amounts exceeding payment total, when attempting submission, then system displays error and requires allocation adjustment before proceeding.

**3. Balance & Status Update Propagation**
Given payment is successfully applied with invoice allocation, when system completes processing, then invoice balances, billing account balances, and invoice statuses recalculate, payment record is created with internal method indicator, and business events fire for compensation subsystem notification.

**4. Payment Hub Exclusion**
Given internal payment is applied, when system completes post-processing, then payment is not transmitted to external payment hub and bank processing flag is set to false.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=740625030"
]

---

#### Feature: Transfer Payments Between Billing Accounts
- **Role**: Billing Administrator
- **Action**: transfer payment balances from source billing accounts to one or more destination billing accounts
- **Value**: account balances are reconciled accurately and payment allocations are redistributed to reflect customer billing arrangements without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **transfer payment balances from source billing accounts to one or more destination billing accounts**,
So that **account balances are reconciled accurately and payment allocations are redistributed to reflect customer billing arrangements without manual intervention**.


**Key Capabilities:**

**Initiate Payment Transfer**
User selects eligible payment from source billing account and initiates transfer action. System validates action availability based on payment status and authorization privileges.

**Configure Transfer Parameters**
User specifies transfer reason and selects one or more destination billing accounts. System enables multi-destination distribution with amount specification per destination account.

**Validate Transfer Constraints**
System validates no incomplete draft allocations exist and verifies transfer amounts against source payment balance. Upon detecting allocated payments, system confirms unallocation intent before proceeding.

**Execute Payment Redistribution**
System unallocates existing payment allocations from invoices and member records, creates offsetting payment items, and generates new payment records on destination accounts with unapplied status.

**Update Account Balances and Status**
System adjusts source payment to transferred status (or reduced amount for partial transfers), updates account-level payment fields, and recalculates invoice statuses when payment allocations change.

**Generate Reconciliation Messages**
System fires business activity monitoring messages and events to notify downstream systems of payment movements, allocation changes, and account balance updates for financial reconciliation.


**Acceptance Criteria:**

**Transfer Initiation Authorization**
Given user has transfer payment privileges and payment status permits transfer, When user initiates transfer action, Then system displays transfer configuration interface with available destination account selection.

**Multi-Destination Distribution Validation**
Given user specifies transfer amounts for multiple destination accounts, When total transfer amount equals source payment amount, Then system accepts configuration and proceeds with transfer execution.

**Partial Transfer Retention**
Given user transfers partial payment amount and selects retain remaining balance option, When transfer completes, Then system reduces source payment by transferred amount while maintaining unapplied status on source account.

**Automatic Unallocation Processing**
Given source payment has existing allocations to invoices, When user confirms transfer, Then system creates offsetting payment items, unallocates from invoices, recalculates invoice statuses, and generates status change notifications.

**Concurrent Activity Prevention**
Given another payment activity is processing, When user attempts transfer, Then system prevents action and displays unavailable status message until processing completes.

**Destination Payment Creation**
Given transfer executes successfully, When system completes processing, Then new payment records appear on each destination account with unapplied status, preserving original transaction dates and generating acceptance events.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=512766520"
]

---

#### Feature: Transfer Payments to Multiple Destination Accounts
- **Role**: Billing Administrator
- **Action**: redistribute payment balances across multiple billing accounts
- **Value**: liquidity is optimized and account obligations are efficiently managed across the customer portfolio

**Description:**

As a **Billing Administrator**,
I want to **redistribute payment balances across multiple billing accounts**,
So that **liquidity is optimized and account obligations are efficiently managed across the customer portfolio**


**Key Capabilities:**

**1. Payment Transfer Initiation**
User initiates transfer operation from source billing account, system presents payment summary with current allocation.

**2. Transfer Reason Documentation**
User specifies business justification for transfer from predefined categories; additional details captured when custom reason selected.

**3. Destination Account Selection**
User searches and designates one or multiple target billing accounts, system displays account financial status and outstanding obligations.

**4. Amount Allocation**
User distributes payment across destinations with positive values; system dynamically tracks total allocated and remaining unallocated amounts.
    4.1 User optionally retains remaining balance on originating account

**5. Transfer Validation & Execution**
Upon confirmation, system validates allocation rules and completes transfer, updating all affected account balances.


**Acceptance Criteria:**

**1. Single Destination Transfer**
Given valid payment, When user allocates full amount to one destination with documented reason, Then system completes transfer and updates both accounts.

**2. Multi-Destination Split**
Given sufficient payment balance, When user distributes amounts across multiple destinations within payment limit, Then system executes proportional allocation successfully.

**3. Allocation Limit Enforcement**
Given defined payment amount, When total allocated exceeds available balance, Then system prevents execution until allocation adjusted.

**4. Partial Allocation with Retention**
Given unallocated remainder, When user elects to retain balance on source account, Then system applies remainder to source unapplied balance.

**5. Mandatory Justification**
Given custom transfer reason, When additional documentation missing, Then system blocks completion until details provided.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=514005863"
]

---

#### Feature: Unallocate Payments from Invoices During Transfer
- **Role**: Billing Administrator
- **Action**: transfer payments between billing accounts with automatic unallocation and reapplication capabilities
- **Value**: incorrect payment allocations can be corrected efficiently while maintaining accurate account balances and payment history

**Description:**

As a **Billing Administrator**,
I want to **transfer payments between billing accounts with automatic unallocation and reapplication capabilities**,
So that **incorrect payment allocations can be corrected efficiently while maintaining accurate account balances and payment history**


**Key Capabilities:**

**1. Payment Transfer Initiation**
User initiates transfer action for payments with status Unapplied, Allocated, or Partially Allocated from source billing account to one or more target billing accounts.

**2. Automatic Allocation Assessment**
System evaluates current payment allocation status against invoices or member records to determine if unallocation step is required before transfer execution.

**3. Conditional Unallocation Process**
When payment amounts are allocated, system automatically reverses existing invoice associations, creates unallocation activities, updates balance registers, and restores invoice items for future allocation availability.

**4. Payment Amount Transfer Execution**
System creates transfer activities, generates assignment items for source and target accounts, updates payment statuses (Transferred or Unapplied), and adjusts unapplied balance registers accordingly.

**5. Post-Transfer Balance Management**
Upon completion, transferred payment amounts become available on target account(s) unapplied balances for subsequent redistribution to invoices as needed.


**Acceptance Criteria:**

**1. Unallocation Prerequisite Validation**
Given payment is allocated to invoices, When transfer is initiated, Then system automatically executes unallocation process before transfer and previously allocated invoice items become available for reallocation.

**2. Full Transfer Completion**
Given entire payment amount is transferred, When transfer completes, Then source payment status becomes Transferred with zero amount and target account receives new unapplied payment record with identical transaction attributes.

**3. Partial Transfer Completion**
Given partial payment amount is transferred, When transfer completes, Then source payment retains unapplied status with remaining balance and target account receives proportional unapplied payment amount.

**4. Balance Register Consistency**
Given transfer execution, When balance operations complete, Then source account unapplied balance decreases by transferred amount and target account(s) unapplied balance increases correspondingly.

**5. Payment History Preservation**
Given payment transfer, When new payment records are created, Then transferred payments maintain original payment number, transaction date, and effective date for audit trail integrity.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=515214827"
]

---

#### Feature: Manage Payment Transfer with Incomplete Allocation Warnings
- **Role**: Billing Specialist
- **Action**: transfer payments with incomplete allocations
- **Value**: I can ensure accurate payment allocation before transfer or proceed with transfer while maintaining data integrity

**Description:**

As a **Billing Specialist**,
I want to **transfer payments with incomplete allocations**,
So that **I can ensure accurate payment allocation before transfer or proceed with transfer while maintaining data integrity**


**Key Capabilities:**

**Payment Transfer Initiation**
User initiates payment movement from source billing account. System evaluates allocation status to determine transfer pathway.

**Draft Allocation Detection**
When incomplete allocation exists, system presents conditional confirmation with impact disclosure and decision options.

**Transfer Decision Processing**
Upon confirmation, system executes payment transfer and automatically removes draft allocation. Upon cancellation, system retains current state enabling allocation completion.

**Data Integrity Safeguards**
System prevents orphaned draft allocations through automated cleanup or workflow interruption based on user choice.


**Acceptance Criteria:**

**Direct Transfer Path**
Given no draft allocation exists, when user initiates transfer, then system proceeds directly to transfer execution without interruption.

**Warning Presentation**
Given draft allocation exists, when transfer is initiated, then system displays confirmation with allocation status and consequences before proceeding.

**Confirmed Transfer Execution**
Given confirmation received, when system processes transfer, then payment moves to target account and draft allocation is automatically deleted.

**Cancelled Transfer State**
Given user cancels confirmation, when modal closes, then no transfer occurs and draft allocation remains available for completion.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=544444983"
]

---

#### Feature: Move Member Record Unapplied Balances to Billing Account Unapplied
- **Role**: Billing Administrator
- **Action**: move unapplied member record balances to billing account level during payment transfers
- **Value**: payment amounts are correctly allocated and transferred without manual intervention or balance discrepancies

**Description:**

As a **Billing Administrator**,
I want to **move unapplied member record balances to billing account level during payment transfers**,
So that **payment amounts are correctly allocated and transferred without manual intervention or balance discrepancies**


**Key Capabilities:**

**Balance Detection**
System identifies whether transfer involves Member Record Unapplied balances across one or more member records.

**User Notification & Confirmation**
Upon detection, user receives warning that amounts will be automatically moved to Billing Account Unapplied level. User is able to confirm to proceed or cancel the transfer operation.

**Automated Balance Movement**
When confirmed, system automatically migrates payment amounts from Member Record Unapplied to Billing Account Unapplied on current and/or destination accounts.

**Transfer Workflow Continuation**
User is able to proceed to complete payment transfer after balance movement is executed.


**Acceptance Criteria:**

**Balance Detection Trigger**
Given a payment transfer is initiated, When any portion exists on Member Record Unapplied balance, Then system displays conditional warning modal.

**Cancellation Handling**
Given warning modal is displayed, When user cancels or closes without confirming, Then transfer action is cancelled and no balance movements occur.

**Successful Balance Migration**
Given user confirms the warning, When automated movement executes, Then Member Record Unapplied amounts are moved to Billing Account Unapplied level.

**Transfer Completion**
Given balance movement succeeds, When navigation occurs, Then user proceeds to transfer drawer to finalize payment transfer operation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=631143009"
]

---

#### Feature: Unallocate Payments from Member Records Manually
- **Role**: Billing Administrator
- **Action**: unallocate payments from member records within a billing account
- **Value**: I can correct payment allocations and resolve overpayment discrepancies while maintaining accurate account balances

**Description:**

As a **Billing Administrator**,
I want to **unallocate payments from member records within a billing account**,
So that **I can correct payment allocations and resolve overpayment discrepancies while maintaining accurate account balances**


**Key Capabilities:**

**1. Payment Context Identification**
User accesses payment unallocation functionality within billing account context and reviews payment details including number, date, amount, and subtype.

**2. Unallocation Scope Selection**
User selects between two business scenarios: unallocating entire payment amounts from members or isolating member record overpayments only.

**3. Member Record Discovery & Filtering**
User locates target members through search capabilities or applies coverage-based filters to identify relevant allocation records.
    3.1 Upon selecting entire payment unallocation, system displays all allocated amounts and overpayments
    3.2 Upon selecting overpayment-only mode, system filters to show exclusively overpaid member records

**4. Member Record Selection**
User identifies and selects specific member records requiring unallocation adjustment from the filtered result set.

**5. Unallocation Execution**
User submits unallocation request, confirms the transaction, and system processes the payment movement reversal.

**6. Account Update Completion**
Upon successful processing, system returns user to billing account view with updated allocation status.


**Acceptance Criteria:**

**1. Payment Context Validation**
Given a billing account with allocated payments, When user initiates unallocation process, Then system displays payment details and applicable member records based on current allocations.

**2. Scope-Based Record Filtering**
Given unallocation scope selection, When user chooses entire payment option, Then system shows all allocated members; When user chooses overpayment-only option, Then system displays only members with overpayment amounts.

**3. Member Identification Capability**
Given multiple member records, When user applies search or coverage filters, Then system returns only matching records maintaining allocation data integrity.

**4. Selective Unallocation Processing**
Given selected member records, When user confirms unallocation action, Then system reverses payment allocation only from chosen members and preserves allocations for unselected members.

**5. Data Consistency Post-Transaction**
Given successful unallocation, When user returns to billing account, Then system reflects updated allocation balances and available payment amounts.

**6. Cancellation Safety**
Given unallocation in progress, When user cancels operation before confirmation, Then system prevents any allocation changes and maintains original state.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=603363462"
]

---

#### Feature: Generate Transfer Payment Events and BAM Messages
- **Role**: Billing Administrator
- **Action**: transfer payment allocations across billing accounts and generate transfer events for downstream processing
- **Value**: funds are reallocated accurately between accounts with full auditability and integrated bank processing when required

**Description:**

As a **Billing Administrator**,
I want to **transfer payment allocations across billing accounts and generate transfer events for downstream processing**,
So that **funds are reallocated accurately between accounts with full auditability and integrated bank processing when required**


**Key Capabilities:**

**Payment Transfer Initiation**
User is able to capture payment from source billing account with all original transaction attributes, specify transfer reason from predefined lookup values, and provide additional context when selecting 'Other' as reason.

**Multi-Destination Allocation**
User is able to distribute payment amounts across multiple target billing accounts, with system automatically calculating remaining balance on source account after deducting all transfer allocations.

**Bank Processing Integration**
Upon detecting bank processing requirement flag, system routes payment transfer event to Payment Hub for external bank-level handling and regulatory compliance processing.

**Audit Trail Generation**
System captures complete transfer lineage including creator, timestamps, modification history, and maintains linkage between source payment and all target destinations for full financial traceability.


**Acceptance Criteria:**

**1. Successful Single-Destination Transfer**
Given a payment exists on source billing account, When user initiates transfer to single target account with valid amount and reason, Then system creates transfer event, deducts amount from source, allocates to target, and records complete audit trail.

**2. Multi-Destination Split Transfer**
Given a payment with sufficient balance, When user allocates portions to multiple target accounts, Then system distributes amounts correctly, calculates accurate remaining balance on source, and maintains individual destination records.

**3. Bank Processing Routing**
Given transfer payment has bank processing flag enabled, When transfer event is generated, Then system routes event to Payment Hub for external processing before finalizing allocation.

**4. Incomplete Transfer Prevention**
Given user initiates transfer, When required information is missing or transfer amounts exceed source balance, Then system prevents event generation and retains original payment state.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=581112296"
]

---

### Epic: Paid-to-Date (PTD) & Account Balance Tracking

#### Feature: Calculate Paid-to-Date Using Configurable Strategies
- **Role**: Billing Administrator
- **Action**: calculate and track paid-to-date coverage using configurable business rules
- **Value**: I can accurately determine member coverage periods, support claims adjudication, and manage account delinquency across diverse billing scenarios

**Description:**

As a **Billing Administrator**,
I want to **calculate and track paid-to-date coverage using configurable business rules**,
So that **I can accurately determine member coverage periods, support claims adjudication, and manage account delinquency across diverse billing scenarios**


**Key Capabilities:**

**1. Strategy Selection & Execution**
System applies configurable PTD calculation strategy based on bill type: PTD(dr) compares cumulative daily premium to allocated payments; PTD(inv) evaluates invoice payment status; combined strategy uses maximum of both values. Self Bill calculates on-the-fly; List/Direct Bill executes via scheduled batch job.

**2. Allocated Payment Assessment**
System includes only allocated payments in PTD calculation, excluding unapplied balances. Handles payment gaps by tracking fully paid invoices after gaps and adjusting PTD accordingly for invoice-based strategies while maintaining continuous calculation for daily rate strategies.

**3. Member Status Event Handling**
Upon member cancellation, system freezes PTD at cancellation effective date. When member ports to new billing account, PTD freezes at port date on original account and resets to null on target account. After reinstatement, system applies conditional logic comparing cancellation, PTD, and reinstatement dates to determine final PTD value.


**Acceptance Criteria:**

**1. Strategy-Based Calculation**
Given a billing account with partial payment history, When PTD calculation executes using combined strategy, Then system computes both PTD(dr) and PTD(inv), selects maximum value, adds one day, and stores result as exclusive date.

**2. Payment Gap Handling**
Given invoices with payment gaps (e.g., Jan paid, Feb unpaid, Mar paid), When calculating PTD(inv), Then system counts paid invoices after gap and adds equivalent periods to last paid period before gap; prevents PTD progression beyond unpaid period.

**3. Member Lifecycle Transitions**
Given cancelled member with PTD beyond cancellation date, When PTD recalculates, Then system freezes PTD at cancellation effective date. Given reinstated member with BA PTD between cancellation and reinstatement dates, Then system sets MR PTD to cancellation effective date rather than BA PTD.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=806683774"
]

---

#### Feature: Track Real-Time Account Balance Status
- **Role**: Billing Administrator
- **Action**: Track real-time account balance status through Paid-to-Date calculations for True Group Billing Accounts
- **Value**: Accurate payment coverage visibility enables timely financial decisions and improves account reconciliation across all channels

**Description:**

As a **Billing Administrator**,
I want to **track real-time account balance status through Paid-to-Date calculations for True Group Billing Accounts**,
So that **accurate payment coverage visibility enables timely financial decisions and improves account reconciliation across all channels**


**Key Capabilities:**

**1. Payment Coverage Calculation**
System calculates exclusive Paid-to-Date for True Group Billing Accounts based on applied allocation strategy (Strategy 1: maximum of detail record PTD and invoice PTD; Strategy 2: invoice PTD only)

**2. Multi-Channel Balance Distribution**
System distributes calculated PTD values across all channels including balance dashboards, payment application interfaces, APIs, and third-party systems

**3. Member-Level Coverage Analysis**
When member records have different effective dates, system calculates individual PTD per member and returns NULL for members whose effective date falls after payment period

**4. Unpaid Account Handling**
Upon detecting no payment allocation to invoices, system displays member record effective date in interfaces while returning NULL via APIs and dash indicator in balance sections


**Acceptance Criteria:**

**1. Strategy-Based Calculation**
Given True Group Billing Account with payment allocation strategy applied, When payments are processed, Then system calculates exclusive PTD using correct formula (max of detail/invoice PTD for Strategy 1; invoice PTD only for Strategy 2)

**2. Multi-Member Coverage Tracking**
Given multiple member records with different effective dates, When invoice is paid, Then system returns individual PTD per member and NULL for members effective after payment period

**3. Zero Payment Scenario**
Given unpaid invoice on True Group account, When user views balance status, Then UI displays member effective dates, API returns NULL, and balance section shows dash indicator

**4. Cross-Channel Consistency**
Given calculated PTD value, When accessed through any channel (UI/API/third-party), Then all channels reflect identical exclusive PTD business logic and calculation results


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=650328066"
]

---

#### Feature: Process Payment Application and Allocation
- **Role**: Billing Administrator
- **Action**: process payment application and track paid-to-date balances for member accounts
- **Value**: accurate financial tracking ensures compliance, enables timely claims adjudication, and provides real-time account status visibility across systems

**Description:**

As a **Billing Administrator**,
I want to **process payment application and track paid-to-date balances for member accounts**,
So that **accurate financial tracking ensures compliance, enables timely claims adjudication, and provides real-time account status visibility across systems**


**Key Capabilities:**

**1. Payment Detection and Eligibility Assessment**
Automated job identifies billing accounts with allocated payments (full, under, or overpayments) against member records to determine calculation eligibility.

**2. Paid-To-Date Calculation and Persistence**
System calculates coverage period based on configured strategies and stores values at member record level for organizational accounts.

**3. Alternate Handling for Unpaid Accounts**
When no payments exist, system defaults to member record effective date and marks calculation as unavailable.

**4. Cross-System Data Provisioning**
Upon request from external systems, billing subsystem provides on-demand calculated paid-to-date values to support claims and policy operations.

**5. Multi-Channel Status Visibility**
Calculated values populate across payment application, reallocation, refund, and account view workflows for operational consistency.


**Acceptance Criteria:**

**1. Successful Automated Calculation**
Given a member record with allocated payments, When the scheduled calculation job executes, Then paid-to-date value is computed per configured strategy and persisted to the database.

**2. Unpaid Account Handling**
Given a member record without payment allocations, When calculation is attempted, Then system stores null value and displays member effective date across all interfaces.

**3. External System Integration**
Given an external system requests paid-to-date data, When the request is received for a specific member record, Then system calculates and returns current value in real-time.

**4. Cross-Workflow Consistency**
Given paid-to-date has been calculated, When user accesses payment application, reallocation, refund, or view workflows, Then identical calculated value displays in all contexts.

**5. Calculation Scope Enforcement**
Given multiple member records under a list bill account, When calculation executes, Then each member record receives independent paid-to-date computation based on its payment history.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=555080661"
]

---

#### Feature: Manage Payment Transaction Reversals
- **Role**: Billing Administrator
- **Action**: reverse payment transactions and recalculate account paid-to-date status
- **Value**: accurate account balances and coverage eligibility are maintained following payment corrections

**Description:**

As a Billing Administrator,
I want to reverse payment transactions and recalculate account paid-to-date status,
So that accurate account balances and coverage eligibility are maintained following payment corrections


**Key Capabilities:**

**1. Payment Reversal Initiation**
User is able to identify and initiate reversal of allocated payment transactions, triggering automatic recalculation workflows based on billing account configuration

**2. Multi-Strategy PTD Recalculation**
Upon reversal submission, system recalculates paid-to-date using applicable strategy: PTD(inv) for invoice-based, PTD(dr) for daily-rate comparison, or combined MAX strategy
    2.1 List/Direct Bill accounts use cumulated daily rate versus allocated payments plus write-off transactions
    2.2 Self Bill accounts calculate on-the-fly using average daily rate methodology

**3. Account Balance Adjustment**
System updates billing account and member record balances, adjusting allocated amounts and recalculating unapplied balances while preserving transaction audit trail

**4. Eligibility Status Synchronization**
When PTD recalculation completes, system propagates exclusive PTD dates to DXP and external systems, ensuring consistent member eligibility data across platforms


**Acceptance Criteria:**

**1. Reversal Processing Accuracy**
Given allocated payment exists, When reversal is submitted, Then system removes allocation from PTD calculation and recalculates using account-specific strategy without manual intervention

**2. Multi-Account Type Support**
Given different billing account types, When reversal triggers recalculation, Then PTD(dr) uses correct methodology (cumulated daily rate for List/Direct Bill, average daily rate for Self Bill)

**3. Payment Gap Handling**
Given reversal creates payment gap between paid invoices, When PTD(inv) recalculates, Then system counts fully paid invoices after gap and adds periods to last paid invoice before gap

**4. Cancelled Member Protection**
Given member record is cancelled, When reversal affects historical payments, Then PTD remains frozen at cancellation effective date per business rules

**5. External System Consistency**
Given PTD recalculation completes, When system propagates to external systems, Then API and DXP receive exclusive PTD dates consistent with backend calculation (NULL handling per account type)

**6. Write-Off Transaction Integration**
Given issued and reversed write-offs exist, When PTD(dr) recalculates for List/Direct Bill, Then system includes write-off transaction sums in allocated payment comparison


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=806683774"
]

---

#### Feature: Provide PTD Data to External Systems via API
- **Role**: Billing Administrator
- **Action**: provide real-time paid-to-date calculations to external systems through API integration
- **Value**: external systems can access accurate premium payment coverage information to support claims adjudication and policy eligibility decisions

**Description:**

As a **Billing Administrator**,
I want to **provide real-time paid-to-date calculations to external systems through API integration**,
So that **external systems can access accurate premium payment coverage information to support claims adjudication and policy eligibility decisions**


**Key Capabilities:**

**1. PTD Calculation Request Intake**
System receives API request containing member identification (Member Record Number, Effective Date) and optional target date (defaults to current system date)

**2. Real-Time PTD Computation**
System calculates Paid To Date on-the-fly using configured strategies and business rules, selecting appropriate billing account based on target date and member record transitions
    2.1 When PTD cannot be calculated, system returns NULL value to requesting system

**3. PTD Data Response Delivery**
System returns calculated PTD value and associated billing account information to external requestor via API response


**Acceptance Criteria:**

**1. Successful PTD Calculation**
Given a valid member record with active billing account, When external system requests PTD with required identifiers, Then system calculates and returns PTD value with associated billing account

**2. Account Transition Handling**
Given a member scheduled to transition between billing accounts, When PTD is requested for current date, Then system selects current billing account and calculates PTD accordingly

**3. Calculation Failure Response**
Given insufficient data to calculate PTD, When calculation is attempted, Then system returns NULL PTD indicator without blocking external system operations


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=555080246"
]

---

#### Feature: Filter Payment and Refund Transactions by Criteria
- **Role**: Billing Administrator
- **Action**: Filter and retrieve payment and refund transactions using multiple business criteria
- **Value**: I can efficiently locate and analyze specific financial transactions for reconciliation, reporting, and account management purposes

**Description:**

As a **Billing Administrator**,
I want to **filter and retrieve payment and refund transactions using multiple business criteria**,
So that **I can efficiently locate and analyze specific financial transactions for reconciliation, reporting, and account management purposes**


**Key Capabilities:**

**1. Multi-Criteria Transaction Filtering**
User is able to apply simultaneous filters across transaction type, status, and date range to narrow result sets for targeted analysis.

**2. Dynamic Filter Interdependency Management**
When transaction type is selected, system automatically constrains available status options to applicable values and vice versa, preventing invalid filter combinations.

**3. Inclusive Date Range Selection**
User is able to define transaction date boundaries where selected from/to dates are included in the calculation interval.

**4. Date Logical Validation**
Upon date range specification, system validates chronological consistency and prevents submission if from-date exceeds to-date.


**Acceptance Criteria:**

**1. Successful Multi-Filter Application**
Given multiple filter criteria are selected, When user applies filters, Then system returns only transactions matching all specified criteria simultaneously.

**2. Dynamic Status Constraint by Transaction Type**
Given transaction type is selected, When user accesses status options, Then system displays only statuses applicable to the selected transaction type.

**3. Dynamic Transaction Type Constraint by Status**
Given status is selected, When user accesses transaction type options, Then system displays only types compatible with the selected status.

**4. Date Range Validation**
Given date range is specified, When from-date exceeds to-date, Then system prevents filter execution and notifies user of chronological inconsistency.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=618283726"
]

---

#### Feature: Execute Scheduled PTD Calculation Jobs
- **Role**: Billing Administrator
- **Action**: execute automated paid-to-date calculation jobs on scheduled intervals
- **Value**: account balances remain accurate and current without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **execute automated paid-to-date calculation jobs on scheduled intervals**,
So that **account balances remain accurate and current without manual intervention**


**Key Capabilities:**

**1. Scheduled Job Initiation**
System automatically triggers PTD calculation jobs based on predefined schedule configurations to process billing accounts systematically.

**2. Configurable Calculation Strategy Application**
System applies business rule-driven calculation strategies to determine accurate paid-to-date amounts across different account types and payment scenarios.

**3. Batch Account Processing**
System processes multiple billing accounts in batch mode, calculating PTD for each account based on applied payments and billing history.

**4. Exception Handling and Logging**
When calculation anomalies or data inconsistencies are detected, system logs exceptions and flags accounts requiring manual review.

**5. Balance Reconciliation**
System reconciles calculated PTD values against billing account balances to ensure financial accuracy.

**6. Job Completion Notification**
Upon successful completion, system generates execution summary with processing statistics and exception reports.


**Acceptance Criteria:**

**1. Successful Scheduled Execution**
Given a configured schedule exists, When the designated time arrives, Then the system initiates the PTD calculation job automatically without manual intervention.

**2. Strategy-Based Calculation Accuracy**
Given diverse account types with different calculation rules, When the job processes accounts, Then the system applies appropriate configurable strategies and produces accurate PTD values.

**3. Complete Batch Processing**
Given multiple accounts require calculation, When the job executes, Then all eligible accounts are processed and updated with current PTD status.

**4. Exception Management**
Given calculation anomalies occur during processing, When errors are encountered, Then the system logs exceptions, continues processing remaining accounts, and generates exception reports.

**5. Data Integrity Validation**
Given PTD calculations complete, When reconciliation occurs, Then account balances reflect accurate paid-to-date positions consistent with applied payments.

**6. Execution Reporting**
Given job completion, When processing finishes, Then the system provides summary reports with processing statistics and identified exceptions for administrative review.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=790073891"
]

---

#### Feature: Display PTD Status Across Multiple UI Contexts
- **Role**: Billing Administrator
- **Action**: track and display cumulative paid-to-date status across the True Group billing account lifecycle
- **Value**: stakeholders can verify payment coverage, reconcile account balances, and support downstream claims and policy subsystems with accurate payment position data

**Description:**

As a **Billing Administrator**,
I want to **track and display cumulative paid-to-date status across the True Group billing account lifecycle**,
So that **stakeholders can verify payment coverage, reconcile account balances, and support downstream claims and policy subsystems with accurate payment position data**


**Key Capabilities:**

**1. Automated Batch PTD Calculation**
Scheduled job detects billing accounts with at least one invoice marked 'Paid' or 'Partially Paid', then calculates PTD per account using configured business rules and stores the result.

**2. Conditional Data Handling**
When no allocated payment exists, system stores NULL and displays member effective date in operational views; balance sections display a dash indicator.

**3. Multi-Context Display Integration**
Calculated PTD is surfaced across payment application, consolidated billing views, member record grids, modal premium views, and refund workflows.

**4. On-Demand External System Integration**
Upon request from external subsystems, system performs real-time PTD calculation and provides the value for claims or policy validation.


**Acceptance Criteria:**

**1. Scheduled Calculation Success**
Given a True Group billing account with at least one paid or partially paid invoice, When the scheduled PTD job runs, Then the system calculates and stores PTD per configured rules.

**2. No Payment Scenario**
Given a billing account with only issued invoices and no allocated payments, When PTD calculation is triggered, Then system stores NULL and displays member effective date in operational views and dash in balance section.

**3. Multi-Context Display Consistency**
Given PTD has been calculated, When users access payment application, consolidated billing, or member record views, Then the same PTD value is displayed across all contexts.

**4. External System Request Fulfillment**
Given an external subsystem requests PTD for a member record, When the request is received, Then system calculates PTD on-the-fly and returns the value immediately.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=552019381"
]

---

#### Feature: Calculate PTD for Self-Bill Billing Accounts
- **Role**: Billing Administrator
- **Action**: calculate and track paid-to-date values for self-bill master policies
- **Value**: accurate premium payment tracking enables timely claims adjudication and policy coverage validation

**Description:**

As a **Billing Administrator**,
I want to **calculate and track paid-to-date values for self-bill master policies**,
So that **accurate premium payment tracking enables timely claims adjudication and policy coverage validation**


**Key Capabilities:**

**Payment Status Detection**
System monitors self-bill billing accounts and identifies invoices marked as Paid or Partially Paid to trigger PTD calculation workflow

**PTD Computation**
System applies configurable calculation strategies to derive paid-to-date values at master policy level using business rule logic for self-bill scenarios

**Default Handling for Incomplete Payment Data**
When no paid invoices exist or only issued invoices are present, system defaults PTD display to master policy effective date

**Cross-System Data Provision**
Upon request from external subsystems, system provides calculated PTD values to support claims adjudication and policy validation workflows


**Acceptance Criteria:**

**Successful PTD Calculation with Paid Invoices**
Given a self-bill account with at least one invoice in Paid or Partially Paid status, When the system performs PTD calculation, Then the calculated value reflects payment application according to configured business rules

**Default Value Assignment for Unpaid Accounts**
Given a self-bill account with no paid invoices or only issued invoices, When PTD is requested, Then the system displays the master policy effective date as the default PTD value

**External System Integration**
Given an external subsystem requests PTD for a master policy, When the calculation is complete, Then the system successfully transmits the PTD value to the requesting subsystem

**Master Policy Level Accuracy**
Given multiple master policies on a single self-bill account, When PTD is calculated, Then each master policy receives an independently calculated PTD value


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=677154974"
]

---

#### Feature: Maintain Payment Application History
- **Role**: Billing Administrator
- **Action**: maintain accurate paid-to-date calculations across billing accounts and member records
- **Value**: I can determine coverage validity, support claims adjudication, and ensure policy enforcement based on premium payment status

**Description:**

As a **Billing Administrator**,
I want to **maintain accurate paid-to-date calculations across billing accounts and member records**,
So that **I can determine coverage validity, support claims adjudication, and ensure policy enforcement based on premium payment status**


**Key Capabilities:**

**1. Billing Account Classification**
System identifies bill type and payment allocation mode to determine appropriate PTD calculation strategy

**2. Multi-Strategy PTD Computation**
System applies invoice-based, daily-rate-based, or combined calculation methods based on account configuration, comparing allocated payments against premium obligations

**3. Member Record Status Handling**
Upon member cancellation, reinstatement, or transition, system recalculates and caps PTD at status-effective dates

**4. Payment Allocation Processing**
When payments are applied or reallocated, system triggers PTD recalculation for affected member records, excluding unapplied balances

**5. Cross-Subsystem PTD Distribution**
System provides calculated PTD values to Claims and Policy subsystems for coverage validation and enforcement decisions


**Acceptance Criteria:**

**1. Bill Type-Based Calculation**
Given a billing account with defined bill type and allocation mode, When PTD calculation is triggered, Then system applies the correct calculation strategy (invoice-based, daily-rate-based, or combined)

**2. Status-Driven PTD Capping**
Given a member record with cancellation or transition effective date, When calculated PTD exceeds the status-effective date, Then system caps PTD at the status-effective date

**3. Payment Allocation Impact**
Given new payment allocation or reallocation, When transaction completes, Then system recalculates PTD for all affected member records and excludes unapplied balances

**4. External Subsystem Integration**
Given a PTD request from Claims or Policy subsystems, When PTD value is available, Then system provides current inclusive PTD for coverage validation decisions


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=557953350"
]

---

### Epic: Write-Off & Bad Debt Management

#### Feature: Initiate Manual Write-Off Requests with Approval Routing
- **Role**: Billing Administrator
- **Action**: initiate and process manual write-off requests with automated approval routing based on amount thresholds and user authority
- **Value**: outstanding invoice balances are efficiently written off while maintaining proper financial controls and approval governance

**Description:**

As a **Billing Administrator**,
I want to **initiate and process manual write-off requests with automated approval routing based on amount thresholds and user authority**,
So that **outstanding invoice balances are efficiently written off while maintaining proper financial controls and approval governance**


**Key Capabilities:**

**1. Write-Off Request Initiation**
User initiates write-off from invoice actions, selecting full or partial write-off type with business justification and supporting details.

**2. Request Validation & Queueing**
System validates invoice eligibility, queues request for asynchronous processing, and confirms write-off generation has started.

**3. Approval Routing Determination**
System evaluates write-off amount against configured thresholds and user authority levels to determine if auto-approval applies or manual approval is required.
    3.1 When amount is within no-approval threshold, system auto-approves request
    3.2 When amount exceeds threshold but within user authority and auto-approval enabled, system auto-approves based on authority level

**4. Write-Off Processing**
Upon approval, system issues write-off transaction, allocates amounts to invoice items, recalculates balances, and updates account status.

**5. Approval Task Creation**
When approval required, system creates write-off in pending status and generates approval task for authorized reviewer.


**Acceptance Criteria:**

**1. Successful Auto-Approved Write-Off**
Given write-off amount is within no-approval threshold, When user submits request with valid justification, Then system auto-approves, issues write-off transaction, allocates to invoice, and updates balances without manual approval.

**2. Authority-Based Auto-Approval**
Given write-off amount exceeds threshold but within user authority and auto-approval enabled, When user submits request, Then system auto-approves based on authority level and processes write-off immediately.

**3. Pending Approval Routing**
Given write-off amount exceeds user authority limits, When user submits request, Then system creates write-off in pending status and generates approval task for authorized reviewer.

**4. Invalid Invoice Rejection**
Given invoice status is not issued or partially paid, When user attempts write-off initiation, Then system prevents submission and notifies user of ineligibility.

**5. Partial Write-Off Validation**
Given user selects partial write-off, When entered amount exceeds invoice remaining due, Then system prevents submission until valid amount provided.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=672765810"
]

---

#### Feature: Approve or Reject Manual Write-Off Transactions
- **Role**: Billing Supervisor
- **Action**: review and adjudicate manual write-off requests through authority-based approval workflows
- **Value**: I can ensure financial controls are enforced while efficiently managing bad debt resolution and maintaining accurate billing account balances

**Description:**

As a **Billing Supervisor**,
I want to **review and adjudicate manual write-off requests through authority-based approval workflows**,
So that **I can ensure financial controls are enforced while efficiently managing bad debt resolution and maintaining accurate billing account balances**


**Key Capabilities:**

**Authority Verification & Transaction Routing**
Upon accessing pending write-off transactions, system validates user privilege level against approval thresholds and surfaces eligible transactions for adjudication

**Approval Execution & Financial Allocation**
When user approves write-off, system allocates amounts to invoices, recalculates invoice balances and statuses, updates billing account ledgers, and triggers paid-to-date recalculation

**Rejection Processing & Task Closure**
If user rejects write-off, system captures rejection rationale, updates transaction status, notifies stakeholders, and closes approval workflow

**Cross-System Notification**
Upon completion, system generates business activity messages and fires events to notify compensation and accounting subsystems of write-off disposition


**Acceptance Criteria:**

**1. Authority-Based Access Control**
Given user lacks required approval privileges, when accessing write-off transactions, then system restricts approval/rejection actions and displays view-only access

**2. Successful Approval Execution**
Given user approves write-off with sufficient authority, when confirmation is submitted, then system updates status to 'Issued', allocates amounts to invoices, recalculates balances, generates approval messages, and closes approval task

**3. Rejection With Rationale**
Given user rejects write-off, when rejection reason is provided, then system updates status to 'Rejected', records rationale, notifies stakeholders, and closes workflow without financial impact

**4. Cancellation Handling**
Given user initiates approval, when cancellation is selected before confirmation, then system preserves pending status and discards approval action without changes


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=685966232"
]

---

#### Feature: Reverse Manual Write-Offs with Reason Tracking
- **Role**: Billing Administrator
- **Action**: reverse previously executed manual write-offs with documented justification
- **Value**: invoice balances and account receivables accurately reflect collectability while maintaining audit compliance

**Description:**

As a **Billing Administrator**,
I want to **reverse previously executed manual write-offs with documented justification**,
So that **invoice balances and account receivables accurately reflect collectability while maintaining audit compliance**


**Key Capabilities:**

**1. Write-Off Reversal Initiation**
User identifies the target manual write-off transaction requiring reversal and initiates the reversal action.

**2. Reason Documentation**
User provides mandatory reversal justification by selecting predefined reason categories and optionally documenting additional context.

**3. Offsetting Transaction Creation**
System automatically generates reverse transaction with opposite sign amount, marks it as reversed status, and applies manual subtype classification.

**4. Financial Recalculation Cascade**
System recalculates invoice remaining balances, updates invoice payment status, refreshes all billing account balances, and triggers paid-to-date recalculation jobs.

**5. Cross-System Notification**
System broadcasts reversal events to business activity monitoring, compensation subsystems, and downstream financial systems for synchronization.


**Acceptance Criteria:**

**1. Authorization Validation**
Given user lacks reversal privileges, When attempting write-off reversal, Then system denies access and prevents transaction modification.

**2. Mandatory Reason Enforcement**
Given reversal process initiated, When user attempts confirmation without selecting reason, Then system prevents submission until justification provided.

**3. Offsetting Transaction Accuracy**
Given approved reversal with original write-off amount, When system creates reverse transaction, Then new transaction reflects equal opposite amount with reversed status.

**4. Balance Recalculation Integrity**
Given successful reversal execution, When system completes processing, Then invoice remaining due, account balances, and paid-to-date metrics reflect reversed write-off impact.

**5. Audit Trail Completeness**
Given completed reversal transaction, When reviewing transaction history, Then system displays both original write-off and reversal with documented reasons and timestamps.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=685975297"
]

---

#### Feature: Process Automated Small Balance Write-Offs Based on Tolerance Limits
- **Role**: Billing Administrator
- **Action**: automate write-offs for invoices with small outstanding balances based on configured tolerance thresholds
- **Value**: I can reduce operational overhead, eliminate manual intervention for negligible balances, maintain accurate accounts receivable records, and improve financial closure efficiency

**Description:**

As a **Billing Administrator**,
I want to **automate write-offs for invoices with small outstanding balances based on configured tolerance thresholds**,
So that **I can reduce operational overhead, eliminate manual intervention for negligible balances, maintain accurate accounts receivable records, and improve financial closure efficiency**


**Key Capabilities:**

**Invoice Eligibility Assessment**
System evaluates billing accounts sequentially, prioritizing oldest invoices with 'Issued' or 'Partially Paid' status, validating absence of prior non-reversed write-offs and retrieving tolerance configuration rules from policy engine.

**Tolerance Validation & Calculation**
System determines applicable tolerance limits, confirms write-off eligibility criteria, validates invoice balance falls within approved thresholds, and sequences write-off activities within account processing workflow.

**Write-Off Transaction Execution**
Upon successful validation, system issues write-off transactions, distributes amounts across unpaid invoice items, recalculates invoice and account balances, and updates invoice status to reflect payment completion.

**Financial Reconciliation & Notification**
System recalculates paid-to-date metrics, generates audit messages, notifies compensation subsystem of write-off allocations, and triggers financial events for downstream system integration and reporting.


**Acceptance Criteria:**

**1. Automated Processing Initiation**
Given the write-off job executes on schedule, When eligible billing accounts exist, Then system processes accounts sequentially starting with oldest qualifying invoices.

**2. Tolerance Threshold Enforcement**
Given an invoice meets status criteria, When balance exceeds configured tolerance limit or tolerance type mismatches, Then system skips invoice and continues to next eligible record without issuing write-off.

**3. Successful Write-Off Completion**
Given invoice passes all validation checks, When write-off transaction executes, Then system reduces invoice balance to zero, updates status to 'Paid', recalculates account balances, and generates confirmation message.

**4. Validation Failure Handling**
Given asynchronous validations fail during processing, When system detects errors, Then write-off is cancelled, error message generated, and cancelled activity recorded for audit visibility.

**5. Cross-System Notification**
Given write-off successfully allocates to invoice items, When transaction completes, Then system fires integration events to compensation subsystem and generates financial reporting messages for reconciliation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=634009393"
]

---

#### Feature: Automatically Reverse Write-Offs Upon Payment Allocation Changes
- **Role**: Billing Administrator
- **Action**: automatically reverse write-off transactions when payment allocations change
- **Value**: invoice balances and account statuses remain accurate and compliant with current payment states

**Description:**

As a **Billing Administrator**,
I want to **automatically reverse write-off transactions when payment allocations change**,
So that **invoice balances and account statuses remain accurate and compliant with current payment states**


**Key Capabilities:**

**Triggered Reversal Detection**
System identifies payment allocation changes affecting invoices with existing small balance or manual write-offs, including payment declines, reversals, suspensions, transfers, reallocations, or new allocations.

**Automatic Reversal Transaction Creation**
System generates offsetting write-off transactions with opposite signs, matching amounts, 'Reversed' status, and 'Automatic' subtype for all affected invoices.

**Financial Recalculation Cascade**
System recalculates invoice remaining due balances, payment-based invoice statuses, and all billing account balances according to established calculation rules.

**Compensation and Integration Notifications**
System generates appropriate reversal messages, fires reversal events for invoice items, notifies compensation subsystem, and triggers paid-to-date recalculation jobs for group or individual billing contexts.


**Acceptance Criteria:**

**1. Payment Allocation Change Triggers Reversal**
Given an invoice has an active small balance or manual write-off, When a payment allocation change occurs (decline, reverse, suspend, transfer, reallocation, or manual unallocation), Then the system automatically creates reversal transactions with opposite sign amounts and 'Reversed' status.

**2. New Payment Allocation Triggers Reversal**
Given an invoice was previously written off, When a new payment is allocated to that invoice through any method, Then the system reverses existing write-offs and recalculates invoice balances.

**3. Financial State Consistency**
Given write-off reversals are created, When the reversal process completes, Then invoice remaining due, invoice status, and all billing account balances reflect current payment allocation state accurately.

**4. Downstream System Synchronization**
Given a write-off reversal occurs, When the transaction is finalized, Then appropriate reversal messages are generated, compensation subsystem is notified, and paid-to-date calculations are triggered for applicable billing contexts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=666809877"
]

---

#### Feature: Calculate Write-Off Allocation Amounts Across Invoice Items
- **Role**: Billing Administrator
- **Action**: allocate write-off amounts across invoice items using configurable allocation strategies
- **Value**: outstanding balances are reduced systematically according to business priorities and regulatory compliance requirements

**Description:**

As a **Billing Administrator**,
I want to **allocate write-off amounts across invoice items using configurable allocation strategies**,
So that **outstanding balances are reduced systematically according to business priorities and regulatory compliance requirements**


**Key Capabilities:**

**Write-Off Submission and Validation**
User is able to apply manual write-off amount to a selected invoice. System prevents write-off from exceeding invoice's remaining due balance.

**Allocation Strategy Determination**
System retrieves payment allocation configuration settings (usePriorityRules and coveragePriorityOrder). Upon configuration analysis, system selects appropriate allocation strategy from five available methods.

**Priority-Based Distribution**
When priority rules are enabled, system groups invoiced items by invoicing period, modal period, and premium sequence effective date. System covers items starting from highest priority group, applying proportional formulas when groups cannot be fully covered.

**Proportional Calculation and Rounding**
System calculates allocation coefficients using remaining due amounts. System distributes write-off proportionally across eligible items, excludes negative items from allocation, and applies rounding differences to randomly selected items.


**Acceptance Criteria:**

**1. Write-Off Amount Constraint**
Given a write-off is submitted for an invoice, When the write-off amount exceeds the invoice's remaining due, Then system rejects the transaction and prevents allocation.

**2. Strategy Selection Based on Configuration**
Given payment allocation configuration specifies priority rules and coverage order, When write-off allocation is initiated, Then system applies the corresponding allocation strategy matching the configuration parameters.

**3. Priority-Based Allocation Execution**
Given priority rules are enabled with specific coverage order, When write-off amount is insufficient to cover all groups, Then system allocates in priority sequence and distributes remaining amount proportionally within the partially covered group.

**4. Negative Item Exclusion**
Given invoice contains negative invoice items, When write-off allocation is calculated, Then system excludes negative items from remaining due calculation and assigns zero allocation to them.

**5. Proportional Distribution Accuracy**
Given write-off is distributed across multiple items, When allocation calculations are complete, Then system ensures total allocated amounts equal write-off amount after applying rounding differences to randomly selected items.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=681714679"
]

---

#### Feature: Configure Write-Off Approval Authority Levels and Limits
- **Role**: Billing Administrator
- **Action**: configure hierarchical approval thresholds for write-off transactions based on bill type, geography, and user authority levels
- **Value**: I can enforce proper financial controls and ensure write-offs are approved at appropriate organizational levels based on risk and amount

**Description:**

As a **Billing Administrator**,
I want to **configure hierarchical approval thresholds for write-off transactions based on bill type, geography, and user authority levels**,
So that **I can enforce proper financial controls and ensure write-offs are approved at appropriate organizational levels based on risk and amount**


**Key Capabilities:**

**1. Approval Threshold Definition**
User is able to establish six-tier authority levels (0-5) with progressively increasing approval limits, where Level 5 grants unlimited authority and each lower level has defined monetary caps

**2. Bill Type-Specific Rule Configuration**
User is able to configure distinct approval thresholds for List Bill/Self-Bill versus Individual Direct bill types, each with different auto-approval floors and authority level limits

**3. Multi-Dimensional Control Parameters**
User is able to apply geographic constraints across all US states and Canadian provinces, and define payment allocation mode applicability exclusively for List Bill scenarios

**4. Automatic Approval Determination**
When a write-off transaction is submitted, system evaluates amount against configured dimensional parameters to automatically route for approval or grant immediate approval based on authority level match


**Acceptance Criteria:**

**1. Authority Level Enforcement**
Given configured approval limits exist, When a write-off amount is processed, Then system validates user authority level and prevents approval if amount exceeds their authorized threshold

**2. Bill Type Differentiation**
Given bill type is List Bill, When write-off amount is $75, Then system requires approval from Authority Level 1 or higher; Given bill type is Individual Direct with same amount, Then system requires Authority Level 2 or higher

**3. Geographic Uniqueness Validation**
Given geography dimension configuration, When administrator attempts to assign duplicate state/province values, Then system prevents configuration save and prompts for unique values

**4. Automatic Approval Below Threshold**
Given List Bill write-off of $50 or less, When transaction is submitted, Then system automatically approves without routing; Given Individual Direct write-off of $20 or less, Then automatic approval is granted


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=703500901"
]

---

#### Feature: Manage Write-Off Actions Based on Status and User Privileges
- **Role**: Billing Administrator
- **Action**: manage write-off lifecycle actions based on status, subtype, and authority privileges
- **Value**: write-offs are properly controlled, approved, and reversed according to business rules and user authorization levels

**Description:**

As a **Billing Administrator**,
I want to **manage write-off lifecycle actions based on status, subtype, and authority privileges**,
So that **write-offs are properly controlled, approved, and reversed according to business rules and user authorization levels**


**Key Capabilities:**

**1. Write-Off Status Evaluation**
System evaluates current write-off status, subtype classification, reversal history, and user privilege assignments to determine available actions.

**2. Reverse Manual Write-Off**
When write-off is issued, manual subtype, not fully reversed, and user holds reversal privilege, user is able to reverse the write-off transaction.

**3. Approve Pending Write-Off**
When write-off is pending, manual subtype, amount within authority level, and user holds approval privilege, user is able to approve and advance the write-off.

**4. Reject Pending Write-Off**
When write-off is pending, manual subtype, amount within authority level, and user holds approval privilege, user is able to reject and prevent write-off processing.


**Acceptance Criteria:**

**1. Reversal Authorization**
Given a write-off in issued status with manual subtype, when user has reversal privilege and write-off is not fully reversed, then system enables reversal action.

**2. Approval Authority Validation**
Given a pending manual write-off, when user has approval privilege but write-off amount exceeds authority level limit, then system prevents approval action.

**3. Rejection Authorization**
Given a pending manual write-off within authority limit, when user has approval privilege, then system enables rejection action with reason documentation.

**4. Privilege-Based Action Filtering**
Given any write-off record, when user lacks required privileges, then system hides unauthorized actions regardless of status or amount.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=685966063"
]

---

#### Feature: Track Financial Impact of Write-Offs on Invoice and Account Balances
- **Role**: Billing Administrator
- **Action**: manage write-off transactions and track their financial impact on invoice and account balances
- **Value**: I can accurately reduce uncollectible balances, maintain proper accounting records, and ensure invoice settlement status reflects true financial position

**Description:**

As a Billing Administrator,
I want to manage write-off transactions and track their financial impact on invoice and account balances,
So that I can accurately reduce uncollectible balances, maintain proper accounting records, and ensure invoice settlement status reflects true financial position


**Key Capabilities:**

**1. Write-Off Transaction Initiation**
User initiates manual write-off for invoice with specified amount and allocation method. System accepts proportional or custom allocation across member records.

**2. Balance Recalculation and Settlement**
Upon transaction creation, system recalculates invoice remaining due by subtracting write-off amount. System updates invoice status from Issued to Partially Paid or Paid based on remaining balance.

**3. Account Impact Recording**
System updates billing account balances including Write-Offs and Balance Adjustments, Due and Unpaid, and Account Balance. System maintains member-level allocation tracking.

**4. Sequential Write-Off Processing**
When multiple write-offs occur, system accumulates transactions cumulatively while maintaining individual transaction records. System allows future allocations until invoice fully settled.

**5. Automatic Small Balance Resolution**
If remaining balance falls within tolerance threshold after manual write-off, system automatically issues small balance write-off to fully settle invoice.

**6. Allocation Control Enforcement**
When invoice reaches zero remaining due, system blocks further payment or write-off allocations to prevent over-application.


**Acceptance Criteria:**

**1. Complete Settlement Processing**
Given invoice with partial payment applied, when user settles remaining balance via write-off, then system allocates proportionally, sets remaining due to zero, updates status to Paid, and blocks future allocations.

**2. Partial Write-Off Handling**
Given unpaid invoice, when user applies partial write-off with custom allocation, then system updates remaining due accordingly, changes status to Partially Paid, and permits future transactions up to remaining amount.

**3. Cumulative Tracking Accuracy**
Given invoice with existing write-off, when user applies additional write-off, then system accumulates both transactions in total write-offs, recalculates remaining due from cumulative total, and maintains individual transaction records.

**4. Automatic Threshold Triggering**
Given invoice with remaining balance within tolerance limit, when manual write-off reduces balance below threshold, then system automatically issues small balance write-off for exact remaining amount and updates status to Paid.

**5. Account Balance Integrity**
Given any write-off transaction, when system processes it, then Write-Offs and Balance Adjustments increase, Due and Unpaid decrease by same amount, and Total Paid remains unchanged.

**6. Member-Level Allocation**
Given write-off settling specific member records, when remaining due exists on other members, then system restricts future allocations to only unsettled member records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=683121565"
]

---

#### Feature: Recalculate Carry Forward Tolerance Flags After Write-Off Transactions
- **Role**: Billing Operations
- **Action**: recalculate and manage invoice tolerance flags following payment or write-off transactions
- **Value**: invoices are accurately flagged for tolerance treatment, preventing erroneous delinquency actions and ensuring proper balance carry-forward

**Description:**

As a **Billing Operations**,
I want to **recalculate and manage invoice tolerance flags following payment or write-off transactions**,
So that **invoices are accurately flagged for tolerance treatment, preventing erroneous delinquency actions and ensuring proper balance carry-forward**


**Key Capabilities:**

**1. Invoice Tolerance Evaluation Initiation**
Upon completion of payment allocation, payment reversal, or negative invoice reconciliation, the system identifies all invoices on the billing account requiring tolerance reassessment, starting with the oldest invoice.

**2. Tolerance Configuration Retrieval & Calculation**
System retrieves applicable tolerance parameters and calculates tolerance limits. When tolerance type is Carry Forward, system evaluates whether unpaid balance falls within threshold.

**3. Tolerance Flag Assignment**
System assigns Tolerance flag to qualifying invoices with balances within limits, enabling balance carry-forward to next billing cycle and exclusion from delinquency processes.

**4. Tolerance Flag Removal**
System removes Tolerance flags when invoices are fully paid or when outstanding balance exceeds tolerance threshold, restoring standard collection treatment.


**Acceptance Criteria:**

**1. Tolerance Flag Applied for Qualifying Balances**
Given an invoice status is Partially Paid and balance is within configured Carry Forward tolerance limit, When tolerance recalculation completes, Then system assigns Tolerance flag and excludes invoice from automatic delinquency.

**2. Tolerance Flag Removed Upon Full Payment**
Given an invoice with Tolerance flag is fully paid, When recalculation executes, Then system removes Tolerance flag from invoice.

**3. Tolerance Flag Removed When Threshold Exceeded**
Given invoice balance exceeds tolerance limit, When recalculation runs, Then system removes Tolerance flag from current and all subsequent invoices and enables delinquency processing.

**4. Sequential Processing Maintained**
Given multiple invoices exist on billing account, When tolerance recalculation initiates, Then system processes invoices sequentially from oldest to newest.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=631126269"
]

---

#### Feature: Cancel Pending Write-Offs Upon Invoice or Payment Changes
- **Role**: Billing Administrator
- **Action**: automatically cancel pending write-offs when invoice or payment conditions change
- **Value**: write-off accuracy is maintained and approval workflows remain synchronized with current account status

**Description:**

As a **Billing Administrator**,
I want to **automatically cancel pending write-offs when invoice or payment conditions change**,
So that **write-off accuracy is maintained and approval workflows remain synchronized with current account status**


**Key Capabilities:**

**1. Write-Off Cancellation Trigger Detection**
System monitors payment allocation changes (decline, reverse, suspend, transfer, reallocation), new payment applications, invoice discards, write-off reversals, and negative item calculations that impact invoices with pending write-offs.

**2. Automated Write-Off Cancellation Processing**
Upon detection of triggering event, system transitions write-off status from Pending to Cancelled with Manual subtype, generates cancellation notification message, fires write-off cancelled event, and closes associated approval tasks.

**3. Write-Off Status Visibility**
Cancelled write-offs become visible across billing account views and invoice detail lists for audit and reconciliation purposes.


**Acceptance Criteria:**

**1. Cancellation Upon Payment Reallocation**
Given an invoice has a pending write-off, When payment allocation is modified or new payment is applied to that invoice, Then system automatically cancels the pending write-off and closes approval task.

**2. Cancellation Upon Invoice Adjustment**
Given an invoice with pending write-off, When invoice is discarded or negative items are calculated, Then write-off status becomes Cancelled with Manual subtype.

**3. Notification and Event Generation**
Given write-off cancellation is triggered, When cancellation processing completes, Then system generates 'Manual Write Off Cancelled' message and fires 'Write Off Cancelled' event.

**4. Status Visibility**
Given write-off is cancelled, When user accesses billing account or invoice views, Then cancelled write-off is displayed with current status.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=696499755"
]

---

#### Feature: Generate Bad Debt Reserve Calculations for Uncollectible Accounts
- **Role**: Billing Administrator
- **Action**: automate small balance write-off processing for uncollectible invoices
- **Value**: uncollectible small balances are efficiently resolved, reducing manual effort and maintaining accurate account balances

**Description:**

As a **Billing Administrator**,
I want to **automate small balance write-off processing for uncollectible invoices**,
So that **uncollectible small balances are efficiently resolved, reducing manual effort and maintaining accurate account balances**


**Key Capabilities:**

**1. Account & Invoice Selection**
System identifies eligible billing accounts and processes invoices sequentially from oldest, filtering by issued or partially paid status.

**2. Tolerance Validation**
System retrieves tolerance configuration parameters and validates invoices meet small balance write-off criteria within defined limits.
    2.1 Upon configuration unavailable or tolerance type mismatch, system skips invoice and proceeds to next.
    2.2 Upon invoice exceeding tolerance limit, system bypasses write-off and recalculates status.

**3. Write-Off Execution**
System issues write-off transaction, distributes amount among unpaid invoice items, and updates invoice status to paid.

**4. Balance Reconciliation**
System recalculates invoice balances, account balances, and paid-to-date metrics according to account type.

**5. Event & Message Generation**
System generates audit messages and fires business events to notify dependent subsystems of write-off completion.


**Acceptance Criteria:**

**1. Successful Small Balance Write-Off**
Given eligible invoices exist within tolerance limits, When automated job executes, Then system writes off balances, updates invoice status to paid, recalculates account balances, and generates confirmation messages.

**2. Tolerance Limit Enforcement**
Given invoice balance exceeds configured tolerance threshold, When validation occurs, Then system skips write-off processing and maintains original invoice status.

**3. Configuration Dependency Handling**
Given tolerance configuration is unavailable or type is carry-forward, When system retrieves parameters, Then invoice is excluded from write-off processing.

**4. Validation Failure Response**
Given write-off fails asynchronous validations, When processing occurs, Then system cancels operation, creates cancelled write-off record, and generates cancellation message.

**5. Sequential Processing Integrity**
Given multiple invoices exist on billing account, When job processes, Then system handles invoices chronologically oldest-first and completes all eligible accounts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=634009393"
]

---

### Epic: Refund & Credit Lifecycle Management

#### Feature: Initiate Manual Refunds from Billing Account Unapplied Balance
- **Role**: Billing Administrator
- **Action**: initiate and process manual refunds from billing account unapplied balances
- **Value**: customers receive accurate and timely refunds for overpayments or funds received in error while maintaining financial control through approval workflows

**Description:**

As a **Billing Administrator**,
I want to **initiate and process manual refunds from billing account unapplied balances**,
So that **customers receive accurate and timely refunds for overpayments or funds received in error while maintaining financial control through approval workflows**


**Key Capabilities:**

**1. Refund Configuration Selection**
User selects refund type (Individual or Organization) and configuration based on billing account type. System determines available unapplied balance levels and eligible refund sources per account structure.

**2. Payment Identification and Selection**
User identifies eligible payments from unapplied balances, optionally filtering by member attributes. System displays only refundable payments and allows multi-payment selection with amount specification up to unapplied limits.

**3. Refund Details Configuration**
User configures payment method, delivery address, reason codes, and additional context. System retrieves payee information from core systems and validates refund amount against available balances.

**4. Approval Workflow Execution**
Upon confirmation, system evaluates refund amount against configured thresholds and user authority levels. System automatically approves within limits or routes to authorized approvers, then updates balances and transmits to Payment Hub.

**5. Payment Processing and Status Tracking**
System sends approved refunds to Payment Hub for processing through intermediate states. Upon receiving outcome events, system finalizes refund status as paid or declined and reconciles balance figures.

**6. Exception and Cancellation Handling**
When payment actions (decline, reversal, suspension) occur during refund processing, system automatically cancels initiated refunds, voids pending refunds, or issues stop requests for in-transit refunds based on current status.


**Acceptance Criteria:**

**1. Refund Eligibility Validation**
Given unapplied payment balances exist at appropriate levels, When user selects refund configuration, Then system displays only eligible payments matching refund type, account structure, and member ownership rules.

**2. Amount Control and Balance Protection**
Given user specifies refund amounts for selected payments, When total refund is calculated, Then system prevents amounts exceeding unapplied balances and restricts further allocation/transfer/refund operations on those payments until completion.

**3. Automated Approval Processing**
Given refund amount is at or below configured threshold and within user authority level, When user confirms refund, Then system automatically approves, updates balances immediately, and transmits to Payment Hub without manual intervention.

**4. Manual Approval Routing**
Given refund amount exceeds no-approval threshold or user authority level, When refund is initiated, Then system generates approval task for authorized users and blocks balance updates until approval decision is recorded.

**5. Payment Hub Integration Success**
Given Payment Hub successfully processes approved refund, When paid outcome event is received, Then system updates refund status to Paid and maintains updated balance calculations without reversals.

**6. Concurrent Action Conflict Resolution**
Given approved refund is in-progress, When payment decline/reversal/suspension is executed, Then system automatically voids pending refunds or issues stop requests for in-transit refunds and restores amounts to unapplied balances upon cancellation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=610904120"
]

---

#### Feature: Initiate Manual Refunds from Member Record Unapplied Balance
- **Role**: Billing Administrator
- **Action**: initiate and process manual refunds from member-level unapplied balances
- **Value**: overpayments and erroneous funds are returned efficiently while maintaining accurate account reconciliation and proper approval controls

**Description:**

As a Billing Administrator,
I want to initiate and process manual refunds from member-level unapplied balances,
So that overpayments and erroneous funds are returned efficiently while maintaining accurate account reconciliation and proper approval controls


**Key Capabilities:**

**1. Refund Eligibility Assessment**
User is able to identify unapplied payments at member record level available for refund based on account type and allocation status

**2. Refund Configuration & Selection**
User is able to select individual member, choose payment source (member record unapplied), select multiple eligible payments, and specify partial or full refund amounts with automatic total calculation

**3. Payee & Payment Method Setup**
User is able to configure payment method, retrieve payee information from core system, provide refund reason, and review complete transaction details before confirmation

**4. Approval Orchestration**
Upon confirmation, system evaluates refund amount against thresholds and authority levels to determine automatic approval or manual review requirements

**5. Balance & Payment Hub Integration**
When approved, system adjusts member record unapplied balance, removes draft allocations, and transmits refund to payment gateway with mapped transaction data

**6. Status Tracking & Reversals**
User is able to cancel initiated refunds, void approved pending refunds, or stop in-transit refunds with automatic balance restoration and event notifications


**Acceptance Criteria:**

**1. Member-Level Refund Scope**
Given a List Bill account with individual premium accounting, When initiating refund to individual, Then system filters only payments and member records belonging to selected member with positive unapplied balance

**2. Payment Availability Control**
Given payment with approved refund in progress, When user attempts allocation or additional refund, Then system disables actions until current refund reaches paid status

**3. Threshold-Based Approval**
Given refund amount exceeds no-approval threshold but within user authority level and automated approval enabled, When refund confirmed, Then system auto-approves and proceeds to payment hub without manual intervention

**4. Balance Recalculation**
Given approved refund transaction, When system processes refund, Then member record unapplied balance decreases by refund amount and account balance updates accordingly

**5. Payment Hub Failure Handling**
Given payment hub returns failed event, When system receives notification, Then refund status updates to declined, amount returns to unapplied balance, and decline event fires

**6. Cancellation & Restoration**
Given approved refund with pending status in payment hub, When user cancels refund, Then system voids transaction, restores unapplied balance, and fires voided event


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=610904120"
]

---

#### Feature: Generate Automated Refunds from Billing Account Unapplied Balance
- **Role**: Billing Administrator
- **Action**: automate refund generation from unapplied balances
- **Value**: customers receive timely refunds without manual intervention, reducing administrative overhead and improving satisfaction

**Description:**

As a **Billing Administrator**,
I want to **automate refund generation from unapplied balances**,
So that **customers receive timely refunds without manual intervention, reducing administrative overhead and improving satisfaction**


**Key Capabilities:**

**1. Unapplied Balance Detection & Wait Period**
System monitors payments added to billing account unapplied and initiates configurable wait period countdown before refund eligibility assessment

**2. Account Eligibility Validation**
System validates billing account status is not on hold and calculates refundable amount against configured thresholds to determine auto-refund eligibility

**3. Refund Transaction Initiation**
Upon threshold validation, system creates refund transaction with payee, payment method, reason, and amount derived from business rules
    3.1 When refund amount is below approval threshold, system auto-approves and dispatches payment
    3.2 When refund exceeds threshold, system queues for manual approval workflow

**4. Payment Dispatch & Status Synchronization**
System dispatches outbound payment to Payment Hub and synchronizes refund status based on payment processing outcomes (paid/declined)

**5. Balance Reconciliation**
System recalculates billing account and unapplied balances, updates payment allocation amounts, and generates notification messages for all status changes


**Acceptance Criteria:**

**1. Automated Refund Eligibility**
Given unapplied balance exists beyond wait period and account is not on hold, When refundable amount exceeds configured threshold, Then system initiates refund transaction automatically

**2. Account Hold Bypass**
Given billing account is on hold status, When automated refund job executes, Then system skips account from refund processing without creating transactions

**3. Threshold-Based Approval Routing**
Given refund amount is below approval threshold, When refund is initiated, Then system auto-approves and dispatches payment immediately; Given refund exceeds threshold, Then system queues for manual approval workflow

**4. Payment Success Handling**
Given outbound payment is dispatched successfully, When payment hub confirms paid status, Then system updates refund to 'Paid' and recalculates all account balances

**5. Payment Failure Recovery**
Given outbound payment fails, When payment hub returns failure event, Then system marks refund 'Declined', restores unapplied balance, and fires reallocation event

**6. Balance Integrity**
Given any refund status change occurs, When system processes the event, Then all billing account balances and payment allocation amounts reflect updated state accurately


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=643030351"
]

---

#### Feature: Generate Automated Refunds from Member Record Unapplied Balance
- **Role**: Billing Administrator
- **Action**: automate refund generation from unapplied member balances
- **Value**: funds are returned efficiently to customers without manual intervention, reducing operational overhead and improving member satisfaction

**Description:**

As a **Billing Administrator**,
I want to **automate refund generation from unapplied member balances**,
So that **funds are returned efficiently to customers without manual intervention, reducing operational overhead and improving member satisfaction**


**Key Capabilities:**

**1. Unapplied Balance Monitoring**
System detects payments added to Member Record Unapplied and initiates wait day counting based on configuration rules.

**2. Eligibility Validation**
Upon reaching wait period threshold, system validates billing account status (not on hold) and calculates refundable amount against configured thresholds.
    2.1 When account is on hold, system skips processing
    2.2 When amount below threshold, system waits for additional payments

**3. Refund Initiation & Routing**
System creates refund transaction with recipient, payment method, and reason per business rules, then routes for approval or auto-approval based on amount limits.

**4. Payment Execution & Reconciliation**
Upon approval, system dispatches payment to Payment Hub, recalculates balances, and updates refund status based on payment outcome.


**Acceptance Criteria:**

**1. Automated Refund Qualification**
Given unapplied balance exists and wait period elapsed, When account is not on hold and amount exceeds threshold, Then system initiates refund transaction with appropriate recipient and payment method.

**2. Approval Routing Logic**
Given refund transaction created, When amount within auto-approval limit, Then system auto-approves and dispatches payment; When amount exceeds limit, Then system routes to manual approval workflow.

**3. Balance Reconciliation on Success**
Given refund dispatched to Payment Hub, When payment confirms successful processing, Then system updates refund status to Paid and recalculates Member Record Unapplied and Account balances.

**4. Failure Recovery Processing**
Given Payment Hub returns failure event, When refund processing fails, Then system updates status to Declined, restores unapplied balances, and makes funds available for future processing attempts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645893542"
]

---

#### Feature: Approve Refunds Manually with Authority Level Validation
- **Role**: Billing Manager
- **Action**: approve refunds within authority limits through configurable approval workflows
- **Value**: refunds are processed securely with appropriate financial controls and compliance oversight

**Description:**

As a **Billing Manager**,
I want to **approve refunds within authority limits through configurable approval workflows**,
So that **refunds are processed securely with appropriate financial controls and compliance oversight**


**Key Capabilities:**

**1. Refund Initiation & Threshold Evaluation**
Upon refund creation, system determines approval path by comparing transaction amount against configured 'No Approval Required Max' threshold. Amounts within limits receive automatic approval; amounts exceeding limits proceed to authority validation.

**2. Authority Level Validation**
System evaluates user authority level against refund amount. When amount exceeds user authority, system routes approval task to users with sufficient authorization. When within limits, system applies automated approval parameter to determine if manual verification is required.

**3. Manual Approval Execution**
Authorized users access initiated refunds and submit approval decisions. System validates no conflicting activities exist, processes approval through activity sequence with 'Processing' tag, updates refund status to 'Approved', and auto-closes approval tasks.

**4. Financial Impact Processing**
Upon approval, system updates billing account balances, recalculates payment statuses, deletes draft allocations, generates business activity messages, and triggers outbound payment creation in Payment Hub for disbursement execution.


**Acceptance Criteria:**

**1. Automatic Approval Below Threshold**
Given refund amount is at or below configured 'No Approval Required Max', When refund is initiated, Then system automatically approves refund without manual intervention and triggers outbound payment creation.

**2. Authority-Based Routing**
Given refund amount exceeds user authority level, When user attempts approval, Then system prevents approval action and routes task to users with sufficient authority level for the transaction amount.

**3. Approval Execution Validation**
Given authorized user submits approval, When conflicting activities exist on related payments, Then system rejects approval, displays activity-in-progress alert, and maintains refund in 'Initiated' status for retry.

**4. Balance & Payment Status Update**
Given refund approval completes successfully, When system processes financial impact, Then unapplied balances decrease, payment allocation amounts update, draft allocations delete, and payment status recalculates per business rules.

**5. Payment Hub Integration**
Given refund status updates to 'Approved', When approval activity finalizes, Then system creates outbound payment record in Payment Hub with domain correlation ID and fires RefundApproved event for downstream processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=650316342",
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=613804891",
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=631136972"
]

---

#### Feature: Reject Refunds with Reason Codes
- **Role**: Billing Supervisor
- **Action**: reject refund requests with documented reason codes and authority validation
- **Value**: payment accuracy is maintained and rejected transactions are properly documented for audit compliance

**Description:**

As a **Billing Supervisor**,
I want to **reject refund requests with documented reason codes and authority validation**,
So that **payment accuracy is maintained and rejected transactions are properly documented for audit compliance**


**Key Capabilities:**

**1. Authorization Verification**
System validates user privileges and authority level against refund amount before enabling rejection actions.

**2. Rejection Reason Selection**
User selects standardized reason code from predefined list; when 'Other' is selected, system requires additional information entry before proceeding.

**3. Rejection Processing**
Upon submission, system updates refund status to rejected, documents reason code, closes approval task, and generates rejection events.

**4. Balance Preservation**
System maintains original account balances and payment allocations since rejected refunds do not process through payment hub.


**Acceptance Criteria:**

**1. Authority Validation**
Given user lacks rejection privilege or insufficient authority level, When accessing refund actions, Then system prevents rejection capability display.

**2. Reason Code Requirement**
Given user initiates rejection, When reason code is not selected, Then system prevents rejection submission.

**3. Other Reason Documentation**
Given user selects 'Other' reason, When additional information is not provided, Then system blocks rejection processing.

**4. Rejection Finalization**
Given valid reason documented, When rejection submitted, Then system updates status to rejected, records reason, closes approval task, and generates audit events.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=749185104"
]

---

#### Feature: Auto-Approve Refunds Below Configured Thresholds
- **Role**: Billing Administrator
- **Action**: configure and enable automated refund approval based on predefined amount thresholds and authority levels
- **Value**: I can streamline refund processing, reduce manual approval overhead, and ensure appropriate financial controls without delaying low-value refund transactions

**Description:**

As a **Billing Administrator**,
I want to **configure and enable automated refund approval based on predefined amount thresholds and authority levels**,
So that **I can streamline refund processing, reduce manual approval overhead, and ensure appropriate financial controls without delaying low-value refund transactions**


**Key Capabilities:**

**1. Refund Initiation & Classification**
Upon refund transaction creation (manual or automated), system evaluates transaction context including refund amount, creator authority level, and applicable configuration thresholds

**2. Threshold-Based Approval Routing**
When refund amount is within 'No Approval Required Max' limit, system automatically approves transaction and proceeds to payment processing. When amount exceeds threshold but remains within creator's authority level, system applies secondary verification rules based on organizational policy

**3. Authority Level Evaluation**
If refund exceeds creator's authority limits, system routes transaction to approval queue for authorized personnel. System-generated refunds exceeding thresholds always require manual approval

**4. Payment Execution Integration**
Upon approval, system triggers outbound payment creation in Payment Hub subsystem and monitors payment lifecycle events

**5. Exception Handling & Reversals**
When payment fails or cancellation is requested, system updates refund status and returns funds to unapplied balance with appropriate event notifications


**Acceptance Criteria:**

**1. Auto-Approval for Below-Threshold Refunds**
Given a refund transaction is initiated, When the refund amount is at or below the configured 'No Approval Required Max' threshold, Then the system automatically approves the refund and initiates payment processing without manual intervention

**2. Manual Routing for Above-Threshold Refunds**
Given a refund exceeds the 'No Approval Required Max' threshold, When the amount also exceeds the creator's authority level limits, Then the system creates an approval task routed to users with appropriate authority levels

**3. Authority Level Enforcement**
Given authority level verification is enabled, When a user creates a refund within threshold but exceeding their authority level, Then the system enforces two-step verification requiring another authorized user to approve or reject

**4. System-Generated Refund Controls**
Given an automated refund is generated by the system, When the refund amount exceeds the 'No Approval Required Max' threshold, Then the system routes the transaction for manual approval regardless of automated approval settings

**5. Payment Failure Reconciliation**
Given an approved refund has been submitted to Payment Hub, When the payment processing fails, Then the system updates refund status accordingly and returns funds to the originating unapplied balance

**6. Cancellation & Rejection Handling**
Given a refund is rejected or cancelled, When the cancellation is processed, Then the system returns funds to unapplied balance and generates appropriate notification events


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=650316342"
]

---

#### Feature: Configure Refund Approval Limits by Bill Type and Payment Allocation Mode
- **Role**: Billing Administrator
- **Action**: configure automated refund thresholds, approval limits, and processing rules based on bill type and payment allocation dimensions
- **Value**: the system automatically processes eligible unapplied payment refunds while ensuring appropriate approval controls for organization and individual billing scenarios

**Description:**

As a **Billing Administrator**,
I want to **configure automated refund thresholds, approval limits, and processing rules based on bill type and payment allocation dimensions**,
So that **the system automatically processes eligible unapplied payment refunds while ensuring appropriate approval controls for organization and individual billing scenarios**


**Key Capabilities:**

**1. Configure Refund Eligibility Parameters**
Administrator establishes dimensional rules based on Bill Type (List Bill, Self-Bill, Individual Direct) and Payment Allocation Mode (Group, IPA). System enables or disables automated refunds at Billing Account and Member Record levels according to business requirements.

**2. Define Threshold and Approval Limits**
Administrator sets minimum refund thresholds and no-approval maximum amounts separately for individual ($1 threshold, $50 max) and organization ($5 threshold, $500 max) scenarios. Upon exceeding approval limits, system routes refund requests to manual approval workflows.

**3. Establish Processing Wait Periods**
Administrator configures wait day periods (10-60 days) before automated refund initiation. System defers processing until elapsed time requirements are met for individual or organization refunds.

**4. Specify Refund Recipient Priority Rules**
Administrator defines recipient determination logic with priority sequences (TaxabilityBased, BillingAccountOwner, Member) for Member Record unapplied amounts.


**Acceptance Criteria:**

**1. Configuration Applied by Bill Type and Allocation Mode**
Given List Bill with IPA mode is configured, When unapplied payment exists on Member Record, Then system enables both BA and MR automated refunds with individual thresholds ($1/$50/10 days) and organization parameters ($5/$500/31 days).

**2. Threshold Enforcement Prevents Premature Refunds**
Given configured refund threshold is $5 for organizations, When unapplied amount is $3, Then system does not trigger automated refund until threshold is met.

**3. Approval Required for Amounts Exceeding Limits**
Given no-approval maximum is $500 for organizations, When automated refund amount is $600, Then system routes refund request to manual approval workflow instead of automatic processing.

**4. Wait Period Enforced Before Processing**
Given wait period is 31 days for organization refunds, When 20 days have elapsed since unapplied payment creation, Then system defers refund processing until full wait period has passed.

**5. Configuration Defaults Applied When Bill Type Unspecified**
Given no specific Bill Type configuration exists, When unapplied payment requires refund, Then system applies 60-day wait period for both individual and organization scenarios with BA-level refunds enabled.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=641151280"
]

---

#### Feature: Cancel Initiated Refunds Before Approval
- **Role**: Billing Administrator
- **Action**: cancel refund transactions at various lifecycle stages before payment reaches the payee
- **Value**: I can correct processing errors, maintain regulatory compliance, and prevent erroneous financial disbursements

**Description:**

As a **Billing Administrator**,
I want to **cancel refund transactions at various lifecycle stages before payment reaches the payee**,
So that **I can correct processing errors, maintain regulatory compliance, and prevent erroneous financial disbursements**


**Key Capabilities:**

**1. Cancellation Initiation**
User is able to manually trigger refund cancellation or system automatically initiates upon payment decline/reverse/suspend actions on related incoming payments.

**2. Pre-Approval or In-House Cancellation**
When refund is not yet approved or approved but not communicated to processor, system executes immediate cancellation and reverts account balances to pre-approval state.

**3. Third-Party Stop Payment Request**
Upon detecting refund in transit or issued status, system prompts confirmation to request stop payment from external processor and awaits stoppability validation.

**4. Financial State Restoration**
System reverts billing account and member record balances to their state before refund approval and updates refund status across all integrated systems.

**5. Stakeholder Notification**
System triggers appropriate business activity messages and events to notify relevant parties of cancellation outcome and status changes.


**Acceptance Criteria:**

**1. Pre-Approval Cancellation Success**
Given a refund in initiated status, when user submits cancellation request with valid reason, then system immediately cancels refund and restores account balances without external processor interaction.

**2. In-House Approved Refund Cancellation**
Given an approved refund not yet communicated to processor, when cancellation is initiated, then system executes reversal and updates payment status to cancelled across all subsystems.

**3. Third-Party Stop Payment Processing**
Given a refund in transit or issued status, when user confirms stop payment request, then system communicates with external processor and awaits stoppability validation response.

**4. Paid Refund Protection**
Given a refund in paid status, when cancellation is attempted, then system prevents cancellation action and notifies user that payment has reached payee.

**5. Automatic Cancellation Execution**
Given an incoming payment undergoes decline/reverse/suspend action, when that payment is part of non-approved refund transaction, then system automatically cancels the refund without user intervention.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=657904404"
]

---

#### Feature: Cancel Approved Refunds Pending in Payment Hub
- **Role**: Billing Administrator
- **Action**: cancel approved refunds that are pending payment issuance
- **Value**: funds can be re-applied to account balances when refund disbursement is no longer needed or was approved in error

**Description:**

As a **Billing Administrator**,
I want to **cancel approved refunds that are pending payment issuance**,
So that **funds can be re-applied to account balances when refund disbursement is no longer needed or was approved in error**


**Key Capabilities:**

**1. Refund Cancellation Initiation**
User is able to initiate cancellation for approved refunds in pending status. System validates cancellation action availability based on current refund state and payment hub status.

**2. Cancellation Justification**
User provides cancellation reason and supporting details to establish audit trail for refund reversal decision.

**3. Payment Hub Coordination**
System requests outbound payment void from Payment Hub and processes confirmation event to synchronize refund status across systems.

**4. Financial Reconciliation**
Upon successful cancellation, system restores funds to originating unapplied balance (billing account or member), recalculates all affected balances, updates payment statuses, and closes associated approval tasks.

**5. Exception Handling**
When refund has progressed to in-transit or issued status, system routes to specialized cancellation workflow. If concurrent status change detected, system prevents conflicting operations.


**Acceptance Criteria:**

**1. Cancellation Authorization**
Given user has refund cancellation privileges, When approved refund is pending in Payment Hub, Then cancellation action is available and can be initiated.

**2. Payment Hub Synchronization**
Given cancellation is submitted, When Payment Hub successfully voids outbound payment, Then system receives confirmation event and updates refund status to voided.

**3. Balance Restoration**
Given refund is voided, When financial reconciliation completes, Then funds are returned to original unapplied balance source and all account balances reflect updated position.

**4. Concurrent Action Prevention**
Given another status change is in progress, When user attempts cancellation, Then system prevents submission and notifies user to retry later.

**5. Advanced Status Handling**
Given refund is already in-transit or issued, When cancellation is attempted, Then system redirects to specialized advanced cancellation workflow.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=741919560"
]

---

#### Feature: Request Stop Payment for In-Transit or Issued Refunds
- **Role**: Billing Administrator
- **Action**: request stop payment for in-transit or issued refunds through third-party processor coordination
- **Value**: prevent erroneous payments, maintain regulatory compliance, and protect organizational financial accuracy

**Description:**

As a **Billing Administrator**,
I want to **request stop payment for in-transit or issued refunds through third-party processor coordination**,
So that **I can prevent erroneous payments, maintain regulatory compliance, and protect organizational financial accuracy**.


**Key Capabilities:**

**1. Cancellation Eligibility Determination**
System validates refund lifecycle stage and determines if cancellation can occur internally or requires third-party processor intervention based on payment transmission status

**2. Third-Party Stop Request Submission**
User confirms stop payment request for in-transit or issued refunds; system transmits stop request to external payment processor with transaction identifiers

**3. External Processor Validation**
Third-party processor evaluates transaction stoppability based on external payment network lifecycle and processing windows
    3.1 When stoppable, processor executes stop and notifies Payment Hub
    3.2 When not stoppable, processor notifies system and refund transitions to paid status

**4. Status Synchronization and Balance Reversion**
System cascades status updates from Payment Hub to Billing subsystem, reverting account balances to pre-approval state and publishing cancellation events


**Acceptance Criteria:**

**1. Stop Request Submission Validation**
Given a refund with Payment Hub status 'In Transit' or 'Issued', when administrator initiates cancellation, then system displays stop payment confirmation prompt before external transmission

**2. Successful Stop Execution**
Given third-party processor confirms transaction is stoppable, when stop is executed, then system updates refund status, reverts billing account balances, and publishes BAM messages for cancellation and status change

**3. Stop Request Rejection Handling**
Given third-party processor determines transaction cannot be stopped, when rejection notification received, then system transitions refund to 'Paid' status without balance reversion and prevents further cancellation attempts

**4. Privilege Enforcement**
Given user lacks 'Initiate Manual Refund' or 'Approve/Reject Refund' privileges, when attempting cancellation action, then system prevents access to stop payment functionality


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=657904404"
]

---

#### Feature: Edit Refund Details Before Approval
- **Role**: Billing Operator
- **Action**: modify initiated refund transaction details and trigger automated approval workflow
- **Value**: refund accuracy is maintained while enabling efficient processing through automated approval and payment execution based on authorization thresholds

**Description:**

As a **Billing Operator**,
I want to **modify initiated refund transaction details and trigger automated approval workflow**,
So that **refund accuracy is maintained while enabling efficient processing through automated approval and payment execution based on authorization thresholds**


**Key Capabilities:**

**1. Refund Transaction Access & Modification**
User locates initiated refund and selects edit action. System presents refund details based on source context (billing account unapplied or member record unapplied) and enables authorized modifications per business rules.

**2. Update Confirmation & Validation**
Upon confirmation, system persists changes while maintaining initiated status. System generates audit messages and returns user to payment overview with success confirmation.

**3. Automated Approval Decisioning**
System evaluates refund amount against approval authority thresholds via business rules engine.
    3.1 When amount exceeds limits, refund remains initiated for manual approval.
    3.2 When within limits, system auto-approves and updates account balances.

**4. Payment Execution & Status Synchronization**
System dispatches approved refund to payment hub for outbound processing. Upon payment confirmation, system updates refund status to paid, recalculates related payment statuses, and closes approval tasks.


**Acceptance Criteria:**

**1. Successful Refund Update Within Approval Limits**
Given an initiated refund below authorization thresholds, when user confirms modified details, then system auto-approves, dispatches to payment hub, and updates status to paid upon successful processing.

**2. Refund Update Exceeding Approval Authority**
Given an initiated refund amount exceeding maximum auto-approval limit, when user confirms modifications, then system maintains initiated status and retains refund in manual approval queue.

**3. Payment Processing Failure Handling**
Given an auto-approved refund dispatched for payment, when payment hub returns failure event, then system updates refund status to declined and restores unapplied balances.

**4. Balance Integrity Across Status Changes**
Given any refund status transition, when system processes the change, then billing account and member record balances are recalculated accurately and payment allocation amounts are updated.

**5. Audit Trail Generation**
Given any refund modification or status change, when transaction completes, then system generates corresponding audit messages and business events for downstream systems.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=634001687"
]

---

#### Feature: Calculate Refundable Amount from Unapplied Balances
- **Role**: Billing Administrator
- **Action**: automate refund calculations and disbursements from billing account unapplied balances based on configurable thresholds and approval rules
- **Value**: I can ensure timely customer refunds while maintaining financial controls and reducing manual processing overhead

**Description:**

As a **Billing Administrator**,
I want to **automate refund calculations and disbursements from billing account unapplied balances based on configurable thresholds and approval rules**,
So that **I can ensure timely customer refunds while maintaining financial controls and reducing manual processing overhead**


**Key Capabilities:**

**Unapplied Balance Monitoring & Eligibility**
Upon payment allocation to unapplied balance, system initiates wait period counter and validates account eligibility (not on hold status) during scheduled job execution.

**Refundable Amount Determination**
System calculates refundable amount from unapplied balance and validates against configured threshold to determine processing eligibility.

**Automated Approval Routing**
When refund amount is within approval limits, system auto-approves and proceeds to disbursement. If exceeding limits, system routes to manual approval workflow.

**Payment Method Selection & Disbursement**
System determines appropriate refund payment method per business rules and dispatches transaction to Payment Hub with customer and account details.

**Balance Reconciliation**
Upon successful disbursement, system updates unapplied balance, account balances, and payment allocation status. Upon failure, system reverses refund and restores allocable amount.


**Acceptance Criteria:**

**1. Eligibility Validation**
Given automated refunds are enabled and billing account is not on hold, When unapplied balance exceeds configured threshold after wait period, Then system calculates refundable amount and proceeds to approval evaluation.

**2. Automated Approval Processing**
Given calculated refund amount does not exceed no-approval-required maximum, When system evaluates approval requirements, Then refund is auto-approved and dispatched to Payment Hub.

**3. Manual Approval Routing**
Given refund amount exceeds auto-approval threshold, When system evaluates approval requirements, Then refund enters initiated status and approval task is created.

**4. Successful Disbursement Confirmation**
Given Payment Hub processes outbound payment successfully, When system receives paid confirmation, Then refund status updates to paid and balances are recalculated.

**5. Failed Disbursement Handling**
Given Payment Hub returns failure event, When system receives decline notification, Then refund status updates to declined and payment amount is restored to allocable balance.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=643030351"
]

---

#### Feature: Apply Wait Days Before Initiating Automated Refunds
- **Role**: Billing Administrator
- **Action**: enforce wait-day rules before triggering automated refunds from unapplied account balances
- **Value**: overpayment liabilities are managed consistently and unnecessary refund transactions are minimized

**Description:**

As a **Billing Administrator**,
I want to **enforce wait-day rules before triggering automated refunds from unapplied account balances**,
So that **overpayment liabilities are managed consistently and unnecessary refund transactions are minimized**.


**Key Capabilities:**

**1. Wait-Day Countdown Initiation**
Upon payment allocation to unapplied balance, system begins counting configured wait days per organizational policy.

**2. Eligibility Validation**
When wait period expires, system validates account is not on hold and refundable amount exceeds configured threshold.

**3. Refund Transaction Creation**
System calculates refundable amount, selects default payment method, and creates refund transaction with appropriate payee and reason codes.

**4. Approval Routing**
If refund amount exceeds approval threshold, system routes to manual approval workflow; otherwise, auto-approves and dispatches payment instruction to payment hub.

**5. Exception Handling**
When outbound payment fails, system declines refund, restores unapplied balance, and notifies stakeholders.


**Acceptance Criteria:**

**1. Wait-Day Enforcement**
Given unapplied balance exists, When configured wait days have not elapsed, Then system excludes account from automated refund processing.

**2. Threshold Compliance**
Given wait period completed, When refundable amount is below configured threshold, Then system skips refund initiation.

**3. Hold Status Check**
Given account is on hold, When automated refund job executes, Then system bypasses account regardless of wait-day completion.

**4. Automated Approval**
Given refund amount within auto-approval limit, When validation passes, Then system approves and dispatches refund without manual intervention.

**5. Manual Review Routing**
Given refund exceeds approval threshold, When transaction is created, Then system generates approval task and suspends processing until authorized.

**6. Payment Failure Recovery**
Given outbound payment fails, When failure event received, Then system reverses refund transaction and restores allocatable payment balance.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=643030351"
]

---

#### Feature: Select Payment Method for Refund Processing
- **Role**: Billing Administrator
- **Action**: process refunds from unapplied payment balances through automated or manual approval workflows
- **Value**: customers receive timely and accurate refunds while maintaining financial controls and audit compliance

**Description:**

As a **Billing Administrator**,
I want to **process refunds from unapplied payment balances through automated or manual approval workflows**,
So that **customers receive timely and accurate refunds while maintaining financial controls and audit compliance**


**Key Capabilities:**

**1. Determine Refund Eligibility**
User identifies unapplied payment amounts available for refund. If payments are allocated to invoices, user first unallocates them to unapplied status.

**2. Configure Refund Parameters**
User selects refund recipient type (individual or organization), refund source level (billing account or member record unapplied), and identifies eligible payments based on account type and allocation rules.

**3. Submit Refund Request**
User selects payments, configures payment method and recipient details, validates refund amount against available balance, and submits for system adjudication.

**4. Automated Approval Evaluation**
System evaluates refund against configured thresholds and user authority levels to determine automatic approval or route to manual approval workflow.

**5. Manual Approval Processing**
When refund exceeds thresholds, system routes to authorized approver for decision. User can cancel refund until payment is processed.

**6. Payment Hub Integration**
Upon approval, system transmits refund to Payment Hub and updates status based on payment processing outcomes (paid, declined, voided, stopped).


**Acceptance Criteria:**

**1. Refund Eligibility Validation**
Given a payment is fully allocated to an invoice, When user attempts to initiate refund, Then system prevents refund action until payment is unallocated to unapplied status.

**2. Automatic Approval Processing**
Given refund amount is within configured 'No Approval Required Max' threshold, When user submits refund request, Then system automatically approves and routes to Payment Hub without manual intervention.

**3. Authority Level Routing**
Given refund amount exceeds user's authority level limit, When user submits refund request, Then system routes to authorized approver and prevents processing until approval decision is recorded.

**4. Payment Hub Status Synchronization**
Given refund is approved and transmitted to Payment Hub, When Payment Hub returns payment status event, Then system updates refund status accordingly (paid, declined, voided, stopped).

**5. Balance Impact Control**
Given refund is in initiated status, When system calculates account balances, Then initiated refunds do not affect balance figures until approval is granted.

**6. Concurrent Action Prevention**
Given payment has active refund not in paid status, When user attempts allocation or transfer actions, Then system prevents actions until refund reaches paid status.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=610904120"
]

---

#### Feature: Validate Refund Payee Against Billing Account Owner or Member
- **Role**: Billing Administrator
- **Action**: validate refund payee eligibility against account ownership rules
- **Value**: automated refunds are issued only to authorized recipients, preventing fraud and payment errors

**Description:**

As a **Billing Administrator**,
I want to **validate refund payee eligibility against account ownership rules**,
So that **automated refunds are issued only to authorized recipients, preventing fraud and payment errors**


**Key Capabilities:**

**1. Refund Source Identification**
System identifies refund origin as either billing account unapplied funds or member record unapplied funds.

**2. Payment Method Authorization**
System validates payment method ownership belongs to designated refund recipient.
    2.1 When payment method is check, system validates mailing address belongs to refund recipient

**3. Payee Eligibility Verification**
System validates payee authorization based on refund source.
    3.1 For billing account unapplied funds, system confirms payee is billing account owner
    3.2 For member record unapplied funds, system confirms payee is either billing account owner or main insured of member record

**4. Transaction Adjudication**
Upon validation failure, system prevents refund completion and provides rejection rationale.


**Acceptance Criteria:**

**1. Payment Method Ownership Validation**
Given a refund request, when payment method does not belong to refund recipient, then system rejects transaction and prevents processing.

**2. Check Payment Address Validation**
Given check payment method, when mailing address does not belong to refund recipient, then system blocks refund issuance.

**3. Billing Account Source Authorization**
Given refund source is billing account unapplied, when payee is not billing account owner, then system denies refund creation.

**4. Member Record Source Authorization**
Given refund source is member record unapplied, when payee is neither billing account owner nor main insured, then system rejects refund request.

**5. Successful Refund Processing**
Given all validation rules pass, when refund is submitted, then system completes automated refund transaction.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645898235"
]

---

#### Feature: Route Refund Approval Tasks Based on Authority Level
- **Role**: Billing Administrator
- **Action**: route refund approval tasks to eligible users based on authority levels and workload distribution
- **Value**: two-step verification controls are enforced, approval workload is balanced, and refunds are processed efficiently without bottlenecks

**Description:**

As a **Billing Administrator**,
I want to **route refund approval tasks to eligible users based on authority levels and workload distribution**,
So that **two-step verification controls are enforced, approval workload is balanced, and refunds are processed efficiently without bottlenecks**


**Key Capabilities:**

**1. Authority Verification**
System validates user authority levels against refund approval eligibility requirements to identify qualified approvers.

**2. Eligible Approver Identification**
System retrieves all active users meeting authority criteria while excluding the refund initiator to maintain segregation of duties.

**3. Single Eligible Approver Routing**
When only one eligible user exists (who is the initiator), system routes task to default Billing Refunds Queue.

**4. Two-User Scenario Assignment**
When exactly two eligible users exist, system assigns task to the non-initiating user ensuring two-step verification.

**5. Multi-User Authority-Based Assignment**
When multiple eligible users exist with different authority levels, system prioritizes lower authority users and applies load balancing.

**6. Same-Authority Load Balancing**
When multiple eligible users share identical authority levels, system distributes tasks based on current workload while excluding the initiator.


**Acceptance Criteria:**

**1. Authority-Based Eligibility Enforcement**
Given multiple users in the system, When a refund approval task is generated, Then only users meeting defined authority requirements are considered for assignment.

**2. Two-Step Verification Compliance**
Given an eligible approver pool, When the refund initiator is among eligible users, Then the initiator is excluded from assignment when alternatives exist.

**3. Queue Fallback for Single Eligible User**
Given only one eligible user exists who is the refund initiator, When task assignment is executed, Then the task routes to Billing Refunds Queue.

**4. Direct Assignment for Two Eligible Users**
Given exactly two eligible users where one initiated the refund, When assignment occurs, Then the task assigns to the non-initiating user.

**5. Lower Authority Preference with Multiple Users**
Given multiple eligible users with varying authority levels, When assignment is processed, Then users with lower authority receive priority with load balancing applied.

**6. Workload Distribution for Same Authority**
Given multiple eligible users with identical authority levels, When task is assigned, Then system applies load balancing rules excluding the initiator.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=635518030"
]

---

#### Feature: Reverse Billing Account Balances Upon Refund Cancellation
- **Role**: Billing Administrator
- **Action**: cancel issued refunds and reverse account balances
- **Value**: operational errors are corrected, regulatory compliance is maintained, and account balances accurately reflect transaction reversals

**Description:**

As a **Billing Administrator**,
I want to **cancel issued refunds and reverse account balances**,
So that **operational errors are corrected, regulatory compliance is maintained, and account balances accurately reflect transaction reversals**


**Key Capabilities:**

**Initiate Refund Cancellation**
User identifies refund requiring cancellation on billing account and submits cancellation request with business justification. System validates refund eligibility based on current lifecycle status and user privileges.

**Execute Internal Cancellation**
When refund has not been transmitted to external processor, system immediately cancels transaction, updates refund status, and reverts billing account and member record balances to pre-approval state.

**Request External Stop Payment**
If refund was transmitted to third-party processor, system prompts user to confirm stop payment request. Upon confirmation, system submits stop request and awaits processor validation of transaction stoppability.
    3.1 When processor confirms stop capability, system receives confirmation, updates refund status, reverses account balances, and notifies stakeholders.
    3.2 If payment already reached payee, processor rejects stop request and refund transitions to paid status without cancellation.

**Process Automatic Cancellation**
When incoming payment included in initiated refund is declined, reversed, or suspended, system automatically cancels associated refund and reverses preliminary balance adjustments.

**Handle Late-Stage Decline**
Upon receiving bank-initiated payment decline for approved refund, system determines current lifecycle stage and routes to appropriate cancellation workflow based on processor involvement.

**Finalize Transaction Reversal**
System triggers financial messaging, updates transaction history, applies unapplied payment amounts to appropriate accounts, and generates audit events for compliance tracking.


**Acceptance Criteria:**

**Successful Internal Cancellation**
Given refund is in initiated or pending status, when user submits cancellation request, then system immediately cancels refund, reverses billing account balances to pre-approval state, and triggers cancellation notification events.

**Stop Payment Confirmed**
Given refund was transmitted to external processor and payment has not reached payee, when user confirms stop payment request and processor validates stoppability, then system cancels refund, reverses account balances, and updates transaction status to cancelled.

**Stop Payment Rejected**
Given refund was transmitted to external processor and payment already reached payee, when user requests stop payment, then processor rejects request, system transitions refund to paid status, and maintains current account balances without reversal.

**Automatic Cancellation on Payment Decline**
Given incoming payment is part of initiated refund transaction, when payment is declined, reversed, or suspended, then system automatically cancels refund and reverses preliminary balance adjustments without user intervention.

**Privilege Enforcement**
Given user lacks required refund management privileges, when user accesses billing account, then system prevents display of cancellation action and blocks unauthorized cancellation attempts.

**Non-Cancellable Status Prevention**
Given refund has reached paid status or exceeded cancellation window, when user attempts cancellation, then system prevents submission and notifies user that transaction cannot be reversed through cancellation workflow.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=657904404"
]

---

#### Feature: Update Refund Status Based on Payment Hub Events
- **Role**: Billing Operations
- **Action**: synchronize refund lifecycle statuses based on payment hub event notifications
- **Value**: refund records accurately reflect external payment processing outcomes, ensuring financial accuracy and enabling timely corrective actions

**Description:**

As a Billing Operations,
I want to synchronize refund lifecycle statuses based on payment hub event notifications,
So that refund records accurately reflect external payment processing outcomes, ensuring financial accuracy and enabling timely corrective actions


**Key Capabilities:**

**1. Payment Hub Event Reception**
Billing subsystem continuously monitors and receives asynchronous status change events from Payment Hub for approved refunds, including success, failure, cancellation, and stop-request notifications.

**2. Activity Sequencing & Validation**
System queues refund status update activities within the billing account transaction sequence, applies processing tags, and validates current refund state against received event type to prevent invalid transitions.

**3. Status Transition Execution**
Upon validation, system executes appropriate status transition (ApprovedPaid/Failed/Voided/Stopped/Stop Requested) based on event type, updates related payment tags, and recalculates available actions per business rules.

**4. Financial Impact Processing**
When refund fails or cancels, system reverses financial impacts by updating unapplied balances, restoring payment allocations, triggering reapplication events, and recalculating account balances.

**5. Audit Trail & Notification**
System generates business activity messages for each status change outcome, creates detailed audit logs, and publishes integration events for downstream reconciliation and reporting systems.


**Acceptance Criteria:**

**1. Successful Refund Confirmation**
Given an approved refund exists, When Payment Hub sends paid event, Then system transitions refund to Paid status, removes processing tags, publishes Refund Paid message, and maintains payment allocation history.

**2. Failed Refund Recovery**
Given refund in Approved status, When Payment Hub sends failed event, Then system transitions to Failed status, restores unapplied funds, triggers payment reapplication workflow, and publishes both Refund Declined and Payment Status Changed messages.

**3. Cancellation Handling**
Given refund in Approved status, When Payment Hub sends cancelled event, Then system transitions to Voided or Stopped based on cancellation type, restores fund availability, and executes appropriate cancellation postconditions.

**4. Stop Request Workflow**
Given refund in Approved status, When Payment Hub sends stop-requested event, Then system transitions to Stop Requested status, retains processing tag, and awaits subsequent confirmation event.

**5. Event Race Condition Prevention**
Given multiple sequential events for same refund, When conflicting status event arrives after terminal state reached, Then system rejects invalid transition, publishes rejection message, and continues processing subsequent billing account activities without blocking.

**6. Balance Reconciliation**
Given failed or cancelled refund, When system completes status transition, Then all related account balances (Billing Account Unapplied, MR Unapplied, Account) reflect reversed refund impact accurately.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=749185377"
]

---

#### Feature: Track Refund Lifecycle from Initiated to Cleared or Voided
- **Role**: Billing Administrator
- **Action**: track and manage refund requests through their complete lifecycle from initiation to final cleared or voided state
- **Value**: I can ensure accurate refund processing, maintain financial controls, and provide transparent status visibility for all refund transactions

**Description:**

As a **Billing Administrator**,
I want to **track and manage refund requests through their complete lifecycle from initiation to final cleared or voided state**,
So that **I can ensure accurate refund processing, maintain financial controls, and provide transparent status visibility for all refund transactions**


**Key Capabilities:**

**1. Refund Initiation & Approval**
User is able to create refund in pending state and route for approval decision. Upon approval, refund transitions to approved state ready for payment issuance. If rejected, refund transitions to disapproved terminal state.

**2. Payment Issuance & Voiding**
User is able to issue approved refund payment transitioning to issued state. When cancellation is required before or after issuance, user is able to execute void action transitioning to voided terminal state.

**3. Payment Clearing or Stop Processing**
User is able to clear issued payment transitioning to cleared terminal state. If stop is needed, user initiates stop request state allowing either stop confirmation to stopped state or clearing despite stop request.


**Acceptance Criteria:**

**1. Successful Approval Flow**
Given refund is in pending state, When approval action is executed, Then system transitions refund to approved state and enables issuance capability.

**2. Payment Clearance**
Given refund is in issued state, When clearing action is executed, Then system transitions to cleared terminal state and marks refund lifecycle complete.

**3. Cancellation Control**
Given refund is in approved or issued state, When void payment action is executed, Then system transitions to voided terminal state and prevents further processing.

**4. Stop Payment Handling**
Given refund is in issued state, When stop action is executed, Then system transitions to stop requested state and allows either stop confirmation or clearing outcome as terminal state.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=318702499"
]

---

#### Feature: Apply Customer Credit to Future Invoices
- **Role**: Billing Specialist
- **Action**: apply customer credit to outstanding invoices and manage allocation across billing accounts
- **Value**: I can efficiently settle customer obligations, maintain accurate account balances, and ensure transparent credit distribution across invoices

**Description:**

As a **Billing Specialist**,
I want to **apply customer credit to outstanding invoices and manage allocation across billing accounts**,
So that **I can efficiently settle customer obligations, maintain accurate account balances, and ensure transparent credit distribution across invoices**


**Key Capabilities:**

**1. Credit Application Initiation**
User submits customer credit allocation specifying credit amount and target invoices. System performs synchronous validation ensuring allocated amounts do not exceed credit totals.

**2. Asynchronous Processing Workflow**
System queues credit application into billing account transaction sequence, applies processing tags, and executes based on transaction order while preventing concurrent operations.

**3. Invoice Eligibility Verification**
System validates invoice statuses are issued or partially paid, confirms allocated amounts do not exceed remaining invoice balances, and redirects excess to unapplied credit.

**4. Distribution Logic Execution**
When bill type is list bill with True Group mode, system distributes credit proportionally to member records. For self bills, system applies default allocation rules to invoiced items.

**5. Balance Reconciliation & Status Update**
System recalculates billing account and invoice balances, updates customer credit and invoice statuses per lifecycle rules, removes processing tags, and fires integration events for downstream systems.


**Acceptance Criteria:**

**1. Successful Credit Allocation**
Given valid customer credit with sufficient amount, When user submits allocation to eligible invoices, Then system applies credit to invoices, updates balances, transitions statuses, and fires invoice status changed event.

**2. Excess Allocation Handling**
Given allocated amount exceeds invoice remaining due but invoice balance is positive, When system processes application, Then system allocates only the remaining due amount and retains excess as unapplied credit on billing account.

**3. Invalid Invoice Status Rejection**
Given target invoice status is paid or discarded, When system validates eligibility, Then system applies entire credit to billing account unapplied without creating draft credit and fires unapplied payment event.

**4. Group Billing Distribution**
Given list bill with True Group allocation mode, When credit is applied, Then system distributes credit proportionally to member records per group calculation rules and fires member-level allocation events.

**5. Concurrent Operation Prevention**
Given billing account has active processing transaction, When user submits credit application, Then system queues request in transaction sequence and displays processing status until execution completes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=750563932"
]

---

#### Feature: Allocate Customer Credit to Member Records
- **Role**: Billing Administrator
- **Action**: allocate customer credit across member records and invoices to settle outstanding balances
- **Value**: accurate account reconciliation is achieved and member balances reflect timely credit applications

**Description:**

As a **Billing Administrator**,
I want to **allocate customer credit across member records and invoices to settle outstanding balances**,
So that **accurate account reconciliation is achieved and member balances reflect timely credit applications**


**Key Capabilities:**

**Credit Initiation & Validation**
User initiates customer credit allocation on IPA or Direct Bill billing accounts; system validates credit amount, allocation targets, and business rule compliance before processing.

**Allocation Processing & Distribution**
System sequences the credit activity, creates credit record in Initiated status, and distributes amounts to designated member records according to allocation rules and invoice associations.

**Balance Reconciliation & Status Update**
Upon successful allocation, system recalculates billing account and invoice balances, updates credit status per lifecycle rules, and adjusts invoice payment statuses.

**Event Notification & Downstream Integration**
System generates payment creation messages, triggers invoice status change notifications, and fires allocation events to compensation subsystem for downstream processing.


**Acceptance Criteria:**

**Successful Credit Allocation**
Given valid allocation details are provided, when the administrator submits the credit, then the system processes allocation, updates balances, and navigates to confirmation page.

**Allocation Amount Mismatch Handling**
Given allocated amount exceeds credit amount, when submission is attempted, then system prevents processing and prompts for correction without creating the credit record.

**Partial Allocation Confirmation**
Given credit amount exceeds total allocated amount, when submission occurs, then system prompts for confirmation and proceeds only upon explicit user approval.

**Balance & Status Synchronization**
Given credit is successfully allocated, when processing completes, then billing account balance, invoice balances, and payment statuses reflect the allocation accurately.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=754651681"
]

---

#### Feature: Manage Overpayment Handling and Credit Application
- **Role**: Billing Administrator
- **Action**: process customer refunds from overpayments or unapplied balances through system-guided workflows with approval controls
- **Value**: customers receive timely, accurate refunds while maintaining financial controls and audit compliance

**Description:**

As a **Billing Administrator**,
I want to **process customer refunds from overpayments or unapplied balances through system-guided workflows with approval controls**,
So that **customers receive timely, accurate refunds while maintaining financial controls and audit compliance**


**Key Capabilities:**

**1. Refund Initiation**
User initiates refund from billing account or member record, selecting beneficiary type (individual/organization), funding source (account unapplied/member record unapplied), payment method, and refund reason with amount validation against available balances.

**2. Approval Evaluation**
System evaluates refund amount against configured thresholds and user authority levels; auto-approves within limits or routes for manual approval; validates taxability settings for member-level refunds.

**3. Payment Processing**
Upon approval, system updates unapplied and account balances, dispatches payment instruction to Payment Hub with selected method, and tracks processing status through paid/declined outcomes.

**4. Exception Handling**
When processing fails, system reverses balance adjustments, updates refund status to declined, captures decline reason, and notifies stakeholders while preventing further actions on affected payments.


**Acceptance Criteria:**

**1. Successful Auto-Approval Path**
Given refund amount is within no-approval-required threshold, When user confirms refund submission, Then system immediately approves, updates balances, and dispatches to Payment Hub without manual intervention.

**2. Manual Approval Routing**
Given refund amount exceeds user authority level and auto-approval is disabled, When refund is initiated, Then system maintains 'Initiated' status, creates approval task, and restricts refund actions until authorized approver processes.

**3. Balance Validation**
Given user enters refund amount exceeding available unapplied balance, When validation executes, Then system prevents submission and highlights discrepancy without creating incomplete refund record.

**4. Payment Hub Integration**
Given approved refund is dispatched, When Payment Hub returns paid status, Then system updates refund to 'Paid' and finalizes balance adjustments.

**5. Decline Recovery**
Given Payment Hub processing fails, When decline event received, Then system reverses balance changes, updates status to 'Declined', captures reason, and unlocks payment for corrective action.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=616771734",
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=606248622",
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=610904120",
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=568299513"
]

---

#### Feature: Generate Refund Approval Workflow Tasks
- **Role**: Billing Approver
- **Action**: manage refund approval workflows through automated task generation and decision processing
- **Value**: refunds are systematically reviewed, authorized, and executed with proper controls and audit trails

**Description:**

As a **Billing Approver**,
I want to **manage refund approval workflows through automated task generation and decision processing**,
So that **refunds are systematically reviewed, authorized, and executed with proper controls and audit trails**


**Key Capabilities:**

**Refund Intake & Task Creation**
Upon refund initiation event, system generates approval task and routes to designated queue based on business rules for automated assignment logic.

**Approval Review & Decision Processing**
User is able to access pending refund tasks through work management interfaces, review refund details, and render approval or decline decision.

**Execution & Completion**
When approved, refund transitions to pending execution status; upon financial transaction completion, task is closed and removed from active queues.

**Cancellation Handling**
If cancellation is requested, system processes cancellation for initiated or approved-but-pending refunds, reverting status and nullifying prior approvals accordingly.


**Acceptance Criteria:**

**1. Task Generation Upon Initiation**
Given a refund initiation event occurs, When the event is processed, Then an approval task is created and assigned to the appropriate queue per business rule logic.

**2. Approval Decision Processing**
Given an approval task exists, When the authorized user renders an approval decision, Then the refund status updates to pending execution and task remains trackable until completion.

**3. Decline Handling**
Given a refund is declined, When the decision is recorded, Then the refund is terminated, no financial transaction occurs, and task is closed.

**4. Cancellation Processing**
Given a refund is in initiated or approved-pending status, When cancellation is requested, Then the system reverts status, nullifies approvals, and removes task from queues.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=634012786"
]

---

#### Feature: View Refund Transaction Details and History
- **Role**: Billing Administrator
- **Action**: access comprehensive refund transaction details and historical records
- **Value**: I can monitor refund status, verify transaction accuracy, and maintain audit compliance throughout the refund lifecycle

**Description:**

As a **Billing Administrator**,
I want to **access comprehensive refund transaction details and historical records**,
So that **I can monitor refund status, verify transaction accuracy, and maintain audit compliance throughout the refund lifecycle**


**Key Capabilities:**

**Refund Transaction Inquiry**
User is able to retrieve and display detailed information for specific refund transactions including transaction identifiers, amounts, and associated party information.

**Lifecycle Status Tracking**
User is able to view current processing stage of refunds across initiation, review, approval, and execution phases.

**Transaction History Review**
User is able to access complete audit trail showing refund modifications, approval decisions, cancellations, and system-automated actions.

**Cross-Reference Verification**
User is able to trace refund relationships to original payments, policy accounts, and related financial transactions for reconciliation purposes.


**Acceptance Criteria:**

**Transaction Retrieval Success**
Given a valid refund transaction exists, When user requests refund details, Then system displays comprehensive transaction information including amount, status, dates, and party details.

**Lifecycle Visibility**
Given refund has progressed through multiple stages, When user views transaction history, Then system presents chronological record of all status changes and decision points.

**Audit Trail Completeness**
Given refund underwent modifications or approvals, When user accesses history, Then system shows complete modification log with timestamps and user identifications.

**Invalid Transaction Handling**
Given requested refund identifier does not exist, When user attempts retrieval, Then system prevents display and communicates transaction unavailability.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=610903504"
]

---
## Initiative: Delinquency Management & Collections

### Epic: Delinquency Configuration & Control

#### Feature: Configure Delinquency Process Parameters by Product and Billing Type
- **Role**: Billing Administrator
- **Action**: configure delinquency processing parameters by product, billing type, and account characteristics
- **Value**: automated collections workflows align with business policies and regulatory requirements while maintaining policy lifecycle integrity

**Description:**

As a **Billing Administrator**,
I want to **configure delinquency processing parameters by product, billing type, and account characteristics**,
So that **automated collections workflows align with business policies and regulatory requirements while maintaining policy lifecycle integrity**


**Key Capabilities:**

**1. Establish Default Delinquency Framework**
User configures grace periods, notice timing intervals, and cancellation thresholds based on bill type, payment allocation mode, product, and state. System supports negative values for pre-grace-period notices and positive values for post-grace-period actions.

**2. Define State and Invoice Status Variations**
User creates override configurations for specific jurisdictions or payment statuses. System applies differentiated parameters (e.g., shorter grace periods for unpaid invoices, extended periods for partially paid).

**3. Configure Automated Cancellation Rules**
User specifies cancellation timing relative to grace period end and selects effective date calculation method (invoice due date, grace period end, or paid-to-date). System triggers cancellation requests with configured reason codes when payment thresholds are not met.


**Acceptance Criteria:**

**1. Configuration Activation**
Given default parameters are established, When invoice becomes due and remains unpaid through grace period, Then system generates notices at configured intervals and triggers cancellation at specified threshold.

**2. Override Priority**
Given account-level override exists, When delinquency process initiates, Then system applies override configuration instead of default parameters based on matching criteria (bill type, product, state).

**3. Payment Status Differentiation**
Given invoice is partially paid, When grace period begins, Then system applies extended grace period configuration distinct from unpaid invoice parameters.

**4. State Compliance Enforcement**
Given state-specific configuration exists, When account belongs to specified jurisdiction, Then system applies state-mandated notice intervals and grace period lengths.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=625643008"
]

---

#### Feature: Override Default Delinquency Configuration at Billing Account Level
- **Role**: Billing Administrator
- **Action**: override default delinquency configuration settings for specific billing accounts based on bill type and payment allocation mode
- **Value**: I can apply customized grace periods, reminder schedules, and cancellation notices that align with specific account characteristics and regulatory requirements

**Description:**

As a **Billing Administrator**,
I want to **override default delinquency configuration settings for specific billing accounts based on bill type and payment allocation mode**,
So that **I can apply customized grace periods, reminder schedules, and cancellation notices that align with specific account characteristics and regulatory requirements**


**Key Capabilities:**

**1. Delinquency Configuration Selection**
User is able to identify and select appropriate configuration strategy based on billing account's bill type (List Bill, Direct Bill, Self Bill) and payment allocation mode (True Group or Individual Premium Accounting).

**2. Grace Period Application**
User is able to apply configuration-specific grace periods ranging from 20 to 60 days. When payment allocation mode is Individual Premium Accounting, grace periods differentiate between unpaid and partially paid invoice statuses.

**3. State-Specific Rule Enforcement**
User is able to apply state-specific reminder and cancellation schedules. Upon configuration selection for certain bill types, system enforces distinct thresholds for AZ, AL, and other states.

**4. Configuration Override Execution**
User is able to finalize and activate the selected configuration to override default delinquency behavior at the billing account level, ensuring rules take effect immediately.


**Acceptance Criteria:**

**1. Configuration Selection Validation**
Given a billing account with defined bill type and payment allocation mode, when administrator selects a configuration, then system validates compatibility and prevents invalid assignments.

**2. Grace Period Assignment**
Given a valid configuration selection, when override is applied, then system assigns the corresponding grace period and activates delinquency timeline according to configuration parameters.

**3. State-Specific Rule Application**
Given a configuration with state-specific rules, when billing account has associated state identifier, then system applies appropriate reminder and cancellation day thresholds for that jurisdiction.

**4. Payment Status Differentiation**
Given Individual Premium Accounting mode, when invoice payment status changes, then system adjusts grace period accordingly between unpaid and partially paid thresholds.

**5. Override Confirmation**
Given successful configuration application, when override is complete, then system confirms default settings are superseded and new rules govern delinquency processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=688787961"
]

---

#### Feature: Determine Delinquency Configuration Selection per Product Context
- **Role**: Billing Administrator
- **Action**: configure delinquency processing parameters based on product and billing arrangement context
- **Value**: automated delinquency actions are correctly triggered according to business policies and billing scenarios

**Description:**

As a **Billing Administrator**,
I want to **configure delinquency processing parameters based on product and billing arrangement context**,
So that **automated delinquency actions are correctly triggered according to business policies and billing scenarios**


**Key Capabilities:**

**1. Delinquency Process Initiation**
System initiates automated delinquency processing when payment obligations are unmet, evaluating payment status across all outstanding billing documents.

**2. Action Determination**
System applies business rules to determine appropriate delinquency action type (reminder notice, cancel notice, cancellation request, or automatic premium loan request) based on payment status and policies.

**3. Multi-Invoice Assessment**
When billed products exist under different invoices or payment requests, system evaluates all outstanding obligations collectively.

**4. Billing Arrangement-Specific Processing**
Upon identifying billing scenario type, system triggers appropriate communication workflow for List Bill, Individual Direct Bill, or Self Bill arrangements.

**5. OpenL Parameter Configuration**
System sets delinquency event parameters in OpenL-Billing rules engine to enable automated workflow execution.


**Acceptance Criteria:**

**1. Process Activation**
Given payment obligations are unmet, When delinquency processing initiates, Then system evaluates payment status across all relevant billing documents without manual intervention.

**2. Action Type Selection**
Given configured business rules, When system determines delinquency action, Then appropriate action type is selected based on payment status and policy parameters.

**3. Cross-Invoice Evaluation**
Given products under multiple invoices, When delinquency assessment occurs, Then system considers all outstanding obligations collectively before triggering actions.

**4. Arrangement-Specific Routing**
Given identified billing arrangement type, When communication workflow triggers, Then system executes scenario-specific process for List Bill, Individual Direct Bill, or Self Bill.

**5. Parameter Validation**
Given OpenL integration requirements, When delinquency events are configured, Then system prevents processing if required parameters are incomplete or invalid.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=627058978"
]

---

#### Feature: Stop Delinquency Process Upon Payment or Policy Cancellation
- **Role**: Billing Administrator
- **Action**: automatically halt delinquency processing when payment obligations are satisfied or policies are cancelled
- **Value**: customers are not subject to unnecessary collection actions and system resources are optimized

**Description:**

As a **Billing Administrator**,
I want to **automatically halt delinquency processing when payment obligations are satisfied or policies are cancelled**,
So that **customers are not subject to unnecessary collection actions and system resources are optimized**


**Key Capabilities:**

**1. Payment Detection & Invoice Resolution**
System monitors payment allocation activities and detects when invoices under delinquency are fully satisfied, updating invoice status accordingly.

**2. Delinquency Tag Removal**
Upon payment completion, system removes delinquency indicators from invoice, payment request, and master policy levels for all affected products.

**3. Policy Cancellation Handling**
When cancellation transaction is issued for policies under delinquency, system immediately stops collection processing for that specific master policy.

**4. Audit Trail Generation**
System creates completion activity records at organization customer billing account level documenting delinquency process termination for each affected master policy.


**Acceptance Criteria:**

**1. Payment-Triggered Delinquency Termination**
Given invoice is under delinquency processing, when full payment is allocated and invoice status becomes 'Paid', then system removes all delinquency tags and generates completion audit records.

**2. Cancellation-Triggered Delinquency Termination**
Given master policy is under delinquency processing, when cancellation transaction is issued, then system stops delinquency for that policy and removes policy-level tags without affecting invoice status.

**3. Multi-Level Tag Cleanup**
Given delinquency process is stopped, when system processes termination, then delinquency indicators are removed from invoice, payment request, and master policy levels simultaneously.

**4. Audit Activity Recording**
Given delinquency termination occurs, when process completes, then system generates finished-status activity record for each affected master policy on billing account.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=718250258"
]

---

#### Feature: Generate Delinquency Process Status Events and Notifications
- **Role**: Billing Administrator
- **Action**: configure and trigger delinquency status events and notifications across product portfolios
- **Value**: stakeholders receive timely alerts about payment delinquencies enabling proactive collections management

**Description:**

As a **Billing Administrator**,
I want to **configure and trigger delinquency status events and notifications across product portfolios**,
So that **stakeholders receive timely alerts about payment delinquencies enabling proactive collections management**


**Key Capabilities:**

**1. Delinquency Event Configuration**
Administrator establishes business rules defining when delinquency status events are triggered based on payment aging thresholds and product type classifications

**2. Multi-Product Event Generation**
System automatically generates delinquency status events when accounts meet configured criteria across List Bill, Individual Direct, and Self Bill portfolios

**3. Notification Distribution**
Upon event generation, system routes notifications to designated stakeholders including collection teams, account managers, and automated workflow systems

**4. Process Control Management**
Administrator monitors and adjusts delinquency process triggers to align with changing business policies and regulatory requirements


**Acceptance Criteria:**

**1. Event Triggering Accuracy**
Given accounts with overdue balances, When payment aging exceeds configured thresholds, Then system generates appropriate delinquency status events for respective product types

**2. Cross-Product Consistency**
Given delinquency rules configured globally, When events are triggered, Then identical aging conditions produce consistent events across List Bill, Individual Direct, and Self Bill products

**3. Notification Delivery**
Given generated delinquency events, When status changes occur, Then designated recipients receive notifications within defined service level timeframes

**4. Process Termination Control**
Given active delinquency processes, When stop conditions are met, Then system prevents further event generation and notification distribution for resolved accounts


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645904340"
]

---

### Epic: Collections & Enforcement Actions

#### Feature: Manage Invoice Tolerance with Carry Forward
- **Role**: Billing Administrator
- **Action**: automatically evaluate and exempt small invoice shortages from delinquency processing using tolerance thresholds
- **Value**: I can maintain customer relationships and reduce collection costs by avoiding delinquency actions on financially insignificant balances while ensuring amounts are recovered through carry forward

**Description:**

As a **Billing Administrator**,
I want to **automatically evaluate and exempt small invoice shortages from delinquency processing using tolerance thresholds**,
So that **I can maintain customer relationships and reduce collection costs by avoiding delinquency actions on financially insignificant balances while ensuring amounts are recovered through carry forward**


**Key Capabilities:**

**1. Tolerance Evaluation Trigger**
System initiates tolerance assessment upon payment allocation mode changes (allocation, unallocation, transfer) or generation of invoices containing negative items.

**2. Threshold Calculation & Determination**
System evaluates invoice against configured tolerance limits based on bill type, payment allocation mode, and state parameters to determine exemption eligibility.

**3. Within-Tolerance Invoice Processing**
When invoice shortage is within tolerance limit, system applies tolerance flag, excludes invoice from delinquency processing, carries forward balance to next invoice total due, and maintains invoice open status.

**4. Outside-Tolerance Invoice Handling**
When invoice exceeds tolerance threshold, system prevents tolerance flag application on current and subsequent invoices, or removes existing flags across billing account.

**5. Dynamic Flag Recalculation**
Upon payment unallocation causing previously tolerated invoice to exceed limits, system automatically removes tolerance flags from affected invoice and all subsequent invoices on billing account.


**Acceptance Criteria:**

**1. Tolerance Flag Application for Qualifying Invoices**
Given an invoice with shortage within configured tolerance limit, When payment allocation triggers tolerance evaluation, Then system applies tolerance flag and excludes invoice from delinquency processing while carrying forward balance.

**2. Tolerance Flag Prevention for Exceeding Invoices**
Given an invoice with shortage exceeding tolerance threshold, When tolerance calculation executes, Then system prevents tolerance flag application on current and all subsequent invoices on billing account.

**3. Automatic Flag Removal on Threshold Breach**
Given a previously tolerated invoice, When payment unallocation causes shortage to exceed tolerance limit, Then system removes tolerance flags from affected invoice and all subsequent invoices making them delinquency-eligible.

**4. Balance Carry Forward to Next Invoice**
Given a tolerated invoice with outstanding balance, When next invoice generates, Then system automatically adds carried forward amount to new invoice total due.

**5. Multi-Trigger Tolerance Recalculation**
Given configured tolerance parameters, When any payment allocation mode change or negative invoice item generation occurs, Then system immediately recalculates tolerance status across affected invoices.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=639735901"
]

---

#### Feature: Trigger Automated Delinquency Processing by Payment Allocation Mode
- **Role**: Billing Administrator
- **Action**: trigger automated delinquency processing based on payment allocation mode and billing account configuration
- **Value**: timely collections enforcement actions are initiated systematically across diverse billing structures without manual intervention

**Description:**

As a Billing Administrator,
I want to trigger automated delinquency processing based on payment allocation mode and billing account configuration,
So that timely collections enforcement actions are initiated systematically across diverse billing structures without manual intervention


**Key Capabilities:**

**1. Scheduled Delinquency Evaluation**
Scheduled jobs systematically identify invoices or payment requests requiring delinquency action based on grace period expiration and payment status assessment.

**2. Payment Status Determination by Billing Structure**
System evaluates payment sufficiency at invoice level or invoice item level depending on bill type and payment allocation mode configuration.

**3. Business Event Classification and Routing**
System triggers appropriate enforcement events (Reminder Notice, Cancel Notice, Cancellation Request, APL Request) at Master Policy or Member Record level based on billing structure and payment allocation rules.

**4. Consolidated Event Generation**
System aggregates related enforcement events triggered on same day for same billing account, invoice, notice type, and subtype to streamline downstream processing and communications.


**Acceptance Criteria:**

**1. Grace Period-Based Triggering**
Given grace period has expired, When scheduled job evaluates billing accounts, Then system identifies qualifying invoices/payment requests for delinquency processing based on configured offset days.

**2. Payment Allocation Mode Routing**
Given bill type is List Bill with True Group Payment Allocation, When invoice remains unpaid or partially paid, Then system triggers events at Master Policy level treating all products as underpaid collectively.

**3. Granular Individual Billing Processing**
Given bill type is Individual Premium Accounting with partially paid invoice, When invoice item level assessment occurs, Then system triggers events only for Master Policies and Member Records with outstanding balances.

**4. Self Bill Scenario Handling**
Given Self Bill account with payment request but no generated invoice, When delinquency processing executes, Then system triggers events based on payment request content at Master Policy level.

**5. Event Consolidation Logic**
Given multiple products trigger events on same day for same billing account and invoice, When events share notice type and subtype, Then system generates single consolidated event containing all relevant policy data.

**6. APL-Specific Qualification**
Given APL Request event type, When Member Records lack APL attribute set to 'true', Then system prevents event triggering regardless of payment status.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=627059248"
]

---

#### Feature: Generate Consolidated Delinquency Notices Across Products
- **Role**: Billing Administrator
- **Action**: automate multi-product delinquency notice generation with intelligent consolidation
- **Value**: customers receive unified communications reducing confusion while ensuring accurate enforcement across diverse billing structures

**Description:**

As a Billing Administrator,
I want to automate multi-product delinquency notice generation with intelligent consolidation,
So that customers receive unified communications reducing confusion while ensuring accurate enforcement across diverse billing structures


**Key Capabilities:**

**1. Scheduled Delinquency Assessment**
System evaluates invoices and payment requests daily to identify products triggering business events based on payment status, bill type configuration, and notice type requirements

**2. Multi-Level Event Generation**
Upon identifying delinquency, system generates events at Master Policy level for group sponsors and Member Record level for individuals, considering payment allocation mode and invoice item status

**3. Intelligent Event Consolidation**
When multiple products share same billing account, invoice, day, and notice type, system consolidates Master Policy or Member Record events into unified communications

**4. Differentiated Notice Processing**
System routes reminder notices, cancellation notices, cancellation requests, and APL requests through appropriate channels with consolidated data for True Group versus Individual Direct billing scenarios

**5. Task Generation for Enforcement**
Upon cancellation request triggers, system creates tasks at Master Policy or Member Record level to initiate coverage termination workflows


**Acceptance Criteria:**

**1. True Group Payment Processing**
Given invoice is partially paid with multiple products, When system evaluates at Master Policy level, Then consolidated event includes all unpaid products without generating individual Member Record events

**2. Individual Premium Accounting Handling**
Given invoice has two products where one is fully paid, When system triggers cancel notice, Then events generate for unpaid Master Policy and associated Member Records only, consolidated into single customer communication

**3. Self Bill Scenario Management**
Given payment request exists without generated invoice, When delinquency period triggers, Then system generates events based on earliest payment request due date with Master Policy level content

**4. Multi-Product Consolidation Logic**
Given multiple Master Policies with same configuration on single billing account, When both trigger same notice type on same day, Then system produces single consolidated event containing all Master Policy data

**5. Cancellation Task Creation**
Given cancellation request event is triggered, When processing Individual Premium Accounting bill type, Then system creates tasks for Master Policy and each partially paid Member Record separately


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=627059248"
]

---

#### Feature: Create Cancellation Request Tasks for Delinquent Policies
- **Role**: Billing Administrator
- **Action**: automate the creation and management of cancellation request tasks for policies in delinquency status
- **Value**: delinquent accounts are systematically identified and processed for enforcement actions without manual intervention, reducing revenue leakage and operational overhead

**Description:**

As a **Billing Administrator**,
I want to **automate the creation and management of cancellation request tasks for policies in delinquency status**,
So that **delinquent accounts are systematically identified and processed for enforcement actions without manual intervention, reducing revenue leakage and operational overhead**


**Key Capabilities:**

**1. Delinquency Threshold Evaluation**
System continuously monitors policy payment status and determines when reminder notices or cancellation requests should be initiated based on configured business rules

**2. Automated Task Generation**
Upon meeting delinquency criteria, system creates cancellation request tasks with appropriate effective dates and assigns to collections queue

**3. Billing Method Differentiation**
System triggers appropriate delinquency communications tailored to billing method (List Bill versus Individual Direct) with method-specific messaging

**4. Queue-Based Workflow Management**
Generated tasks populate delinquent policies queue for administrator review, prioritization, and processing through work management system

**5. Business Event Processing**
System processes delinquency-related business events to update policy status and trigger downstream enforcement actions automatically


**Acceptance Criteria:**

**1. Automated Task Creation Trigger**
Given a policy exceeds configured delinquency threshold, When the system evaluates payment status, Then cancellation request task is automatically generated with calculated effective date

**2. Billing Method-Specific Communication**
Given different billing methods exist, When delinquency task is created, Then system sends appropriate communication variant matching the policy's billing method configuration

**3. Queue Population and Visibility**
Given cancellation tasks are generated, When administrator accesses delinquent policies queue, Then all newly created tasks appear with entity reference and status attributes for prioritization

**4. Rule-Driven Processing**
Given delinquency parameters are configured in business rules, When evaluation occurs, Then system applies current parameterized thresholds and grace periods without hardcoded values

**5. Manual Override Capability**
Given automated task exists in queue, When administrator requires intervention, Then user is able to access task details and modify processing approach through work management interface


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=645893574"
]

---

#### Feature: Notify Policy System of Delinquency for Cancellation Processing
- **Role**: Billing Administrator
- **Action**: notify the policy system of delinquency status to trigger automated cancellation processing
- **Value**: policy coverages are systematically terminated when payment obligations remain unfulfilled, ensuring regulatory compliance and minimizing financial exposure

**Description:**

As a **Billing Administrator**,
I want to **notify the policy system of delinquency status to trigger automated cancellation processing**,
So that **policy coverages are systematically terminated when payment obligations remain unfulfilled, ensuring regulatory compliance and minimizing financial exposure**.


**Key Capabilities:**

**Delinquency Detection and Notification**
Billing system triggers automated delinquency processing job and transmits processing request to policy system for master policy or member record evaluation.

**Policy System Event Processing**
Policy system receives delinquency business event and initiates automated processing workflow for the entire affected policy or membership record.

**Cancellation Determination**
System evaluates business rules to determine whether automated cancellation is required based on delinquency status and policy terms.

**Conditional Cancellation Execution**
When cancellation is required, system creates cancellation transaction with zeroed modal premium amounts for affected billing periods and notifies billing system.

**Alternative Resolution Path**
When cancellation is not required, process concludes without generating cancellation transactions or further enforcement actions.


**Acceptance Criteria:**

**Successful Delinquency Notification**
Given a delinquency condition exists, when the billing job executes, then the policy system receives the automated processing request for the affected master policy or member record.

**Automated Cancellation Processing**
Given cancellation is determined necessary, when the policy system completes evaluation, then a cancellation transaction with zeroed modal premium amounts is created and transmitted to the billing system.

**Non-Cancellation Resolution**
Given cancellation is not required, when the determination is made, then the process terminates without creating cancellation transactions or further notifications.

**System Synchronization**
Given a cancellation transaction is created, when the billing system receives notification, then billing records reflect the cancelled status for affected modal periods.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=641142087"
]

---

#### Feature: Execute Non-Payment Cancellation for First Invoice Delinquency
- **Role**: Billing Administrator
- **Action**: automatically cancel ported or continued policies when the first invoice remains unpaid beyond the configured grace period
- **Value**: the organization minimizes revenue loss, enforces payment discipline, and maintains portfolio health by removing non-performing policies systematically

**Description:**

As a **Billing Administrator**,
I want to **automatically cancel ported or continued policies when the first invoice remains unpaid beyond the configured grace period**,
So that **the organization minimizes revenue loss, enforces payment discipline, and maintains portfolio health by removing non-performing policies systematically**


**Key Capabilities:**

**Policy Identification & Eligibility Screening**
System identifies all ported or continued policies where only the first invoice has been billed with zero payment received.

**Grace Period Calculation & Validation**
System retrieves product-configured grace period (X days) and validates Current System Date exceeds Invoice Due Date plus grace period.

**Cancellation Submission**
Upon meeting delinquency criteria, system submits policy cancellation to PolicyCore with effective date retroactive to policy portability or continuation date.

**Sequential Batch Processing**
System processes eligible policies sequentially, skipping policies with partial payments or within grace period, continuing until all records are evaluated.


**Acceptance Criteria:**

**Eligible Policy Cancellation**
Given a ported policy with first invoice unpaid and Current System Date exceeds Due Date plus grace period, When the job executes, Then the system submits cancellation to PolicyCore with effective date set to policy portability date.

**Partial Payment Exclusion**
Given a policy where any amount has been paid on first invoice, When the job evaluates the policy, Then the system skips cancellation and proceeds to next policy.

**Grace Period Compliance**
Given Current System Date is within the configured grace period, When the job evaluates the policy, Then the system does not initiate cancellation and continues processing queue.

**Empty Queue Handling**
Given no policies meet eligibility criteria, When the job runs, Then the system exits process immediately without errors.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=561864940"
]

---

#### Feature: Stop Premium Billing for Nonforfeiture Clause Policies
- **Role**: Billing Administrator
- **Action**: automatically cease premium billing when nonforfeiture clauses are applied to Whole Life policies
- **Value**: policies remain active under revised terms without generating unnecessary invoices or payment obligations

**Description:**

As a Billing Administrator,
I want to automatically cease premium billing when nonforfeiture clauses are applied to Whole Life policies,
So that policies remain active under revised terms without generating unnecessary invoices or payment obligations


**Key Capabilities:**

**Nonforfeiture Amendment Recognition**
Upon receiving policy amendment transactions with Reduced Paid-Up or Extended Term attributes from the Policy system, the Billing system identifies stop-billing indicators and processes amendments accordingly.

**Automated Premium Calculation Adjustment**
System calculates Modal Premium as zero from the amendment's effective date, applying proration logic for mid-period amendments to ensure accurate billing transitions.

**Invoice Generation Suppression**
No new invoice items are generated for flagged Member Records from the effective date onwards, while negative invoice items may be created to reverse previously billed premiums.

**Dual Trigger Support**
User is able to initiate stop-billing through automated delinquency-triggered nonforfeiture processing or manual Policy user-initiated amendments, ensuring comprehensive coverage.

**Prior Period Adjustment Processing**
When amendments impact already-billed periods, system generates appropriate reversals and processes adjustments to maintain billing accuracy across historical records.


**Acceptance Criteria:**

**1. Automated Stop Billing Activation**
Given a Whole Life policy meets delinquency cancellation criteria, When the Policy system sends a nonforfeiture amendment with RPU or ET attributes, Then the Billing system sets Modal Premium to zero and stops generating invoice items from the effective date.

**2. Manual Amendment Processing**
Given a Policy user manually initiates a nonforfeiture clause, When the amendment transaction reaches the Billing system, Then premium billing ceases with the same accuracy and timeliness as automated triggers.

**3. Mid-Period Proration Accuracy**
Given an amendment effective date falls within a billing period, When Modal Premium is calculated, Then proration logic applies correctly and negative invoice items reverse previously billed amounts for that period.

**4. Subsequent Transaction Inheritance**
Given a policy has active RPU or ET status, When subsequent policy transactions are processed, Then the Stop Billing flag persists and no premiums are calculated.

**5. Prior Period Adjustment Integrity**
Given an amendment impacts already-invoiced periods, When adjustments are processed, Then negative invoice items accurately reverse historical charges without generating new premium obligations.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=747867858"
]

---

#### Feature: Manage Write-Off Approval Workflow
- **Role**: Billing Approver
- **Action**: review and adjudicate write-off requests through a task-based approval workflow
- **Value**: I can ensure proper oversight and control over revenue write-off decisions while maintaining audit trails

**Description:**

As a **Billing Approver**,
I want to **review and adjudicate write-off requests through a task-based approval workflow**,
So that **I can ensure proper oversight and control over revenue write-off decisions while maintaining audit trails**


**Key Capabilities:**

**Task Initiation & Routing**
When a write-off is initiated, the system automatically creates an approval task and routes it to the appropriate approval queue for manual review.

**Task Access & Retrieval**
User is able to access pending approval tasks through multiple navigation paths including work queues, task lists, and overview panels.

**Request Review & Evaluation**
User is able to examine write-off request details including reference information and supporting documentation to inform approval decisions.

**Decision Adjudication**
User is able to approve or reject write-off requests based on business rules and complete the task workflow, triggering downstream processing.


**Acceptance Criteria:**

**Task Creation Upon Write-Off Initiation**
Given a write-off is initiated, When the system processes the event, Then an approval task is created and routed to the appropriate manual approval queue.

**Task Visibility for Authorized Users**
Given an approval task exists, When an authorized user accesses their work queue, Then the task appears with reference tracking information for identification.

**Decision Processing**
Given a user reviews a write-off request, When they approve or reject the request, Then the system completes the task and removes it from active work queues.

**Approval Outcome Enforcement**
Given a decision is rendered, When the task is completed, Then the write-off status reflects the approval or rejection accordingly and triggers appropriate downstream actions.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=696497605"
]

---

### Epic: Delinquency Communications & Notifications

#### Feature: Trigger Automatic Delinquency Communication Events
- **Role**: Billing Administrator
- **Action**: automate delinquency communication workflows for non-payment situations
- **Value**: customers receive timely escalating notices and the organization can systematically manage collections activities while minimizing manual intervention

**Description:**

As a **Billing Administrator**,
I want to **automate delinquency communication workflows for non-payment situations**,
So that **customers receive timely escalating notices and the organization can systematically manage collections activities while minimizing manual intervention**


**Key Capabilities:**

**1. Identify Delinquent Accounts**
Job identifies billing accounts containing issued or partially paid invoices, excluding those with active communication holds or within tolerance thresholds.

**2. Determine Communication Events**
System retrieves product-specific delinquency configurations and validates whether reminder notices, cancel notices, or cancellation requests should be initiated based on payment aging.

**3. Generate Individual Events**
System fires product-level business events (reminder/cancel notices, cancellation requests, APL requests) and marks invoices with delinquency process indicators.

**4. Consolidate Communications**
When multiple products exist on same account, system aggregates reminder and cancel notices into single consolidated events per billing account and notice type.

**5. Track Processing Activities**
System generates audit activities recording all delinquency events and creates cancellation tasks when escalation thresholds are reached.


**Acceptance Criteria:**

**1. Delinquent Account Detection**
Given billing accounts exist with overdue invoices, When the delinquency job executes, Then the system identifies all accounts with issued or partially paid invoices excluding those with active holds.

**2. Hold Configuration Enforcement**
Given a billing account has active reminder notice holds, When delinquency processing occurs, Then the system skips reminder notice generation but processes other eligible communication types.

**3. Event Generation Based on Aging**
Given an overdue invoice meets configured threshold criteria, When validation completes successfully, Then the system fires appropriate notice events and sets delinquency process indicators.

**4. Communication Consolidation**
Given multiple products on one account trigger same notice type on same day, When individual events are generated, Then the system creates a single consolidated communication event.

**5. Audit Trail Creation**
Given delinquency events are processed, When communications are triggered, Then the system generates completed activity records for each event and consolidated communication.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=624213077"
]

---

#### Feature: Configure Delinquency Parameters by Product and Bill Type
- **Role**: Billing Administrator
- **Action**: automate delinquency communications and collections workflow based on configurable product and bill type parameters
- **Value**: improve cash flow, reduce manual collection efforts, and ensure consistent payment follow-up across all customer accounts

**Description:**

As a **Billing Administrator**,
I want to **automate delinquency communications and collections workflow based on configurable product and bill type parameters**,
So that **I can improve cash flow, reduce manual collection efforts, and ensure consistent payment follow-up across all customer accounts**


**Key Capabilities:**

**1. Delinquency Identification & Validation**
System automatically identifies billing accounts with issued or partially paid invoices, validates absence of hold tags (Reminder/Cancel/Cancellation holds), and applies product-specific configuration parameters

**2. Configuration Parameter Application**
System retrieves delinquency rules per product (grace period, notice timing, cancel period) and determines appropriate communication events based on bill type and payment allocation mode

**3. Event Generation & Communication Dispatch**
System fires reminder notices, cancel notices, or cancellation requests at Master Policy or Member Record levels based on invoice status and payment allocation logic

**4. Cancellation Request Workflow**
When cancellation trigger is reached, system creates automated tasks for policy cancellation review, enabling manual validation or automated processing decisions


**Acceptance Criteria:**

**1. Delinquency Detection Accuracy**
Given accounts have overdue invoices, When the delinquency job executes, Then only accounts without hold tags and matching configuration criteria trigger delinquency events

**2. Configuration-Driven Event Logic**
Given product-specific parameters are configured, When grace period ends, Then appropriate notice events fire at correct organizational level (MP/MR) based on bill type

**3. Payment Allocation Mode Handling**
Given List Bill with Individual Premium Accounting and partially paid status, When processing executes, Then events fire only for unpaid products within the invoice

**4. Cancellation Task Creation**
Given cancellation period expires without payment, When cancellation request event fires, Then automated task is created with appropriate policy or member identifier for manual intervention


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628374646"
]

---

#### Feature: Generate Reminder Notice Events for Overdue Invoices
- **Role**: Billing Administrator
- **Action**: automate reminder notice generation and escalation for overdue invoices based on configured delinquency rules
- **Value**: timely payment recovery is facilitated through systematic communication while maintaining compliance with grace period policies

**Description:**

As a **Billing Administrator**,
I want to **automate reminder notice generation and escalation for overdue invoices based on configured delinquency rules**,
So that **timely payment recovery is facilitated through systematic communication while maintaining compliance with grace period policies**


**Key Capabilities:**

**1. Scheduled Delinquency Evaluation**
System executes automated jobs to assess outstanding invoice status against configured grace periods and payment allocation rules.

**2. Billing-Type Adaptive Processing**
Upon identifying delinquent accounts, system applies billing-type-specific logic (List Bill group rules, Individual Direct notices, Self Bill protocols) to determine appropriate communication.

**3. Escalation Action Determination**
When grace period thresholds are exceeded, system initiates reminder notices, cancellation warnings, or automatic policy lapse requests based on delinquency parameters.

**4. Event Generation and Dispatch**
System creates business events documenting actions taken and triggers communication delivery to affected policyholders or billing contacts.


**Acceptance Criteria:**

**1. Delinquency Detection Accuracy**
Given configured grace periods exist, When scheduled job executes, Then all invoices exceeding payment deadlines are identified and evaluated for action.

**2. Billing-Type Communication Routing**
Given accounts have assigned billing types, When delinquency is detected, Then communication follows type-specific protocols (group vs. individual vs. self-administered).

**3. Escalation Threshold Enforcement**
Given delinquency parameters define escalation rules, When evaluation occurs, Then appropriate actions (reminder, cancellation request, lapse initiation) trigger based on severity.

**4. Event Audit Trail Creation**
Given processing completes, When notices or requests are generated, Then corresponding business events document all actions taken for compliance tracking.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628364268"
]

---

#### Feature: Generate Cancel Notice Events for Escalated Delinquency
- **Role**: Billing Administrator
- **Action**: automate escalated delinquency cancellation notice generation across billing scenarios
- **Value**: delinquent accounts are systematically addressed with appropriate communications, reducing manual intervention and ensuring consistent policy enforcement

**Description:**

As a **Billing Administrator**,
I want to **automate escalated delinquency cancellation notice generation across billing scenarios**,
So that **delinquent accounts are systematically addressed with appropriate communications, reducing manual intervention and ensuring consistent policy enforcement**.


**Key Capabilities:**

**1. Delinquency Detection & Evaluation**
System automatically identifies accounts exceeding grace periods and delinquency thresholds through scheduled batch processing.

**2. Billing-Type Classification**
System applies billing-specific rules for List Bill, Individual Direct, or Self Bill scenarios to determine appropriate escalation paths.

**3. Business Rule Adjudication**
System evaluates configured parameters, grace period conditions, and payment status against cancellation criteria.
    3.1 Upon payment conflicts, system resolves allocation ambiguities before proceeding
    3.2 When custom parameters exist, system applies organization-specific overrides

**4. Cancellation Notice Generation**
System triggers automated cancellation communications and updates account delinquency status with audit logging.


**Acceptance Criteria:**

**1. Automated Detection**
Given accounts exceed delinquency thresholds, When batch processing executes, Then system identifies and flags all qualifying delinquent accounts.

**2. Billing-Specific Processing**
Given different billing types exist, When delinquency evaluation occurs, Then system applies correct rules for List Bill, Individual Direct, or Self Bill scenarios.

**3. Grace Period Compliance**
Given grace period configurations, When evaluating escalation, Then system prevents premature cancellation notices during valid grace periods.

**4. Cancellation Event Integrity**
Given escalated delinquency conditions met, When generating notices, Then system creates cancellation events with complete audit trails and status updates.

**5. Exception Handling**
Given payment allocation conflicts, When ambiguity detected, Then system prevents notice generation until resolution.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628364284"
]

---

#### Feature: Generate Consolidated Delinquency Notices Across Multiple Policies
- **Role**: Billing Administrator
- **Action**: generate consolidated delinquency communications across multiple policies
- **Value**: I can efficiently notify policyholders of payment obligations while reducing administrative overhead and improving collection effectiveness

**Description:**

As a **Billing Administrator**,
I want to **generate consolidated delinquency communications across multiple policies**,
So that **I can efficiently notify policyholders of payment obligations while reducing administrative overhead and improving collection effectiveness**


**Key Capabilities:**

**1. Delinquency Event Detection**
System identifies delinquency conditions across multiple policies based on grace period expiration and invoice status thresholds

**2. Consolidation Logic Execution**
System aggregates delinquency information across eligible policies for the same policyholder according to billing method (List Bill or Individual Direct)

**3. Communication Determination**
System determines appropriate notice types (Reminder, Cancellation Warning, APL Request) based on delinquency severity and configured business rules

**4. Notice Generation**
System generates consolidated delinquency communications incorporating all relevant policy obligations and payment allocation details


**Acceptance Criteria:**

**1. Multi-Policy Aggregation**
Given multiple policies in delinquent status for the same policyholder, When consolidation criteria are met, Then system generates a single consolidated notice encompassing all delinquent obligations

**2. Billing Method Differentiation**
Given policies with different billing methods, When delinquency events trigger, Then system applies appropriate communication rules per billing method configuration

**3. Escalation Path Enforcement**
Given progressive delinquency stages, When grace periods expire, Then system escalates notice types from reminder to cancellation warning according to business event parameters

**4. Business Event Integration**
Given configured delinquency thresholds, When invoice status changes trigger events, Then system automatically initiates appropriate communication workflows


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=690263681"
]

---

#### Feature: Initiate Cancellation Requests for Non-Payment
- **Role**: Billing Administrator
- **Action**: automate cancellation request workflows for unpaid premiums through scheduled delinquency processing
- **Value**: coverage termination decisions are triggered systematically, reducing manual intervention and ensuring consistent enforcement of payment policies

**Description:**

As a **Billing Administrator**,
I want to **automate cancellation request workflows for unpaid premiums through scheduled delinquency processing**,
So that **coverage termination decisions are triggered systematically, reducing manual intervention and ensuring consistent enforcement of payment policies**


**Key Capabilities:**

**1. Eligibility Assessment and Account Selection**
System identifies billing accounts with issued or partially paid invoices, excluding accounts with hold tags (Reminder/Cancel/Cancellation On Hold)

**2. Configuration-Based Timeline Calculation**
System applies product-specific grace periods (0-90 days) and calculates cancellation trigger dates relative to grace period expiration per configured rules

**3. Payment Status Analysis by Bill Structure**
System evaluates payment completeness differently for True Group (all-or-nothing at Master Policy), Individual Premium Accounting (per-member tracking), and Individual Direct billing modes

**4. Hierarchical Cancellation Event Generation**
Upon reaching cancellation trigger date, system fires business events at Master Policy and/or Member Record levels based on bill type and partial payment patterns

**5. Task Creation for Human Review**
System generates cancellation request tasks in Task Management subsystem without executing automatic termination, enabling policy administrators to review circumstances before finalizing coverage termination


**Acceptance Criteria:**

**1. Cancellation Request Initiation Timing**
Given configured grace period has expired and cancellation offset days have elapsed, When delinquency job executes, Then cancellation request events are fired only for unpaid products meeting timeline criteria

**2. Hold Tag Enforcement**
Given billing account has 'Cancellation On Hold' tag active, When delinquency processing runs, Then system skips cancellation request generation regardless of timeline configuration

**3. Bill-Type-Specific Event Targeting**
Given List Bill with Individual Premium Accounting mode and partially paid invoice, When cancellation trigger is reached, Then events fire only for unpaid Master Policies and associated unpaid Member Records

**4. Task Generation Without Auto-Termination**
Given cancellation request event is fired at Member Record level, When task is created in Task Management, Then system awaits policy administrator action without executing automatic coverage cancellation

**5. Configuration Parameter Boundary Validation**
Given cancellation offset parameter set outside 0-90 day range, When job attempts execution, Then system prevents processing and flags configuration error for correction


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628374646"
]

---

#### Feature: Validate Billing Account Hold Status Before Delinquency Processing
- **Role**: Billing Administrator
- **Action**: validate billing account hold status to control automated delinquency communications
- **Value**: inappropriate notices are prevented for accounts under temporary hold conditions, ensuring compliance and customer satisfaction

**Description:**

As a **Billing Administrator**,
I want to **validate billing account hold status to control automated delinquency communications**,
So that **inappropriate notices are prevented for accounts under temporary hold conditions, ensuring compliance and customer satisfaction**


**Key Capabilities:**

**1. Hold Status Validation at Job Initiation**
When delinquency processing job identifies billing accounts with outstanding payment requests, system validates presence of active hold tags (Reminder Notice On Hold, Cancel Notice On Hold, Cancellation On Hold) based on effective date ranges.

**2. Conditional Processing Based on Hold Type**
Upon detecting active holds, system applies hold-specific suppression rules: skips reminder notice generation for reminder holds, suppresses cancel notices for cancel holds, and blocks cancellation requests for cancellation holds.

**3. Account-Level Processing Control**
System excludes held accounts from current processing cycle, advances to next eligible account, and logs skipped accounts for audit tracking without firing delinquency events or updating process flags.


**Acceptance Criteria:**

**1. Active Hold Detection**
Given billing account has hold configuration with effective date  current date and expiration date > current date, When delinquency job evaluates account, Then system identifies active hold type and applies corresponding suppression logic.

**2. Reminder Notice Hold Enforcement**
Given account has 'Reminder Notice On Hold' tag active, When job processes delinquency candidates, Then no reminder notice events fire and account is excluded from consolidated event aggregation.

**3. Cancel Notice Hold Enforcement**
Given account has 'Cancel Notice On Hold' tag active, When job evaluates cancellation eligibility, Then no cancel notice events fire and processing continues to next account.

**4. Cancellation Hold Enforcement**
Given account has 'Cancellation On Hold' tag active, When job determines cancellation requests, Then no cancellation request events fire for associated master policies.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=716875934"
]

---

#### Feature: Display Delinquency Process Status Flags on Invoices and Products
- **Role**: Billing Administrator
- **Action**: view delinquency process status indicators on invoices and associated products
- **Value**: I can quickly identify accounts in collection stages and take appropriate action without navigating multiple systems

**Description:**

As a **Billing Administrator**,
I want to **view delinquency process status indicators on invoices and associated products**,
So that **I can quickly identify accounts in collection stages and take appropriate action without navigating multiple systems**


**Key Capabilities:**

**Status Flag Display Initiation**
Upon automated delinquency job execution, system displays 'Delinquency process started' indicator on qualifying invoices and their associated products.

**Multi-Level Status Visibility**
User is able to view status flags at both invoice level and individual product level for Master Policies and Member Records across all supported bill types.

**Hold Status Recognition**
When hold tags ('Reminder Notice On Hold', 'Cancel Notice On Hold', 'Cancellation On Hold') exist, system reflects processing suspension status alongside delinquency indicators.

**Bill Type-Specific Indicators**
System displays status flags appropriately based on bill type (List Bill with Group/Individual allocation, Individual Direct) and payment status (Issued, Partially Paid).


**Acceptance Criteria:**

**Status Flag Appears on Qualified Invoices**
Given an invoice meets delinquency criteria and passes validation, When automated processing executes, Then 'Delinquency process started' flag displays on invoice and product levels.

**Status Reflects Hold Conditions**
Given a Billing Account has active hold tags, When user views invoice, Then system shows hold status without delinquency processing flags.

**Multi-Level Visibility Maintained**
Given products within partially paid invoices, When delinquency processing runs, Then status flags appear only on unpaid products based on bill type rules.

**Status Persists After Processing**
Given delinquency events have been generated, When user accesses invoice at any time, Then status indicators remain visible until resolution occurs.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628374646"
]

---

#### Feature: Orchestrate Multi-Channel Delinquency Communication Delivery
- **Role**: Billing Administrator
- **Action**: automate delinquency communication delivery across multiple channels based on configurable business rules
- **Value**: overdue premiums are systematically addressed, cash flow is improved, and manual collection efforts are reduced while ensuring compliant policy cancellation workflows

**Description:**

As a **Billing Administrator**,
I want to **automate delinquency communication delivery across multiple channels based on configurable business rules**,
So that **overdue premiums are systematically addressed, cash flow is improved, and manual collection efforts are reduced while ensuring compliant policy cancellation workflows**


**Key Capabilities:**

**1. Delinquency Account Identification**
Scheduled job retrieves billing accounts with issued or partially paid invoices, validates absence of hold tags (Reminder/Cancel/Cancellation holds), and applies bill-type-specific treatment rules.

**2. Configuration-Driven Event Determination**
System evaluates grace periods (0-90 days), notice generation timing (-90 to +90 days relative to grace period end), and cancellation timing (0-90 days post-grace) against current date to determine appropriate business event.

**3. Multi-Level Event Generation**
Upon validation, system tags invoices as 'Delinquency process started' and fires events (Reminder Notice, Cancel Notice, Cancellation Request) at Master Policy or Member Record levels based on bill type and payment status.

**4. Cross-System Communication Delivery**
Generated events trigger email or letter generation to customers and policyholders through integrated communication channels.

**5. Cancellation Workflow Initiation**
When Cancellation Request events fire, system creates review tasks at appropriate policy levels for manual assessment and action by collections staff.


**Acceptance Criteria:**

**1. Account Processing Scope**
Given billing accounts exist with overdue invoices, When delinquency job executes, Then only accounts without hold tags and with issued/partially-paid invoices are processed for event generation.

**2. Configuration-Based Event Timing**
Given grace period and notice timing configurations are defined, When current date calculation meets configured thresholds, Then appropriate business event (Reminder/Cancel/Cancellation Request) is fired with invoice-level tagging.

**3. Bill-Type-Specific Event Routing**
Given different bill types (True Group, Individual Premium Accounting, Individual Direct), When events are generated, Then Reminder Notices route to Master Policy level for group bills and Member Record level for individual direct bills.

**4. Communication Delivery Execution**
Given business events are successfully fired, When communication engine processes events, Then customers receive notices via configured channels (email/letter) without manual intervention.

**5. Cancellation Task Creation**
Given Cancellation Request event fires, When policy system receives event, Then automated tasks are created at appropriate levels for staff review and manual cancellation decision.

**6. Exception Continuity**
Given job encounters processing failure on specific account, When error occurs, Then job continues processing remaining accounts without terminating entire batch run.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=628374646"
]

---

#### Feature: Execute Scheduled Delinquency Processing Job
- **Role**: Billing Administrator
- **Action**: execute automated delinquency processing to identify and escalate overdue accounts through systematic communication workflows
- **Value**: non-payment situations are addressed proactively with appropriate notices and actions, reducing revenue loss and ensuring consistent collections procedures

**Description:**

As a **Billing Administrator**,
I want to **execute automated delinquency processing to identify and escalate overdue accounts through systematic communication workflows**,
So that **non-payment situations are addressed proactively with appropriate notices and actions, reducing revenue loss and ensuring consistent collections procedures**


**Key Capabilities:**

**1. Overdue Account Identification**
System searches billing accounts with invoices in 'Issued' or 'Partially Paid' status, validates absence of active hold tags (Reminder/Cancel/Cancellation holds), and selects oldest non-tolerance-flagged invoice for processing.

**2. Delinquency Rule Evaluation**
System retrieves product-specific configuration parameters and determines applicable escalation actions (reminder notices, cancel notices, cancellation requests, or APL requests) based on aging and payment allocation rules.

**3. Event Generation & Flagging**
Upon validation, system fires delinquency events at master policy or member record levels, sets 'Delinquency Process Started' flags on invoice and product records, and generates activity tracking records.

**4. Communication Consolidation**
System aggregates multiple product-level events into consolidated reminder or cancel notices per billing account, invoice, and notice type for streamlined customer communication.

**5. Exception Handling**
When holds are active or APL attributes exist, system applies conditional logic to skip restricted notice types while allowing eligible requests to proceed through alternate processing paths.


**Acceptance Criteria:**

**1. Overdue Invoice Detection**
Given billing accounts exist with unpaid invoices, When the job executes, Then system identifies all accounts with 'Issued' or 'Partially Paid' status and no active holds blocking delinquency actions.

**2. Tolerance Exclusion**
Given an invoice carries a tolerance flag, When delinquency evaluation occurs, Then system skips the invoice from cancellation request generation and proceeds to next eligible invoice.

**3. Hold Condition Compliance**
Given all three hold types are active on a billing account with no APL-enabled member records, When the job processes the account, Then system skips event generation and does not set delinquency flags.

**4. Event Consolidation**
Given multiple products trigger reminder or cancel notices for the same billing account and day, When event generation completes, Then system produces a single consolidated communication event and tracking activity.

**5. Multi-Invoice Processing**
Given configuration allows processing multiple invoices per account, When the oldest invoice is evaluated, Then system continues processing subsequent invoices until business rules determine completion criteria are met.

**6. Successful Job Completion**
Given all eligible billing accounts are processed, When the job finalizes, Then system confirms completion status with all applicable events fired and activity records generated.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=624213077"
]

---

### Epic: Delinquency Identification & Tracking

#### Feature: Calculate Grace Period and Invoice Due Date
- **Role**: Billing Administrator
- **Action**: monitor payment compliance and automate delinquency tracking during the grace period
- **Value**: policy cancellations are executed systematically based on premium payment status, reducing manual intervention and ensuring contractual compliance

**Description:**

As a **Billing Administrator**,
I want to **monitor payment compliance and automate delinquency tracking during the grace period**,
So that **policy cancellations are executed systematically based on premium payment status, reducing manual intervention and ensuring contractual compliance**


**Key Capabilities:**

**Grace Period Monitoring Initiation**
Upon invoice generation, system initiates 62-day monitoring window (60 days contractual plus 2 days processing buffer) to track payment receipt against outstanding premium obligations.

**Payment Allocation Processing**
When sufficient premium is received during grace period, system allocates funds to invoice and updates status to Paid, terminating delinquency tracking.

**Delinquency Classification**
If grace period expires without payment, system classifies delinquency type: modal premium triggers master policy cancellation path, premium difference only triggers member-level cancellation path.

**Cancellation Scope Determination**
System discards current unpaid invoice plus all subsequent issued invoices, then executes appropriate cancellation process based on premium type classification.


**Acceptance Criteria:**

**Successful Grace Period Completion**
Given an invoice is generated, When payment is received within 62 days and allocated successfully, Then system marks invoice as Paid and ceases delinquency monitoring.

**Modal Premium Delinquency Escalation**
Given an invoice containing modal premium remains unpaid, When 62 days elapse from generation date, Then system discards current and subsequent invoices and initiates master policy cancellation with cascading member record termination.

**Premium Difference Delinquency Handling**
Given an invoice contains only premium difference without modal premium, When grace period expires without payment, Then system cancels only affected member records and rolls back related amendments without impacting master policy.

**Non-Renewal Scenario Processing**
Given master policy expiration date arrives, When renewal is not completed due to customer decision or failed quote issuance, Then system discards all issued invoices and cancels master policy with all active member records.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=704843849"
]

---

#### Feature: Track Delinquency Status by Debt Date
- **Role**: Billing Administrator
- **Action**: track and monitor debt persistence across billing cycles to trigger timely collection actions
- **Value**: I can ensure systematic debt aging tracking and automated enforcement of collection policies based on delinquency duration

**Description:**

As a **Billing Administrator**,
I want to **track and monitor debt persistence across billing cycles to trigger timely collection actions**,
So that **I can ensure systematic debt aging tracking and automated enforcement of collection policies based on delinquency duration**


**Key Capabilities:**

**Initial Debt Date Assignment**
When a bill statement generates with outstanding amount, system establishes debt date as the bill due date to allow payment grace period.

**Debt Date Persistence Logic**
Upon detecting continued underpayment in subsequent billing cycles, system preserves original debt date without resetting, maintaining accurate debt age calculation.

**Automated Debt Age Query**
Nightly collection processes query products by debt date to identify accounts exceeding preconfigured delinquency thresholds.

**Collection Action Triggering**
System initiates appropriate collection activities (notices, cancellation confirmations) based on debt duration milestones configured in business rules.


**Acceptance Criteria:**

**Debt Date Initialization**
Given a new bill statement with positive amount, when statement is created, then system assigns debt date equal to bill due date.

**Debt Date Preservation**
Given existing debt date on product, when subsequent statement shows continued underpayment, then system retains original debt date without modification.

**Automated Collection Triggering**
Given debt date indicates threshold breach, when nightly collection job executes, then system initiates configured collection actions for qualifying accounts.

**Grace Period Enforcement**
Given debt date set to future due date, when current date is before debt date, then system excludes product from collection processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=208092591"
]

---

#### Feature: Detect Delinquent Accounts by Past Due Balance
- **Role**: Billing Administrator
- **Action**: automatically detect and track delinquent accounts based on past due balances
- **Value**: overdue payments are identified promptly and included in current obligations to facilitate timely collections

**Description:**

As a **Billing Administrator**,
I want to **automatically detect and track delinquent accounts based on past due balances**,
So that **overdue payments are identified promptly and included in current obligations to facilitate timely collections**


**Key Capabilities:**

**Minimum Due Establishment**
System establishes minimum due amount during billing cycle generation on statement.

**Delinquency Detection**
Upon payment due date passing without full minimum due payment, system identifies outstanding portion as delinquent.

**Past Due Conversion**
When new bill statement generates, system automatically converts unpaid minimum due from previous cycle into past due amount.

**Balance Consolidation**
System aggregates past due amount into current bill's minimum due calculation for total obligation.

**Constraint Enforcement**
System validates past due remains within allowable bounds (between zero and current minimum due) preventing calculation anomalies.


**Acceptance Criteria:**

**Past Due Capture**
Given minimum due was not paid by due date, when new billing cycle generates, then system converts outstanding amount to past due.

**Balance Inclusion**
Given past due amount exists, when current bill generates, then system includes past due in minimum due calculation.

**Constraint Validation**
Given past due calculation occurs, when amount would exceed minimum due or fall below zero, then system prevents transaction or triggers correction.

**Invoice Reflection**
Given past due balance updates, when invoice generates, then updated past due amount displays to customer.

**Delinquency Prevention**
Given minimum due paid in full by due date, when next bill generates, then no past due amount is created.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=208092554"
]

---

#### Feature: Configure Delinquency Event Parameters by Product and State
- **Role**: Billing Administrator
- **Action**: configure delinquency event parameters across system, product, and account levels
- **Value**: delinquency policies adapt to product requirements and jurisdictional mandates while maintaining consistent base standards

**Description:**

As a **Billing Administrator**,
I want to **configure delinquency event parameters across system, product, and account levels**,
So that **delinquency policies adapt to product requirements and jurisdictional mandates while maintaining consistent base standards**


**Key Capabilities:**

**1. System-Level Parameter Definition**
Administrator establishes base delinquency event parameters in rules engine, defining fundamental behavior standards across all products and accounts.

**2. Product-Specific Configuration Application**
System determines applicable delinquency configuration based on product context, applying product-specific parameters that override system defaults.

**3. Account-Level Customization**
Upon account-specific requirements, system applies billing account-level overrides, customizing delinquency behavior for individual accounts while preserving product and system defaults for other accounts.

**4. Override Hierarchy Evaluation**
When multiple configurations exist, system evaluates override options through rules engine, selecting appropriate configuration based on business scenario and precedence rules.


**Acceptance Criteria:**

**1. Configuration Hierarchy Enforcement**
Given system-level parameters exist, When product configuration is applied, Then product settings override system defaults while maintaining base parameters for unconfigured attributes.

**2. Account Override Independence**
Given product-level configuration is active, When account-level override is applied, Then individual account operates under custom settings without affecting other accounts sharing the same product.

**3. Rules Engine Integration**
Given multiple override options are defined, When configuration evaluation occurs, Then system selects appropriate override based on rules engine logic and business context.

**4. Configuration Completeness Validation**
Given administrator initiates configuration, When required parameters are incomplete, Then system prevents configuration deployment until all mandatory delinquency parameters are defined.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=625642995"
]

---

#### Feature: Trigger Automated Delinquency Processing Events
- **Role**: Billing Administrator
- **Action**: automate delinquency event processing for unpaid or partially paid invoices through scheduled system evaluation
- **Value**: timely collection actions are initiated based on configurable grace periods and notice schedules without manual intervention

**Description:**

As a **Billing Administrator**,
I want to **automate delinquency event processing for unpaid or partially paid invoices through scheduled system evaluation**,
So that **timely collection actions are initiated based on configurable grace periods and notice schedules without manual intervention**


**Key Capabilities:**

**1. Scheduled Delinquency Evaluation**
Daily system job evaluates unpaid and partially paid invoices against configured grace periods and triggers appropriate notice events (Reminder 1, Reminder 2, Cancel Notice, Cancellation Request) based on calculated trigger dates.

**2. Dynamic Processing Adjustment**
When invoice status changes or payments are allocated, system recalculates grace period parameters and adjusts future event schedules accordingly, including transitioning between invoice-based and payment request-based processing.

**3. Granular Payment Allocation Handling**
For individual premium accounting models, system evaluates payment allocation at member record level and excludes fully paid records from subsequent delinquency events while continuing processing for unpaid portions.

**4. Automatic Premium Loan Integration**
When cancellation is due for eligible whole life products, system triggers automatic premium loan requests and suppresses cancellation events upon successful loan creation.

**5. Consolidated Event Generation**
System aggregates all triggered events for the same invoice on the same day by notice type, generating consolidated business events at billing account level with corresponding activity monitoring records.

**6. Notification Hold Management**
When delinquency holds are enabled at billing account level, system suppresses configured notice types while continuing to evaluate processing dates and maintain delinquency tracking status.


**Acceptance Criteria:**

**1. Grace Period Calculation Accuracy**
Given an invoice with a due date and configured grace period, when the scheduled job evaluates the invoice, then the system correctly calculates the grace period end date and all notice trigger dates based on configured offset parameters.

**2. Event Triggering Based on Current Date**
Given calculated notice trigger dates exist for multiple invoices, when the daily job executes, then the system triggers events only for invoices where the current system date matches or exceeds the notice trigger date.

**3. Payment Allocation Impact on Processing**
Given a partially paid invoice under individual premium accounting, when payment is allocated to specific member records, then the system excludes fully paid member records from future events and continues processing only unpaid portions.

**4. Automatic Premium Loan Request Handling**
Given a member record with automatic premium loan eligibility when cancellation request is due, then the system triggers the loan request first and suppresses cancellation events only if the loan is successfully created.

**5. Delinquency Status Tracking Updates**
Given an invoice enters or exits delinquency processing, when status changes occur, then the system updates delinquency tags at appropriate levels and generates corresponding activity monitoring records.

**6. Consolidated Event Generation per Day**
Given multiple events trigger on the same day for the same invoice and notice type, when the job completes processing, then the system generates a single consolidated business event aggregating all triggered events.


**Reference URLs:**

[
  "/pages/viewpage.action?pageId=628364268",
  "/pages/viewpage.action?pageId=645893588",
  "/pages/viewpage.action?pageId=633999380",
  "/pages/viewpage.action?pageId=628364482",
  "/pages/viewpage.action?pageId=628364415",
  "/pages/viewpage.action?pageId=690263658",
  "/pages/viewpage.action?pageId=690263667",
  "/pages/viewpage.action?pageId=645893574",
  "/pages/viewpage.action?pageId=662941795",
  "/pages/viewpage.action?pageId=633999369",
  "/pages/viewpage.action?pageId=628364284",
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=627059261",
  "/pages/viewpage.action?pageId=690263681",
  "/pages/viewpage.action?pageId=627059494",
  "/pages/viewpage.action?pageId=690263690",
  "/pages/viewpage.action?pageId=627059248",
  "/pages/viewpage.action?pageId=632628233",
  "/pages/viewpage.action?pageId=627059496",
  "/pages/viewpage.action?pageId=645904340",
  "/pages/viewpage.action?pageId=628364511",
  "/pages/viewpage.action?pageId=628364279"
]

---

#### Feature: Generate Reminder and Cancellation Notices
- **Role**: Billing Administrator
- **Action**: generate and distribute delinquency notices at configurable consolidation levels
- **Value**: stakeholders receive timely, appropriately aggregated notifications to facilitate payment resolution and minimize policy lapses

**Description:**

As a **Billing Administrator**,
I want to **generate and distribute delinquency notices at configurable consolidation levels**,
So that **stakeholders receive timely, appropriately aggregated notifications to facilitate payment resolution and minimize policy lapses**


**Key Capabilities:**

**1. Delinquency Detection and Request Initiation**
System evaluates payment status across Master Record (MR) and Master Policy (MP) organizational levels, initiating delinquency processing requests when payment thresholds are breached.

**2. Pre-Lapse Reminder Notice Generation**
Upon identifying pre-cancellation delinquency state, system generates reminder notices at business-rule-determined consolidation levels (individual MP, individual MR, consolidated multiple MPs, consolidated multiple MRs).

**3. Cancellation Notice Generation**
When delinquency reaches cancellation threshold or Automated Policy Lapse (APL) criteria, system generates cancel notices at appropriate consolidation levels matching organizational hierarchy.

**4. Stakeholder Notification Delivery**
System distributes generated notices to designated stakeholders, updating delinquency state and triggering downstream APL processing workflows when applicable.


**Acceptance Criteria:**

**1. Delinquency Processing Initiation**
Given payment obligations are overdue, When system evaluates account status, Then delinquency processing request is generated at appropriate organizational level (MR or MP).

**2. Reminder Notice Generation**
Given pre-lapse delinquency state exists, When notice generation is triggered, Then system produces reminder notices at business-rule-configured consolidation level without manual intervention.

**3. Cancellation Notice Generation**
Given cancellation threshold is reached, When APL criteria are met, Then system generates cancel notices at appropriate consolidation level and initiates automated lapse processing.

**4. Consolidated Notice Accuracy**
Given multiple policies/records qualify for consolidation, When aggregated notice is generated, Then all relevant delinquent accounts are included per organizational hierarchy rules.

**5. Notice Delivery Confirmation**
Given notices are generated, When distribution process completes, Then delinquency state is updated and stakeholder receipt is tracked.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=661560774"
]

---

#### Feature: Request Cancellation for Master Policy and Member Records
- **Role**: Billing Administrator
- **Action**: initiate and track cancellation requests for delinquent master policies and member records
- **Value**: I can systematically manage policy cancellations due to non-payment while maintaining compliance and audit trails

**Description:**

As a **Billing Administrator**,
I want to **initiate and track cancellation requests for delinquent master policies and member records**,
So that **I can systematically manage policy cancellations due to non-payment while maintaining compliance and audit trails**


**Key Capabilities:**

**1. Delinquency Threshold Monitoring**
System monitors invoices past grace period and identifies master policies eligible for cancellation based on configured business rules and payment thresholds.

**2. Cancellation Request Initiation**
Upon threshold breach, system generates cancellation requests with appropriate effective dates and reason codes for master policies and associated member records.

**3. Workflow Execution and Approval**
Cancellation requests route through approval workflows when required, capturing decision rationale and processing timelines.

**4. Lifecycle Documentation**
System records processing effective dates, request reasons, and status transitions throughout the cancellation request lifecycle for audit compliance.


**Acceptance Criteria:**

**1. Eligibility Determination**
Given invoice remains unpaid after grace period, When system evaluates cancellation criteria, Then cancellation request is generated only for eligible master policies per business rules.

**2. Request Documentation**
Given cancellation request is initiated, When request enters workflow, Then system captures effective date, reason code, and affected member records.

**3. Workflow Progression**
Given cancellation request requires approval, When submitted for review, Then request routes to appropriate authority and tracks decision outcomes.

**4. Audit Trail Completeness**
Given cancellation request completes lifecycle, When reviewed for compliance, Then all status transitions and processing dates are recorded with full traceability.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=633999085"
]

---

#### Feature: Manage Delinquency Lifecycle State Transitions
- **Role**: Billing Operations Manager
- **Action**: monitor and track delinquency status across billing hierarchies throughout the collection lifecycle
- **Value**: I can proactively identify at-risk accounts, optimize collection efforts, and maintain accurate visibility of payment obligations across different billing structures

**Description:**

As a **Billing Operations Manager**,
I want to **monitor and track delinquency status across billing hierarchies throughout the collection lifecycle**,
So that **I can proactively identify at-risk accounts, optimize collection efforts, and maintain accurate visibility of payment obligations across different billing structures**


**Key Capabilities:**

**1. Delinquency Process Initiation**
Upon invoice issuance or partial payment, system automatically triggers delinquency tracking at appropriate hierarchy level based on bill type (Master Policy for List Bill/IPA/Self Bill; Member level for Individual Direct; Billing Account level for Split Bill)

**2. Dynamic Status Indicator Management**
System displays delinquency markers on invoices with 'Issued' or 'Partially paid' status and unpaid member records, dynamically switching indicators between payment request and invoice levels based on document lifecycle events

**3. Payment-Driven State Transitions**
When full payment received, system immediately terminates delinquency process and removes status indicators across affected hierarchy levels
    3.1 Partial payment continues Master Policy delinquency while releasing fully paid member records

**4. Multi-Level Visibility Orchestration**
System maintains contextual status display across invoice views, payment requests, and policy details, adapting indicator placement based on billing period adjustments and document regeneration events


**Acceptance Criteria:**

**1. Hierarchy-Based Process Activation**
Given an invoice is issued or partially paid, When the system evaluates bill type, Then delinquency tracking initiates at Master Policy level for List Bill/IPA/Self Bill, at Member level for Individual Direct, or at Billing Account level for Split Bill configurations

**2. Status Indicator Accuracy**
Given delinquency process is active, When viewing billing documents, Then status markers appear only on issued/partially paid invoices and unpaid member records while excluding fully paid or discarded documents

**3. Payment-Triggered Termination**
Given outstanding balance exists, When full payment is received, Then system immediately stops delinquency processing and removes all status indicators from affected Master Policy and member records

**4. Partial Payment Granularity**
Given Master Policy has multiple members, When specific member record is fully paid, Then system removes delinquency indicator from that member only while maintaining Master Policy-level tracking

**5. Dynamic Indicator Switching**
Given delinquency started on payment request, When invoice is generated or discarded, Then system automatically transfers status indicator between payment request and invoice levels with corresponding view updates


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=662933706"
]

---

#### Feature: Track Delinquency Processing Across Multiple Invoices
- **Role**: Billing Administrator
- **Action**: monitor and execute automated delinquency processing across billing accounts with multiple outstanding invoices
- **Value**: I can ensure timely collection actions and policy compliance through systematic delinquency evaluation and escalation

**Description:**

As a **Billing Administrator**,
I want to **monitor and execute automated delinquency processing across billing accounts with multiple outstanding invoices**,
So that **I can ensure timely collection actions and policy compliance through systematic delinquency evaluation and escalation**


**Key Capabilities:**

**1. Automated Delinquency Evaluation**
System executes scheduled processing to assess billing accounts and invoices against delinquency criteria

**2. Business Rule Application**
System applies product-specific configurations and tolerance thresholds to determine delinquency severity and required actions

**3. Action Determination & Initiation**
Upon evaluation completion, system determines whether reminder notices, cancel notices, cancellation requests, or automatic policy lapse requests should be initiated

**4. Billing-Type-Specific Processing**
When processing different billing types, system triggers appropriate communication workflows for List Bill, Individual Direct, Self-Bill, or FlexiBill scenarios

**5. Tolerance Status Recalculation**
System recalculates tolerance flags based on current delinquency conditions and updated payment information

**6. Cross-Invoice Status Tracking**
User is able to monitor delinquency processing status across all outstanding invoices through unified interface


**Acceptance Criteria:**

**1. Successful Automated Processing**
Given billing accounts with overdue invoices exist, When the scheduled delinquency processing job executes, Then the system evaluates all eligible accounts and updates delinquency status

**2. Correct Action Determination**
Given delinquency evaluation is complete, When severity thresholds are met, Then the system initiates appropriate escalation actions per product-specific business rules

**3. Billing-Type-Specific Communication**
Given different billing types require distinct handling, When processing executes, Then the system triggers correct communication workflows for List Bill, Self-Bill, or other billing scenarios

**4. Tolerance Flag Accuracy**
Given delinquency conditions have changed, When processing completes, Then tolerance flags are recalculated and reflect current status

**5. Incomplete Data Handling**
Given required billing configuration is missing, When processing attempts execution, Then the system prevents submission and logs the exception


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=632628233"
]

---

#### Feature: Execute Automated Delinquency Processing Jobs
- **Role**: Billing Administrator
- **Action**: orchestrate automated delinquency workflows to enforce payment collection policies
- **Value**: unpaid policies are systematically processed, timely notices are issued, and cancellations are executed consistently according to business rules

**Description:**

As a **Billing Administrator**,
I want to **orchestrate automated delinquency workflows to enforce payment collection policies**,
So that **unpaid policies are systematically processed, timely notices are issued, and cancellations are executed consistently according to business rules**


**Key Capabilities:**

**1. Delinquency Detection & Monitoring**
System continuously monitors invoice due dates, grace period expiration, and paid-to-date status to identify delinquent accounts requiring action.

**2. Automated Workflow Execution**
Scheduled delinquency processing job executes workflows at configured effective dates, applying business rules defined in OpenL to determine appropriate actions.

**3. Communication Dispatch**
System generates and sends reminder or cancellation notices for List Bill and Individual Direct billing types; dispatches policy system notifications for Master/Individual Policies.

**4. Policy Resolution Processing**
Upon cancellation eligibility, system initiates cancellation requests with timing parameters and documented reasons; alternatively processes Automatic Premium Loan requests when configured and applicable.


**Acceptance Criteria:**

**1. Delinquency Trigger Accuracy**
Given invoice due date and grace period configuration, When processing effective date arrives, Then system identifies all accounts exceeding paid-to-date thresholds for delinquency workflows.

**2. Business Rule Application**
Given delinquency event parameters configured in OpenL, When processing job executes, Then system applies correct reminder escalation or cancellation logic based on account status and billing type.

**3. Communication Delivery**
Given delinquent account requiring action, When workflow determines notification requirement, Then system dispatches appropriate reminder/cancellation notices or policy system notifications according to billing type.

**4. Cancellation & APL Processing**
Given cancellation eligibility criteria met, When no payment received, Then system initiates cancellation request with proper timing and reason; alternatively processes APL request if policy configuration permits.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=633999097"
]

---

#### Feature: Cancel Master Policy and Member Records for Non-Payment
- **Role**: Billing Administrator
- **Action**: orchestrate automated cancellation of master policies and member records when premium payments remain outstanding beyond the grace period
- **Value**: the organization minimizes financial exposure, maintains compliance with policy provisions, and ensures systematic enforcement of payment obligations

**Description:**

As a **Billing Administrator**,
I want to **orchestrate automated cancellation of master policies and member records when premium payments remain outstanding beyond the grace period**,
So that **the organization minimizes financial exposure, maintains compliance with policy provisions, and ensures systematic enforcement of payment obligations**


**Key Capabilities:**

**1. Grace Period Monitoring and Threshold Enforcement**
Upon reaching 62 days post-invoice generation without payment allocation, system initiates delinquency protocols distinguishing modal premium from adjustment invoices.

**2. Modal Premium Delinquency Resolution**
When modal premium remains unpaid, system discards all subsequent issued invoices, voids current billing document, and cascades master policy cancellation to all active member records.

**3. Premium Adjustment Delinquency Resolution**
When only premium difference invoices remain unpaid, system discards subsequent documents, flat-cancels newly added members, and rolls back amendments without affecting master policy.

**4. Non-Renewal Triggered Cancellation**
If master policy renewal fails or is declined, system discards all issued invoices and executes cascading cancellation across policy hierarchy.

**5. Billing Document Lifecycle Management**
System automatically invalidates orphaned invoices generated after delinquent billing periods to prevent erroneous collection attempts.


**Acceptance Criteria:**

**1. Modal Premium Delinquency Execution**
Given modal premium invoice unpaid for 62 days, When delinquency process triggers, Then system discards subsequent invoices, voids current document, and cancels master policy with all member records.

**2. Selective Member Record Cancellation**
Given only premium difference invoice unpaid for 62 days, When delinquency activates, Then system cancels affected member additions and reverses amendments without terminating master policy.

**3. Grace Period Compliance**
Given invoice generation date recorded, When 62-day threshold expires without payment allocation, Then system prevents further coverage and initiates cancellation workflow.

**4. Non-Renewal Cascade Logic**
Given master policy non-renewal event, When renewal fails or is declined, Then system discards all issued invoices and executes full policy hierarchy cancellation.

**5. Invoice Integrity Protection**
Given delinquency-triggered cancellation, When subsequent invoices exist with 'Issued' status, Then system automatically invalidates those documents before executing cancellation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=704843849"
]

---

#### Feature: Configure Grace Period for Ported Policies
- **Role**: Billing Administrator
- **Action**: configure product-specific grace periods for automated non-payment cancellation of ported policies
- **Value**: I can ensure consistent delinquency management aligned with product risk profiles and prevent premature policy terminations

**Description:**

As a **Billing Administrator**,
I want to **configure product-specific grace periods for automated non-payment cancellation of ported policies**,
So that **I can ensure consistent delinquency management aligned with product risk profiles and prevent premature policy terminations**


**Key Capabilities:**

**Grace Period Configuration Assignment**
System assigns product-specific grace period (X Days) to each ported policy at the time of policy transfer based on active product type configuration. Assigned value remains immutable for the policy lifecycle regardless of subsequent configuration changes.

**Automated Delinquency Evaluation**
Scheduled job evaluates ported policies against cancellation criteria: single unpaid invoice exceeding configured grace period past due date and zero payment history.

**Cancellation Execution**
Upon meeting all criteria, system applies flat cancellation to the policy. Policies not meeting criteria remain active for subsequent evaluation cycles.


**Acceptance Criteria:**

**1. Configuration Persistence**
Given a ported policy assigned a 45-day grace period, When product configuration later changes to 25 days, Then the original policy retains its 45-day grace period permanently.

**2. Cancellation Criteria Validation**
Given a ported policy with one unpaid invoice exceeding grace period and zero payments, When automated job executes, Then system cancels the policy with flat cancellation.

**3. Multiple Invoice Exclusion**
Given a ported policy with two unpaid invoices exceeding grace period, When evaluation occurs, Then system does not cancel the policy.

**4. Partial Payment Exclusion**
Given a ported policy with any payment amount greater than zero, When cancellation criteria evaluated, Then system excludes policy from cancellation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=566602655"
]

---
## Initiative: Financial Control & Ledger Integration

### Epic: Ledger Posting & GL Integration

#### Feature: Calculate Member Record Overdue Premium and Paid Amounts
- **Role**: Billing Administrator
- **Action**: calculate and provide member record overdue premium and paid amounts to cash management systems via API
- **Value**: cash value accounts for life products are processed accurately with consolidated payment state information across all associated billing accounts

**Description:**

As a **Billing Administrator**,
I want to **calculate and provide member record overdue premium and paid amounts to cash management systems via API**,
So that **cash value accounts for life products are processed accurately with consolidated payment state information across all associated billing accounts**


**Key Capabilities:**

**1. API Request Initiation**
Cash Management system submits request with Member Record ID, As of date, and End date to retrieve payment state information.

**2. Billing Account Identification**
System identifies all Billing Accounts where the Member Record was historically billed across at least one invoice.

**3. Total Remaining Due Calculation**
System aggregates remaining due amounts from all identified Billing Accounts for the Member Record.

**4. Total Paid Calculation**
System aggregates all payments allocated to the Member Record as of the specified As of date.

**5. Consolidated Response Delivery**
System returns Member Record ID, Total Remaining Due, and Total Paid as single aggregated amounts without Billing Account splits.
    5.1 Upon multiple Billing Account associations, system consolidates all amounts into unified totals.


**Acceptance Criteria:**

**1. Successful API Response**
Given a valid Member Record ID with As of date and End date, When Cash Management requests payment state information, Then system returns consolidated Total Remaining Due and Total Paid amounts.

**2. Multi-Account Aggregation**
Given a Member Record associated with multiple Billing Accounts due to Continuation/Portability/Location changes, When calculation is performed, Then system returns single aggregated amounts without Billing Account splits.

**3. Historical Billing Account Coverage**
Given a Member Record billed across multiple Billing Accounts historically, When identifying accounts, Then system includes all accounts where Member Record appeared in at least one invoice.

**4. Payment Allocation Accuracy**
Given payments allocated to Member Record as of specified date, When calculating Total Paid, Then system includes only payments up to the As of date parameter.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=735716870"
]

---

#### Feature: Provide Member Record Financial Data via API
- **Role**: Billing Administrator
- **Action**: expose aggregated member financial data via API to downstream cash management systems
- **Value**: I enable accurate processing of life product cash value accounts and premium reconciliation

**Description:**

As a **Billing Administrator**,
I want to **expose aggregated member financial data via API to downstream cash management systems**,
So that **I enable accurate processing of life product cash value accounts and premium reconciliation**


**Key Capabilities:**

**1. API Request Processing**
System accepts member record identifier with temporal parameters (as-of date, end date) for point-in-time financial snapshot retrieval.

**2. Cross-Account Aggregation**
System consolidates remaining due amounts across all associated billing accounts (individual premium accounting and direct billing) linked to the member record.

**3. Payment Allocation Calculation**
System sums all payments allocated to the member record through the specified as-of date per defined business rules.

**4. Unified Response Delivery**
System returns single aggregated totals (total remaining due, total paid) without billing account segmentation, regardless of account transitions.


**Acceptance Criteria:**

**1. Valid Request Processing**
Given a member record exists in individual premium or direct billing accounts, When API receives valid member ID and date range, Then system returns aggregated financial totals without error.

**2. Multi-Account Consolidation**
Given a member record spans multiple billing accounts due to continuation or portability, When aggregation executes, Then system returns single total remaining due and total paid amounts.

**3. Temporal Accuracy**
Given payments exist before and after the as-of date, When calculation runs, Then system includes only payments allocated through the specified as-of date.

**4. Scope Enforcement**
Given request targets true group or self-bill accounts, When system validates scope, Then request is rejected with appropriate notification.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=735716870"
]

---

#### Feature: Post Business Transactions to General Ledger Using Templates
- **Role**: Billing Administrator
- **Action**: configure and utilize ledger templates to post business transactions to the general ledger
- **Value**: I can streamline financial transaction recording, ensure consistency in GL postings, and maintain accurate financial records across the system

**Description:**

As a **Billing Administrator**,
I want to **configure and utilize ledger templates to post business transactions to the general ledger**,
So that **I can streamline financial transaction recording, ensure consistency in GL postings, and maintain accurate financial records across the system**


**Key Capabilities:**

**Ledger Template Registration**
User is able to register new ledger templates in the subsystem by providing unique template identifiers that serve as the foundation for transaction posting rules.

**Template Configuration**
Upon registration, user configures template parameters and mapping rules that define how business transactions translate to GL entries.

**Transaction Posting Execution**
When business transactions occur, system automatically applies the appropriate ledger template to generate and post corresponding GL entries based on configured rules.


**Acceptance Criteria:**

**Template Registration Validation**
Given the ledger subsystem is available, When user registers a ledger template, Then system requires unique template identifier and prevents registration without mandatory name field.

**Posting Integrity**
Given a registered template exists, When business transactions are processed, Then system successfully posts GL entries using template rules without data loss.

**Configuration Persistence**
Given template configuration is complete, When user retrieves template information, Then system displays all configured parameters accurately for audit and modification purposes.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213982041"
]

---

#### Feature: Configure Ledger Posting Rules by Transaction Type
- **Role**: Billing Administrator
- **Action**: configure ledger posting rules and transaction templates for different business transaction types
- **Value**: business transactions are accurately processed and posted to the general ledger according to organizational accounting standards

**Description:**

As a **Billing Administrator**,
I want to **configure ledger posting rules and transaction templates for different business transaction types**,
So that **business transactions are accurately processed and posted to the general ledger according to organizational accounting standards**


**Key Capabilities:**

**1. Posting Configuration Setup**
User is able to establish ledger posting configurations that group transaction templates for specific business transaction types, defining how transactions flow to the general ledger.

**2. Transaction Template Management**
User is able to create and manage ledger transaction templates that generate actual ledger entries in advanced posting mode, including account mappings and entry classifications.

**3. Posting Mode Selection**
Upon configuration, user is able to designate standard direct posting or advanced template-based posting mode for each transaction type based on accounting complexity requirements.

**4. Account Assignment Rules**
User is able to define account codes and accountable entity references that determine ledger account allocation for transactions.


**Acceptance Criteria:**

**1. Configuration Creation**
Given the administrator initiates posting rule setup, When transaction type and posting mode are specified, Then the system creates a ledger posting configuration grouping relevant templates.

**2. Template-Based Posting**
Given advanced posting mode is enabled, When a business transaction is processed, Then the system generates ledger entries using the configured transaction template rather than direct posting.

**3. Standard Posting**
Given standard posting mode is configured, When a business transaction is submitted, Then the system posts directly to ledger accounts without template generation.

**4. Account Mapping Validation**
Given posting configuration is saved, When account codes and entry types are defined, Then the system validates that all required account assignments are complete and consistent.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213982023"
]

---

### Epic: Financial Transaction Classification & Routing

#### Feature: Classify Business Transactions by Type
- **Role**: Billing Administrator
- **Action**: classify business transactions by type to enable automated routing and ledger processing
- **Value**: financial operations are streamlined with accurate transaction categorization, ensuring correct ledger posting and regulatory compliance

**Description:**

As a **Billing Administrator**,
I want to **classify business transactions by type to enable automated routing and ledger processing**,
So that **financial operations are streamlined with accurate transaction categorization, ensuring correct ledger posting and regulatory compliance**


**Key Capabilities:**

**1. Transaction Type Designation**
User is able to designate each business transaction as either Payment or Invoice type through mandatory classification field

**2. Classification Validation**
System validates transaction type against permitted values and prevents processing without valid classification

**3. Automated Routing Logic**
Upon successful classification, system automatically routes transactions to appropriate processing pathway:
    3.1 Invoice transactions trigger ledger account posting workflow
    3.2 Payment transactions initiate payment processing logic

**4. Processing Path Execution**
System executes type-specific business rules and ledger operations based on assigned transaction classification


**Acceptance Criteria:**

**1. Mandatory Classification Enforcement**
Given a new business transaction, When user attempts submission without transaction type, Then system prevents processing until classification is provided

**2. Valid Type Assignment**
Given transaction classification input, When user designates type as Payment or Invoice, Then system accepts classification and enables routing

**3. Invoice Path Activation**
Given transaction classified as Invoice, When system processes transaction, Then ledger account posting workflow is triggered automatically

**4. Payment Path Activation**
Given transaction classified as Payment, When system processes transaction, Then payment-specific processing logic executes

**5. Invalid Type Rejection**
Given transaction type input, When value is neither Payment nor Invoice, Then system rejects classification and requires correction


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213982030"
]

---

#### Feature: Route Transactions to Ledger Accounts via Template-Based Posting
- **Role**: Billing Administrator
- **Action**: route business transactions to ledger accounts using template-based posting
- **Value**: financial activities are accurately recorded and systematically classified across all lines of business

**Description:**

As a **Billing Administrator**,
I want to **route business transactions to ledger accounts using template-based posting**,
So that **financial activities are accurately recorded and systematically classified across all lines of business**


**Key Capabilities:**

**1. Transaction Request Intake**
User is able to initiate ledger posting by submitting business transaction requests containing transaction type, date, unique identifier, and optional template data for automated classification.

**2. Request Validation**
System validates mandatory transaction attributes and uniqueness constraints. Upon detection of missing or invalid data, system prevents processing and notifies the user.

**3. Template-Based Routing**
When template data is provided, system applies predefined posting rules to route transactions to appropriate ledger accounts based on transaction type and business context.

**4. Posting Execution**
System processes validated requests through ledger posting services, ensuring transaction data is ready for financial recording across the Billing subsystem.


**Acceptance Criteria:**

**1. Valid Request Acceptance**
Given all mandatory fields are provided with valid data, When user submits transaction request, Then system accepts request for ledger posting processing.

**2. Incomplete Request Rejection**
Given BusinessTransactionType or BusinessTransactionDate is missing, When user attempts submission, Then system prevents processing and indicates incomplete data.

**3. Duplicate Transaction Prevention**
Given BusinessTransactionId already exists in the system, When user submits request, Then system rejects the transaction due to uniqueness violation.

**4. Template-Based Classification**
Given valid ledgerTemplateData is provided, When system processes request, Then transaction is routed to appropriate ledger accounts per template rules.

**5. Cross-LOB Consistency**
Given transaction requests from multiple lines of business, When system executes posting, Then all transactions follow standardized classification logic.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=231023360"
]

---

#### Feature: Manage Multi-Currency Transaction Amounts with Exchange Rates
- **Role**: Billing Administrator
- **Action**: process financial transactions using real-time currency exchange rates based on transaction dates
- **Value**: accurate multi-currency ledger postings reflect true business value at the time of each transaction

**Description:**

As a **Billing Administrator**,
I want to **process financial transactions using real-time currency exchange rates based on transaction dates**,
So that **accurate multi-currency ledger postings reflect true business value at the time of each transaction**


**Key Capabilities:**

**Transaction Date Exchange Rate Determination**
System retrieves and validates the currency exchange rate effective at the specific business transaction date, ensuring rate availability before processing.

**Automated Currency Conversion Application**
Upon invoice business transaction initiation, system automatically applies the date-specific exchange rate to convert foreign currency amounts to base currency.

**Ledger Account Posting with Exchange Rates**
System posts converted amounts to designated ledger accounts, maintaining both original currency and converted values for audit trails.

**Double Entry Posting Execution**
System completes double entry accounting rules with exchange-rate-adjusted debits and credits, ensuring balanced ledger entries across all affected accounts.


**Acceptance Criteria:**

**Valid Exchange Rate Application**
Given a business transaction with foreign currency, When the transaction date has an effective exchange rate defined, Then system successfully applies the rate and completes ledger posting.

**Missing Exchange Rate Prevention**
Given a business transaction requiring currency conversion, When no exchange rate exists for the transaction date, Then system prevents posting and notifies administrator of missing rate configuration.

**Historical Rate Integrity**
Given multiple transactions on different dates, When processing multi-currency invoices, Then system applies each transaction's date-specific rate independently, not current-day rates.

**Dual Currency Audit Trail**
Given completed multi-currency transactions, When reviewing ledger entries, Then system displays both original currency amounts and converted base currency values with applied exchange rates.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213982053"
]

---

#### Feature: Calculate Product-Level Balance Figures
- **Role**: Billing Analyst
- **Action**: calculate and monitor product-level outstanding balances with automatic recalculation upon financial events
- **Value**: accurate financial positions are maintained across different insurance product types, enabling timely payment collection and overpayment identification

**Description:**

As a **Billing Analyst**,
I want to **calculate and monitor product-level outstanding balances with automatic recalculation upon financial events**,
So that **accurate financial positions are maintained across different insurance product types, enabling timely payment collection and overpayment identification**


**Key Capabilities:**

**1. Balance Initialization**
Upon product issuance, system establishes baseline outstanding amount based on premium or policy structure.

**2. Transaction-Driven Recalculation**
When payment, adjustment, or fee transactions are applied, system automatically recalculates Total Due figure in real-time.

**3. Product-Specific Calculation Logic**
User is able to view calculated balances differentiated by product type:
    3.1 Personal Lines: Total outstanding amount with three states (positive/zero/negative)
    3.2 Benefits: Sum of current and prior due amounts from master policy

**4. Balance State Classification**
System categorizes financial position: payment required (positive), fully paid (zero), or overpaid (negative) for appropriate action routing.


**Acceptance Criteria:**

**1. Baseline Establishment**
Given a new product is issued, When premium or policy structure is defined, Then system calculates and stores initial Total Due value.

**2. Automatic Recalculation Trigger**
Given Total Due exists, When any payment/adjustment/fee transaction posts, Then system recalculates balance within the same transaction cycle.

**3. Product-Type Differentiation**
Given calculation request, When product type is identified, Then Personal Lines uses outstanding amount logic while Benefits uses master policy summation logic.

**4. State Classification Accuracy**
Given recalculated balance for Personal Lines, When amount is positive/zero/negative, Then system correctly classifies as payment-required/fully-paid/overpaid state.

**5. Benefits Display Rule**
Given Benefits product calculation, When result is determined, Then system presents value as positive regardless of underlying calculation outcome.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=208092557"
]

---

#### Feature: Track Current and Prior Due Amounts by Product
- **Role**: Billing Administrator
- **Action**: track and calculate current and prior due balances across products
- **Value**: accurate financial visibility and allocation decisions are maintained for unpaid invoice amounts

**Description:**

As a **Billing Administrator**,
I want to **track and calculate current and prior due balances across products**,
So that **accurate financial visibility and allocation decisions are maintained for unpaid invoice amounts**


**Key Capabilities:**

**1. Current Due Balance Determination**
System calculates unpaid amount from the newest invoice, independent of due date status, reflecting any partial payment allocations to Invoice UIP.

**2. Product-Level Balance Segmentation**
System isolates current due amounts at individual product level, enabling granular financial tracking per coverage or service line.

**3. Payment Allocation Recognition**
Upon payment receipt, system adjusts current due balance by recognizing amounts applied to Invoice UIP and recalculates remaining unpaid balance automatically.


**Acceptance Criteria:**

**1. Newest Invoice Basis**
Given an account with multiple invoices, When calculating current due, Then system uses only the most recent invoice amount minus any allocated payments.

**2. Due Date Independence**
Given current due calculation is triggered, When invoice due date has passed or not yet arrived, Then balance reflects unpaid amount regardless of date status.

**3. Product-Level Accuracy**
Given multiple products on newest invoice, When retrieving current due by product, Then system returns isolated unpaid balance specific to that product identifier.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=367376188"
]

---

#### Feature: Calculate Billable and Billed Amounts per Product
- **Role**: Billing Administrator
- **Action**: calculate and maintain total billable amounts for product terms
- **Value**: I can ensure accurate financial obligations are recorded independently of payment status

**Description:**

As a **Billing Administrator**,
I want to **calculate and maintain total billable amounts for product terms**,
So that **I can ensure accurate financial obligations are recorded independently of payment status**


**Key Capabilities:**

**1. Product Term Financial Assessment**
System evaluates established product terms to identify all associated premium, taxes, and fees requiring calculation.

**2. Total Billable Amount Computation**
System calculates comprehensive Total Billable Amount encompassing both already-billed and not-yet-billed components for the complete product term.

**3. Financial Obligation Preservation**
System maintains Total Billable Amount as constant baseline, ensuring independence from subsequent payment receipt or invoice generation activities.

**4. Billing Operations Enablement**
System makes Total Billable Amount available for downstream billing processes while preserving integrity regardless of transaction status changes.


**Acceptance Criteria:**

**1. Complete Amount Calculation**
Given a product term with premium, taxes, and fees, When the calculation executes, Then Total Billable Amount reflects all components for the entire term.

**2. Payment Independence**
Given an established Total Billable Amount, When payments are received or invoices generated, Then the Total Billable Amount remains unchanged.

**3. Billing Availability**
Given a calculated Total Billable Amount, When billing operations require the value, Then the system provides accurate amount including both billed and unbilled portions.

**4. Term-Level Consistency**
Given multiple billing cycles within a product term, When amounts are accessed, Then Total Billable Amount consistently represents full-term obligation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=208092583"
]

---

#### Feature: Track Paid Amounts and Determine Paid-To-Date by Product
- **Role**: Billing Administrator
- **Action**: track and accumulate paid amounts for products with automated ledger updates
- **Value**: accurate paid-to-date balances are maintained automatically, ensuring financial integrity and preventing negative balance violations

**Description:**

As a **Billing Administrator**,
I want to **track and accumulate paid amounts for products with automated ledger updates**,
So that **accurate paid-to-date balances are maintained automatically, ensuring financial integrity and preventing negative balance violations**


**Key Capabilities:**

**Payment Acceptance & Auto-Accumulation**
When a payment is processed and accepted for a product, the system automatically increments the Paid Amount field by the payment value, creating a cumulative total.

**Financial Integrity Validation**
Upon payment submission, the system validates that the resulting Paid Amount remains at or above $0.00, rejecting any transaction that would create a negative balance.

**Paid-To-Date Balance Tracking**
The system maintains a running total of all accepted payments, providing an accurate paid-to-date amount for financial reporting and downstream balance calculations.


**Acceptance Criteria:**

**Successful Payment Accumulation**
Given a product exists with accepted payments, When a new payment is processed successfully, Then the Paid Amount automatically increases by the payment amount and reflects the cumulative total.

**Negative Balance Prevention**
Given a product's current Paid Amount, When a payment transaction would result in a value below $0.00, Then the system rejects the payment and maintains the previous valid balance.

**Zero-State Initialization**
Given a newly created product, When no payments have been accepted, Then the Paid Amount displays $0.00 as the initial baseline value.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=208092571"
]

---

#### Feature: Calculate Minimum Due and Prepaid Balances per Product
- **Role**: Billing Administrator
- **Action**: calculate and enforce minimum payment thresholds with prepaid balance reconciliation across products
- **Value**: late payment processing triggers accurately and product balances reflect accurate financial positions to prevent improper cancellations

**Description:**

As a **Billing Administrator**,
I want to **calculate and enforce minimum payment thresholds with prepaid balance reconciliation across products**,
So that **late payment processing triggers accurately and product balances reflect accurate financial positions to prevent improper cancellations**


**Key Capabilities:**

**1. Minimum Payment Threshold Configuration**
System establishes minimum payment amount per product that serves as the baseline for late payment processing mechanisms.

**2. Balance Threshold Validation**
Upon balance calculation, system validates minimum due amount meets monetary constraints (non-negative value).

**3. Late Payment Processing Determination**
When account balance falls below minimum due threshold, system triggers late payment consequences including fee assessment and cancellation eligibility.

**4. Prepaid Balance Reconciliation**
System calculates and tracks prepaid balances separately from minimum due amounts to support accurate product balance retrieval operations.


**Acceptance Criteria:**

**1. Valid Minimum Due Establishment**
Given a product requires payment enforcement, When minimum due amount is configured at or above $0.00, Then system accepts and applies threshold for late payment processing.

**2. Invalid Threshold Rejection**
Given minimum due configuration, When value is set below $0.00, Then system rejects the configuration and prevents balance calculation errors.

**3. Late Payment Trigger Activation**
Given account balance exists below minimum due threshold, When payment deadline passes, Then system initiates late fee assessment and cancellation eligibility processes.

**4. Accurate Balance Retrieval**
Given prepaid and minimum due balances are calculated, When product balance is requested, Then system returns accurate financial position reflecting both components.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=208092544"
]

---

#### Feature: Configure Ledger Posting Rules by Transaction Type
- **Role**: Billing Administrator
- **Action**: configure ledger posting rules by classifying transaction types for accurate financial routing
- **Value**: the system automatically routes payments and allocations through appropriate business logic, ensuring accurate financial processing across all lines of business

**Description:**

As a **Billing Administrator**,
I want to **configure ledger posting rules by classifying transaction types for accurate financial routing**,
So that **the system automatically routes payments and allocations through appropriate business logic, ensuring accurate financial processing across all lines of business**


**Key Capabilities:**

**1. Transaction Type Classification**
User is able to define business transaction classifications to distinguish operational payment categories across the billing subsystem.

**2. Payment Operation Routing**
When the transaction represents direct payment activity, the system routes it through standard payment processing logic.

**3. Allocation Operation Routing**
When the transaction involves distributing payments to specific obligations, the system routes it through allocation-specific business rules.

**4. Cross-LOB Rule Enforcement**
Upon transaction submission, the system validates classification completeness and applies configured rules universally across all lines of business.


**Acceptance Criteria:**

**1. Mandatory Classification Enforcement**
Given a billing transaction is initiated, When the business transaction type is not specified, Then the system prevents transaction submission.

**2. Payment Processing Path**
Given a transaction classified as direct payment, When submitted for processing, Then the system routes it through payment-specific business logic.

**3. Allocation Processing Path**
Given a transaction classified as payment allocation, When submitted for processing, Then the system routes it through allocation-specific business rules.

**4. Universal Application**
Given configuration is established, When transactions are processed, Then classification rules apply consistently across all lines of business.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=218540680"
]

---

#### Feature: Timestamp Business Transactions for Ledger Posting
- **Role**: Financial Controller
- **Action**: capture and maintain accurate business transaction timestamps for ledger integration
- **Value**: transactions are properly sequenced and posted to ledger accounts with reliable temporal accuracy for financial reporting and audit compliance

**Description:**

As a **Financial Controller**,
I want to **capture and maintain accurate business transaction timestamps for ledger integration**,
So that **transactions are properly sequenced and posted to ledger accounts with reliable temporal accuracy for financial reporting and audit compliance**


**Key Capabilities:**

**1. Transaction Timestamp Capture**
System captures precise date and time when business transaction is executed, establishing authoritative temporal marker for all downstream processing

**2. Temporal Data Validation**
System validates timestamp completeness with both date and time components before accepting transaction for processing

**3. Ledger Account Posting**
Upon invoice business transaction completion, system utilizes captured timestamp to post entries to appropriate ledger accounts maintaining chronological order

**4. Double-Entry Integration**
System applies transaction timestamp to coordinate corresponding debit and credit entries ensuring temporal consistency across ledger postings


**Acceptance Criteria:**

**1. Timestamp Mandatory Enforcement**
Given a business transaction is initiated, When the transaction lacks timestamp data, Then system prevents transaction acceptance until valid datetime is provided

**2. Complete Temporal Data**
Given timestamp is captured, When system validates the data, Then both date and time components must be present and properly formatted

**3. Ledger Posting Accuracy**
Given an invoice business transaction is processed, When posting to ledger accounts occurs, Then entries reflect the original business transaction timestamp

**4. Double-Entry Temporal Consistency**
Given double-entry posting is executed, When corresponding debit and credit entries are created, Then both entries carry identical business transaction timestamp


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=213982037"
]

---

### Epic: Financial Reporting, Audit & Compliance

#### Feature: Calculate Member Record Unpaid Premium Amounts
- **Role**: Billing Administrator
- **Action**: calculate total remaining due and total paid amounts for member records within specified date parameters
- **Value**: accurate financial reporting, audit compliance, and real-time visibility into outstanding premium obligations across billing accounts

**Description:**

As a **Billing Administrator**,
I want to **calculate total remaining due and total paid amounts for member records within specified date parameters**,
So that **accurate financial reporting, audit compliance, and real-time visibility into outstanding premium obligations across billing accounts**


**Key Capabilities:**

**1. Request Initiation & Validation**
System receives calculation request with member record identifiers, as-of date, and end date parameters. Upon validation, system confirms member record existence in billing subsystem.
    1.1 If member record not found, system returns error response
    1.2 If member record exists but has no billing history by as-of date, system sets amounts to zero

**2. Invoice Identification & Retrieval**
System identifies all billing accounts where member record appears on invoices issued by as-of date, then retrieves invoices with due dates through end date.

**3. Financial Calculation & Response**
System applies business rules to calculate total remaining due and total paid amounts per member record, then returns aggregated financial data including member identifier and calculated amounts.


**Acceptance Criteria:**

**1. Successful Multi-Account Calculation**
Given member record exists on multiple billing accounts, When calculation request spans invoices across those accounts, Then system aggregates all invoice amounts and returns single total remaining due and total paid per member.

**2. Date Range Filtering**
Given invoices exist with various issue and due dates, When as-of date and end date are specified, Then system includes only invoices issued by as-of date with due dates through end date.

**3. Missing Member Handling**
Given member record ID does not exist in billing subsystem, When calculation is requested, Then system returns error response without performing calculations.

**4. Zero Balance Scenario**
Given member record has no invoices meeting date criteria, When calculation is performed, Then system returns zero for both total remaining due and total paid amounts.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=707828569"
]

---

#### Feature: Calculate Member Record Billable Premium Amounts
- **Role**: Billing Analyst
- **Action**: calculate total billable premium amounts for member records as of a specific date
- **Value**: I can provide accurate financial reporting and compliance data for audits and regulatory requirements

**Description:**

As a **Billing Analyst**,
I want to **calculate total billable premium amounts for member records as of a specific date**,
So that **I can provide accurate financial reporting and compliance data for audits and regulatory requirements**


**Key Capabilities:**

**1. Request Initiation**
System receives calculation request with member record identifier and as-of date for premium determination

**2. Invoice Identification**
System locates all billing accounts and invoices where the member record was billed through the specified date
    2.1 Upon missing member record, system returns error response
    2.2 When no invoices exist, system assigns zero billable amount

**3. Period Determination**
System identifies complete invoicing periods between member effective date and specified date

**4. Amount Calculation**
System computes total billable amount and total paid using defined business rules

**5. Response Delivery**
System returns member identifier and calculated billable amount to requesting system


**Acceptance Criteria:**

**1. Successful Calculation**
Given valid member record with billing history, When calculation requested with as-of date, Then system returns member identifier and accurate total billable amount

**2. Invalid Member Handling**
Given non-existent member record identifier, When calculation requested, Then system returns error response without processing

**3. Zero Balance Scenario**
Given member record with no invoices or incomplete periods, When calculation performed, Then system returns zero billable amount

**4. Date Constraint Application**
Given multiple invoices exist, When as-of date specified, Then system includes only invoices issued on or before that date

**5. Multi-Account Aggregation**
Given member billed across multiple billing accounts, When calculation requested, Then system aggregates amounts from all applicable accounts


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=811442326"
]

---

#### Feature: Manage Variance Limit Compliance Review
- **Role**: Compliance Officer
- **Action**: manage variance limit compliance reviews through structured task workflows
- **Value**: financial controls are enforced, audit trails are maintained, and regulatory compliance is ensured across ledger operations

**Description:**

As a **Compliance Officer**,
I want to **manage variance limit compliance reviews through structured task workflows**,
So that **financial controls are enforced, audit trails are maintained, and regulatory compliance is ensured across ledger operations**


**Key Capabilities:**

**1. Compliance Review Initiation**
Upon detection of variance limit breach, system automatically generates compliance review task and assigns to appropriate officer based on threshold rules and organizational hierarchy

**2. Task Queue Management**
User accesses centralized work queue to view prioritized compliance tasks, filter by urgency or variance type, and navigate to detailed review interfaces

**3. Variance Analysis & Documentation**
User investigates variance root cause, documents findings, and determines appropriate remediation action while maintaining complete audit trail

**4. Resolution & Approval Workflow**
When remediation is proposed, system routes through approval hierarchy and captures authorization evidence for compliance reporting


**Acceptance Criteria:**

**1. Automated Task Generation**
Given variance exceeds defined threshold, When breach is detected, Then compliance review task is created and assigned without manual intervention

**2. Workload Visibility**
Given officer has assigned tasks, When accessing work queue, Then all pending compliance reviews are displayed with priority indicators and aging metrics

**3. Audit Trail Completeness**
Given review is in progress, When officer documents analysis, Then all actions and decisions are timestamped and immutably recorded

**4. Approval Enforcement**
Given remediation requires authorization, When resolution is submitted, Then system prevents closure until appropriate approval is obtained and documented


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=838440588"
]

---

### Epic: Financial Adjustments & GL Journal Entries

#### Feature: Apply Manual Write-Offs to Invoices
- **Role**: Billing Specialist
- **Action**: apply manual write-offs to invoices to reconcile underpayments and account for negotiated adjustments
- **Value**: I can accurately reflect payment realities, reduce outstanding balances, and maintain financial integrity when customers cannot pay invoiced amounts in full

**Description:**

As a **Billing Specialist**,
I want to **apply manual write-offs to invoices to reconcile underpayments and account for negotiated adjustments**,
So that **I can accurately reflect payment realities, reduce outstanding balances, and maintain financial integrity when customers cannot pay invoiced amounts in full**


**Key Capabilities:**

**1. Initiate Write-Off Transaction**
User is able to apply manual write-offs to issued or partially paid invoices, specifying adjustment amounts that reduce remaining balances while maintaining transaction audit trails.

**2. System Validation & Eligibility Check**
Upon submission, system validates invoice eligibility status and user privileges before accepting write-off requests.

**3. Financial Impact Calculation**
System recalculates invoice remaining due, updates billing account balances, adjusts payment-to-date calculations, and determines resulting invoice status based on write-off amount.

**4. Automatic Reversal Processing**
When invoices with applied write-offs are affected by negative invoice items or discarded, system automatically reverses applicable write-off portions.

**5. Manual Reversal Capability**
User is able to manually reverse non-reversed manual write-offs by providing reversal justification when business conditions change.


**Acceptance Criteria:**

**1. Successful Write-Off Application**
Given an invoice in issued or partially paid status, when authorized user applies manual write-off with valid amount, then system reduces invoice remaining due, updates billing account balances, triggers financial events, and changes invoice status accordingly.

**2. Eligibility Enforcement**
Given an invoice not in eligible status or user without required privileges, when write-off application is attempted, then system prevents transaction submission and maintains existing balances.

**3. Automatic Reversal Execution**
Given an invoice with applied write-off affected by negative invoice items, when system detects the condition, then partial reversal occurs for affected member-classification combinations and reversal event is triggered.

**4. Manual Reversal Completion**
Given a non-reversed manual write-off, when authorized user submits reversal with valid reason, then system restores original invoice balance and records reversal audit trail.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=688790823"
]

---

#### Feature: Approve or Reject Manual Write-Offs with Authority-Based Workflow
- **Role**: Billing Administrator
- **Action**: approve or reject manual write-offs through authority-based workflow controls
- **Value**: financial adjustments comply with organizational approval limits and segregation of duties requirements

**Description:**

As a **Billing Administrator**,
I want to **approve or reject manual write-offs through authority-based workflow controls**,
So that **financial adjustments comply with organizational approval limits and segregation of duties requirements**


**Key Capabilities:**

**1. Write-Off Eligibility Determination**
System evaluates product priorities and selects applicable products for write-off when multiple products exist.

**2. Authority Threshold Evaluation**
System compares requested write-off amount against user's assigned authority level and configured approval limits defined in business rules.

**3. Automated Approval Decision**
When write-off amount is within user's authority limit, system grants automatic approval and proceeds to execution.
    3.1 Upon exceeding authority limit, system routes request to designated approver with sufficient authority level.

**4. Manual Approval Processing**
Approver with adequate authority reviews and approves or rejects the escalated write-off request.

**5. Write-Off Execution**
Upon approval confirmation, system executes defined write-off actions according to configured business logic.


**Acceptance Criteria:**

**1. Authority-Based Routing**
Given a write-off request, When the amount exceeds user's authority limit, Then system routes to next approval level without execution.

**2. Automatic Approval Within Limits**
Given user has sufficient authority, When write-off amount is within approved threshold, Then system automatically approves and executes write-off.

**3. Product Priority Application**
Given multiple products exist, When write-off is initiated, Then system applies configured product priority rules to determine write-off sequence.

**4. Approval Threshold Enforcement**
Given approval limits are configured, When write-off is submitted, Then system prevents execution until appropriate authority level approves.

**5. Manual Rejection Handling**
Given write-off requires manual approval, When approver rejects request, Then system prevents write-off execution and notifies requester.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=680306861"
]

---

#### Feature: Reverse Manual Write-Offs Automatically or Manually
- **Role**: Billing Administrator
- **Action**: reverse manual write-offs automatically or manually to restore invoice amounts
- **Value**: accurate financial records are maintained when invoice conditions change or corrections are needed

**Description:**

As a **Billing Administrator**,
I want to **reverse manual write-offs automatically or manually to restore invoice amounts**,
So that **accurate financial records are maintained when invoice conditions change or corrections are needed**


**Key Capabilities:**

**1. Automatic Write-Off Reversal Triggering**
System detects qualifying events (invoice discarded or negative items added) and initiates reversal workflow without manual intervention.

**2. Reversal Scope Determination**
System calculates full reversal for discarded invoices or partial reversal targeting specific member record and classification segment combinations affected by negative items.

**3. Financial Recalculation Execution**
System recalculates invoice remaining due, billing account balances (due/unpaid), and PTD, updating invoice status appropriately.

**4. Manual Reversal Initiation**
User provides reversal reason and submits manual reversal for eligible write-offs (manual, non-reversed), triggering recalculation and status updates.

**5. Transaction Recording & Integration**
System issues reversal transactions, publishes integration messages, and displays reversed write-offs across all invoice views.


**Acceptance Criteria:**

**1. Automatic Reversal Triggered Successfully**
Given an invoice with manual write-off is discarded or receives negative items, When the system detects the event, Then full or partial reversal is executed and balances are recalculated accordingly.

**2. Partial Reversal Targets Correct Segments**
Given negative items affect specific member/classification combinations, When automatic reversal is triggered, Then only write-offs for affected segments are reversed.

**3. Manual Reversal Completes with Reason**
Given user has reversal privilege and selects eligible write-off, When reversal reason is provided and submitted, Then write-off status changes to 'Reversed' and financial calculations update.

**4. Ineligible Reversals Prevented**
Given write-off is system-generated or already reversed, When user attempts manual reversal, Then system prevents the action.

**5. Financial Impact Reflected Accurately**
Given write-off reversal completes, When balances are recalculated, Then invoice due amount, account balances, and PTD increase by reversed amount.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=688790823"
]

---

#### Feature: Process Small Balance Write-Offs Automatically
- **Role**: Billing Administrator
- **Action**: automate the write-off of small outstanding invoice balances within configured tolerance limits
- **Value**: I can reduce administrative costs, prevent unnecessary delinquency actions over trivial amounts, and improve operational efficiency by eliminating manual intervention for minor balance discrepancies

**Description:**

As a **Billing Administrator**,
I want to **automate the write-off of small outstanding invoice balances within configured tolerance limits**,
So that **I can reduce administrative costs, prevent unnecessary delinquency actions over trivial amounts, and improve operational efficiency by eliminating manual intervention for minor balance discrepancies**


**Key Capabilities:**

**Automated Eligibility Identification**
System periodically evaluates invoices to identify balances within configured tolerance limits based on bill type, payment allocation mode, and state parameters.

**Write-Off Transaction Creation & Balance Adjustment**
Upon qualification, system automatically creates write-off transaction, updates invoice status to Paid, recalculates billing account balances, and adjusts payment tracking dimensions.

**Payment-Triggered Automatic Reversal**
When payment or manual write-off allocation occurs on invoice with applied write-off, system automatically reverses the transaction completely to maintain balance integrity.

**Invoice Discard Reversal Processing**
If invoice with applied write-off is discarded, system automatically reverses the transaction to undo all associated balance adjustments.

**Partial Reversal for Negative Adjustments**
When negative invoice items impact written-off invoices, system performs partial reversal for affected member and classification segments during excessive payment calculations.


**Acceptance Criteria:**

**1. Automated Write-Off Application**
Given invoices exist with remaining balances below configured tolerance limits, When the automated job executes, Then system creates write-off transactions, marks invoices as Paid, and adjusts billing account balances accordingly.

**2. Payment-Triggered Full Reversal**
Given an invoice has applied small balance write-off, When payment or manual write-off allocation is recorded, Then system automatically reverses the write-off transaction completely and recalculates balances.

**3. Invoice Discard Reversal**
Given an invoice with applied write-off is discarded, When discard processing occurs, Then system automatically reverses the write-off transaction and restores original balance states.

**4. Partial Reversal for Negative Items**
Given negative invoice items affect written-off invoices, When excessive payment calculation processes, Then system performs partial reversal only for impacted member and classification segments.

**5. Manual Reversal Prevention**
Given any write-off transaction exists, When manual reversal is attempted, Then system prevents the action as only system-triggered automatic reversals are permitted.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=763235605"
]

---

#### Feature: Configure Write-Off Tolerance Limits by Bill Type and State
- **Role**: Billing Administrator
- **Action**: configure write-off tolerance limits segmented by bill type and state to automate small balance invoice closures
- **Value**: administrative costs are reduced, customer relationships are preserved by avoiding collection actions on trivial amounts, and billing efficiency is improved through automated invoice resolution

**Description:**

As a **Billing Administrator**,
I want to **configure write-off tolerance limits segmented by bill type and state to automate small balance invoice closures**,
So that **administrative costs are reduced, customer relationships are preserved by avoiding collection actions on trivial amounts, and billing efficiency is improved through automated invoice resolution**


**Key Capabilities:**

**1. Tolerance Configuration Setup**
Administrator defines tolerance parameters including tolerance type (Carry Forward or Small Balance Write-Off), tolerance limit thresholds, and segmentation criteria by bill type, payment allocation mode, and state jurisdiction.

**2. Automated Eligibility Assessment**
System continuously evaluates invoices against configured tolerance limits to identify qualifying candidates with remaining due amounts within acceptable thresholds.

**3. Automatic Write-Off Execution**
Upon identifying eligible invoices, system generates automatic write-off transactions, updates invoice status to Paid, recalculates billing account balances, and adjusts payment-to-date records.

**4. Reversal Processing**
When payment allocation changes occur, invoices are discarded, or negative invoice items impact balances, system automatically reverses write-offs fully or partially based on the triggering condition.


**Acceptance Criteria:**

**1. Configuration Activation**
Given administrator has defined tolerance limits by bill type and state, When configuration is saved and activated, Then system applies rules to invoice eligibility assessment without manual intervention.

**2. Eligible Invoice Processing**
Given invoice remaining balance falls within configured tolerance limit, When automated job executes, Then system generates write-off transaction, marks invoice as Paid, and updates account balances accordingly.

**3. Automatic Reversal Triggering**
Given write-off has been applied to an invoice, When payment allocation changes or invoice is discarded, Then system automatically reverses the write-off and restores original invoice status.

**4. Balance Recalculation Accuracy**
Given write-off transaction is processed, When account balances are recalculated, Then due and unpaid amounts reflect write-off reduction and payment-to-date adjustments accurately.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=763235605"
]

---

#### Feature: Allocate Write-Offs to Invoice Items with GL Impact Tracking
- **Role**: Billing Administrator
- **Action**: allocate write-off amounts to specific invoice items and track financial impacts
- **Value**: accurate financial adjustments are recorded with complete audit trails and general ledger integration for regulatory compliance

**Description:**

As a **Billing Administrator**,
I want to **allocate write-off amounts to specific invoice items and track financial impacts**,
So that **accurate financial adjustments are recorded with complete audit trails and general ledger integration for regulatory compliance**


**Key Capabilities:**

**1. Write-Off Transaction Initiation**
User is able to register write-off transactions capturing transaction number, date, currency, subtype (manual/automatic), billing account, and customer identifiers.

**2. Product Entity Identification**
Upon product type determination, system retrieves master policy details for Group Benefits (policy number, effective date, product code, situs state, underwriting company) or bypasses for Individual Benefits.

**3. Member and Invoice Association**
User is able to link write-off to member records, invoices, and specific invoice items with associated coverage periods and invoicing period definitions.

**4. Renewal Classification**
When invoice item period relationship to member effective date is evaluated, system assigns renewal indicator (0=New Business if within 12 months, 1=Renewal if exceeding 12 months).

**5. Multi-Item Allocation**
If multiple invoice items exist, user is able to distribute write-off amounts across items with individual coverage names and technical references.

**6. Audit Trail Capture**
System automatically records creation and update metadata for compliance tracking.


**Acceptance Criteria:**

**1. Transaction Registration Completeness**
Given a write-off allocation request, When all mandatory transaction details (number, date, currency, subtype, account) are provided, Then system captures complete write-off transaction record with unique identifier.

**2. Product-Specific Data Population**
Given product type identification, When product is Group Benefits, Then master policy attributes are retrieved from policy subsystem; When product is Individual Benefits, Then master policy fields remain unpopulated.

**3. Renewal Indicator Accuracy**
Given invoice item period and member effective date, When period relationship is within 12 months, Then renewal indicator is 0; When exceeding 12 months, Then renewal indicator is 1.

**4. Multi-Item Allocation Support**
Given multiple invoice items associated with write-off, When allocation is processed, Then each item captures distinct write-off amount, coverage name, period dates, and technical references.

**5. Audit Trail Integrity**
Given any write-off allocation transaction, When processed, Then system prevents submission if tracking metadata (created by/on, updated by/on) cannot be captured.

**6. GL Integration Readiness**
Given completed write-off allocation, When transaction includes all required invoice item details and renewal classification, Then data structure supports downstream general ledger posting and financial reporting.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=763239277"
]

---

#### Feature: Track Write-Off Operations with Balance Register Updates
- **Role**: Billing Administrator
- **Action**: process and track write-off operations with automated balance register updates
- **Value**: financial discrepancies are systematically managed and ledger integrity is maintained through accurate event capture

**Description:**

As a **Billing Administrator**,
I want to **process and track write-off operations with automated balance register updates**,
So that **financial discrepancies are systematically managed and ledger integrity is maintained through accurate event capture**


**Key Capabilities:**

**1. Write-Off Event Initiation**
System captures write-off transaction with timestamp, unique identifier, category classification, and directional indicator upon authorization.

**2. Balance Operation Recording**
System allocates amounts per premium sequence to affected invoiced items, recording operation direction and establishing references between write-off items and invoice balances.

**3. Transaction Processing - Issuance Path**
When direction equals WRITE_OFF_ADD, system executes writeOut operation moving amounts from billable to written-off status.

**4. Transaction Processing - Reversal Path**
When direction equals WRITE_OFF_REMOVE, system executes writeIn operation restoring amounts from written-off to billable status.

**5. Context Data Integration**
System captures policy, coverage, product, member, modal period, currency, and premium sequence details for comprehensive transaction context.

**6. Special Processing for Product Rewrites**
Upon single premium sequence rewrite transactions, system filters New Business sequences and processes only relevant premium sequence versions.


**Acceptance Criteria:**

**1. Successful Write-Off Issuance**
Given authorized write-off transaction, When direction is WRITE_OFF_ADD, Then system creates event with writeOut operation and updates balance register reducing billable amounts per premium sequence.

**2. Successful Write-Off Reversal**
Given existing write-off transaction, When direction is WRITE_OFF_REMOVE, Then system creates event with writeIn operation and restores billable amounts to original balances.

**3. Complete Transaction Context Capture**
Given any write-off operation, When event is generated, Then system captures invoice details, policy references, premium sequences, member identifiers, currency, and temporal data.

**4. Rewrite Transaction Handling**
Given single premium sequence product with rewrite, When processing write-off, Then system excludes New Business sequences and processes only current product version sequences.

**5. Balance Operation Integrity**
Given write-off event creation, When balance operations are recorded, Then system establishes bidirectional references between invoiced items and write-off items with accurate amount allocation.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=653598103"
]

---

#### Feature: Cancel Pending Write-Offs Before Approval
- **Role**: Billing Administrator
- **Action**: cancel pending write-off transactions before final approval
- **Value**: I can prevent incorrect or unnecessary write-offs from being finalized and maintain accurate financial records

**Description:**

As a **Billing Administrator**,
I want to **cancel pending write-off transactions before final approval**,
So that **I can prevent incorrect or unnecessary write-offs from being finalized and maintain accurate financial records**


**Key Capabilities:**

**1. Identify Pending Write-Off Candidates**
User reviews write-off transactions currently in Pending status awaiting approval decision. Applies to both manual write-offs and system-generated small balance write-offs (SBWO).

**2. Initiate Cancellation Request**
Upon determining write-off is no longer valid, user submits cancellation action against the pending transaction.

**3. Execute Status Transition**
System processes cancellation request and transitions write-off status from Pending to Cancelled, completing the alternative workflow path.

**4. Audit Trail Maintenance**
System records cancellation action with timestamp, user identity, and reason for operational visibility and compliance tracking.


**Acceptance Criteria:**

**1. Cancellation Window Enforcement**
Given a write-off transaction exists, When status is Pending, Then system allows cancellation action; When status is Approved or already Cancelled, Then system prevents further cancellation.

**2. Status Transition Accuracy**
Given user initiates cancellation on Pending write-off, When system processes request, Then status changes from Pending to Cancelled and transaction workflow completes.

**3. Financial Impact Neutralization**
Given write-off is cancelled, When cancellation completes, Then no financial adjustments post to accounts receivable or general ledger for that transaction.

**4. Audit Completeness**
Given cancellation occurs, When action is recorded, Then system captures user, timestamp, and business justification for historical tracking.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=672762122"
]

---

#### Feature: Generate Write-Off Audit Events for Compliance Tracking
- **Role**: Billing Administrator
- **Action**: generate comprehensive audit events when write-off transactions are approved
- **Value**: all write-off activities are captured with complete transaction lifecycle details for regulatory compliance and financial accountability

**Description:**

As a **Billing Administrator**,
I want to **generate comprehensive audit events when write-off transactions are approved**,
So that **all write-off activities are captured with complete transaction lifecycle details for regulatory compliance and financial accountability**


**Key Capabilities:**

**1. Write-Off Transaction Initiation**
User is able to create write-off transactions manually or automatically against billing accounts with outstanding invoices, triggering the approval workflow.

**2. Authorization & Approval Processing**
When write-off is submitted, authorized user reviews and approves the transaction, system registers approval with unique transaction number and timestamp.

**3. Comprehensive Event Generation**
Upon approval, system generates audit event capturing transaction details (amount, currency, type), invoice information (number, periods, dates), billing account references, customer identifiers, and approval tracking metadata.

**4. Event Publication & Persistence**
System publishes event data with technical reference links for downstream compliance reporting and GL integration.


**Acceptance Criteria:**

**1. Write-Off Creation & Submission**
Given a billing account with outstanding invoice balance, When user creates and submits write-off transaction for approval, Then system captures creation metadata and transitions to pending approval state.

**2. Successful Approval Event Generation**
Given a pending write-off transaction, When authorized user approves the write-off, Then system generates unique transaction number, registers approval timestamp, and publishes event containing all transaction, invoice, billing account, customer, and tracking information.

**3. Partial vs Full Write-Off Coverage**
Given an invoice with outstanding balance, When write-off amount is specified, Then system correctly associates write-off as partial or full coverage and includes invoice period dates in event data.

**4. Audit Trail Completeness**
Given an approved write-off, When audit event is generated, Then event includes creator identity, creation timestamp, approver identity, approval timestamp, and all financial reference links for compliance verification.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=694528378"
]

---

#### Feature: Apply Write-Offs Based on Product Priority Rules
- **Role**: Billing Administrator
- **Action**: execute write-offs according to product priority and approval authority rules
- **Value**: outstanding balances are systematically reduced with appropriate governance controls and audit compliance

**Description:**

As a **Billing Administrator**,
I want to **execute write-offs according to product priority and approval authority rules**,
So that **outstanding balances are systematically reduced with appropriate governance controls and audit compliance**


**Key Capabilities:**

**1. Product Priority Evaluation**
System determines write-off sequence based on configured product priority levels to ensure business-critical accounts are processed according to strategic rules.

**2. Approval Authority Assessment**
System evaluates transaction amount against user's designated authority level limits and configured OpenL approval thresholds.
    2.1 Upon transaction falling within authority limits, system automatically approves write-off execution.
    2.2 Upon exceeding threshold parameters, system triggers manual approval workflow.

**3. Write-Off Action Execution**
System performs designated write-off actions according to defined execution rules and records transactions for audit trail.


**Acceptance Criteria:**

**1. Priority-Based Processing**
Given multiple products require write-off, When system initiates process, Then products are processed in descending priority order per configuration.

**2. Automatic Approval Within Limits**
Given write-off amount within user authority level, When transaction is submitted, Then system automatically approves and executes write-off.

**3. Manual Approval Trigger**
Given write-off exceeds OpenL threshold parameters, When transaction is evaluated, Then system routes to manual approval workflow and prevents automatic execution.

**4. Authority Boundary Enforcement**
Given write-off exceeds user's authority level, When approval is attempted, Then system prevents automatic approval regardless of OpenL limits.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=680306861"
]

---

### Epic: Balance Reconciliation & Multi-Level Verification

#### Feature: Calculate Invoice-Level Balances On-the-Fly
- **Role**: Billing Analyst
- **Action**: retrieve real-time invoice balance with automatic calculation and caching
- **Value**: I can access accurate, up-to-date financial positions without manual reconciliation delays

**Description:**

As a **Billing Analyst**,
I want to **retrieve real-time invoice balance with automatic calculation and caching**,
So that **I can access accurate, up-to-date financial positions without manual reconciliation delays**


**Key Capabilities:**

**Invoice Balance Request Initiation**
User is able to request invoice balance by identifying the target invoice through its unique system reference

**Multi-Level Request Validation**
System validates request integrity through hierarchical checks ensuring authorization and data completeness

**Intelligent Balance Retrieval**
When cached balance exists, system retrieves stored figures. Upon cache miss, system automatically calculates balance using defined computation rules and persists results to cache repository

**Comprehensive Balance Response**
System returns complete financial position including billed amount, paid amount with transaction details, and remaining payable amount for immediate business use


**Acceptance Criteria:**

**Successful Balance Retrieval from Cache**
Given cached balance exists for the invoice, When user requests invoice balance, Then system returns cached figures with all four balance attributes without recalculation

**Successful Balance Calculation and Caching**
Given no cached balance exists, When user requests invoice balance, Then system calculates balance, stores result in cache, and returns complete balance attributes

**Request Validation Failure Handling**
Given request fails validation checks, When system detects facade, command facade, or command validation errors, Then system returns specific error message and prevents balance retrieval

**Invalid Invoice Reference Handling**
Given invoice URI does not match existing entity, When system performs lookup, Then system returns invoice not found error without processing balance calculation


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=283353347"
]

---

#### Feature: Calculate Billing Account-Level Balances On-the-Fly
- **Role**: Billing Administrator
- **Action**: calculate and retrieve billing account balances on-demand with intelligent caching
- **Value**: accurate financial positions are immediately available for account management and reconciliation decisions

**Description:**

As a **Billing Administrator**,
I want to **calculate and retrieve billing account balances on-demand with intelligent caching**,
So that **accurate financial positions are immediately available for account management and reconciliation decisions**


**Key Capabilities:**

**Balance Request Initiation**
User is able to request billing account balance by providing account identifier with proper authorization credentials

**Intelligent Cache Management**
When balance data exists in cache repository, system retrieves cached figures. Upon cache miss, system triggers new calculation and stores results for future requests

**Comprehensive Balance Calculation**
System calculates multi-dimensional balance figures including amounts due, billed, paid, prepaid, and suspense categories

**Balance Data Delivery**
System returns complete balance snapshot with total due, billable amount, minimum due, payment details, and suspense account information


**Acceptance Criteria:**

**Successful Balance Retrieval from Cache**
Given cached balance exists for requested billing account, When user requests balance data with valid credentials, Then system retrieves and returns cached balance without recalculation

**Successful Balance Calculation and Caching**
Given no cached balance exists, When user requests balance with valid account identifier, Then system calculates complete balance figures and stores to cache repository before returning response

**Authorization Failure Handling**
Given user lacks proper authorization credentials, When balance request is submitted, Then system prevents data access and returns validation error without processing calculation

**Invalid Account Identifier**
Given billing account does not exist for provided identifier, Then system returns account-not-found error and terminates process without calculation attempt


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=252123815"
]

---

#### Feature: Calculate Product-Level Balances On-the-Fly
- **Role**: Billing Analyst
- **Action**: retrieve up-to-date product balance figures on demand with automated caching
- **Value**: I can access accurate financial position instantly without manual recalculation delays

**Description:**

As a **Billing Analyst**,
I want to **retrieve up-to-date product balance figures on demand with automated caching**,
So that **I can access accurate financial position instantly without manual recalculation delays**


**Key Capabilities:**

**Balance Retrieval Initiation**
User initiates balance inquiry by submitting product reference identifier for financial position assessment.

**Request Validation & Authorization**
System validates requester credentials and product identifier integrity before proceeding to balance computation stage.

**Dynamic Balance Calculation**
Upon detecting absence of cached figures, system executes comprehensive balance computation covering all financial dimensions and persists results to cache repository.

**Balance Data Delivery**
System returns complete financial snapshot including total obligations, billable amounts, minimum payment requirements, billed totals, and received payments from cache or fresh calculation.


**Acceptance Criteria:**

**Successful Cached Balance Retrieval**
Given valid product identifier with existing cache entry, when user requests balance, then system returns cached figures without recalculation within performance thresholds.

**Fresh Balance Calculation Trigger**
Given valid product identifier without cache entry, when user requests balance, then system calculates all five balance dimensions and persists to cache before response delivery.

**Invalid Product Reference Handling**
Given non-existent product identifier, when user submits balance request, then system prevents processing and returns product-not-found notification without attempting calculation.

**Authorization Failure Prevention**
Given unauthorized access attempt, when balance request validation occurs, then system blocks retrieval and returns authentication error without exposing balance data.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=252123819"
]

---

#### Feature: Calculate Payment-Level Balances On-the-Fly
- **Role**: Billing Reconciliation Specialist
- **Action**: retrieve real-time payment-level balance with multi-tiered allocation breakdown
- **Value**: ensure accurate financial control and eliminate manual balance verification efforts

**Description:**

As a **Billing Reconciliation Specialist**,
I want to **retrieve real-time payment-level balance with multi-tiered allocation breakdown**,
So that **I can ensure accurate financial control and eliminate manual balance verification efforts**


**Key Capabilities:**

**1. Payment Balance Request Initiation**
User initiates balance inquiry by providing payment identifier for specific transaction review

**2. Request Validation & Entity Verification**
System validates request integrity and confirms payment entity existence in financial repository
    2.1 Upon validation failure, system prevents processing and returns diagnostic error classification
    2.2 When payment entity is not found, system terminates request with entity-not-found notification

**3. Cache-Optimized Balance Retrieval**
System evaluates cache availability; if absent, triggers calculation engine per defined allocation rules and stores result; if present, retrieves cached figures

**4. Multi-Dimensional Balance Response Delivery**
System returns comprehensive balance structure including total payment amount, general suspense holdings, billing account suspense breakdown, and detailed allocation distribution


**Acceptance Criteria:**

**1. Successful Balance Retrieval with Cache**
Given cached balance exists for requested payment, When user submits valid payment identifier, Then system returns balance response within performance threshold without triggering recalculation

**2. Successful Balance Calculation without Cache**
Given no cached balance exists, When user requests payment balance, Then system calculates figures per allocation rules, stores to cache, and returns complete balance structure

**3. Invalid Request Handling**
Given request contains validation errors, When system processes request, Then system prevents balance retrieval and returns specific error classification without exposing sensitive data

**4. Non-Existent Payment Scenario**
Given payment identifier does not match any entity, When user submits request, Then system terminates processing and notifies user of entity absence


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=266046399"
]

---

#### Feature: Manage Invoice Tolerance Limits with Configurable Strategies
- **Role**: Billing Administrator
- **Action**: configure and apply dynamic tolerance strategies for invoice processing thresholds
- **Value**: the system automatically enforces flexible payment variance rules, reducing manual review workload and improving payment processing accuracy

**Description:**

As a **Billing Administrator**,
I want to **configure and apply dynamic tolerance strategies for invoice processing thresholds**,
So that **the system automatically enforces flexible payment variance rules, reducing manual review workload and improving payment processing accuracy**


**Key Capabilities:**

**1. Strategy Configuration Retrieval**
System retrieves tolerance calculation rules from policy configuration repository, identifying strategy type (Flat Amount, Percentage, or Minimum) and associated parameter values for invoice processing context.

**2. Invoice Amount Assessment**
System identifies the Current Due amount from the invoice record to serve as the baseline for dynamic tolerance calculations.

**3. Tolerance Threshold Calculation**
System applies strategy-specific calculation logic: direct assignment for flat amounts, percentage multiplication with two-decimal rounding for proportional strategies, or dual calculation with minimum selection for hybrid approaches.

**4. Threshold Application to Processing Workflow**
Calculated tolerance value establishes the variance threshold that determines invoice processing decisions and approval routing requirements.


**Acceptance Criteria:**

**1. Flat Amount Strategy Application**
Given flat amount strategy is configured, When invoice processing is initiated, Then system applies the configured fixed currency value as tolerance threshold without performing calculations.

**2. Percentage-Based Tolerance Calculation**
Given percentage strategy is configured, When Current Due amount is identified, Then system multiplies amount by configured percentage and rounds result to two decimals as tolerance limit.

**3. Minimum Strategy Dual Calculation**
Given minimum strategy is configured, When both flat and percentage values exist, Then system calculates percentage-based amount, compares with flat amount, and selects the lower value as final threshold.

**4. Calculation Precision Enforcement**
Given any percentage-based calculation is performed, When rounding is applied, Then system consistently rounds to exactly two decimal places for all currency results.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=635514193"
]

---

#### Feature: Configure Default Invoice Tolerance Parameters by Bill Type and State
- **Role**: Billing Administrator
- **Action**: configure tolerance thresholds for payment discrepancies across bill types and jurisdictions
- **Value**: the system automatically determines when to trigger delinquency, carry forward balances, or write off small amounts based on business rules

**Description:**

As a **Billing Administrator**,
I want to **configure tolerance thresholds for payment discrepancies across bill types and jurisdictions**,
So that **the system automatically determines when to trigger delinquency, carry forward balances, or write off small amounts based on business rules**


**Key Capabilities:**

**1. Tolerance Strategy Configuration**
Administrator establishes calculation methods (flat amount, percentage of invoice, or minimum of both) aligned to bill type and state jurisdiction requirements.

**2. Bill Type Classification**
System identifies whether transaction follows List Bill (with True Group allocation mode), Individual Premium Accounting, or Direct Bill processing rules.

**3. Jurisdiction-Specific Rule Application**
System retrieves applicable tolerance configuration based on state code (AZ, AL, AK, TX, IL, or default) and currency designation.

**4. Discrepancy Threshold Evaluation**
System calculates tolerance amount using configured strategy, compares payment variance against threshold to determine disposition path.

**5. Automated Disposition Execution**
When discrepancy falls within tolerance, system applies carry forward or small balance write-off per configuration; when exceeded, triggers delinquency workflow.


**Acceptance Criteria:**

**1. Strategy-Based Threshold Calculation**
Given a flat amount strategy is configured, when invoice discrepancy is evaluated, then system applies fixed currency threshold without percentage calculation.

**2. State-Specific Rule Enforcement**
Given a List Bill transaction in Arizona, when tolerance is evaluated, then system applies 5% of invoice with SBWO disposition regardless of default rules.

**3. Bill Type Differentiation**
Given Direct Bill processing, when any state is encountered, then system applies uniform $10 flat SBWO rule ignoring state-specific configurations.

**4. Within-Tolerance Disposition**
Given discrepancy falls within calculated threshold, when tolerance type is carry forward, then outstanding balance transfers to future invoice without delinquency trigger.

**5. Exceeds-Tolerance Escalation**
Given payment variance exceeds configured threshold, when evaluation completes, then system initiates delinquency process regardless of tolerance type.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=631129753"
]

---

#### Feature: Determine Small Balance Write-Off Eligibility Based on Tolerance
- **Role**: Billing Administrator
- **Action**: determine write-off eligibility for small balance invoices based on configured tolerance thresholds
- **Value**: I can automate compliant write-off decisions, reduce manual review workload, and maintain accurate financial ledgers

**Description:**

As a **Billing Administrator**,
I want to **determine write-off eligibility for small balance invoices based on configured tolerance thresholds**,
So that **I can automate compliant write-off decisions, reduce manual review workload, and maintain accurate financial ledgers**


**Key Capabilities:**

**1. Balance Calculation & Tolerance Parameter Retrieval**
System calculates real-time invoice balance using defined calculation methodology and retrieves applicable tolerance limits from OpenL configuration.

**2. Eligibility Validation Against Tolerance Threshold**
System evaluates whether calculated invoice balance falls within configured tolerance limit to determine write-off qualification.
    2.1 When balance exceeds threshold, system prevents write-off transaction issuance
    2.2 When tolerance parameters missing, system halts processing pending configuration

**3. Write-Off Transaction Authorization**
Upon successful validation, system authorizes Small Balance Write-Off transaction for eligible invoices and updates financial ledger.


**Acceptance Criteria:**

**1. Successful Write-Off Eligibility Approval**
Given tolerance parameters are configured and invoice balance is within threshold, When eligibility determination executes, Then system authorizes write-off transaction issuance.

**2. Write-Off Rejection for Excess Balance**
Given invoice balance exceeds configured tolerance limit, When validation occurs, Then system prevents transaction issuance and retains invoice for standard collection.

**3. Configuration Dependency Enforcement**
Given tolerance parameters are not configured in OpenL, When eligibility check initiates, Then system halts processing and requires configuration completion before proceeding.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=636883636"
]

---

#### Feature: Calculate Carry Forward Tolerance Flags Across Multiple Invoices
- **Role**: Billing Administrator
- **Action**: reconcile invoice tolerance flags across multiple billing account invoices following payment or adjustment events
- **Value**: invoices within acceptable tolerance are excluded from delinquency processing while maintaining accurate account balance integrity

**Description:**

As a **Billing Administrator**,
I want to **reconcile invoice tolerance flags across multiple billing account invoices following payment or adjustment events**,
So that **invoices within acceptable tolerance are excluded from delinquency processing while maintaining accurate account balance integrity**


**Key Capabilities:**

**1. Tolerance Recalculation Initiation**
Upon payment allocation, reversal, suspension, transfer, decline, or negative adjustment reconciliation event, system triggers comprehensive tolerance re-evaluation for entire billing account

**2. Sequential Invoice Evaluation**
System processes invoices chronologically by due date starting from oldest partially-paid invoice, retrieving tolerance configuration parameters and calculating tolerance limits
    2.1 When invoice status is Paid, system removes any existing tolerance flag and proceeds to next invoice
    2.2 When tolerance configuration unavailable, system exits without performing calculations

**3. Cumulative Balance Assessment**
System calculates aggregate amount due (current invoice remaining plus all prior unpaid invoices, excluding paid invoices and unapplied balances) and compares against configured tolerance threshold

**4. Cascading Flag Management**
If invoice exceeds tolerance limit, system removes tolerance flags from current and all subsequent invoices, preventing further evaluation; if within limit, system applies tolerance flag and continues sequential processing


**Acceptance Criteria:**

**1. Comprehensive Trigger Recognition**
Given payment allocation or invoice adjustment event occurs, When tolerance recalculation initiates, Then system evaluates all billing account invoices regardless of existing flag status

**2. Chronological Processing Integrity**
Given multiple invoices exist on account, When evaluation begins, Then system processes invoices sequentially by ascending due date starting with oldest partially-paid invoice

**3. Cumulative Balance Calculation Accuracy**
Given invoice requires tolerance evaluation, When calculating amount due, Then system includes current invoice plus all prior unpaid invoices while excluding paid invoices and unapplied balances

**4. Cascade Termination Enforcement**
Given invoice exceeds tolerance limit during evaluation, When flag removal executes, Then system removes flags from current and all subsequent invoices and terminates further processing

**5. Paid Invoice Flag Removal**
Given invoice transitions to Paid status, When tolerance recalculation runs, Then system removes any existing tolerance flag without including invoice in amount due calculations


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=632624500",
  "/pages/viewpage.action?pageId=631126269"
]

---

#### Feature: Reconcile Negative Adjustments Against Positive Invoice Items
- **Role**: Billing Reconciliation Specialist
- **Action**: reconcile negative invoice adjustments against previously billed positive items across multiple account configurations
- **Value**: billing accounts maintain accurate financial positions, excessive payments are properly reallocated, and invoice statuses reflect true customer obligations

**Description:**

As a **Billing Reconciliation Specialist**,
I want to **reconcile negative invoice adjustments against previously billed positive items across multiple account configurations**,
So that **billing accounts maintain accurate financial positions, excessive payments are properly reallocated, and invoice statuses reflect true customer obligations**.


**Key Capabilities:**

**1. Negative Adjustment Detection & Matching**
Upon invoice generation containing negative adjustments, system identifies positive invoice items requiring reconciliation across billing account types

**2. Excessive Payment Identification & Reallocation**
When matched items are paid/partially-paid, system calculates excessive payments and unallocates surplus amounts to appropriate unapplied balances based on account configuration
    2.1 For Individual Direct accounts: redirect to BA unapplied balance
    2.2 For IPA accounts: handle per member record overpayment rules

**3. Small Balance Write-Off Management**
System reverses existing SBWO transactions when negative adjustments affect written-off invoices, then reissues SBWO if remaining dues fall within configured tolerance limits

**4. Automated Payment Application**
When unapplied balances exist post-reconciliation, system automatically consumes available funds against outstanding dues per payment allocation hierarchy

**5. Multi-Level Balance Recalculation**
System updates billing account balances, member record figures, and invoice remaining dues while excluding negative adjustments from payment allocation calculations

**6. Status Synchronization**
System updates affected invoice statuses reflecting reconciled financial positions across interconnected billing entities


**Acceptance Criteria:**

**1. Excessive Payment Reallocation Accuracy**
Given a paid invoice receives negative adjustments, when excessive payment is detected, then system unallocates exact surplus amount to appropriate unapplied balance without manual intervention

**2. SBWO Reversal & Reissuance Logic**
Given invoice with existing SBWO receives negative adjustment, when reconciliation completes, then system reverses original SBWO and conditionally issues new SBWO only if remaining due falls within tolerance thresholds

**3. Configuration-Specific Processing**
Given billing accounts with different configurations (Individual Direct, List Bill Group, IPA), when negative adjustments are processed, then system applies correct reconciliation rules per account type

**4. Unapplied Balance Consumption**
Given reconciliation creates unapplied balance and outstanding dues exist, when automated payment application executes, then system applies funds per configured allocation hierarchy until exhausted

**5. Balance Integrity Validation**
Given reconciliation completes across multi-level entities, when final balances are calculated, then billing account, member record, and invoice totals mathematically reconcile with zero discrepancy

**6. Partial Payment Handling**
Given invoice with partial payment receives negative adjustment, when excessive payment calculation runs, then system prevents negative remaining dues and maintains audit trail of all balance adjustments


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=601635321"
]

---

#### Feature: Detect and Unallocate Excessive Payments for True Group and Individual Direct
- **Role**: Billing Specialist
- **Action**: detect and unallocate excessive payments through multi-level verification across True Group and Individual Direct policies
- **Value**: payment accuracy is maintained, financial discrepancies are prevented, and ledger integrity is preserved across different policy types

**Description:**

As a **Billing Specialist**,
I want to **detect and unallocate excessive payments through multi-level verification across True Group and Individual Direct policies**,
So that **payment accuracy is maintained, financial discrepancies are prevented, and ledger integrity is preserved across different policy types**


**Key Capabilities:**

**1. Payment Calculation Initiation**
System calculates excessive payment amounts for invoices based on policy type classification (True Group or Individual Direct)

**2. Policy Type-Specific Reconciliation Routing**
Upon policy type determination, system routes to appropriate reconciliation workflow:
    2.1 True Group: Applies group-specific negative adjustment rules
    2.2 Individual Direct: Applies individual-specific negative adjustment rules

**3. Negative Adjustment Reconciliation**
System reconciles negative adjustments according to policy-specific business rules and unallocates excessive amounts

**4. Financial Verification & Ledger Update**
System validates reconciliation accuracy and updates ledger with unallocated payment records


**Acceptance Criteria:**

**1. Excessive Payment Calculation**
Given payment transactions exist for a policy, When calculation process executes, Then system accurately identifies excessive payment amounts without manual intervention

**2. Policy Type Routing**
Given policy is classified as True Group or Individual Direct, When reconciliation initiates, Then system routes to correct policy-specific workflow

**3. Negative Adjustment Processing**
Given excessive payment is detected, When reconciliation completes, Then negative adjustments are applied per policy type rules and unallocated amounts are recorded

**4. Data Integrity Validation**
Given reconciliation completes, When ledger updates occur, Then system prevents submission if reconciliation data is incomplete or inconsistent


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=606242446"
]

---

#### Feature: Detect and Unallocate Excessive Payments for IPA Payment Allocation Mode
- **Role**: Billing Administrator
- **Action**: identify and reconcile excessive payments and negative adjustments across invoices
- **Value**: financial accuracy is maintained and overpayments are properly managed across policy transactions

**Description:**

As a **Billing Administrator**,
I want to **identify and reconcile excessive payments and negative adjustments across invoices**,
So that **financial accuracy is maintained and overpayments are properly managed across policy transactions**


**Key Capabilities:**

**1. Invoice Event-Driven Overpayment Detection**
When invoice events occur, system calculates excessive payments automatically to identify allocation variances

**2. Policy Transaction-Driven Overpayment Detection**
When policy transactions are processed, system evaluates invoice allocations to detect overpayment conditions

**3. Negative Adjustment Reconciliation**
System reconciles negative adjustments within IPA framework to ensure balanced ledger state

**4. Multi-Trigger Integration**
System supports dual triggers (invoice and policy transaction events) for comprehensive overpayment monitoring

**5. Unallocation Processing**
Upon detection of excessive payments, system initiates unallocation workflow to restore proper allocation balances


**Acceptance Criteria:**

**1. Invoice-Triggered Calculation Accuracy**
Given invoice event occurs, When system calculates excessive payment, Then overpayment amount is accurately identified and flagged for reconciliation

**2. Policy Transaction-Triggered Detection**
Given policy transaction is processed, When system evaluates invoice allocations, Then excessive payments are detected and reported

**3. Negative Adjustment Handling**
Given negative adjustment exists, When reconciliation process runs, Then adjustment is properly balanced within IPA ledger

**4. Dual-Trigger Consistency**
Given both trigger types are active, When overpayment conditions occur, Then system produces consistent results regardless of trigger source

**5. Unallocation Completion**
Given excessive payment detected, When unallocation process completes, Then allocation balances reflect corrected state


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=606242449"
]

---

#### Feature: Calculate Member Record Total Remaining Due and Total Paid for Reporting
- **Role**: Billing Analyst
- **Action**: calculate member-level outstanding and paid amounts for financial reporting
- **Value**: accurate point-in-time financial positions across billing accounts enable compliant reconciliation and reporting

**Description:**

As a **Billing Analyst**,
I want to **calculate member-level outstanding and paid amounts for financial reporting**,
So that **accurate point-in-time financial positions across billing accounts enable compliant reconciliation and reporting**


**Key Capabilities:**

**1. Invoice Selection & Date-Bound Filtering**
System identifies qualifying invoices where due dates fall on or before the specified end date parameter, excluding future-dated obligations from calculations.

**2. Transaction Aggregation with Temporal Cutoff**
System aggregates payments, adjustments, and write-offs that occurred on or before the as-of date, computing total paid amounts and remaining obligations.

**3. Cross-Account Financial Consolidation**
When member records transfer between billing accounts, system consolidates historical invoices and transactions from source and destination accounts.

**4. Member-Level Isolation & Independent Calculation**
System calculates financial positions independently per member record, ensuring payments allocated to one member do not affect others on shared accounts.


**Acceptance Criteria:**

**1. Point-in-Time Accuracy**
Given transactions exist before and after the as-of date, When calculation executes, Then only transactions occurring on or before the as-of date contribute to totals.

**2. Invoice Eligibility Enforcement**
Given invoices with varying due dates, When the end date parameter is applied, Then only invoices with due dates on or before the end date are included in remaining due calculations.

**3. Cross-Account Continuity**
Given a member record transferred between billing accounts, When financial position is calculated, Then system aggregates invoices and transactions from both source and destination accounts.

**4. Adjustment Impact Handling**
Given retroactive premium adjustments are applied, When totals are recalculated, Then negative adjustments reduce remaining due and positive adjustments increase remaining due accordingly.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=707832969"
]

---

#### Feature: Provide Member Record Balance Snapshots to Reporting and Analytics
- **Role**: Billing Analyst
- **Action**: provide real-time balance snapshots and calculations to reporting systems
- **Value**: stakeholders access accurate financial metrics for informed decision-making and compliance monitoring

**Description:**

As a **Billing Analyst**,
I want to **provide real-time balance snapshots and calculations to reporting systems**,
So that **stakeholders access accurate financial metrics for informed decision-making and compliance monitoring**


**Key Capabilities:**

**1. Balance Calculation Initialization**
Upon Member Record creation or quote purchase, system establishes baseline balance metrics across payment history, billing status, allocation tracking, and adjustment reserves.

**2. Event-Driven Recalculation**
When billing actions occur (invoice generation, payment allocation, payment removal, overpayment processing, write-offs), system automatically recalculates affected balance types in real-time.
    2.1 Multi-Member payment scenarios distribute amounts proportionally
    2.2 Payment exclusions apply for declined/reversed/suspended transactions

**3. Analytics Data Provisioning**
System transmits updated balance snapshots to Reporting and Analytics module, including payment details, outstanding amounts, allocated totals, unbilled amendments, overpayments, and corrections.

**4. Balance Integrity Validation**
System cross-verifies calculation consistency across related balance types and flags discrepancies for resolution.


**Acceptance Criteria:**

**1. Baseline Establishment**
Given a new Member Record is created, When quote purchase completes, Then system initializes all balance types with zero or calculated baseline values and timestamps first calculation event.

**2. Real-Time Recalculation Accuracy**
Given a payment allocation occurs, When system processes the transaction, Then affected balances (Remaining Due, Paid to Date, Total Allocated, Last Payment Amount) recalculate within the same transaction scope reflecting current state.

**3. Multi-Record Payment Handling**
Given a payment splits across three Member Records, When allocation completes, Then each record's Last Payment Amount reflects its proportional share and Date of Last Payment matches transaction timestamp.

**4. Payment Exclusion Logic**
Given a payment is reversed after initial allocation, When reversal processes, Then system excludes the amount from Last Payment Amount and recalculates Date of Last Payment to prior valid transaction.

**5. Analytics Data Transmission**
Given balances recalculate successfully, When reporting module requests snapshot, Then system provides complete dataset with calculation timestamps and event lineage.

**6. Incomplete Implementation Handling**
Given Customer Credit feature remains unimplemented, When balance snapshot generates, Then system excludes this metric and logs pending status for audit trails.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=589628510"
]

---

#### Feature: Calculate Multi-Level Balances Across Organization, Billing Account, and Member Record
- **Role**: Billing Administrator
- **Action**: calculate and verify balances across organizational hierarchy levels
- **Value**: accurate financial positions are maintained at member, account, and organization levels for consolidated reporting and audit compliance

**Description:**

As a **Billing Administrator**,
I want to **calculate and verify balances across organizational hierarchy levels**,
So that **accurate financial positions are maintained at member, account, and organization levels for consolidated reporting and audit compliance**.


**Key Capabilities:**

**1. Member Record Balance Computation**
System calculates member-level balance by summing all operations belonging to the specific member record.

**2. Billing Account Aggregation**
System aggregates balances from all subordinate member records to compute billing account total. System applies special logic for unapplied balance calculation exclusive to this level.

**3. Organization Consolidation**
System rolls up all billing account and member record operations to calculate organization-level balance.

**4. Hierarchical Integrity Validation**
System verifies consistency across aggregation levels using the same operational dataset.


**Acceptance Criteria:**

**1. Member-Level Calculation Accuracy**
Given operations exist for a member record, When balance calculation executes, Then system sums only operations assigned to that specific member.

**2. Billing Account Aggregation Completeness**
Given multiple member records under one billing account, When account balance is calculated, Then system includes all member operations plus account-level unapplied balance.

**3. Organization Consolidation Integrity**
Given multiple billing accounts under one organization, When organization balance is calculated, Then system aggregates all subordinate operations without duplication.

**4. Unapplied Balance Exclusivity**
Given unapplied balance logic, When member-level balance is requested, Then system returns zero for unapplied amount.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=601635240"
]

---

#### Feature: Calculate Total Billable Amount for Member Record Including Projected Due
- **Role**: Billing Analyst
- **Action**: calculate comprehensive billable amounts with projected dues for member records as of a specific date
- **Value**: accurate financial reconciliation and balance verification across multiple billing accounts and time periods are achieved

**Description:**

As a **Billing Analyst**,
I want to **calculate comprehensive billable amounts with projected dues for member records as of a specific date**,
So that **accurate financial reconciliation and balance verification across multiple billing accounts and time periods are achieved**


**Key Capabilities:**

**1. Invoice Aggregation & Scope Determination**
System identifies all invoices from complete invoicing periods between member record effective date and specified calculation date across associated billing accounts.

**2. Total Due Calculation**
System computes total due by subtracting issued write-offs, balance adjustments, and negative adjustments from total billed amounts, applying transaction state criteria based on calculation date.

**3. Conditional Projected Due Calculation**
When calculation date falls before last invoice period end, system calculates prorated projected due using daily rate multiplied by remaining days, rounded per HALF_UP strategy.

**4. Total Paid Determination**
System calculates aggregate payments for member record as of specified date following product balance logic.

**5. Final Billable Amount Computation**
System derives total billable amount by combining total paid, overpayments, minus total due and projected amounts.


**Acceptance Criteria:**

**1. Complete Period Invoice Aggregation**
Given member record with multiple billing accounts, When calculation date is provided, Then system retrieves all invoices from full periods between effective date and calculation date.

**2. Adjusted Due Calculation Accuracy**
Given identified invoices with write-offs and adjustments, When computing total due, Then system applies only transactions dated on or before calculation date affecting selected invoices.

**3. Projected Due Application**
Given calculation date before last invoice period end, When projected calculation triggers, Then system computes prorated amount using daily rate and remaining days with HALF_UP rounding.

**4. Projected Due Exclusion**
Given calculation date equals last invoice period end, When determining amounts, Then system excludes projected due calculation setting value to zero.

**5. Final Amount Formula Validation**
Given all component calculations complete, When deriving final billable amount, Then system applies formula: Total Paid plus Overpayment minus Total Due minus Projected Due.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=811442267"
]

---

#### Feature: Calculate Product-Level Balances Using Balance Register Operations
- **Role**: Billing Analyst
- **Action**: reconcile product-level financial balances through automated register operations across hierarchical billing structures
- **Value**: I maintain accurate financial accountability per product and amount type, enabling precise payment allocation and overpayment detection

**Description:**

As a **Billing Analyst**,
I want to **reconcile product-level financial balances through automated register operations across hierarchical billing structures**,
So that **I maintain accurate financial accountability per product and amount type, enabling precise payment allocation and overpayment detection**


**Key Capabilities:**

**1. Multi-Level Balance Computation**
System calculates balances at Billing Product Item and Invoice hierarchy levels using Balance Register Operations, processing each Amount Type category independently before aggregation

**2. Three-Tier Balance Tracking**
System maintains TOTAL_BILLED (invoiced items aggregation), TOTAL_PAID (payment allocation summation), and REMAINING_DUE (billed minus paid minus write-offs) per product

**3. Overpayment Detection**
When REMAINING_DUE calculation yields negative values, system flags credited balance status indicating overpayment scenario

**4. Write-Off Integration**
Upon Small Balance Write-Off application, system deducts allocated SBWO portion from REMAINING_DUE calculation at product-item level


**Acceptance Criteria:**

**1. Hierarchical Balance Accuracy**
Given balances calculated at both item and invoice levels, When register operations process amount types separately, Then TOTAL_BILLED aggregation matches sum of positive minus negative invoiced items per category

**2. Payment Reconciliation Integrity**
Given payment transactions recorded, When TOTAL_PAID computation executes, Then result reflects incoming allocations minus outgoing/declined/voided payments per amount type

**3. Remaining Due Precision**
Given TOTAL_BILLED and TOTAL_PAID values, When REMAINING_DUE calculates, Then formula (TOTAL_BILLED - TOTAL_PAID - SBWO) produces accurate outstanding balance

**4. Credit Balance Identification**
Given REMAINING_DUE calculation completes, When result is negative, Then system designates product as credited/overpaid status


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=475871647"
]

---

#### Feature: Calculate Invoice Balances at Generation Time with Static Snapshots
- **Role**: Billing Analyst
- **Action**: calculate and preserve static invoice balances at generation time across multiple billing types with hierarchical aggregation
- **Value**: accurate financial snapshots support audit compliance, reconciliation integrity, and transparent member billing across diverse account structures

**Description:**

As a **Billing Analyst**,
I want to **calculate and preserve static invoice balances at generation time across multiple billing types with hierarchical aggregation**,
So that **accurate financial snapshots support audit compliance, reconciliation integrity, and transparent member billing across diverse account structures**


**Key Capabilities:**

**1. Invoice Generation Trigger & Balance Initialization**
Upon invoice generation event, system initiates static balance calculation workflow at both Billing Product Item and Invoice hierarchy levels for the applicable billing type.

**2. Balance Component Calculation by Billing Type**
System calculates balance components (Previous Balance, Payments Received, Outstanding Balance, Current Period Amount, Adjustments, Write-Offs) using type-specific formulas; IPA excludes unapplied payments from Total Due while True Group/Self-Bill/Individual Direct include them.

**3. Hierarchical Balance Aggregation**
System aggregates Billing Product Item balances by amount type, then sums with Billing Account Suspense balances to derive Invoice-level Total Due using Balance Register Operations.

**4. Static Snapshot Preservation**
System persists calculated balances as immutable records (InvoiceBalanceDetails.balances, Invoice.balances) at invoice issuance, preventing recalculation upon subsequent financial transactions.


**Acceptance Criteria:**

**1. Type-Specific Total Due Accuracy**
Given an invoice generation for IPA billing type, When Outstanding Balance, Current Period Amount, and Total Overpayment Allocated are calculated, Then Total Due equals Outstanding Balance plus Retroactive Added Adjustments minus Total Overpayment Allocated without unapplied payment reduction.

**2. Hierarchical Balance Consistency**
Given Product Item balances calculated across multiple amount types, When aggregation occurs at Invoice level, Then Invoice.balances Total Due equals sum of all Product Item balances plus Billing Account Suspense balances.

**3. Historical Snapshot Immutability**
Given an invoice with persisted static balances, When subsequent payments or adjustments occur post-generation, Then original InvoiceBalanceDetails remain unchanged and new transactions affect only future invoices.

**4. Write-Off Status Recognition**
Given Write-Offs with varying statuses during calculation period, When Balance Written Off is computed, Then only Issued and Reversed Write-Offs impact the balance while Pending and Rejected are excluded.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=456494370"
]

---

#### Feature: Manage Dynamic Balance Calculation with Caching and Real-Time Updates
- **Role**: Billing Administrator
- **Action**: manage dynamic balance calculations across member, account, and organization levels with real-time transaction synchronization
- **Value**: financial accuracy is maintained throughout the billing lifecycle, enabling timely decision-making on underpayments, overpayments, and retroactive adjustments

**Description:**

As a **Billing Administrator**,
I want to **manage dynamic balance calculations across member, account, and organization levels with real-time transaction synchronization**,
So that **financial accuracy is maintained throughout the billing lifecycle, enabling timely decision-making on underpayments, overpayments, and retroactive adjustments**


**Key Capabilities:**

**1. Balance Classification and Calculation**
System dynamically calculates seven balance types: Due and Unpaid (total outstanding invoices), Amendments Not Yet Billed (billable items pending invoicing), Account Balance (net amount owed), Unapplied (unallocated payments), Member Record Unapplied (member-specific unallocated funds), Overpayments (member-level surplus), and Paid To Date (cumulative payments). Calculations apply bill-type-specific formulas.

**2. Bill-Type-Specific Balance Logic**
Upon bill type identification, system applies tailored formulas: List Bill/Self-Bill excludes member overpayments; Individual Direct deducts member overpayments; IPA List Bill deducts both member overpayments and unapplied amounts. Self-Bill accounts calculate Paid To Date on-demand rather than storing in database.

**3. Transaction-Driven Balance Updates**
When billing transactions occur (invoice generation/discard, payment allocation, refunds, transfers, write-offs), system recalculates balances at Member Record, Billing Account, and Organization Customer levels. Master policy transactions cascade to all associated member records.

**4. Retroactive Adjustment Reconciliation**
If retroactive policy changes occur (backdated cancellations, amendments, member transfers), system unallocates previously allocated payments to Member Record Unapplied balance per configurable rules. Upon full payment of member invoice items, system creates Member Record Overpayment balance for allocation at next billing cycle.

**5. Multi-Method Balance Verification**
System supports three calculation approaches: Billing Balance Register subdomain, transaction-based aggregation, and baseline-plus-delta method (recent invoice balances plus subsequent transactions). All methods produce identical business results for cross-validation.

**6. Hierarchical Impact Propagation**
When master policy transactions execute, system propagates financial impacts to all member records. Single member record transactions remain isolated without affecting other members or master policy balances.


**Acceptance Criteria:**

**1. Balance Type Accuracy**
Given a billing account with invoices, payments, and adjustments, when the system calculates balances, then all seven balance types (Due and Unpaid, ANYB, Account Balance, Unapplied, MR Unapplied, Overpayments, Paid To Date) reflect formula-compliant values matching bill type configuration.

**2. Bill-Type Formula Application**
Given billing accounts of different bill types (List Bill, Individual Direct, IPA, Self-Bill), when Account Balance is calculated, then the formula correctly includes/excludes Member Record Overpayments and Unapplied amounts per bill type specifications.

**3. Transaction-Triggered Recalculation**
Given a billing transaction (invoice generation, payment, refund, write-off, transfer), when the transaction completes, then balances are recalculated at all applicable levels (Member Record, Billing Account, Organization Customer) within system-defined latency thresholds.

**4. Retroactive Adjustment Handling**
Given a backdated policy cancellation or amendment, when the retroactive change is processed, then previously allocated payment amounts are moved to Member Record Unapplied balance, and Account Balance reflects the unallocated state per configurable business rules.

**5. Multi-Method Calculation Consistency**
Given balance calculation requests using different methods (Billing Balance Register, transaction-based, baseline-plus-delta), when calculations complete, then all three methods produce identical balance values for the same account at the same point in time.

**6. Hierarchical Impact Isolation**
Given a master policy with multiple member records, when a master policy transaction occurs, then all member balances are updated; when a single member transaction occurs, then only that member's balance changes without affecting other members or master policy balances.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=523018599"
]

---

#### Feature: Validate Balance Calculation Requests with Standardized Error Handling
- **Role**: Billing Administrator
- **Action**: retrieve invoice balance with standardized validation and caching
- **Value**: accurate financial data is provided efficiently while preventing invalid requests

**Description:**

As a **Billing Administrator**,
I want to **retrieve invoice balance with standardized validation and caching**,
So that **accurate financial data is provided efficiently while preventing invalid requests**


**Key Capabilities:**

**1. Balance Request Initiation**
User is able to request invoice balance by providing invoice identifier with proper authorization credentials.

**2. Request Validation & Error Handling**
System validates request integrity and invoice existence. Upon validation failure, system returns standardized error messages and terminates process.

**3. Cache-Optimized Balance Retrieval**
When cached balance exists, system retrieves stored figures. If cache is unavailable, system performs balance calculation and records results to cache.

**4. Balance Data Response**
System returns comprehensive balance summary including billed amount, paid amount with details, and payable amount to user.


**Acceptance Criteria:**

**1. Successful Balance Retrieval**
Given valid invoice identifier and authorization, When user requests balance and cache exists, Then system returns cached balance figures without recalculation.

**2. Balance Calculation and Caching**
Given no cached balance exists, When valid request is submitted, Then system calculates balance and stores to cache before returning response.

**3. Invalid Request Handling**
Given request fails validation, When system detects facade or command validation errors, Then process terminates with appropriate error message without balance retrieval.

**4. Non-Existent Invoice Handling**
Given invoice identifier does not exist, When balance is requested, Then system returns specific error message and prevents further processing.


**Reference URLs:**

[
  "https://wiki.eisgroup.com/pages/viewpage.action?pageId=283353347"
]

---
